<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pano Explorer 2</title>
    <meta name="description" content="Pano Explorer 2 â€” A-Frame">
    <script src="../../build/aframe.js"></script>
  </head>
  <body>

    <a-assets>
      <a-mixin id="link" scale="1 1 1"></a-mixin>
      <a-mixin id="link-hovered" scale="2 2 1"></a-mixin>
      <a-mixin id="link-selected" scale="2 4 1"></a-mixin>
    </a-assets>

    <a-scene>


      <!-- 

      Dec 3:

      JOSH TODO

      * Put animations inside templates 
      * Use translate where makes sense
      * Swap in new panos
      * Add labels
      * Add sounds
      * Add DOM elements to frame the scene
      * Add hotspots for interactive scenes
      * Create and use curved cylinder template?

      INTERACTIONS
 
      * Preload content before revealing scene
      * Click link object (a-image) to load pano
      * Press left-Right keys to load panos
      * Press space to show/hide menu of links to pano

      EACH PANO HAS...

      * Pano image src link (equirectangular image)
      * Label image src link (png with transparency)
      * Background audio src link (mp3)
      
      SCENE TRANSITION LOOKS LIKE

      * Fire "transition-start" event
        - Animate opacity of #mask to 1
        - Animate opacity of #label to 0
        - Animate volume of #audio to 0

      * Once screen is black
        - Set src on #pano and #audio to start loading new assets

      * Once pano load is complete
        - Fire "pano-loaded" 
        - Animate opacity of #mask to 0 and set visible=none so it does not block cursor raycast.
        - Animate opacity of #label to 1 (delayed slightly, so it appears a few moments after the mask fades out)
        - Animate volume of #audio to 1

      -->


      <!-- Camera -->
      <a-camera fov="80" id="camera" near="0.1" wasd-controls-enabled="false"></a-camera>


      <!-- Mask: hides the pano while we transition -->
      <a-sphere id="mask" radius="0.5" opacity="0" color="black" shader="flat" side="back">
        <a-animation attribute="opacity" from="1" to="0" begin="transition-start" dur="1000" fill="both"></a-animation>
        <a-animation attribute="opacity" from="1" to="0" begin="pano-loaded" dur="1000" fill="both"></a-animation>
      </a-sphere>
      

      <!-- Pano -->
      <a-sky id="pano" src="../_skies/city-2.png"></a-sky>


      <!-- Audio -->
      <a-entity id="audio" sound="src: ...; autoplay: false; loop: true; volume: 0"></a-entity>


      <!-- Label -->
      <a-image id="label" src="images/label-city.png" width="1.13" height="0.56" position="-1 1 -2"></a-image>


      <!-- Menu -->
      <a-entity id="menu" position="0 -0.5 -1" scale="0.3 0.3 0.3">         

        <a-image position="-1.2 0 0" width="1" height="1" src="images/thumb-cubes.png">
          <a-click target="#pano" src="../_skies/peach-gradient-1.jpg"></a-click>
          <a-mouseenter scale="1.1 1.1 1.1"></a-mouseenter>
          <a-mouseleave scale="1 1 1"></a-mouseleave>
        </a-image>
        
        <a-image position="0 0 0" width="1" height="1" src="images/thumb-city.png">
          <a-click target="#pano" src="../_skies/city-2.png"></a-click>
          <a-mouseenter scale="1.1 1.1 1.1"></a-mouseenter>
          <a-mouseleave scale="1 1 1"></a-mouseleave>
        </a-image>
        
        <a-image position="1.2 0 0" width="1" height="1" src="images/thumb-sechelt.png">
          <a-click target="#pano" src="../_skies/lake.jpg"></a-click>
          <a-mouseenter scale="1.1 1.1 1.1"></a-mouseenter>
          <a-mouseleave scale="1 1 1"></a-mouseleave>
        </a-image>

      </a-entity>


      <!-- Scene lighting -->
      <a-entity light="type: directional; color: #FFF; intensity: 0.2" position="-10 20 10"></a-entity>
      <a-entity light="type: ambient; color: #FFF;"></a-entity>

    </a-scene>
  </body>
</html>
