<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pano Explorer 2</title>
    <meta name="description" content="Pano Explorer 2 â€” A-Frame">
    <script src="../../build/aframe.js"></script>
  </head>
  <body>

    <a-assets>
      <a-mixin id="link" scale="1 1 1"></a-mixin>
      <a-mixin id="link-hovered" scale="2 2 1"></a-mixin>
      <a-mixin id="link-selected" scale="2 4 1"></a-mixin>
    </a-assets>

    <a-scene>


      <!-- 

      Nov 20:

      TODO

      * Put animations inside templates 
      * Add declarative interactions
        - Trigger "scene" transitions (eg: change sky, bg audio, title image)
        - Trigger in-scene hotspots (eg: reveal video excerpt or audio snippet)
      * Create and use curved cylinder template 
      * Use more specific camera templates?
      * Clean up code once pivot set lands
      * DOM elements framing the scene (credits, onboarding info, etc)

      -->


      <!-- CAMERA -->
      
      <a-camera id="camera" position="0 0 0" near="0.1" wasd-controls-enabled="false">
        <a-entity id="hud" position="0 0 -1">
          <a-animation attribute="scale" from="0 0 0" to="1 1 1" begin="4000" dur="1" fill="both"></a-animation>
          <a-image position="-0.3 0.2 0" src="images/title-1.png" width="0.2" height="0.1"></a-image>
        </a-entity>
      </a-camera>


      <!-- INTRODUCTION -->

      <!-- Logo appears, rotates, disappears -->
      <a-entity>

        <!-- Scale animation "hides" the whole intro heirarchy -->
        <a-animation attribute="scale" from="1 1 1" to="0 0 0" begin="4000" dur="1" fill="forwards"></a-animation>
      
        <!-- Background -->  
        <a-sky src="../_skies/gray-gradient-2.jpg"></a-sky>
      
        <!-- Logo -->
        <a-entity position="0 0.03 -1" scale="0.12 0.12 0.12">

          <a-entity>
            <a-animation attribute="scale" from="1 1 1" to="0 0 0" begin="4000" dur="1" fill="forwards"></a-animation>

            <!-- Box -->
            <a-entity>
              <a-animation attribute="scale" from="0 0 0" to="1 1 1" begin="500" dur="500" fill="both" easing="ease-out"></a-animation>
              <a-animation attribute="position" from="0 -0.5 0" to="0 0 0" begin="500" dur="500" fill="both" easing="ease-out"></a-animation>
              <a-animation attribute="rotation" from="0 -300 0" to="30 50 30" begin="500" dur="1200" fill="both" easing="ease-out"></a-animation>
              <a-cube width="0.25" depth="0.25" height="0.25" color="#EF2D5E"></a-cube>
              <a-frame scale="0.04 0.04 0.04"></a-frame>
            </a-entity>

            <!-- Dots -->
            <a-entity rotation="0 0 45">
              <a-animation attribute="scale" from="1 0 1" to="1 1 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
              <a-entity position="0 1.5 0">
                <a-animation attribute="scale" from="1 1.25 1" to="1 0 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
                <a-cylinder radius="0.04" height="1.5" position="0 -1 0" color="#EF2D5E" open-ended="true"></a-cylinder>
              </a-entity>

              <a-entity position="0 -1.5 0" rotation="0 0 180">
                <a-animation attribute="scale" from="1 1.25 1" to="1 0 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
                <a-cylinder radius="0.04" height="1.5" position="0 -1 0" color="#EF2D5E" open-ended="true"></a-cylinder>
              </a-entity>
            </a-entity>

            <a-entity rotation="0 0 -45">
              <a-animation attribute="scale" from="1 0 1" to="1 1 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
              <a-entity position="0 1.5 0">
                <a-animation attribute="scale" from="1 1.25 1" to="1 0 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
                <a-cylinder radius="0.04" height="1.5" position="0 -1 0" color="#EF2D5E" open-ended="true"></a-cylinder>
              </a-entity>

              <a-entity position="0 -1.5 0" rotation="0 0 180">
                <a-animation attribute="scale" from="1 1.25 1" to="1 0 1" begin="1000" dur="750" fill="both" easing="ease-out"></a-animation>
                <a-cylinder radius="0.04" height="1.5" position="0 -1 0" color="#EF2D5E" open-ended="true"></a-cylinder>
              </a-entity>
            </a-entity>

            <!-- Name -->
            <a-image src="images/aframe-logo.png" width="1.4" height="0.3">
              <a-animation attribute="scale" from="1 0 1" to="0.75 0.75 0.75" begin="1500" dur="200" fill="both" easing="ease-out"></a-animation>
              <a-animation attribute="position" from="0 -3 0" to="0 -0.7 0" begin="1000" dur="1000" fill="both" easing="ease-out"></a-animation>
            </a-image>

          </a-entity>
        </a-entity>
      </a-entity>

      <!-- Mask obscures the scene momentarily, during which we hide the intro and reveal the rest of the scene -->
      <a-entity>
        <a-animation attribute="scale" from="1 0 1" to="1 1 1" begin="3000" dur="1000" fill="both" easing="ease-in"></a-animation>
        
        <a-entity position="0 0.5 0">
          <a-animation attribute="scale" from="1 1 1" to="1 0 1" begin="4500" dur="1000" fill="both" easing="ease-in"></a-animation>
          <a-cylinder radius="0.8" height="0.5" position="0 -0.25 0" color="#EF2D5E" open-ended="true" side="back"></a-cylinder>
        </a-entity>

        <a-entity position="0 -0.5 0" rotation="0 0 0">
          <a-animation attribute="scale" from="1 1 1" to="1 0 1" begin="4500" dur="1000" fill="both" easing="ease-in"></a-animation>
          <a-cylinder radius="0.8" height="0.5" position="0 0.25 0" color="#EF2D5E" open-ended="true" side="back"></a-cylinder>
        </a-entity>
      </a-entity>



      <!-- PANORAMAS -->
      
      <a-entity>
        
        <a-animation attribute="scale" from="0 0 0" to="1 1 1" begin="4000" dur="1" fill="both"></a-animation>

        <!-- Sky -->
        <a-sky id="pano" src="../_skies/city-2.png"></a-sky>

        <!-- Links. When clicked they change the background -->
        <a-entity position="0 -0.25 -2" scale="0.2 0.2 0.2">
          
          <a-image mixin="link" position="-1.2 0 0" width="1" height="1" src="images/thumb-cubes.png">
            <a-click target="#pano" src="../_skies/peach-gradient-1.jpg"></a-click>
          </a-image>
          
          <a-image mixin="link" position="0 0 0" width="1" height="1" src="images/thumb-city.png">
            <a-click target="#pano" src="../_skies/city-2.png"></a-click>
          </a-image>
          
          <a-image mixin="link" position="1.2 0 0" width="1" height="1" src="images/thumb-sechelt.png">
            <a-click target="#pano" src="../_skies/lake.jpg"></a-click>
          </a-image>

        </a-entity>

      </a-entity>



      <!-- LIGHTING -->

      <a-entity light="type: directional; color: #FFF; intensity: 0.2" position="-10 20 10"></a-entity>
      <a-entity light="type: ambient; color: #FFF;"></a-entity>


    </a-scene>
  </body>
</html>
