{"version":3,"file":"aframe-master.module.min.js","mappings":"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","sources":["webpack://aframe/./node_modules/base64-js/index.js","webpack://aframe/./node_modules/buffer/index.js","webpack://aframe/./node_modules/css-loader/dist/runtime/api.js","webpack://aframe/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://aframe/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://aframe/./node_modules/debug/src/browser.js","webpack://aframe/./node_modules/debug/src/common.js","webpack://aframe/./node_modules/deep-assign/index.js","webpack://aframe/./node_modules/ieee754/index.js","webpack://aframe/./node_modules/is-obj/index.js","webpack://aframe/./node_modules/ms/index.js","webpack://aframe/./src/lib/rStatsAframe.js","webpack://aframe/./vendor/rStats.extras.js","webpack://aframe/./vendor/rStats.js","webpack://aframe/./vendor/wakelock/util.js","webpack://aframe/./vendor/wakelock/wakelock.js","webpack://aframe/./src/style/aframe.css","webpack://aframe/./src/style/rStats.css","webpack://aframe/./src/style/aframe.css?ccfc","webpack://aframe/./src/style/rStats.css?d035","webpack://aframe/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://aframe/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://aframe/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://aframe/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://aframe/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://aframe/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://aframe/./node_modules/bitecs/dist/index.cjs","webpack://aframe/webpack/bootstrap","webpack://aframe/webpack/runtime/compat get default export","webpack://aframe/webpack/runtime/define property getters","webpack://aframe/webpack/runtime/hasOwnProperty shorthand","webpack://aframe/webpack/runtime/make namespace object","webpack://aframe/webpack/runtime/import chunk loading","webpack://aframe/webpack/runtime/nonce","webpack://aframe/./node_modules/super-animejs/lib/anime.es.js","webpack://aframe/external module \"three\"","webpack://aframe/./node_modules/three/examples/jsm/loaders/DRACOLoader.js","webpack://aframe/./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://aframe/./node_modules/three/examples/jsm/utils/WorkerPool.js","webpack://aframe/./node_modules/three/examples/jsm/libs/ktx-parse.module.js","webpack://aframe/./node_modules/three/examples/jsm/libs/zstddec.module.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/KTX2Loader.js","webpack://aframe/./node_modules/three/examples/jsm/math/ColorSpaces.js","webpack://aframe/./node_modules/three/examples/jsm/math/OBB.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/OBJLoader.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/MTLLoader.js","webpack://aframe/./node_modules/three/examples/jsm/lights/LightProbeGenerator.js","webpack://aframe/./vendor/DeviceOrientationControls.js","webpack://aframe/./src/lib/three.js","webpack://aframe/./src/constants/index.js","webpack://aframe/./src/utils/debug.js","webpack://aframe/./src/utils/device.js","webpack://aframe/./src/utils/object-pool.js","webpack://aframe/./src/utils/coordinates.js","webpack://aframe/./src/utils/split.js","webpack://aframe/./src/utils/entity.js","webpack://aframe/./src/utils/forceCanvasResizeSafariMobile.js","webpack://aframe/./src/utils/src-loader.js","webpack://aframe/./src/utils/material.js","webpack://aframe/./src/utils/styleParser.js","webpack://aframe/./src/utils/tracked-controls.js","webpack://aframe/./src/utils/index.js","webpack://aframe/./src/core/scene/metaTags.js","webpack://aframe/./src/core/scene/loadingScreen.js","webpack://aframe/./src/core/scene/scenes.js","webpack://aframe/./src/core/propertyTypes.js","webpack://aframe/./src/core/schema.js","webpack://aframe/./src/core/component.js","webpack://aframe/./src/core/readyState.js","webpack://aframe/./src/core/system.js","webpack://aframe/./src/core/a-node.js","webpack://aframe/./src/core/a-entity.js","webpack://aframe/./src/core/scene/postMessage.js","webpack://aframe/./src/utils/ios-orientationchange-blank-bug.js","webpack://aframe/./src/core/scene/a-scene.js","webpack://aframe/./src/core/scene/wakelock.js","webpack://aframe/./src/core/geometry.js","webpack://aframe/./src/extras/primitives/primitives.js","webpack://aframe/./src/core/shader.js","webpack://aframe/./src/core/a-assets.js","webpack://aframe/./src/core/a-cubemap.js","webpack://aframe/./src/core/a-mixin.js","webpack://aframe/./src/components/animation.js","webpack://aframe/./src/components/anchored.js","webpack://aframe/./src/components/camera.js","webpack://aframe/./src/components/cursor.js","webpack://aframe/./src/components/geometry.js","webpack://aframe/./src/components/generic-tracked-controller-controls.js","webpack://aframe/./src/components/gltf-model.js","webpack://aframe/./src/components/grabbable.js","webpack://aframe/./src/components/hand-tracking-controls.js","webpack://aframe/./src/components/hand-tracking-grab-controls.js","webpack://aframe/./src/components/hand-controls.js","webpack://aframe/./src/components/hide-on-enter-ar.js","webpack://aframe/./src/components/hide-on-enter-vr.js","webpack://aframe/./src/components/hp-mixed-reality-controls.js","webpack://aframe/./src/components/layer.js","webpack://aframe/./src/utils/math.js","webpack://aframe/./src/components/laser-controls.js","webpack://aframe/./src/components/light.js","webpack://aframe/./src/components/link.js","webpack://aframe/./src/components/line.js","webpack://aframe/./src/components/logitech-mx-ink-controls.js","webpack://aframe/./src/components/look-controls.js","webpack://aframe/./src/components/magicleap-controls.js","webpack://aframe/./src/components/material.js","webpack://aframe/./src/components/meta-touch-controls.js","webpack://aframe/./src/components/obb-collider.js","webpack://aframe/./src/components/obj-model.js","webpack://aframe/./src/components/oculus-go-controls.js","webpack://aframe/./src/components/pico-controls.js","webpack://aframe/./src/components/raycaster.js","webpack://aframe/./src/components/position.js","webpack://aframe/./src/components/rotation.js","webpack://aframe/./src/components/wasd-controls.js","webpack://aframe/./src/components/sound.js","webpack://aframe/./src/components/scale.js","webpack://aframe/./src/components/shadow.js","webpack://aframe/./src/components/tracked-controls.js","webpack://aframe/./src/components/valve-index-controls.js","webpack://aframe/./src/components/visible.js","webpack://aframe/./src/components/vive-controls.js","webpack://aframe/./src/components/vive-focus-controls.js","webpack://aframe/./src/constants/keyboardevent.js","webpack://aframe/./src/components/windows-motion-controls.js","webpack://aframe/./src/components/scene/ar-hit-test.js","webpack://aframe/./src/components/scene/background.js","webpack://aframe/./src/components/scene/debug.js","webpack://aframe/./src/components/scene/device-orientation-permission-ui.js","webpack://aframe/./src/components/scene/embedded.js","webpack://aframe/./src/components/scene/inspector.js","webpack://aframe/./src/components/scene/fog.js","webpack://aframe/./src/components/scene/keyboard-shortcuts.js","webpack://aframe/./src/components/scene/pool.js","webpack://aframe/./src/components/scene/real-world-meshing.js","webpack://aframe/./src/components/scene/reflection.js","webpack://aframe/./src/components/scene/screenshot.js","webpack://aframe/./src/components/scene/stats.js","webpack://aframe/./src/components/scene/xr-mode-ui.js","webpack://aframe/./src/geometries/box.js","webpack://aframe/./src/geometries/circle.js","webpack://aframe/./src/geometries/cone.js","webpack://aframe/./src/geometries/cylinder.js","webpack://aframe/./src/geometries/dodecahedron.js","webpack://aframe/./src/geometries/icosahedron.js","webpack://aframe/./src/geometries/octahedron.js","webpack://aframe/./src/geometries/plane.js","webpack://aframe/./src/geometries/ring.js","webpack://aframe/./src/geometries/sphere.js","webpack://aframe/./src/geometries/tetrahedron.js","webpack://aframe/./src/geometries/torus.js","webpack://aframe/./src/geometries/torusKnot.js","webpack://aframe/./src/geometries/triangle.js","webpack://aframe/./src/shaders/flat.js","webpack://aframe/./src/shaders/standard.js","webpack://aframe/./src/shaders/phong.js","webpack://aframe/./src/shaders/sdf.js","webpack://aframe/./src/shaders/msdf.js","webpack://aframe/./src/shaders/shadow.js","webpack://aframe/./src/systems/camera.js","webpack://aframe/./src/systems/geometry.js","webpack://aframe/./src/systems/gltf-model.js","webpack://aframe/./src/systems/light.js","webpack://aframe/./src/systems/material.js","webpack://aframe/./src/systems/obb-collider.js","webpack://aframe/./src/systems/renderer.js","webpack://aframe/./src/systems/shadow.js","webpack://aframe/./src/systems/tracked-controls.js","webpack://aframe/./src/systems/webxr.js","webpack://aframe/./src/extras/primitives/getMeshMixin.js","webpack://aframe/./src/extras/components/pivot.js","webpack://aframe/./src/extras/primitives/primitives/a-camera.js","webpack://aframe/./src/extras/primitives/primitives/a-cursor.js","webpack://aframe/./src/extras/primitives/primitives/a-curvedimage.js","webpack://aframe/./src/extras/primitives/primitives/a-gltf-model.js","webpack://aframe/./src/extras/primitives/primitives/a-image.js","webpack://aframe/./src/extras/primitives/primitives/a-light.js","webpack://aframe/./src/extras/primitives/primitives/a-link.js","webpack://aframe/./src/extras/primitives/primitives/a-obj-model.js","webpack://aframe/./src/extras/primitives/primitives/meshPrimitives.js","webpack://aframe/./src/extras/primitives/primitives/a-sky.js","webpack://aframe/./src/extras/primitives/primitives/a-sound.js","webpack://aframe/./src/extras/primitives/primitives/a-video.js","webpack://aframe/./src/extras/primitives/primitives/a-videosphere.js","webpack://aframe/./src/index.js"],"sourcesContent":["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(' ', ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","window.aframeStats = function (scene) {\n  var _rS = null;\n  var _scene = scene;\n  var _values = {\n    te: {\n      caption: 'Entities'\n    },\n    lt: {\n      caption: 'Load Time'\n    }\n  };\n  var _groups = [{\n    caption: 'A-Frame',\n    values: ['te', 'lt']\n  }];\n\n  function _update () {\n    _rS('te').set(getEntityCount());\n    if (window.performance.getEntriesByName) {\n      _rS('lt').set(window.performance.getEntriesByName('render-started')[0].startTime.toFixed(0));\n    }\n  }\n\n  function getEntityCount () {\n    var elements = _scene.querySelectorAll('*');\n    Array.prototype.slice.call(elements).filter(function (el) {\n      return el.isEntity;\n    });\n    return elements.length;\n  }\n\n  function _start () {}\n\n  function _end () {}\n\n  function _attach (r) {\n    _rS = r;\n  }\n\n  return {\n    update: _update,\n    start: _start,\n    end: _end,\n    attach: _attach,\n    values: _values,\n    groups: _groups,\n    fractions: []\n  };\n};\n","window.glStats = function () {\n\n    var _rS = null;\n\n    var _totalDrawArraysCalls = 0,\n        _totalDrawElementsCalls = 0,\n        _totalUseProgramCalls = 0,\n        _totalFaces = 0,\n        _totalVertices = 0,\n        _totalPoints = 0,\n        _totalBindTexures = 0;\n\n    function _h ( f, c ) {\n        return function () {\n            c.apply( this, arguments );\n            f.apply( this, arguments );\n        };\n    }\n\n    WebGLRenderingContext.prototype.drawArrays = _h( WebGLRenderingContext.prototype.drawArrays, function () {\n        _totalDrawArraysCalls++;\n        if ( arguments[ 0 ] == this.POINTS ) _totalPoints += arguments[ 2 ];\n        else _totalVertices += arguments[ 2 ];\n    } );\n\n    WebGLRenderingContext.prototype.drawElements = _h( WebGLRenderingContext.prototype.drawElements, function () {\n        _totalDrawElementsCalls++;\n        _totalFaces += arguments[ 1 ] / 3;\n        _totalVertices += arguments[ 1 ];\n    } );\n\n    WebGLRenderingContext.prototype.useProgram = _h( WebGLRenderingContext.prototype.useProgram, function () {\n        _totalUseProgramCalls++;\n    } );\n\n    WebGLRenderingContext.prototype.bindTexture = _h( WebGLRenderingContext.prototype.bindTexture, function () {\n        _totalBindTexures++;\n    } );\n\n    var _values = {\n        allcalls: {\n            over: 3000,\n            caption: 'Calls (hook)'\n        },\n        drawelements: {\n            caption: 'drawElements (hook)'\n        },\n        drawarrays: {\n            caption: 'drawArrays (hook)'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'WebGL',\n        values: [ 'allcalls', 'drawelements', 'drawarrays', 'useprogram', 'bindtexture', 'glfaces', 'glvertices', 'glpoints' ]\n    } ];\n\n    var _fractions = [ {\n        base: 'allcalls',\n        steps: [ 'drawelements', 'drawarrays' ]\n    } ];\n\n    function _update () {\n        _rS( 'allcalls' ).set( _totalDrawArraysCalls + _totalDrawElementsCalls );\n        _rS( 'drawElements' ).set( _totalDrawElementsCalls );\n        _rS( 'drawArrays' ).set( _totalDrawArraysCalls );\n        _rS( 'bindTexture' ).set( _totalBindTexures );\n        _rS( 'useProgram' ).set( _totalUseProgramCalls );\n        _rS( 'glfaces' ).set( _totalFaces );\n        _rS( 'glvertices' ).set( _totalVertices );\n        _rS( 'glpoints' ).set( _totalPoints );\n    }\n\n    function _start () {\n        _totalDrawArraysCalls = 0;\n        _totalDrawElementsCalls = 0;\n        _totalUseProgramCalls = 0;\n        _totalFaces = 0;\n        _totalVertices = 0;\n        _totalPoints = 0;\n        _totalBindTexures = 0;\n    }\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\nwindow.threeStats = function ( renderer ) {\n\n    var _rS = null;\n\n    var _values = {\n        'renderer.info.memory.geometries': {\n            caption: 'Geometries'\n        },\n        'renderer.info.memory.textures': {\n            caption: 'Textures'\n        },\n        'renderer.info.programs': {\n            caption: 'Programs'\n        },\n        'renderer.info.render.calls': {\n            caption: 'Calls'\n        },\n        'renderer.info.render.triangles': {\n            caption: 'Triangles',\n            over: 1000\n        },\n        'renderer.info.render.points': {\n            caption: 'Points'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'Three.js - Memory',\n        values: [ 'renderer.info.memory.geometries', 'renderer.info.programs', 'renderer.info.memory.textures' ]\n    }, {\n        caption: 'Three.js - Render',\n        values: [ 'renderer.info.render.calls', 'renderer.info.render.triangles', 'renderer.info.render.points' ]\n    } ];\n\n    var _fractions = [];\n\n    function _update () {\n\n        _rS( 'renderer.info.memory.geometries' ).set( renderer.info.memory.geometries );\n        _rS( 'renderer.info.programs' ).set( renderer.info.programs.length );\n        _rS( 'renderer.info.memory.textures' ).set( renderer.info.memory.textures );\n        _rS( 'renderer.info.render.calls' ).set( renderer.info.render.calls );\n        _rS( 'renderer.info.render.triangles' ).set( renderer.info.render.triangles );\n        _rS( 'renderer.info.render.points' ).set( renderer.info.render.points );\n\n    }\n\n    function _start () {}\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\n/*\n *   From https://github.com/paulirish/memory-stats.js\n */\n\nwindow.BrowserStats = function () {\n\n    var _rS = null;\n\n    var _usedJSHeapSize = 0,\n        _totalJSHeapSize = 0;\n\n    if ( window.performance && !performance.memory ) {\n        performance.memory = {\n            usedJSHeapSize: 0,\n            totalJSHeapSize: 0\n        };\n    }\n\n    if ( performance.memory.totalJSHeapSize === 0 ) {\n        console.warn( 'totalJSHeapSize === 0... performance.memory is only available in Chrome .' );\n    }\n\n    var _values = {\n        memory: {\n            caption: 'Used Memory',\n            average: true,\n            avgMs: 1000,\n            over: 22\n        },\n        total: {\n            caption: 'Total Memory'\n        }\n    };\n\n    var _groups = [ {\n        caption: 'Browser',\n        values: [ 'memory', 'total' ]\n    } ];\n\n    var _fractions = [ {\n        base: 'total',\n        steps: [ 'memory' ]\n    } ];\n\n    var log1024 = Math.log( 1024 );\n\n    function _size ( v ) {\n\n        var precision = 100; //Math.pow(10, 2);\n        var i = Math.floor( Math.log( v ) / log1024 );\n        return Math.round( v * precision / Math.pow( 1024, i ) ) / precision; // + ' ' + sizes[i];\n\n    }\n\n    function _update () {\n        _usedJSHeapSize = _size( performance.memory.usedJSHeapSize );\n        _totalJSHeapSize = _size( performance.memory.totalJSHeapSize );\n\n        _rS( 'memory' ).set( _usedJSHeapSize );\n        _rS( 'total' ).set( _totalJSHeapSize );\n    }\n\n    function _start () {\n        _usedJSHeapSize = 0;\n    }\n\n    function _end () {}\n\n    function _attach ( r ) {\n        _rS = r;\n    }\n\n    return {\n        update: _update,\n        start: _start,\n        end: _end,\n        attach: _attach,\n        values: _values,\n        groups: _groups,\n        fractions: _fractions\n    };\n\n};\n\nif (typeof module === 'object') {\n  module.exports = {\n    glStats: window.glStats,\n    threeStats: window.threeStats,\n    BrowserStats: window.BrowserStats\n  };\n}\n","// performance.now() polyfill from https://gist.github.com/paulirish/5438650\n'use strict';\n\n( function () {\n\n    if ( 'performance' in window == false ) {\n        window.performance = {};\n    }\n\n    var performance = window.performance;\n\n    if ( 'now' in performance == false ) {\n\n        var nowOffset = Date.now();\n\n        if ( performance.timing && performance.timing.navigationStart ) {\n            nowOffset = performance.timing.navigationStart;\n        }\n\n        performance.now = function now () {\n            return Date.now() - nowOffset;\n        };\n\n    }\n\n    if( !performance.mark ) {\n        performance.mark = function(){}\n    }\n\n    if( !performance.measure ) {\n        performance.measure = function(){}\n    }\n\n} )();\n\nwindow.rStats = function rStats ( settings ) {\n\n    function iterateKeys ( array, callback ) {\n        var keys = Object.keys( array );\n        for ( var j = 0, l = keys.length; j < l; j++ ) {\n            callback( keys[ j ] );\n        }\n    }\n\n    function importCSS ( url ) {\n\n        var element = document.createElement( 'link' );\n        element.href = url;\n        element.rel = 'stylesheet';\n        element.type = 'text/css';\n        document.getElementsByTagName( 'head' )[ 0 ].appendChild( element );\n\n    }\n\n    var _settings = settings || {};\n    var _colours = _settings.colours || [ '#850700', '#c74900', '#fcb300', '#284280', '#4c7c0c' ];\n\n    var _cssFont = 'https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300';\n    var _cssRStats = ( _settings.CSSPath ? _settings.CSSPath : '' ) + 'rStats.css';\n\n    var _css = _settings.css || [ _cssFont, _cssRStats ];\n    _css.forEach(function (uri) {\n        importCSS( uri );\n    });\n\n    if ( !_settings.values ) _settings.values = {};\n\n    var _base, _div, _elHeight = 10, _elWidth = 200;\n    var _perfCounters = {};\n\n\n    function Graph ( _dom, _id, _defArg ) {\n\n        var _def = _defArg || {};\n        var _canvas = document.createElement( 'canvas' ),\n            _ctx = _canvas.getContext( '2d' ),\n            _max = 0,\n            _current = 0;\n\n        var c = _def.color ? _def.color : '#666666';\n\n        var _dotCanvas = document.createElement( 'canvas' ),\n            _dotCtx = _dotCanvas.getContext( '2d' );\n        _dotCanvas.width = 1;\n        _dotCanvas.height = 2 * _elHeight;\n        _dotCtx.fillStyle = '#444444';\n        _dotCtx.fillRect( 0, 0, 1, 2 * _elHeight );\n        _dotCtx.fillStyle = c;\n        _dotCtx.fillRect( 0, _elHeight, 1, _elHeight );\n        _dotCtx.fillStyle = '#ffffff';\n        _dotCtx.globalAlpha = 0.5;\n        _dotCtx.fillRect( 0, _elHeight, 1, 1 );\n        _dotCtx.globalAlpha = 1;\n\n        var _alarmCanvas = document.createElement( 'canvas' ),\n            _alarmCtx = _alarmCanvas.getContext( '2d' );\n        _alarmCanvas.width = 1;\n        _alarmCanvas.height = 2 * _elHeight;\n        _alarmCtx.fillStyle = '#444444';\n        _alarmCtx.fillRect( 0, 0, 1, 2 * _elHeight );\n        _alarmCtx.fillStyle = '#b70000';\n        _alarmCtx.fillRect( 0, _elHeight, 1, _elHeight );\n        _alarmCtx.globalAlpha = 0.5;\n        _alarmCtx.fillStyle = '#ffffff';\n        _alarmCtx.fillRect( 0, _elHeight, 1, 1 );\n        _alarmCtx.globalAlpha = 1;\n\n        function _init () {\n\n            _canvas.width = _elWidth;\n            _canvas.height = _elHeight;\n            _canvas.style.width = _canvas.width + 'px';\n            _canvas.style.height = _canvas.height + 'px';\n            _canvas.className = 'rs-canvas';\n            _dom.appendChild( _canvas );\n\n            _ctx.fillStyle = '#444444';\n            _ctx.fillRect( 0, 0, _canvas.width, _canvas.height );\n\n        }\n\n        function _draw ( v, alarm ) {\n            _current += ( v - _current ) * 0.1;\n            _max *= 0.99;\n            if ( _current > _max ) _max = _current;\n            _ctx.drawImage( _canvas, 1, 0, _canvas.width - 1, _canvas.height, 0, 0, _canvas.width - 1, _canvas.height );\n            if ( alarm ) {\n                _ctx.drawImage( _alarmCanvas, _canvas.width - 1, _canvas.height - _current * _canvas.height / _max - _elHeight );\n            } else {\n                _ctx.drawImage( _dotCanvas, _canvas.width - 1, _canvas.height - _current * _canvas.height / _max - _elHeight );\n            }\n        }\n\n        _init();\n\n        return {\n            draw: _draw\n        };\n\n    }\n\n    function StackGraph ( _dom, _num ) {\n\n        var _canvas = document.createElement( 'canvas' ),\n            _ctx = _canvas.getContext( '2d' );\n\n        function _init () {\n\n            _canvas.width = _elWidth;\n            _canvas.height = _elHeight * _num;\n            _canvas.style.width = _canvas.width + 'px';\n            _canvas.style.height = _canvas.height + 'px';\n            _canvas.className = 'rs-canvas';\n            _dom.appendChild( _canvas );\n\n            _ctx.fillStyle = '#444444';\n            _ctx.fillRect( 0, 0, _canvas.width, _canvas.height );\n\n        }\n\n        function _draw ( v ) {\n            _ctx.drawImage( _canvas, 1, 0, _canvas.width - 1, _canvas.height, 0, 0, _canvas.width - 1, _canvas.height );\n            var th = 0;\n            iterateKeys( v, function ( j ) {\n                var h = v[ j ] * _canvas.height;\n                _ctx.fillStyle = _colours[ j ];\n                _ctx.fillRect( _canvas.width - 1, th, 1, h );\n                th += h;\n            } );\n        }\n\n        _init();\n\n        return {\n            draw: _draw\n        };\n\n    }\n\n    function PerfCounter ( id, group ) {\n\n        var _id = id,\n            _time,\n            _value = 0,\n            _total = 0,\n            _averageValue = 0,\n            _accumValue = 0,\n            _accumStart = performance.now(),\n            _accumSamples = 0,\n            _dom = document.createElement( 'div' ),\n            _spanId = document.createElement( 'span' ),\n            _spanValue = document.createElement( 'div' ),\n            _spanValueText = document.createTextNode( '' ),\n            _def = _settings ? _settings.values[ _id.toLowerCase() ] : null,\n            _graph = new Graph( _dom, _id, _def ),\n            _started = false;\n\n        _spanId.className = 'rs-counter-id';\n        _spanId.textContent = ( _def && _def.caption ) ? _def.caption : _id;\n\n        _spanValue.className = 'rs-counter-value';\n        _spanValue.appendChild( _spanValueText );\n\n        _dom.appendChild( _spanId );\n        _dom.appendChild( _spanValue );\n        if ( group ) group.div.appendChild( _dom );\n        else _div.appendChild( _dom );\n\n        _time = performance.now();\n\n        function _average ( v ) {\n            if ( _def && _def.average ) {\n                _accumValue += v;\n                _accumSamples++;\n                var t = performance.now();\n                if ( t - _accumStart >= ( _def.avgMs || 1000 ) ) {\n                    _averageValue = _accumValue / _accumSamples;\n                    _accumValue = 0;\n                    _accumStart = t;\n                    _accumSamples = 0;\n                }\n            }\n        }\n\n        function _start () {\n            _time = performance.now();\n            if( _settings.userTimingAPI ) performance.mark( _id + '-start' );\n            _started = true;\n        }\n\n        function _end () {\n            _value = performance.now() - _time;\n            if( _settings.userTimingAPI ) {\n                performance.mark( _id + '-end' );\n                if( _started ) {\n                    performance.measure( _id, _id + '-start', _id + '-end' );\n                }\n            }\n            _average( _value );\n        }\n\n        function _tick () {\n            _end();\n            _start();\n        }\n\n        function _draw () {\n            var v = ( _def && _def.average ) ? _averageValue : _value;\n            _spanValueText.nodeValue = Math.round( v * 100 ) / 100;\n            var a = ( _def && ( ( _def.below && _value < _def.below ) || ( _def.over && _value > _def.over ) ) );\n            _graph.draw( _value, a );\n            _dom.className = a ? 'rs-counter-base alarm' : 'rs-counter-base';\n\n        }\n\n        function _frame () {\n            var t = performance.now();\n            var e = t - _time;\n            _total++;\n            if ( e > 1000 ) {\n                if ( _def && _def.interpolate === false ) {\n                    _value = _total;\n                } else {\n                    _value = _total * 1000 / e;\n                }\n                _total = 0;\n                _time = t;\n                _average( _value );\n            }\n        }\n\n        function _set ( v ) {\n            _value = v;\n            _average( _value );\n        }\n\n        return {\n            set: _set,\n            start: _start,\n            tick: _tick,\n            end: _end,\n            frame: _frame,\n            value: function () {\n                return _value;\n            },\n            draw: _draw\n        };\n\n    }\n\n    function sample () {\n\n        var _value = 0;\n\n        function _set ( v ) {\n            _value = v;\n        }\n\n        return {\n            set: _set,\n            value: function () {\n                return _value;\n            }\n        };\n\n    }\n\n    function _perf ( idArg ) {\n\n        var id = idArg.toLowerCase();\n        if ( id === undefined ) id = 'default';\n        if ( _perfCounters[ id ] ) return _perfCounters[ id ];\n\n        var group = null;\n        if ( _settings && _settings.groups ) {\n            iterateKeys( _settings.groups, function ( j ) {\n                var g = _settings.groups[ parseInt( j, 10 ) ];\n                if ( !group && g.values.indexOf( id.toLowerCase() ) !== -1 ) {\n                    group = g;\n                }\n            } );\n        }\n\n        var p = new PerfCounter( id, group );\n        _perfCounters[ id ] = p;\n        return p;\n\n    }\n\n    function _init () {\n\n        if ( _settings.plugins ) {\n            if ( !_settings.values ) _settings.values = {};\n            if ( !_settings.groups ) _settings.groups = [];\n            if ( !_settings.fractions ) _settings.fractions = [];\n            for ( var j = 0; j < _settings.plugins.length; j++ ) {\n                _settings.plugins[ j ].attach( _perf );\n                iterateKeys( _settings.plugins[ j ].values, function ( k ) {\n                    _settings.values[ k ] = _settings.plugins[ j ].values[ k ];\n                } );\n                _settings.groups = _settings.groups.concat( _settings.plugins[ j ].groups );\n                _settings.fractions = _settings.fractions.concat( _settings.plugins[ j ].fractions );\n            }\n        } else {\n            _settings.plugins = {};\n        }\n\n        _base = document.createElement( 'div' );\n        _base.className = 'rs-base';\n        _div = document.createElement( 'div' );\n        _div.className = 'rs-container';\n        _div.style.height = 'auto';\n        _base.appendChild( _div );\n        document.body.appendChild( _base );\n\n        if ( !_settings ) return;\n\n        if ( _settings.groups ) {\n            iterateKeys( _settings.groups, function ( j ) {\n                var g = _settings.groups[ parseInt( j, 10 ) ];\n                var div = document.createElement( 'div' );\n                div.className = 'rs-group';\n                g.div = div;\n                var h1 = document.createElement( 'h1' );\n                h1.textContent = g.caption;\n                h1.addEventListener( 'click', function ( e ) {\n                    this.classList.toggle( 'hidden' );\n                    e.preventDefault();\n                }.bind( div ) );\n                _div.appendChild( h1 );\n                _div.appendChild( div );\n            } );\n        }\n\n        if ( _settings.fractions ) {\n            iterateKeys( _settings.fractions, function ( j ) {\n                var f = _settings.fractions[ parseInt( j, 10 ) ];\n                var div = document.createElement( 'div' );\n                div.className = 'rs-fraction';\n                var legend = document.createElement( 'div' );\n                legend.className = 'rs-legend';\n\n                var h = 0;\n                iterateKeys( _settings.fractions[ j ].steps, function ( k ) {\n                    var p = document.createElement( 'p' );\n                    p.textContent = _settings.fractions[ j ].steps[ k ];\n                    p.style.color = _colours[ h ];\n                    legend.appendChild( p );\n                    h++;\n                } );\n                div.appendChild( legend );\n                div.style.height = h * _elHeight + 'px';\n                f.div = div;\n                var graph = new StackGraph( div, h );\n                f.graph = graph;\n                _div.appendChild( div );\n            } );\n        }\n\n    }\n\n    function _update () {\n\n        iterateKeys( _settings.plugins, function ( j ) {\n            _settings.plugins[ j ].update();\n        } );\n\n        iterateKeys( _perfCounters, function ( j ) {\n            _perfCounters[ j ].draw();\n        } );\n\n        if ( _settings && _settings.fractions ) {\n            iterateKeys( _settings.fractions, function ( j ) {\n                var f = _settings.fractions[ parseInt( j, 10 ) ];\n                var v = [];\n                var base = _perfCounters[ f.base.toLowerCase() ];\n                if ( base ) {\n                    base = base.value();\n                    iterateKeys( _settings.fractions[ j ].steps, function ( k ) {\n                        var s = _settings.fractions[ j ].steps[ parseInt( k, 10 ) ].toLowerCase();\n                        var val = _perfCounters[ s ];\n                        if ( val ) {\n                            v.push( val.value() / base );\n                        }\n                    } );\n                }\n                f.graph.draw( v );\n            } );\n        }\n\n        /*if( _height != _div.clientHeight ) {\n            _height = _div.clientHeight;\n            _base.style.height = _height + 2 * _elHeight + 'px';\n        console.log( _base.clientHeight );\n        }*/\n\n    }\n\n    _init();\n\n    return function ( id ) {\n        if ( id ) return _perf( id );\n        return {\n            element: _base,\n            update: _update\n        };\n    };\n\n}\n\nif (typeof module === 'object') {\n  module.exports = window.rStats;\n}\n","/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = {};\n\nUtil.base64 = function(mimeType, base64) {\n  return 'data:' + mimeType + ';base64,' + base64;\n};\n\nUtil.isMobile = function() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\nUtil.isIOS = function() {\n  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n};\n\nUtil.isIFrame = function() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n};\n\nUtil.appendQueryParameter = function(url, key, value) {\n  // Determine delimiter based on if the URL already GET parameters in it.\n  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');\n  url += delimiter + key + '=' + value;\n  return url;\n};\n\n// From http://goo.gl/4WX3tg\nUtil.getQueryParameter = function(name) {\n  name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n};\n\nUtil.isLandscapeMode = function() {\n  return (window.orientation == 90 || window.orientation == -90);\n};\n\n\nmodule.exports = Util;\n","/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = require('./util.js');\n\n/**\n * Android and iOS compatible wakelock implementation.\n *\n * Refactored thanks to dkovalev@.\n */\nfunction AndroidWakeLock() {\n  var video = document.createElement('video');\n\n  video.addEventListener('ended', function() {\n    video.play();\n  });\n\n  this.request = function() {\n    if (video.paused) {\n      // Base64 version of videos_src/no-sleep-60s.webm.\n      video.src = Util.base64('video/webm', 'GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw==');\n      video.play();\n    }\n  };\n\n  this.release = function() {\n    video.pause();\n    video.src = '';\n  };\n}\n\nfunction iOSWakeLock() {\n  var timer = null;\n\n  this.request = function() {\n    if (!timer) {\n      timer = setInterval(function() {\n        window.location.href = '/';\n        setTimeout(window.stop, 0);\n      }, 15000);\n    }\n  }\n\n  this.release = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n}\n\n\nfunction getWakeLock() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {\n    return iOSWakeLock;\n  } else {\n    return AndroidWakeLock;\n  }\n}\n\nmodule.exports = getWakeLock();\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(${___CSS_LOADER_URL_REPLACEMENT_0___}) 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(${___CSS_LOADER_URL_REPLACEMENT_1___}) 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(${___CSS_LOADER_URL_REPLACEMENT_2___});\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(${___CSS_LOADER_URL_REPLACEMENT_3___}) center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: \"Insert phone into Cardboard holder.\";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(${___CSS_LOADER_URL_REPLACEMENT_4___}) no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/aframe.css\"],\"names\":[],\"mappings\":\"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB\",\"sourcesContent\":[\"/* .a-fullscreen means not embedded. */\\nhtml.a-fullscreen {\\n  bottom: 0;\\n  left: 0;\\n  position: fixed;\\n  right: 0;\\n  top: 0;\\n}\\n\\nhtml.a-fullscreen body {\\n  height: 100%;\\n  margin: 0;\\n  overflow: hidden;\\n  padding: 0;\\n  width: 100%;\\n}\\n\\n/* Class is removed when doing <a-scene embedded>. */\\nhtml.a-fullscreen .a-canvas {\\n  width: 100% !important;\\n  height: 100% !important;\\n  top: 0 !important;\\n  left: 0 !important;\\n  right: 0 !important;\\n  bottom: 0 !important;\\n  position: fixed !important;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-vr,\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 5px;\\n  bottom: 5px;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 60px;\\n}\\n\\n/* In chrome mobile the user agent stylesheet set it to white  */\\n:-webkit-full-screen {\\n  background-color: transparent;\\n}\\n\\n.a-hidden {\\n  display: none !important;\\n}\\n\\n.a-canvas {\\n  height: 100%;\\n  left: 0;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n}\\n\\n.a-canvas.a-grab-cursor:hover {\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\\n  cursor: pointer;\\n}\\n\\n.a-inspector-loader {\\n  background-color: #ed3160;\\n  position: fixed;\\n  left: 3px;\\n  top: 3px;\\n  padding: 6px 10px;\\n  color: #fff;\\n  text-decoration: none;\\n  font-size: 12px;\\n  font-family: Roboto,sans-serif;\\n  text-align: center;\\n  z-index: 99999;\\n  width: 204px;\\n}\\n\\n/* Inspector loader animation */\\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n\\n.a-inspector-loader .dots span {\\n  animation: dots-1 2s infinite steps(1);\\n  -webkit-animation: dots-1 2s infinite steps(1);\\n}\\n\\n.a-inspector-loader .dots span:first-child + span {\\n  animation-name: dots-2;\\n  -webkit-animation-name: dots-2;\\n}\\n\\n.a-inspector-loader .dots span:first-child + span + span {\\n  animation-name: dots-3;\\n  -webkit-animation-name: dots-3;\\n}\\n\\na-scene {\\n  display: block;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\na-assets,\\na-scene video,\\na-scene img,\\na-scene audio {\\n  display: none;\\n}\\n\\n.a-enter-vr-modal,\\n.a-orientation-modal {\\n  font-family: Consolas, Andale Mono, Courier New, monospace;\\n}\\n\\n.a-enter-vr-modal a {\\n  border-bottom: 1px solid #fff;\\n  padding: 2px 0;\\n  text-decoration: none;\\n  transition: .1s color ease-in;\\n}\\n\\n.a-enter-vr-modal a:hover {\\n  background-color: #fff;\\n  color: #111;\\n  padding: 2px 4px;\\n  position: relative;\\n  left: -4px;\\n}\\n\\n.a-enter-vr,\\n.a-enter-ar {\\n  font-family: sans-serif, monospace;\\n  font-size: 13px;\\n  width: 100%;\\n  font-weight: 200;\\n  line-height: 16px;\\n  position: absolute;\\n  right: 20px;\\n  bottom: 20px;\\n}\\n\\n.a-enter-ar.xr {\\n  right: 90px;\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-vr-modal,\\n.a-enter-vr-modal a {\\n  color: #fff;\\n  user-select: none;\\n  outline: none;\\n}\\n\\n.a-enter-vr-button {\\n  background: rgba(0, 0, 0, 0.35) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-ar-button {\\n  background: rgba(0, 0, 0, 0.20) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-vr.fullscreen .a-enter-vr-button {\\n  background-image: url(\\\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E\\\");\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-ar-button {\\n  background-size: 90% 90%;\\n  border: 0;\\n  bottom: 0;\\n  cursor: pointer;\\n  min-width: 58px;\\n  min-height: 34px;\\n  /* 1.74418604651 */\\n  /*\\n    In order to keep the aspect ratio when resizing\\n    padding-top percentages are relative to the containing block's width.\\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\\n  */\\n  padding-right: 0;\\n  padding-top: 0;\\n  position: absolute;\\n  right: 0;\\n  transition: background-color .05s ease;\\n  -webkit-transition: background-color .05s ease;\\n  z-index: 9999;\\n  border-radius: 8px;\\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\\n}\\n\\n.a-enter-ar-button {\\n  background-size: 100% 90%;\\n  border-radius: 7px;\\n}\\n\\n.a-enter-ar-button:active,\\n.a-enter-ar-button:hover,\\n.a-enter-vr-button:active,\\n.a-enter-vr-button:hover {\\n  background-color: #ef2d5e;\\n}\\n\\n.a-enter-vr-button.resethover {\\n  background-color: rgba(0, 0, 0, 0.35);\\n}\\n\\n.a-enter-vr-modal {\\n  background-color: #666;\\n  border-radius: 0;\\n  display: none;\\n  min-height: 32px;\\n  margin-right: 70px;\\n  padding: 9px;\\n  width: 280px;\\n  right: 2%;\\n  position: absolute;\\n}\\n\\n.a-enter-vr-modal:after {\\n  border-bottom: 10px solid transparent;\\n  border-left: 10px solid #666;\\n  border-top: 10px solid transparent;\\n  display: inline-block;\\n  content: '';\\n  position: absolute;\\n  right: -5px;\\n  top: 5px;\\n  width: 0;\\n  height: 0;\\n}\\n\\n.a-enter-vr-modal p,\\n.a-enter-vr-modal a {\\n  display: inline;\\n}\\n\\n.a-enter-vr-modal p {\\n  margin: 0;\\n}\\n\\n.a-enter-vr-modal p:after {\\n  content: ' ';\\n}\\n\\n.a-orientation-modal {\\n  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-orientation-modal:after {\\n  color: #666;\\n  content: \\\"Insert phone into Cardboard holder.\\\";\\n  display: block;\\n  position: absolute;\\n  text-align: center;\\n  top: 70%;\\n  transform: translateY(-70%);\\n  width: 100%;\\n}\\n\\n.a-orientation-modal button {\\n  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;\\n  border: none;\\n  height: 50px;\\n  text-indent: -9999px;\\n  width: 50px;\\n}\\n\\n.a-loader-title {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  font-family: sans-serif, monospace;\\n  text-align: center;\\n  font-size: 20px;\\n  height: 50px;\\n  font-weight: 300;\\n  line-height: 50px;\\n  position: absolute;\\n  right: 0px;\\n  left: 0px;\\n  top: 0px;\\n  color: white;\\n}\\n\\n.a-modal {\\n  position: absolute;\\n  background: rgba(0, 0, 0, 0.60);\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-dialog {\\n  position: relative;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  z-index: 199995;\\n  width: 300px;\\n  height: 200px;\\n  background-size: contain;\\n  background-color: white;\\n  font-family: sans-serif, monospace;\\n  font-size: 20px;\\n  border-radius: 3px;\\n  padding: 6px;\\n}\\n\\n.a-dialog-text-container {\\n  width: 100%;\\n  height: 70%;\\n  align-self: flex-start;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  flex-direction: column;\\n}\\n\\n.a-dialog-text {\\n  display: inline-block;\\n  font-weight: normal;\\n  font-size: 14pt;\\n  margin: 8px;\\n}\\n\\n.a-dialog-buttons-container {\\n  display: inline-flex;\\n  align-self: flex-end;\\n  width: 100%;\\n  height: 30%;\\n}\\n\\n.a-dialog-button {\\n  cursor: pointer;\\n  align-self: center;\\n  opacity: 0.9;\\n  height: 80%;\\n  width: 50%;\\n  font-size: 12pt;\\n  margin: 4px;\\n  border-radius: 2px;\\n  text-align:center;\\n  border: none;\\n  display: inline-block;\\n  -webkit-transition: all 0.25s ease-in-out;\\n  transition: all 0.25s ease-in-out;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\\n  user-select: none;\\n}\\n\\n.a-dialog-permission-button:hover {\\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\\n}\\n\\n.a-dialog-allow-button {\\n  background-color: #00ceff;\\n}\\n\\n.a-dialog-deny-button {\\n  background-color: #ff005b;\\n}\\n\\n.a-dialog-ok-button {\\n  background-color: #00ceff;\\n  width: 100%;\\n}\\n\\n.a-dom-overlay:not(.a-no-style) {\\n  overflow: hidden;\\n  position: absolute;\\n  pointer-events: none;\\n  box-sizing: border-box;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  padding: 1em;\\n}\\n\\n.a-dom-overlay:not(.a-no-style)>* {\\n  pointer-events: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/rStats.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF\",\"sourcesContent\":[\".rs-base {\\n  background-color: #333;\\n  color: #fafafa;\\n  border-radius: 0;\\n  font: 10px monospace;\\n  left: 5px;\\n  line-height: 1em;\\n  opacity: 0.85;\\n  overflow: hidden;\\n  padding: 10px;\\n  position: fixed;\\n  top: 5px;\\n  width: 300px;\\n  z-index: 10000;\\n}\\n\\n.rs-base div.hidden {\\n  display: none;\\n}\\n\\n.rs-base h1 {\\n  color: #fff;\\n  cursor: pointer;\\n  font-size: 1.4em;\\n  font-weight: 300;\\n  margin: 0 0 5px;\\n  padding: 0;\\n}\\n\\n.rs-group {\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: flex;\\n  -webkit-flex-direction: column-reverse;\\n  flex-direction: column-reverse;\\n  margin-bottom: 5px;\\n}\\n\\n.rs-group:last-child {\\n  margin-bottom: 0;\\n}\\n\\n.rs-counter-base {\\n  align-items: center;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: flex;\\n  height: 10px;\\n  -webkit-justify-content: space-between;\\n  justify-content: space-between;\\n  margin: 2px 0;\\n}\\n\\n.rs-counter-base.alarm {\\n  color: #b70000;\\n  text-shadow: 0 0 0 #b70000,\\n               0 0 1px #fff,\\n               0 0 1px #fff,\\n               0 0 2px #fff,\\n               0 0 2px #fff,\\n               0 0 3px #fff,\\n               0 0 3px #fff,\\n               0 0 4px #fff,\\n               0 0 4px #fff;\\n}\\n\\n.rs-counter-id {\\n  font-weight: 300;\\n  -webkit-box-ordinal-group: 0;\\n  -webkit-order: 0;\\n  order: 0;\\n  width: 54px;\\n}\\n\\n.rs-counter-value {\\n  font-weight: 300;\\n  -webkit-box-ordinal-group: 1;\\n  -webkit-order: 1;\\n  order: 1;\\n  text-align: right;\\n  width: 35px;\\n}\\n\\n.rs-canvas {\\n  -webkit-box-ordinal-group: 2;\\n  -webkit-order: 2;\\n  order: 2;\\n}\\n\\n@media (min-width: 480px) {\\n  .rs-base {\\n    left: 20px;\\n    top: 20px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./rStats.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./rStats.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module2, copyDefault, desc) => {\n  if (module2 && typeof module2 === \"object\" || typeof module2 === \"function\") {\n    for (let key of __getOwnPropNames(module2))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toCommonJS = /* @__PURE__ */ ((cache) => {\n  return (module2, temp) => {\n    return cache && cache.get(module2) || (temp = __reExport(__markAsModule({}), module2, 1), cache && cache.set(module2, temp), temp);\n  };\n})(typeof WeakMap !== \"undefined\" ? /* @__PURE__ */ new WeakMap() : 0);\n\n// src/index.js\nvar src_exports = {};\n__export(src_exports, {\n  Changed: () => Changed,\n  DESERIALIZE_MODE: () => DESERIALIZE_MODE,\n  Not: () => Not,\n  Types: () => Types,\n  addComponent: () => addComponent,\n  addEntity: () => addEntity,\n  commitRemovals: () => commitRemovals,\n  createWorld: () => createWorld,\n  defineComponent: () => defineComponent,\n  defineDeserializer: () => defineDeserializer,\n  defineQuery: () => defineQuery,\n  defineSerializer: () => defineSerializer,\n  defineSystem: () => defineSystem,\n  deleteWorld: () => deleteWorld,\n  enableManualEntityRecycling: () => enableManualEntityRecycling,\n  enterQuery: () => enterQuery,\n  entityExists: () => entityExists,\n  exitQuery: () => exitQuery,\n  flushRemovedEntities: () => flushRemovedEntities,\n  getAllEntities: () => getAllEntities,\n  getEntityComponents: () => getEntityComponents,\n  getWorldComponents: () => getWorldComponents,\n  hasComponent: () => hasComponent,\n  parentArray: () => parentArray,\n  pipe: () => pipe,\n  registerComponent: () => registerComponent,\n  registerComponents: () => registerComponents,\n  removeComponent: () => removeComponent,\n  removeEntity: () => removeEntity,\n  removeQuery: () => removeQuery,\n  resetChangedQuery: () => resetChangedQuery,\n  resetGlobals: () => resetGlobals,\n  resetWorld: () => resetWorld,\n  setDefaultSize: () => setDefaultSize,\n  setRemovedRecycleThreshold: () => setRemovedRecycleThreshold\n});\n\n// src/Constants.js\nvar TYPES_ENUM = {\n  i8: \"i8\",\n  ui8: \"ui8\",\n  ui8c: \"ui8c\",\n  i16: \"i16\",\n  ui16: \"ui16\",\n  i32: \"i32\",\n  ui32: \"ui32\",\n  f32: \"f32\",\n  f64: \"f64\",\n  eid: \"eid\"\n};\nvar TYPES_NAMES = {\n  i8: \"Int8\",\n  ui8: \"Uint8\",\n  ui8c: \"Uint8Clamped\",\n  i16: \"Int16\",\n  ui16: \"Uint16\",\n  i32: \"Int32\",\n  ui32: \"Uint32\",\n  eid: \"Uint32\",\n  f32: \"Float32\",\n  f64: \"Float64\"\n};\nvar TYPES = {\n  i8: Int8Array,\n  ui8: Uint8Array,\n  ui8c: Uint8ClampedArray,\n  i16: Int16Array,\n  ui16: Uint16Array,\n  i32: Int32Array,\n  ui32: Uint32Array,\n  f32: Float32Array,\n  f64: Float64Array,\n  eid: Uint32Array\n};\nvar UNSIGNED_MAX = {\n  uint8: 2 ** 8,\n  uint16: 2 ** 16,\n  uint32: 2 ** 32\n};\n\n// src/Storage.js\nvar roundToMultiple = (mul) => (x) => Math.ceil(x / mul) * mul;\nvar roundToMultiple4 = roundToMultiple(4);\nvar $storeRef = Symbol(\"storeRef\");\nvar $storeSize = Symbol(\"storeSize\");\nvar $storeMaps = Symbol(\"storeMaps\");\nvar $storeFlattened = Symbol(\"storeFlattened\");\nvar $storeBase = Symbol(\"storeBase\");\nvar $storeType = Symbol(\"storeType\");\nvar $storeArrayElementCounts = Symbol(\"storeArrayElementCounts\");\nvar $storeSubarrays = Symbol(\"storeSubarrays\");\nvar $subarrayCursors = Symbol(\"subarrayCursors\");\nvar $subarray = Symbol(\"subarray\");\nvar $subarrayFrom = Symbol(\"subarrayFrom\");\nvar $subarrayTo = Symbol(\"subarrayTo\");\nvar $parentArray = Symbol(\"parentArray\");\nvar $tagStore = Symbol(\"tagStore\");\nvar $queryShadow = Symbol(\"queryShadow\");\nvar $serializeShadow = Symbol(\"serializeShadow\");\nvar $indexType = Symbol(\"indexType\");\nvar $indexBytes = Symbol(\"indexBytes\");\nvar $isEidType = Symbol(\"isEidType\");\nvar stores = {};\nvar resize = (ta, size) => {\n  const newBuffer = new ArrayBuffer(size * ta.BYTES_PER_ELEMENT);\n  const newTa = new ta.constructor(newBuffer);\n  newTa.set(ta, 0);\n  return newTa;\n};\nvar createShadow = (store, key) => {\n  if (!ArrayBuffer.isView(store)) {\n    const shadowStore = store[$parentArray].slice(0);\n    store[key] = store.map((_, eid) => {\n      const { length } = store[eid];\n      const start = length * eid;\n      const end = start + length;\n      return shadowStore.subarray(start, end);\n    });\n  } else {\n    store[key] = store.slice(0);\n  }\n};\nvar resetStoreFor = (store, eid) => {\n  if (store[$storeFlattened]) {\n    store[$storeFlattened].forEach((ta) => {\n      if (ArrayBuffer.isView(ta))\n        ta[eid] = 0;\n      else\n        ta[eid].fill(0);\n    });\n  }\n};\nvar createTypeStore = (type, length) => {\n  const totalBytes = length * TYPES[type].BYTES_PER_ELEMENT;\n  const buffer = new ArrayBuffer(totalBytes);\n  const store = new TYPES[type](buffer);\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  return store;\n};\nvar parentArray = (store) => store[$parentArray];\nvar createArrayStore = (metadata, type, length) => {\n  const storeSize = metadata[$storeSize];\n  const store = Array(storeSize).fill(0);\n  store[$storeType] = type;\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  const cursors = metadata[$subarrayCursors];\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (!length)\n    throw new Error(\"bitECS - Must define component array length\");\n  if (!TYPES[type])\n    throw new Error(`bitECS - Invalid component array property type ${type}`);\n  if (!metadata[$storeSubarrays][type]) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    metadata[$storeSubarrays][type] = array;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n  return store;\n};\nvar isArrayType = (x) => Array.isArray(x) && typeof x[0] === \"string\" && typeof x[1] === \"number\";\nvar createStore = (schema, size) => {\n  const $store = Symbol(\"store\");\n  if (!schema || !Object.keys(schema).length) {\n    stores[$store] = {\n      [$storeSize]: size,\n      [$tagStore]: true,\n      [$storeBase]: () => stores[$store]\n    };\n    return stores[$store];\n  }\n  schema = JSON.parse(JSON.stringify(schema));\n  const arrayElementCounts = {};\n  const collectArrayElementCounts = (s) => {\n    const keys = Object.keys(s);\n    for (const k of keys) {\n      if (isArrayType(s[k])) {\n        if (!arrayElementCounts[s[k][0]])\n          arrayElementCounts[s[k][0]] = 0;\n        arrayElementCounts[s[k][0]] += s[k][1];\n      } else if (s[k] instanceof Object) {\n        collectArrayElementCounts(s[k]);\n      }\n    }\n  };\n  collectArrayElementCounts(schema);\n  const metadata = {\n    [$storeSize]: size,\n    [$storeMaps]: {},\n    [$storeSubarrays]: {},\n    [$storeRef]: $store,\n    [$subarrayCursors]: Object.keys(TYPES).reduce((a, type) => ({ ...a, [type]: 0 }), {}),\n    [$storeFlattened]: [],\n    [$storeArrayElementCounts]: arrayElementCounts\n  };\n  if (schema instanceof Object && Object.keys(schema).length) {\n    const recursiveTransform = (a, k) => {\n      if (typeof a[k] === \"string\") {\n        a[k] = createTypeStore(a[k], size);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (isArrayType(a[k])) {\n        const [type, length] = a[k];\n        a[k] = createArrayStore(metadata, type, length);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (a[k] instanceof Object) {\n        a[k] = Object.keys(a[k]).reduce(recursiveTransform, a[k]);\n      }\n      return a;\n    };\n    stores[$store] = Object.assign(Object.keys(schema).reduce(recursiveTransform, schema), metadata);\n    stores[$store][$storeBase] = () => stores[$store];\n    return stores[$store];\n  }\n};\n\n// src/Util.js\nvar SparseSet = () => {\n  const dense = [];\n  const sparse = [];\n  dense.sort = function(comparator) {\n    const result = Array.prototype.sort.call(this, comparator);\n    for (let i = 0; i < dense.length; i++) {\n      sparse[dense[i]] = i;\n    }\n    return result;\n  };\n  const has = (val) => dense[sparse[val]] === val;\n  const add = (val) => {\n    if (has(val))\n      return;\n    sparse[val] = dense.push(val) - 1;\n  };\n  const remove = (val) => {\n    if (!has(val))\n      return;\n    const index = sparse[val];\n    const swapped = dense.pop();\n    if (swapped !== val) {\n      dense[index] = swapped;\n      sparse[swapped] = index;\n    }\n  };\n  const reset = () => {\n    dense.length = 0;\n    sparse.length = 0;\n  };\n  return {\n    add,\n    remove,\n    has,\n    sparse,\n    dense,\n    reset\n  };\n};\n\n// src/Serialize.js\nvar DESERIALIZE_MODE = {\n  REPLACE: 0,\n  APPEND: 1,\n  MAP: 2\n};\nvar resized = false;\nvar setSerializationResized = (v) => {\n  resized = v;\n};\nvar concat = (a, v) => a.concat(v);\nvar not = (fn) => (v) => !fn(v);\nvar storeFlattened = (c) => c[$storeFlattened];\nvar isFullComponent = storeFlattened;\nvar isProperty = not(isFullComponent);\nvar isModifier = (c) => typeof c === \"function\" && c[$modifier];\nvar isNotModifier = not(isModifier);\nvar isChangedModifier = (c) => isModifier(c) && c()[1] === \"changed\";\nvar isWorld = (w) => Object.getOwnPropertySymbols(w).includes($componentMap);\nvar fromModifierToComponent = (c) => c()[0];\nvar canonicalize = (target) => {\n  if (isWorld(target))\n    return [[], /* @__PURE__ */ new Map()];\n  const fullComponentProps = target.filter(isNotModifier).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const changedComponentProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const props = target.filter(isNotModifier).filter(isProperty);\n  const changedProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isProperty);\n  const componentProps = [...fullComponentProps, ...props, ...changedComponentProps, ...changedProps];\n  const allChangedProps = [...changedComponentProps, ...changedProps].reduce((map, prop) => {\n    const $ = Symbol();\n    createShadow(prop, $);\n    map.set(prop, $);\n    return map;\n  }, /* @__PURE__ */ new Map());\n  return [componentProps, allChangedProps];\n};\nvar defineSerializer = (target, maxBytes = 2e7) => {\n  const worldSerializer = isWorld(target);\n  let [componentProps, changedProps] = canonicalize(target);\n  const buffer = new ArrayBuffer(maxBytes);\n  const view = new DataView(buffer);\n  const entityComponentCache = /* @__PURE__ */ new Map();\n  return (ents) => {\n    if (resized) {\n      [componentProps, changedProps] = canonicalize(target);\n      resized = false;\n    }\n    if (worldSerializer) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    let world;\n    if (Object.getOwnPropertySymbols(ents).includes($componentMap)) {\n      world = ents;\n      ents = ents[$entityArray];\n    } else {\n      world = eidToWorld.get(ents[0]);\n    }\n    let where = 0;\n    if (!ents.length)\n      return buffer.slice(0, where);\n    const cache = /* @__PURE__ */ new Map();\n    for (let pid = 0; pid < componentProps.length; pid++) {\n      const prop = componentProps[pid];\n      const component = prop[$storeBase]();\n      const $diff = changedProps.get(prop);\n      const shadow = $diff ? prop[$diff] : null;\n      if (!cache.has(component))\n        cache.set(component, /* @__PURE__ */ new Map());\n      view.setUint8(where, pid);\n      where += 1;\n      const countWhere = where;\n      where += 4;\n      let writeCount = 0;\n      for (let i = 0; i < ents.length; i++) {\n        const eid = ents[i];\n        let componentCache = entityComponentCache.get(eid);\n        if (!componentCache)\n          componentCache = entityComponentCache.set(eid, /* @__PURE__ */ new Set()).get(eid);\n        componentCache.add(eid);\n        const newlyAddedComponent = shadow && cache.get(component).get(eid) || !componentCache.has(component) && hasComponent(world, component, eid);\n        cache.get(component).set(eid, newlyAddedComponent);\n        if (newlyAddedComponent) {\n          componentCache.add(component);\n        } else if (!hasComponent(world, component, eid)) {\n          componentCache.delete(component);\n          continue;\n        }\n        const rewindWhere = where;\n        view.setUint32(where, eid);\n        where += 4;\n        if (prop[$tagStore]) {\n          writeCount++;\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const type = prop[eid].constructor.name.replace(\"Array\", \"\");\n          const indexType = prop[eid][$indexType];\n          const indexBytes = prop[eid][$indexBytes];\n          const countWhere2 = where;\n          where += indexBytes;\n          let arrayWriteCount = 0;\n          for (let i2 = 0; i2 < prop[eid].length; i2++) {\n            if (shadow) {\n              const changed = shadow[eid][i2] !== prop[eid][i2];\n              shadow[eid][i2] = prop[eid][i2];\n              if (!changed && !newlyAddedComponent) {\n                continue;\n              }\n            }\n            view[`set${indexType}`](where, i2);\n            where += indexBytes;\n            const value = prop[eid][i2];\n            view[`set${type}`](where, value);\n            where += prop[eid].BYTES_PER_ELEMENT;\n            arrayWriteCount++;\n          }\n          if (arrayWriteCount > 0) {\n            view[`set${indexType}`](countWhere2, arrayWriteCount);\n            writeCount++;\n          } else {\n            where = rewindWhere;\n            continue;\n          }\n        } else {\n          if (shadow) {\n            const changed = shadow[eid] !== prop[eid];\n            shadow[eid] = prop[eid];\n            if (!changed && !newlyAddedComponent) {\n              where = rewindWhere;\n              continue;\n            }\n          }\n          const type = prop.constructor.name.replace(\"Array\", \"\");\n          view[`set${type}`](where, prop[eid]);\n          where += prop.BYTES_PER_ELEMENT;\n          writeCount++;\n        }\n      }\n      if (writeCount > 0) {\n        view.setUint32(countWhere, writeCount);\n      } else {\n        where -= 5;\n      }\n    }\n    return buffer.slice(0, where);\n  };\n};\nvar newEntities = /* @__PURE__ */ new Map();\nvar defineDeserializer = (target) => {\n  const isWorld2 = Object.getOwnPropertySymbols(target).includes($componentMap);\n  let [componentProps] = canonicalize(target);\n  const deserializedEntities = /* @__PURE__ */ new Set();\n  return (world, packet, mode = 0) => {\n    newEntities.clear();\n    if (resized) {\n      [componentProps] = canonicalize(target);\n      resized = false;\n    }\n    if (isWorld2) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    const localEntities = world[$localEntities];\n    const localEntityLookup = world[$localEntityLookup];\n    const view = new DataView(packet);\n    let where = 0;\n    while (where < packet.byteLength) {\n      const pid = view.getUint8(where);\n      where += 1;\n      const entityCount = view.getUint32(where);\n      where += 4;\n      const prop = componentProps[pid];\n      for (let i = 0; i < entityCount; i++) {\n        let eid = view.getUint32(where);\n        where += 4;\n        if (mode === DESERIALIZE_MODE.MAP) {\n          if (localEntities.has(eid)) {\n            eid = localEntities.get(eid);\n          } else if (newEntities.has(eid)) {\n            eid = newEntities.get(eid);\n          } else {\n            const newEid = addEntity(world);\n            localEntities.set(eid, newEid);\n            localEntityLookup.set(newEid, eid);\n            newEntities.set(eid, newEid);\n            eid = newEid;\n          }\n        }\n        if (mode === DESERIALIZE_MODE.APPEND || mode === DESERIALIZE_MODE.REPLACE && !world[$entitySparseSet].has(eid)) {\n          const newEid = newEntities.get(eid) || addEntity(world);\n          newEntities.set(eid, newEid);\n          eid = newEid;\n        }\n        const component = prop[$storeBase]();\n        if (!hasComponent(world, component, eid)) {\n          addComponent(world, component, eid);\n        }\n        deserializedEntities.add(eid);\n        if (component[$tagStore]) {\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const array = prop[eid];\n          const count = view[`get${array[$indexType]}`](where);\n          where += array[$indexBytes];\n          for (let i2 = 0; i2 < count; i2++) {\n            const index = view[`get${array[$indexType]}`](where);\n            where += array[$indexBytes];\n            const value = view[`get${array.constructor.name.replace(\"Array\", \"\")}`](where);\n            where += array.BYTES_PER_ELEMENT;\n            if (prop[$isEidType]) {\n              let localEid;\n              if (localEntities.has(value)) {\n                localEid = localEntities.get(value);\n              } else if (newEntities.has(value)) {\n                localEid = newEntities.get(value);\n              } else {\n                const newEid = addEntity(world);\n                localEntities.set(value, newEid);\n                localEntityLookup.set(newEid, value);\n                newEntities.set(value, newEid);\n                localEid = newEid;\n              }\n              prop[eid][index] = localEid;\n            } else\n              prop[eid][index] = value;\n          }\n        } else {\n          const value = view[`get${prop.constructor.name.replace(\"Array\", \"\")}`](where);\n          where += prop.BYTES_PER_ELEMENT;\n          if (prop[$isEidType]) {\n            let localEid;\n            if (localEntities.has(value)) {\n              localEid = localEntities.get(value);\n            } else if (newEntities.has(value)) {\n              localEid = newEntities.get(value);\n            } else {\n              const newEid = addEntity(world);\n              localEntities.set(value, newEid);\n              localEntityLookup.set(newEid, value);\n              newEntities.set(value, newEid);\n              localEid = newEid;\n            }\n            prop[eid] = localEid;\n          } else\n            prop[eid] = value;\n        }\n      }\n    }\n    const ents = Array.from(deserializedEntities);\n    deserializedEntities.clear();\n    return ents;\n  };\n};\n\n// src/Entity.js\nvar $entityMasks = Symbol(\"entityMasks\");\nvar $entityComponents = Symbol(\"entityComponents\");\nvar $entitySparseSet = Symbol(\"entitySparseSet\");\nvar $entityArray = Symbol(\"entityArray\");\nvar $entityIndices = Symbol(\"entityIndices\");\nvar $removedEntities = Symbol(\"removedEntities\");\nvar defaultSize = 1e5;\nvar globalEntityCursor = 0;\nvar globalSize = defaultSize;\nvar getGlobalSize = () => globalSize;\nvar removed = [];\nvar recycled = [];\nvar defaultRemovedReuseThreshold = 0.01;\nvar removedReuseThreshold = defaultRemovedReuseThreshold;\nvar resetGlobals = () => {\n  globalSize = defaultSize;\n  globalEntityCursor = 0;\n  removedReuseThreshold = defaultRemovedReuseThreshold;\n  removed.length = 0;\n  recycled.length = 0;\n};\nvar setDefaultSize = (newSize) => {\n  const oldSize = globalSize;\n  defaultSize = newSize;\n  resetGlobals();\n  globalSize = newSize;\n  resizeWorlds(newSize);\n  setSerializationResized(true);\n};\nvar setRemovedRecycleThreshold = (newThreshold) => {\n  removedReuseThreshold = newThreshold;\n};\nvar getEntityCursor = () => globalEntityCursor;\nvar eidToWorld = /* @__PURE__ */ new Map();\nvar flushRemovedEntities = (world) => {\n  if (!world[$manualEntityRecycling]) {\n    throw new Error(\"bitECS - cannot flush removed entities, enable feature with the enableManualEntityRecycling function\");\n  }\n  removed.push(...recycled);\n  recycled.length = 0;\n};\nvar addEntity = (world) => {\n  const eid = world[$manualEntityRecycling] ? removed.length ? removed.shift() : globalEntityCursor++ : removed.length > Math.round(globalSize * removedReuseThreshold) ? removed.shift() : globalEntityCursor++;\n  if (eid > world[$size])\n    throw new Error(\"bitECS - max entities reached\");\n  world[$entitySparseSet].add(eid);\n  eidToWorld.set(eid, world);\n  world[$notQueries].forEach((q) => {\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  });\n  world[$entityComponents].set(eid, /* @__PURE__ */ new Set());\n  return eid;\n};\nvar removeEntity = (world, eid) => {\n  if (!world[$entitySparseSet].has(eid))\n    return;\n  world[$queries].forEach((q) => {\n    queryRemoveEntity(world, q, eid);\n  });\n  if (world[$manualEntityRecycling])\n    recycled.push(eid);\n  else\n    removed.push(eid);\n  world[$entitySparseSet].remove(eid);\n  world[$entityComponents].delete(eid);\n  world[$localEntities].delete(world[$localEntityLookup].get(eid));\n  world[$localEntityLookup].delete(eid);\n  for (let i = 0; i < world[$entityMasks].length; i++)\n    world[$entityMasks][i][eid] = 0;\n};\nvar getEntityComponents = (world, eid) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  return Array.from(world[$entityComponents].get(eid));\n};\nvar entityExists = (world, eid) => world[$entitySparseSet].has(eid);\n\n// src/Query.js\nvar $modifier = Symbol(\"$modifier\");\nfunction modifier(c, mod) {\n  const inner = () => [c, mod];\n  inner[$modifier] = true;\n  return inner;\n}\nvar Not = (c) => modifier(c, \"not\");\nvar Changed = (c) => modifier(c, \"changed\");\nfunction Any(...comps) {\n  return function QueryAny() {\n    return comps;\n  };\n}\nfunction All(...comps) {\n  return function QueryAll() {\n    return comps;\n  };\n}\nfunction None(...comps) {\n  return function QueryNone() {\n    return comps;\n  };\n}\nvar $queries = Symbol(\"queries\");\nvar $notQueries = Symbol(\"notQueries\");\nvar $queryAny = Symbol(\"queryAny\");\nvar $queryAll = Symbol(\"queryAll\");\nvar $queryNone = Symbol(\"queryNone\");\nvar $queryMap = Symbol(\"queryMap\");\nvar $dirtyQueries = Symbol(\"$dirtyQueries\");\nvar $queryComponents = Symbol(\"queryComponents\");\nvar $enterQuery = Symbol(\"enterQuery\");\nvar $exitQuery = Symbol(\"exitQuery\");\nvar empty = Object.freeze([]);\nvar enterQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  if (q.entered.dense.length === 0) {\n    return empty;\n  } else {\n    const results = q.entered.dense.slice();\n    q.entered.reset();\n    return results;\n  }\n};\nvar exitQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  if (q.exited.dense.length === 0) {\n    return empty;\n  } else {\n    const results = q.exited.dense.slice();\n    q.exited.reset();\n    return results;\n  }\n};\nvar registerQuery = (world, query) => {\n  const components2 = [];\n  const notComponents = [];\n  const changedComponents = [];\n  query[$queryComponents].forEach((c) => {\n    if (typeof c === \"function\" && c[$modifier]) {\n      const [comp, mod] = c();\n      if (!world[$componentMap].has(comp))\n        registerComponent(world, comp);\n      if (mod === \"not\") {\n        notComponents.push(comp);\n      }\n      if (mod === \"changed\") {\n        changedComponents.push(comp);\n        components2.push(comp);\n      }\n    } else {\n      if (!world[$componentMap].has(c))\n        registerComponent(world, c);\n      components2.push(c);\n    }\n  });\n  const mapComponents = (c) => world[$componentMap].get(c);\n  const allComponents = components2.concat(notComponents).map(mapComponents);\n  const sparseSet = SparseSet();\n  const archetypes = [];\n  const changed = [];\n  const toRemove = SparseSet();\n  const entered = SparseSet();\n  const exited = SparseSet();\n  const generations = allComponents.map((c) => c.generationId).reduce((a, v) => {\n    if (a.includes(v))\n      return a;\n    a.push(v);\n    return a;\n  }, []);\n  const reduceBitflags = (a, c) => {\n    if (!a[c.generationId])\n      a[c.generationId] = 0;\n    a[c.generationId] |= c.bitflag;\n    return a;\n  };\n  const masks = components2.map(mapComponents).reduce(reduceBitflags, {});\n  const notMasks = notComponents.map(mapComponents).reduce(reduceBitflags, {});\n  const hasMasks = allComponents.reduce(reduceBitflags, {});\n  const flatProps = components2.filter((c) => !c[$tagStore]).map((c) => Object.getOwnPropertySymbols(c).includes($storeFlattened) ? c[$storeFlattened] : [c]).reduce((a, v) => a.concat(v), []);\n  const shadows = [];\n  const q = Object.assign(sparseSet, {\n    archetypes,\n    changed,\n    components: components2,\n    notComponents,\n    changedComponents,\n    allComponents,\n    masks,\n    notMasks,\n    hasMasks,\n    generations,\n    flatProps,\n    toRemove,\n    entered,\n    exited,\n    shadows\n  });\n  world[$queryMap].set(query, q);\n  world[$queries].add(q);\n  allComponents.forEach((c) => {\n    c.queries.add(q);\n  });\n  if (notComponents.length)\n    world[$notQueries].add(q);\n  for (let eid = 0; eid < getEntityCursor(); eid++) {\n    if (!world[$entitySparseSet].has(eid))\n      continue;\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  }\n};\nvar generateShadow = (q, pid) => {\n  const $ = Symbol();\n  const prop = q.flatProps[pid];\n  createShadow(prop, $);\n  q.shadows[pid] = prop[$];\n  return prop[$];\n};\nvar diff = (q, clearDiff) => {\n  if (clearDiff)\n    q.changed = [];\n  const { flatProps, shadows } = q;\n  for (let i = 0; i < q.dense.length; i++) {\n    const eid = q.dense[i];\n    let dirty = false;\n    for (let pid = 0; pid < flatProps.length; pid++) {\n      const prop = flatProps[pid];\n      const shadow = shadows[pid] || generateShadow(q, pid);\n      if (ArrayBuffer.isView(prop[eid])) {\n        for (let i2 = 0; i2 < prop[eid].length; i2++) {\n          if (prop[eid][i2] !== shadow[eid][i2]) {\n            dirty = true;\n            break;\n          }\n        }\n        shadow[eid].set(prop[eid]);\n      } else {\n        if (prop[eid] !== shadow[eid]) {\n          dirty = true;\n          shadow[eid] = prop[eid];\n        }\n      }\n    }\n    if (dirty)\n      q.changed.push(eid);\n  }\n  return q.changed;\n};\nvar flatten = (a, v) => a.concat(v);\nvar aggregateComponentsFor = (mod) => (x) => x.filter((f) => f.name === mod().constructor.name).reduce(flatten);\nvar getAnyComponents = aggregateComponentsFor(Any);\nvar getAllComponents = aggregateComponentsFor(All);\nvar getNoneComponents = aggregateComponentsFor(None);\nvar defineQuery = (...args) => {\n  let components2;\n  let any, all, none;\n  if (Array.isArray(args[0])) {\n    components2 = args[0];\n  } else {\n  }\n  if (components2 === void 0 || components2[$componentMap] !== void 0) {\n    return (world) => world ? world[$entityArray] : components2[$entityArray];\n  }\n  const query = function(world, clearDiff = true) {\n    if (!world[$queryMap].has(query))\n      registerQuery(world, query);\n    const q = world[$queryMap].get(query);\n    commitRemovals(world);\n    if (q.changedComponents.length)\n      return diff(q, clearDiff);\n    return q.dense;\n  };\n  query[$queryComponents] = components2;\n  query[$queryAny] = any;\n  query[$queryAll] = all;\n  query[$queryNone] = none;\n  return query;\n};\nvar queryCheckEntity = (world, q, eid) => {\n  const { masks, notMasks, generations } = q;\n  let or = 0;\n  for (let i = 0; i < generations.length; i++) {\n    const generationId = generations[i];\n    const qMask = masks[generationId];\n    const qNotMask = notMasks[generationId];\n    const eMask = world[$entityMasks][generationId][eid];\n    if (qNotMask && (eMask & qNotMask) !== 0) {\n      return false;\n    }\n    if (qMask && (eMask & qMask) !== qMask) {\n      return false;\n    }\n  }\n  return true;\n};\nvar queryAddEntity = (q, eid) => {\n  q.toRemove.remove(eid);\n  q.entered.add(eid);\n  q.add(eid);\n};\nvar queryCommitRemovals = (q) => {\n  for (let i = q.toRemove.dense.length - 1; i >= 0; i--) {\n    const eid = q.toRemove.dense[i];\n    q.toRemove.remove(eid);\n    q.remove(eid);\n  }\n};\nvar commitRemovals = (world) => {\n  if (!world[$dirtyQueries].size)\n    return;\n  world[$dirtyQueries].forEach(queryCommitRemovals);\n  world[$dirtyQueries].clear();\n};\nvar queryRemoveEntity = (world, q, eid) => {\n  if (!q.has(eid) || q.toRemove.has(eid))\n    return;\n  q.toRemove.add(eid);\n  world[$dirtyQueries].add(q);\n  q.exited.add(eid);\n};\nvar resetChangedQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  q.changed = [];\n};\nvar removeQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  world[$queries].delete(q);\n  world[$queryMap].delete(query);\n};\n\n// src/Component.js\nvar $componentMap = Symbol(\"componentMap\");\nvar components = [];\nvar defineComponent = (schema, size) => {\n  const component = createStore(schema, size || getGlobalSize());\n  if (schema && Object.keys(schema).length)\n    components.push(component);\n  return component;\n};\nvar incrementBitflag = (world) => {\n  world[$bitflag] *= 2;\n  if (world[$bitflag] >= 2 ** 31) {\n    world[$bitflag] = 1;\n    world[$entityMasks].push(new Uint32Array(world[$size]));\n  }\n};\nvar registerComponent = (world, component) => {\n  if (!component)\n    throw new Error(`bitECS - Cannot register null or undefined component`);\n  const queries = /* @__PURE__ */ new Set();\n  const notQueries = /* @__PURE__ */ new Set();\n  const changedQueries = /* @__PURE__ */ new Set();\n  world[$queries].forEach((q) => {\n    if (q.allComponents.includes(component)) {\n      queries.add(q);\n    }\n  });\n  world[$componentMap].set(component, {\n    generationId: world[$entityMasks].length - 1,\n    bitflag: world[$bitflag],\n    store: component,\n    queries,\n    notQueries,\n    changedQueries\n  });\n  incrementBitflag(world);\n};\nvar registerComponents = (world, components2) => {\n  components2.forEach((c) => registerComponent(world, c));\n};\nvar hasComponent = (world, component, eid) => {\n  const registeredComponent = world[$componentMap].get(component);\n  if (!registeredComponent)\n    return false;\n  const { generationId, bitflag } = registeredComponent;\n  const mask = world[$entityMasks][generationId][eid];\n  return (mask & bitflag) === bitflag;\n};\nvar addComponent = (world, component, eid, reset = false) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!world[$componentMap].has(component))\n    registerComponent(world, component);\n  if (hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries, notQueries } = c;\n  world[$entityMasks][generationId][eid] |= bitflag;\n  queries.forEach((q) => {\n    q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match) {\n      q.exited.remove(eid);\n      queryAddEntity(q, eid);\n    }\n    if (!match) {\n      q.entered.remove(eid);\n      queryRemoveEntity(world, q, eid);\n    }\n  });\n  world[$entityComponents].get(eid).add(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\nvar removeComponent = (world, component, eid, reset = true) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries } = c;\n  world[$entityMasks][generationId][eid] &= ~bitflag;\n  queries.forEach((q) => {\n    q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match) {\n      q.exited.remove(eid);\n      queryAddEntity(q, eid);\n    }\n    if (!match) {\n      q.entered.remove(eid);\n      queryRemoveEntity(world, q, eid);\n    }\n  });\n  world[$entityComponents].get(eid).delete(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\n\n// src/World.js\nvar $size = Symbol(\"size\");\nvar $resizeThreshold = Symbol(\"resizeThreshold\");\nvar $bitflag = Symbol(\"bitflag\");\nvar $archetypes = Symbol(\"archetypes\");\nvar $localEntities = Symbol(\"localEntities\");\nvar $localEntityLookup = Symbol(\"localEntityLookup\");\nvar $manualEntityRecycling = Symbol(\"manualEntityRecycling\");\nvar worlds = [];\nvar resizeWorlds = (size) => {\n  worlds.forEach((world) => {\n    world[$size] = size;\n    for (let i = 0; i < world[$entityMasks].length; i++) {\n      const masks = world[$entityMasks][i];\n      world[$entityMasks][i] = resize(masks, size);\n    }\n    world[$resizeThreshold] = world[$size] - world[$size] / 5;\n  });\n};\nvar createWorld = (...args) => {\n  const world = typeof args[0] === \"object\" ? args[0] : {};\n  const size = typeof args[0] === \"number\" ? args[0] : typeof args[1] === \"number\" ? args[1] : getGlobalSize();\n  resetWorld(world, size);\n  worlds.push(world);\n  return world;\n};\nvar enableManualEntityRecycling = (world) => {\n  world[$manualEntityRecycling] = true;\n};\nvar resetWorld = (world, size = getGlobalSize()) => {\n  world[$size] = size;\n  if (world[$entityArray])\n    world[$entityArray].forEach((eid) => removeEntity(world, eid));\n  world[$entityMasks] = [new Uint32Array(size)];\n  world[$entityComponents] = /* @__PURE__ */ new Map();\n  world[$archetypes] = [];\n  world[$entitySparseSet] = SparseSet();\n  world[$entityArray] = world[$entitySparseSet].dense;\n  world[$bitflag] = 1;\n  world[$componentMap] = /* @__PURE__ */ new Map();\n  world[$queryMap] = /* @__PURE__ */ new Map();\n  world[$queries] = /* @__PURE__ */ new Set();\n  world[$notQueries] = /* @__PURE__ */ new Set();\n  world[$dirtyQueries] = /* @__PURE__ */ new Set();\n  world[$localEntities] = /* @__PURE__ */ new Map();\n  world[$localEntityLookup] = /* @__PURE__ */ new Map();\n  world[$manualEntityRecycling] = false;\n  return world;\n};\nvar deleteWorld = (world) => {\n  Object.getOwnPropertySymbols(world).forEach(($) => {\n    delete world[$];\n  });\n  Object.keys(world).forEach((key) => {\n    delete world[key];\n  });\n  worlds.splice(worlds.indexOf(world), 1);\n};\nvar getWorldComponents = (world) => Array.from(world[$componentMap].keys());\nvar getAllEntities = (world) => world[$entitySparseSet].dense.slice(0);\n\n// src/System.js\nvar defineSystem = (update) => (world, ...args) => {\n  update(world, ...args);\n  return world;\n};\n\n// src/index.js\nvar pipe = (...fns) => (input) => {\n  let tmp = input;\n  for (let i = 0; i < fns.length; i++) {\n    const fn = fns[i];\n    tmp = fn(tmp);\n  }\n  return tmp;\n};\nvar Types = TYPES_ENUM;\nmodule.exports = __toCommonJS(src_exports);\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  Changed,\n  DESERIALIZE_MODE,\n  Not,\n  Types,\n  addComponent,\n  addEntity,\n  commitRemovals,\n  createWorld,\n  defineComponent,\n  defineDeserializer,\n  defineQuery,\n  defineSerializer,\n  defineSystem,\n  deleteWorld,\n  enableManualEntityRecycling,\n  enterQuery,\n  entityExists,\n  exitQuery,\n  flushRemovedEntities,\n  getAllEntities,\n  getEntityComponents,\n  getWorldComponents,\n  hasComponent,\n  parentArray,\n  pipe,\n  registerComponent,\n  registerComponents,\n  removeComponent,\n  removeEntity,\n  removeQuery,\n  resetChangedQuery,\n  resetGlobals,\n  resetWorld,\n  setDefaultSize,\n  setRemovedRecycleThreshold\n});\n//# sourceMappingURL=index.cjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.b = new URL(\"./\", import.meta.url);\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no install chunk\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no external install chunk\n\n// no on chunks loaded","__webpack_require__.nc = undefined;","/*\n * anime.js v3.0.0\n * (c) 2019 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar hexRegex = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\nvar rgbPrefixRegex = /^rgb/;\nvar hslRegex = /^hsl/;\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return hexRegex.test(a); },\n  rgb: function (a) { return rgbPrefixRegex.test(a); },\n  hsl: function (a) { return hslRegex.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nvar easingFunctionRegex = /\\(([^)]+)\\)/;\n\nfunction parseEasingParameters(string) {\n  var match = easingFunctionRegex.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright © 2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t :\n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = {\n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  for (var coords in curves) {\n    for (var i = 0, len = curves[coords].length; i < len; i++) {\n      eases['ease'+coords+names[i]] = curves[coords][i];\n    }\n  }\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nvar auxArrayFilter = [];\n\nfunction filterArray(arr, callback) {\n  var result = auxArrayFilter;\n\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n\n  // arr turns into the auxArray and we return the previously aux array.\n  auxArrayFilter = arr;\n  auxArrayFilter.length = 0;\n  return result;\n}\n\nfunction flattenArray (arr, result) {\n  if (!result) { result = []; }\n  for (var i = 0, length = arr.length; i < length; i++) {\n    var value = arr[i];\n    if (Array.isArray(value)) {\n      flattenArray(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nvar rgbRegex = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g;\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = rgbRegex.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nvar hexToRgbaHexRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nvar hexToRgbaRgbRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\nfunction hexToRgba(hexValue) {\n  var hex = hexValue.replace(hexToRgbaHexRegex, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = hexToRgbaRgbRegex.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nvar hslToRgbaHsl1Regex = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\nvar hslToRgbaHsl2Regex = /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g;\n\nfunction hslToRgba(hslValue) {\n  var hsl = hslToRgbaHsl1Regex.exec(hslValue) || hslToRgbaHsl2Regex.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nvar unitRegex = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;\n\nfunction getUnit(val) {\n  var split = unitRegex.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nvar transformRegex = /(\\w+)\\(([^)]*)\\)/g;\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var transforms = new Map();\n  var m; while (m = transformRegex.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nvar operatorRegex = /^(\\*=|\\+=|-=)/;\n\nfunction getRelativeValue(to, from) {\n  var operator = operatorRegex.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nvar whitespaceRegex = /\\s/g;\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !whitespaceRegex.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')},\n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nvar valueRegex = /-?\\d*\\.?\\d+/g;\n\nfunction decomposeValue(val, unit) {\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(valueRegex) ? value.match(valueRegex).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(valueRegex) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nvar springRegex = /^spring/;\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (springRegex.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n\n  for (var i = 0, len = animatables.length; i < len; i++) {\n    var animatable = animatables[i];\n\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  }\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() {\n    raf = requestAnimationFrame(step);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(t);\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = cancelAnimationFrame(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    for (var i = 0, len = activeInstances.length; i < len; i++) {\n      activeInstance[i].pause();\n    }\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    for (var i$1 = 0, len$1 = pausedInstances.length; i$1 < len$1; i$1++) {\n      pausedInstances[i$1].play();\n    }\n  }\n}\n\ndocument.addEventListener('visibilitychange', handleVisibilityChange);\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise() {\n    return window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n  }\n\n  var promise = makePromise();\n\n  var instance = createNewInstance(params);\n\n  function toggleInstanceDirection() {\n    instance.reversed = !instance.reversed;\n    for (var i = 0, len = children.length; i < len; i++) {\n      children[i].reversed = instance.reversed;\n    }\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if ('Promise' in window) {\n            resolve();\n            promise = makePromise();\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.finished = promise;\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.0';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_three__;","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tColorManagement,\n\tFileLoader,\n\tLoader,\n\tLinearSRGBColorSpace,\n\tSRGBColorSpace\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\n\tparse( buffer, onLoad, onError = ()=>{} ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace, onError ).catch( onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace, onError = () => {} ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback ).catch( onError );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i );\n\t\t\tColorManagement.toWorkingColorSpace( _color, SRGBColorSpace );\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * @param  {Array<BufferGeometry>} geometries\n * @param  {Boolean} useGroups\n * @return {BufferGeometry}\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {BufferAttribute}\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferAttribute} attribute\n * @return {BufferAttribute}\n */\nexport function deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * @param {Array<BufferAttribute>} attributes\n * @return {Array<InterleavedBufferAttribute>}\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n// returns a new, non-interleaved version of the provided attribute\nexport function deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n// deinterleaves all attributes on the geometry\nexport function deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @return {number}\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} tolerance\n * @return {BufferGeometry}\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new attr.constructor(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\tif ( morphAttributes ) {\n\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\n\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newArray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttributes ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n * Helpful for Raytracing or Decals.\n * @param {Mesh | Line | Points} object An instance of Mesh, Line or Points.\n * @return {Object} An Object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry\n * @param {number} [creaseAngle]\n * @return {BufferGeometry}\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeAttributes,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: AVIF required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image.\n\t\t\t\timage.src = 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=';\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n *\n * @param {Object<String, Material>} cache\n * @return {Material}\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = - 1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t *\n\t * @param {Object} cache\n\t * @param {Object3D} index\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/**\n\t * Returns a reference to a shared resource, cloning it if necessary.\n\t *\n\t * @param {Object} cache\n\t * @param {Number} index\n\t * @param {Object} object\n\t * @return {Object}\n\t */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t *\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @param {string} colorSpace\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * When Object3D instances are targeted by animation, they need unique names.\n\t *\n\t * @param {String} originalName\n\t * @return {String}\n\t */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.position:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\nexport { GLTFLoader };\n","/**\n * @author Deepkolos / https://github.com/deepkolos\n */\n\nexport class WorkerPool {\n\n\tconstructor( pool = 4 ) {\n\n\t\tthis.pool = pool;\n\t\tthis.queue = [];\n\t\tthis.workers = [];\n\t\tthis.workersResolve = [];\n\t\tthis.workerStatus = 0;\n\n\t}\n\n\t_initWorker( workerId ) {\n\n\t\tif ( ! this.workers[ workerId ] ) {\n\n\t\t\tconst worker = this.workerCreator();\n\t\t\tworker.addEventListener( 'message', this._onMessage.bind( this, workerId ) );\n\t\t\tthis.workers[ workerId ] = worker;\n\n\t\t}\n\n\t}\n\n\t_getIdleWorker() {\n\n\t\tfor ( let i = 0; i < this.pool; i ++ )\n\t\t\tif ( ! ( this.workerStatus & ( 1 << i ) ) ) return i;\n\n\t\treturn - 1;\n\n\t}\n\n\t_onMessage( workerId, msg ) {\n\n\t\tconst resolve = this.workersResolve[ workerId ];\n\t\tresolve && resolve( msg );\n\n\t\tif ( this.queue.length ) {\n\n\t\t\tconst { resolve, msg, transfer } = this.queue.shift();\n\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t} else {\n\n\t\t\tthis.workerStatus ^= 1 << workerId;\n\n\t\t}\n\n\t}\n\n\tsetWorkerCreator( workerCreator ) {\n\n\t\tthis.workerCreator = workerCreator;\n\n\t}\n\n\tsetWorkerLimit( pool ) {\n\n\t\tthis.pool = pool;\n\n\t}\n\n\tpostMessage( msg, transfer ) {\n\n\t\treturn new Promise( ( resolve ) => {\n\n\t\t\tconst workerId = this._getIdleWorker();\n\n\t\t\tif ( workerId !== - 1 ) {\n\n\t\t\t\tthis._initWorker( workerId );\n\t\t\t\tthis.workerStatus |= 1 << workerId;\n\t\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t\t} else {\n\n\t\t\t\tthis.queue.push( { resolve, msg, transfer } );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workers.forEach( ( worker ) => worker.terminate() );\n\t\tthis.workersResolve.length = 0;\n\t\tthis.workers.length = 0;\n\t\tthis.queue.length = 0;\n\t\tthis.workerStatus = 0;\n\n\t}\n\n}\n","const t=0,e=1,n=2,i=3,s=0,a=0,r=2,o=0,l=1,f=160,h=161,U=162,c=163,_=166,p=0,g=1,y=0,x=1,u=2,b=3,d=4,w=5,m=6,D=7,B=8,L=9,v=10,A=11,k=12,V=13,I=14,S=15,F=16,O=17,E=18,T=0,C=1,M=2,P=3,z=4,W=5,H=6,N=7,K=8,X=9,R=10,Y=11,j=0,q=1,G=2,J=13,Q=14,Z=15,$=128,tt=64,et=32,nt=16,it=0,st=1,at=2,rt=3,ot=4,lt=5,ft=6,ht=7,Ut=8,ct=9,_t=10,pt=13,gt=14,yt=15,xt=16,ut=17,bt=20,dt=21,wt=22,mt=23,Dt=24,Bt=27,Lt=28,vt=29,At=30,kt=31,Vt=34,It=35,St=36,Ft=37,Ot=38,Et=41,Tt=42,Ct=43,Mt=44,Pt=45,zt=48,Wt=49,Ht=50,Nt=58,Kt=59,Xt=62,Rt=63,Yt=64,jt=65,qt=68,Gt=69,Jt=70,Qt=71,Zt=74,$t=75,te=76,ee=77,ne=78,ie=81,se=82,ae=83,re=84,oe=85,le=88,fe=89,he=90,Ue=91,ce=92,_e=95,pe=96,ge=97,ye=98,xe=99,ue=100,be=101,de=102,we=103,me=104,De=105,Be=106,Le=107,ve=108,Ae=109,ke=110,Ve=111,Ie=112,Se=113,Fe=114,Oe=115,Ee=116,Te=117,Ce=118,Me=119,Pe=120,ze=121,We=122,He=123,Ne=124,Ke=125,Xe=126,Re=127,Ye=128,je=129,qe=130,Ge=131,Je=132,Qe=133,Ze=134,$e=135,tn=136,en=137,nn=138,sn=139,an=140,rn=141,on=142,ln=143,fn=144,hn=145,Un=146,cn=147,_n=148,pn=149,gn=150,yn=151,xn=152,un=153,bn=154,dn=155,wn=156,mn=157,Dn=158,Bn=159,Ln=160,vn=161,An=162,kn=163,Vn=164,In=165,Sn=166,Fn=167,On=168,En=169,Tn=170,Cn=171,Mn=172,Pn=173,zn=174,Wn=175,Hn=176,Nn=177,Kn=178,Xn=179,Rn=180,Yn=181,jn=182,qn=183,Gn=184,Jn=1000156007,Qn=1000156008,Zn=1000156009,$n=1000156010,ti=1000156011,ei=1000156017,ni=1000156018,ii=1000156019,si=1000156020,ai=1000156021,ri=1000054e3,oi=1000054001,li=1000054002,fi=1000054003,hi=1000054004,Ui=1000054005,ci=1000054006,_i=1000054007,pi=1000066e3,gi=1000066001,yi=1000066002,xi=1000066003,ui=1000066004,bi=1000066005,di=1000066006,wi=1000066007,mi=1000066008,Di=1000066009,Bi=1000066010,Li=1000066011,vi=1000066012,Ai=1000066013,ki=100034e4,Vi=1000340001;class Ii{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Si{constructor(t,e,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){void 0===e&&(e=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Fi=new Uint8Array([0]),Oi=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(t){return(new TextEncoder).encode(t)}function Ti(t){return(new TextDecoder).decode(t)}function Ci(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function Mi(t,e){return void 0===e&&(e=4),Math.ceil(t/e)*e-t}function Pi(t){const e=new Uint8Array(t.buffer,t.byteOffset,Oi.length);if(e[0]!==Oi[0]||e[1]!==Oi[1]||e[2]!==Oi[2]||e[3]!==Oi[3]||e[4]!==Oi[4]||e[5]!==Oi[5]||e[6]!==Oi[6]||e[7]!==Oi[7]||e[8]!==Oi[8]||e[9]!==Oi[9]||e[10]!==Oi[10]||e[11]!==Oi[11])throw new Error(\"Missing KTX 2.0 identifier.\");const n=new Ii,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Si(t,Oi.length,i,!0);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),f=s._nextUint32(),h=s._nextUint64(),U=s._nextUint64(),c=new Si(t,Oi.length+i,3*a*8,!0);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+c._nextUint64(),c._nextUint64()),uncompressedByteLength:c._nextUint64()});const _=new Si(t,r,o,!0),p={vendorId:_._skip(4)._nextUint16(),descriptorType:_._nextUint16(),versionNumber:_._nextUint16(),descriptorBlockSize:_._nextUint16(),colorModel:_._nextUint8(),colorPrimaries:_._nextUint8(),transferFunction:_._nextUint8(),flags:_._nextUint8(),texelBlockDimension:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],bytesPlane:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:_._nextUint16(),bitLength:_._nextUint8(),channelType:_._nextUint8(),samplePosition:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&e.channelType?(e.sampleLower=_._nextInt32(),e.sampleUpper=_._nextInt32()):(e.sampleLower=_._nextUint32(),e.sampleUpper=_._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const y=new Si(t,l,f,!0);for(;y._offset<f;){const t=y._nextUint32(),e=y._scan(t),i=Ti(e);if(n.keyValue[i]=y._nextUint8Array(t-e.byteLength-1),i.match(/^ktx/i)){const t=Ti(n.keyValue[i]);n.keyValue[i]=t.substring(0,t.lastIndexOf(\"\\0\"))}y._skip(t%4?4-t%4:0)}if(U<=0)return n;const x=new Si(t,h,U,!0),u=x._nextUint16(),b=x._nextUint16(),d=x._nextUint32(),w=x._nextUint32(),m=x._nextUint32(),D=x._nextUint32(),B=[];for(let t=0;t<a;t++)B.push({imageFlags:x._nextUint32(),rgbSliceByteOffset:x._nextUint32(),rgbSliceByteLength:x._nextUint32(),alphaSliceByteOffset:x._nextUint32(),alphaSliceByteLength:x._nextUint32()});const L=h+x._offset,v=L+d,A=v+w,k=A+m,V=new Uint8Array(t.buffer,t.byteOffset+L,d),I=new Uint8Array(t.buffer,t.byteOffset+v,w),S=new Uint8Array(t.buffer,t.byteOffset+A,m),F=new Uint8Array(t.buffer,t.byteOffset+k,D);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:B,endpointsData:V,selectorsData:I,tablesData:S,extendedData:F},n}const zi={keepWriter:!1};function Wi(t,e){void 0===e&&(e={}),e={...zi,...e};let n=new ArrayBuffer(0);if(t.globalData){const e=new ArrayBuffer(20+5*t.globalData.imageDescs.length*4),i=new DataView(e);i.setUint16(0,t.globalData.endpointCount,!0),i.setUint16(2,t.globalData.selectorCount,!0),i.setUint32(4,t.globalData.endpointsData.byteLength,!0),i.setUint32(8,t.globalData.selectorsData.byteLength,!0),i.setUint32(12,t.globalData.tablesData.byteLength,!0),i.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let e=0;e<t.globalData.imageDescs.length;e++){const n=t.globalData.imageDescs[e];i.setUint32(20+5*e*4+0,n.imageFlags,!0),i.setUint32(20+5*e*4+4,n.rgbSliceByteOffset,!0),i.setUint32(20+5*e*4+8,n.rgbSliceByteLength,!0),i.setUint32(20+5*e*4+12,n.alphaSliceByteOffset,!0),i.setUint32(20+5*e*4+16,n.alphaSliceByteLength,!0)}n=Ci([e,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}const i=[];let s=t.keyValue;e.keepWriter||(s={...t.keyValue,KTXwriter:\"KTX-Parse v0.7.1\"});for(const t in s){const e=s[t],n=Ei(t),a=\"string\"==typeof e?Ci([Ei(e),Fi]):e,r=n.byteLength+1+a.byteLength,o=Mi(r,4);i.push(Ci([new Uint32Array([r]),n,Fi,a,new Uint8Array(o).fill(0)]))}const a=Ci(i);if(1!==t.dataFormatDescriptor.length||0!==t.dataFormatDescriptor[0].descriptorType)throw new Error(\"Only BASICFORMAT Data Format Descriptor output supported.\");const r=t.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*r.samples.length),l=new DataView(o),f=24+16*r.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,r.vendorId,!0),l.setUint16(6,r.descriptorType,!0),l.setUint16(8,r.versionNumber,!0),l.setUint16(10,f,!0),l.setUint8(12,r.colorModel),l.setUint8(13,r.colorPrimaries),l.setUint8(14,r.transferFunction),l.setUint8(15,r.flags),!Array.isArray(r.texelBlockDimension))throw new Error(\"texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.\");l.setUint8(16,r.texelBlockDimension[0]),l.setUint8(17,r.texelBlockDimension[1]),l.setUint8(18,r.texelBlockDimension[2]),l.setUint8(19,r.texelBlockDimension[3]);for(let t=0;t<8;t++)l.setUint8(20+t,r.bytesPlane[t]);for(let t=0;t<r.samples.length;t++){const e=r.samples[t],n=28+16*t;if(e.channelID)throw new Error(\"channelID has been renamed to channelType.\");l.setUint16(n+0,e.bitOffset,!0),l.setUint8(n+2,e.bitLength),l.setUint8(n+3,e.channelType),l.setUint8(n+4,e.samplePosition[0]),l.setUint8(n+5,e.samplePosition[1]),l.setUint8(n+6,e.samplePosition[2]),l.setUint8(n+7,e.samplePosition[3]),64&e.channelType?(l.setInt32(n+8,e.sampleLower,!0),l.setInt32(n+12,e.sampleUpper,!0)):(l.setUint32(n+8,e.sampleLower,!0),l.setUint32(n+12,e.sampleUpper,!0))}const h=Oi.length+68+3*t.levels.length*8,U=h+o.byteLength;let c=n.byteLength>0?U+a.byteLength:0;c%8&&(c+=8-c%8);const _=[],p=new DataView(new ArrayBuffer(3*t.levels.length*8)),g=new Uint32Array(t.levels.length);let y=0;0===t.supercompressionScheme&&(y=function(t,e){const n=Math.max(t,4),i=Math.min(t,4);let s=n;for(;s%i!=0;)s+=n;return s}(function(t){return t.levels[0].levelData.byteLength/function(t,e){let n=1;const i=[t.pixelWidth,t.pixelHeight,t.pixelDepth],s=function(t){const[e,n,i]=t.dataFormatDescriptor[0].texelBlockDimension;return[e+1,n+1,i+1]}(t);for(let t=0;t<3;t++)if(i[t]>0){const e=Math.ceil(Math.floor(i[t]*Math.pow(2,-0))/s[t]);n*=Math.max(1,e)}return t.layerCount>0&&(n*=t.layerCount),t.faceCount>0&&(n*=t.faceCount),n}(t)}(t)));let x=(c||U+a.byteLength)+n.byteLength;for(let e=t.levels.length-1;e>=0;e--){if(x%y){const t=Mi(x,y);_.push(new Uint8Array(t)),x+=t}const n=t.levels[e];_.push(n.levelData),g[e]=x,x+=n.levelData.byteLength}for(let e=0;e<t.levels.length;e++){const n=t.levels[e];p.setBigUint64(24*e+0,BigInt(g[e]),!0),p.setBigUint64(24*e+8,BigInt(n.levelData.byteLength),!0),p.setBigUint64(24*e+16,BigInt(n.uncompressedByteLength),!0)}const u=new ArrayBuffer(68),b=new DataView(u);return b.setUint32(0,t.vkFormat,!0),b.setUint32(4,t.typeSize,!0),b.setUint32(8,t.pixelWidth,!0),b.setUint32(12,t.pixelHeight,!0),b.setUint32(16,t.pixelDepth,!0),b.setUint32(20,t.layerCount,!0),b.setUint32(24,t.faceCount,!0),b.setUint32(28,t.levels.length,!0),b.setUint32(32,t.supercompressionScheme,!0),b.setUint32(36,h,!0),b.setUint32(40,o.byteLength,!0),b.setUint32(44,U,!0),b.setUint32(48,a.byteLength,!0),b.setBigUint64(52,BigInt(n.byteLength>0?c:0),!0),b.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(Ci([new Uint8Array(Oi).buffer,u,p.buffer,o,a,c>0?new ArrayBuffer(c-(U+a.byteLength)):new ArrayBuffer(0),n,..._]))}export{Z as KHR_DF_CHANNEL_RGBSDA_ALPHA,G as KHR_DF_CHANNEL_RGBSDA_BLUE,Q as KHR_DF_CHANNEL_RGBSDA_DEPTH,q as KHR_DF_CHANNEL_RGBSDA_GREEN,j as KHR_DF_CHANNEL_RGBSDA_RED,J as KHR_DF_CHANNEL_RGBSDA_STENCIL,g as KHR_DF_FLAG_ALPHA_PREMULTIPLIED,p as KHR_DF_FLAG_ALPHA_STRAIGHT,s as KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,U as KHR_DF_MODEL_ASTC,f as KHR_DF_MODEL_ETC1,c as KHR_DF_MODEL_ETC1S,h as KHR_DF_MODEL_ETC2,l as KHR_DF_MODEL_RGBSDA,_ as KHR_DF_MODEL_UASTC,o as KHR_DF_MODEL_UNSPECIFIED,H as KHR_DF_PRIMARIES_ACES,N as KHR_DF_PRIMARIES_ACESCC,Y as KHR_DF_PRIMARIES_ADOBERGB,z as KHR_DF_PRIMARIES_BT2020,M as KHR_DF_PRIMARIES_BT601_EBU,P as KHR_DF_PRIMARIES_BT601_SMPTE,C as KHR_DF_PRIMARIES_BT709,W as KHR_DF_PRIMARIES_CIEXYZ,R as KHR_DF_PRIMARIES_DISPLAYP3,K as KHR_DF_PRIMARIES_NTSC1953,X as KHR_DF_PRIMARIES_PAL525,T as KHR_DF_PRIMARIES_UNSPECIFIED,et as KHR_DF_SAMPLE_DATATYPE_EXPONENT,$ as KHR_DF_SAMPLE_DATATYPE_FLOAT,nt as KHR_DF_SAMPLE_DATATYPE_LINEAR,tt as KHR_DF_SAMPLE_DATATYPE_SIGNED,F as KHR_DF_TRANSFER_ACESCC,O as KHR_DF_TRANSFER_ACESCCT,E as KHR_DF_TRANSFER_ADOBERGB,D as KHR_DF_TRANSFER_BT1886,k as KHR_DF_TRANSFER_DCIP3,L as KHR_DF_TRANSFER_HLG_EOTF,B as KHR_DF_TRANSFER_HLG_OETF,b as KHR_DF_TRANSFER_ITU,x as KHR_DF_TRANSFER_LINEAR,d as KHR_DF_TRANSFER_NTSC,I as KHR_DF_TRANSFER_PAL625_EOTF,V as KHR_DF_TRANSFER_PAL_OETF,v as KHR_DF_TRANSFER_PQ_EOTF,A as KHR_DF_TRANSFER_PQ_OETF,w as KHR_DF_TRANSFER_SLOG,m as KHR_DF_TRANSFER_SLOG2,u as KHR_DF_TRANSFER_SRGB,S as KHR_DF_TRANSFER_ST240,y as KHR_DF_TRANSFER_UNSPECIFIED,a as KHR_DF_VENDORID_KHRONOS,r as KHR_DF_VERSION,e as KHR_SUPERCOMPRESSION_BASISLZ,t as KHR_SUPERCOMPRESSION_NONE,i as KHR_SUPERCOMPRESSION_ZLIB,n as KHR_SUPERCOMPRESSION_ZSTD,Ii as KTX2Container,Ut as VK_FORMAT_A1R5G5B5_UNORM_PACK16,Gt as VK_FORMAT_A2B10G10R10_SINT_PACK32,jt as VK_FORMAT_A2B10G10R10_SNORM_PACK32,qt as VK_FORMAT_A2B10G10R10_UINT_PACK32,Yt as VK_FORMAT_A2B10G10R10_UNORM_PACK32,Rt as VK_FORMAT_A2R10G10B10_SINT_PACK32,Kt as VK_FORMAT_A2R10G10B10_SNORM_PACK32,Xt as VK_FORMAT_A2R10G10B10_UINT_PACK32,Nt as VK_FORMAT_A2R10G10B10_UNORM_PACK32,Vi as VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT,ki as VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT,Li as VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT,Rn as VK_FORMAT_ASTC_10x10_SRGB_BLOCK,Xn as VK_FORMAT_ASTC_10x10_UNORM_BLOCK,mi as VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT,zn as VK_FORMAT_ASTC_10x5_SRGB_BLOCK,Pn as VK_FORMAT_ASTC_10x5_UNORM_BLOCK,Di as VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT,Hn as VK_FORMAT_ASTC_10x6_SRGB_BLOCK,Wn as VK_FORMAT_ASTC_10x6_UNORM_BLOCK,Bi as VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT,Kn as VK_FORMAT_ASTC_10x8_SRGB_BLOCK,Nn as VK_FORMAT_ASTC_10x8_UNORM_BLOCK,vi as VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT,jn as VK_FORMAT_ASTC_12x10_SRGB_BLOCK,Yn as VK_FORMAT_ASTC_12x10_UNORM_BLOCK,Ai as VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT,Gn as VK_FORMAT_ASTC_12x12_SRGB_BLOCK,qn as VK_FORMAT_ASTC_12x12_UNORM_BLOCK,pi as VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,Dn as VK_FORMAT_ASTC_4x4_SRGB_BLOCK,mn as VK_FORMAT_ASTC_4x4_UNORM_BLOCK,gi as VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT,Ln as VK_FORMAT_ASTC_5x4_SRGB_BLOCK,Bn as VK_FORMAT_ASTC_5x4_UNORM_BLOCK,yi as VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT,An as VK_FORMAT_ASTC_5x5_SRGB_BLOCK,vn as VK_FORMAT_ASTC_5x5_UNORM_BLOCK,xi as VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT,Vn as VK_FORMAT_ASTC_6x5_SRGB_BLOCK,kn as VK_FORMAT_ASTC_6x5_UNORM_BLOCK,ui as VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT,Sn as VK_FORMAT_ASTC_6x6_SRGB_BLOCK,In as VK_FORMAT_ASTC_6x6_UNORM_BLOCK,bi as VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT,On as VK_FORMAT_ASTC_8x5_SRGB_BLOCK,Fn as VK_FORMAT_ASTC_8x5_UNORM_BLOCK,di as VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT,Tn as VK_FORMAT_ASTC_8x6_SRGB_BLOCK,En as VK_FORMAT_ASTC_8x6_UNORM_BLOCK,wi as VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT,Mn as VK_FORMAT_ASTC_8x8_SRGB_BLOCK,Cn as VK_FORMAT_ASTC_8x8_UNORM_BLOCK,We as VK_FORMAT_B10G11R11_UFLOAT_PACK32,ti as VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16,ai as VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16,rt as VK_FORMAT_B4G4R4A4_UNORM_PACK16,ht as VK_FORMAT_B5G5R5A1_UNORM_PACK16,lt as VK_FORMAT_B5G6R5_UNORM_PACK16,Wt as VK_FORMAT_B8G8R8A8_SINT,Pt as VK_FORMAT_B8G8R8A8_SNORM,Ht as VK_FORMAT_B8G8R8A8_SRGB,zt as VK_FORMAT_B8G8R8A8_UINT,Mt as VK_FORMAT_B8G8R8A8_UNORM,It as VK_FORMAT_B8G8R8_SINT,kt as VK_FORMAT_B8G8R8_SNORM,St as VK_FORMAT_B8G8R8_SRGB,Vt as VK_FORMAT_B8G8R8_UINT,At as VK_FORMAT_B8G8R8_UNORM,Ze as VK_FORMAT_BC1_RGBA_SRGB_BLOCK,Qe as VK_FORMAT_BC1_RGBA_UNORM_BLOCK,Je as VK_FORMAT_BC1_RGB_SRGB_BLOCK,Ge as VK_FORMAT_BC1_RGB_UNORM_BLOCK,tn as VK_FORMAT_BC2_SRGB_BLOCK,$e as VK_FORMAT_BC2_UNORM_BLOCK,nn as VK_FORMAT_BC3_SRGB_BLOCK,en as VK_FORMAT_BC3_UNORM_BLOCK,an as VK_FORMAT_BC4_SNORM_BLOCK,sn as VK_FORMAT_BC4_UNORM_BLOCK,on as VK_FORMAT_BC5_SNORM_BLOCK,rn as VK_FORMAT_BC5_UNORM_BLOCK,fn as VK_FORMAT_BC6H_SFLOAT_BLOCK,ln as VK_FORMAT_BC6H_UFLOAT_BLOCK,Un as VK_FORMAT_BC7_SRGB_BLOCK,hn as VK_FORMAT_BC7_UNORM_BLOCK,Ne as VK_FORMAT_D16_UNORM,Ye as VK_FORMAT_D16_UNORM_S8_UINT,je as VK_FORMAT_D24_UNORM_S8_UINT,Xe as VK_FORMAT_D32_SFLOAT,qe as VK_FORMAT_D32_SFLOAT_S8_UINT,He as VK_FORMAT_E5B9G9R9_UFLOAT_PACK32,wn as VK_FORMAT_EAC_R11G11_SNORM_BLOCK,dn as VK_FORMAT_EAC_R11G11_UNORM_BLOCK,bn as VK_FORMAT_EAC_R11_SNORM_BLOCK,un as VK_FORMAT_EAC_R11_UNORM_BLOCK,gn as VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK,pn as VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK,xn as VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,yn as VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK,_n as VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,cn as VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK,$n as VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16,si as VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16,hi as VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG,ri as VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG,Ui as VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG,oi as VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG,ci as VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG,li as VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG,_i as VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG,fi as VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG,Zn as VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16,Qn as VK_FORMAT_R10X6G10X6_UNORM_2PACK16,Jn as VK_FORMAT_R10X6_UNORM_PACK16,ii as VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16,ni as VK_FORMAT_R12X4G12X4_UNORM_2PACK16,ei as VK_FORMAT_R12X4_UNORM_PACK16,ge as VK_FORMAT_R16G16B16A16_SFLOAT,pe as VK_FORMAT_R16G16B16A16_SINT,ce as VK_FORMAT_R16G16B16A16_SNORM,_e as VK_FORMAT_R16G16B16A16_UINT,Ue as VK_FORMAT_R16G16B16A16_UNORM,he as VK_FORMAT_R16G16B16_SFLOAT,fe as VK_FORMAT_R16G16B16_SINT,oe as VK_FORMAT_R16G16B16_SNORM,le as VK_FORMAT_R16G16B16_UINT,re as VK_FORMAT_R16G16B16_UNORM,ae as VK_FORMAT_R16G16_SFLOAT,se as VK_FORMAT_R16G16_SINT,ne as VK_FORMAT_R16G16_SNORM,ie as VK_FORMAT_R16G16_UINT,ee as VK_FORMAT_R16G16_UNORM,te as VK_FORMAT_R16_SFLOAT,$t as VK_FORMAT_R16_SINT,Qt as VK_FORMAT_R16_SNORM,Zt as VK_FORMAT_R16_UINT,Jt as VK_FORMAT_R16_UNORM,Ae as VK_FORMAT_R32G32B32A32_SFLOAT,ve as VK_FORMAT_R32G32B32A32_SINT,Le as VK_FORMAT_R32G32B32A32_UINT,Be as VK_FORMAT_R32G32B32_SFLOAT,De as VK_FORMAT_R32G32B32_SINT,me as VK_FORMAT_R32G32B32_UINT,we as VK_FORMAT_R32G32_SFLOAT,de as VK_FORMAT_R32G32_SINT,be as VK_FORMAT_R32G32_UINT,ue as VK_FORMAT_R32_SFLOAT,xe as VK_FORMAT_R32_SINT,ye as VK_FORMAT_R32_UINT,at as VK_FORMAT_R4G4B4A4_UNORM_PACK16,st as VK_FORMAT_R4G4_UNORM_PACK8,ft as VK_FORMAT_R5G5B5A1_UNORM_PACK16,ot as VK_FORMAT_R5G6B5_UNORM_PACK16,ze as VK_FORMAT_R64G64B64A64_SFLOAT,Pe as VK_FORMAT_R64G64B64A64_SINT,Me as VK_FORMAT_R64G64B64A64_UINT,Ce as VK_FORMAT_R64G64B64_SFLOAT,Te as VK_FORMAT_R64G64B64_SINT,Ee as VK_FORMAT_R64G64B64_UINT,Oe as VK_FORMAT_R64G64_SFLOAT,Fe as VK_FORMAT_R64G64_SINT,Se as VK_FORMAT_R64G64_UINT,Ie as VK_FORMAT_R64_SFLOAT,Ve as VK_FORMAT_R64_SINT,ke as VK_FORMAT_R64_UINT,Tt as VK_FORMAT_R8G8B8A8_SINT,Ot as VK_FORMAT_R8G8B8A8_SNORM,Ct as VK_FORMAT_R8G8B8A8_SRGB,Et as VK_FORMAT_R8G8B8A8_UINT,Ft as VK_FORMAT_R8G8B8A8_UNORM,Lt as VK_FORMAT_R8G8B8_SINT,Dt as VK_FORMAT_R8G8B8_SNORM,vt as VK_FORMAT_R8G8B8_SRGB,Bt as VK_FORMAT_R8G8B8_UINT,mt as VK_FORMAT_R8G8B8_UNORM,dt as VK_FORMAT_R8G8_SINT,ut as VK_FORMAT_R8G8_SNORM,wt as VK_FORMAT_R8G8_SRGB,bt as VK_FORMAT_R8G8_UINT,xt as VK_FORMAT_R8G8_UNORM,gt as VK_FORMAT_R8_SINT,_t as VK_FORMAT_R8_SNORM,yt as VK_FORMAT_R8_SRGB,pt as VK_FORMAT_R8_UINT,ct as VK_FORMAT_R8_UNORM,Re as VK_FORMAT_S8_UINT,it as VK_FORMAT_UNDEFINED,Ke as VK_FORMAT_X8_D24_UNORM_PACK32,Pi as read,Wi as write};\n","let A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,\"base64\"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0)}decode(A,g=0){if(!I)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\";export{Q as ZSTDDecoder};\n","/**\n * Loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader\n * supports Basis Universal GPU textures, which can be quickly transcoded to\n * a wide variety of GPU texture compression formats, as well as some\n * uncompressed DataTexture and Data3DTexture formats.\n *\n * References:\n * - KTX: http://github.khronos.org/KTX-Specification/\n * - DFD: https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor\n * - BasisU HDR: https://github.com/BinomialLLC/basis_universal/wiki/UASTC-HDR-Texture-Specification-v1.0\n */\n\nimport {\n\tCompressedTexture,\n\tCompressedArrayTexture,\n\tCompressedCubeTexture,\n\tData3DTexture,\n\tDataTexture,\n\tFileLoader,\n\tFloatType,\n\tHalfFloatType,\n\tNoColorSpace,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tRedFormat,\n\tRGB_BPTC_UNSIGNED_Format,\n\tRGB_ETC1_Format,\n\tRGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format,\n\tRGBA_ASTC_4x4_Format,\n\tRGBA_ASTC_6x6_Format,\n\tRGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format,\n\tRGBA_S3TC_DXT1_Format,\n\tRGBAFormat,\n\tRGFormat,\n\tSRGBColorSpace,\n\tUnsignedByteType,\n} from 'three';\nimport { WorkerPool } from '../utils/WorkerPool.js';\nimport {\n\tread,\n\tKHR_DF_FLAG_ALPHA_PREMULTIPLIED,\n\tKHR_DF_TRANSFER_SRGB,\n\tKHR_SUPERCOMPRESSION_NONE,\n\tKHR_SUPERCOMPRESSION_ZSTD,\n\tVK_FORMAT_UNDEFINED,\n\tVK_FORMAT_R16_SFLOAT,\n\tVK_FORMAT_R16G16_SFLOAT,\n\tVK_FORMAT_R16G16B16A16_SFLOAT,\n\tVK_FORMAT_R32_SFLOAT,\n\tVK_FORMAT_R32G32_SFLOAT,\n\tVK_FORMAT_R32G32B32A32_SFLOAT,\n\tVK_FORMAT_R8_SRGB,\n\tVK_FORMAT_R8_UNORM,\n\tVK_FORMAT_R8G8_SRGB,\n\tVK_FORMAT_R8G8_UNORM,\n\tVK_FORMAT_R8G8B8A8_SRGB,\n\tVK_FORMAT_R8G8B8A8_UNORM,\n\tVK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,\n\tVK_FORMAT_ASTC_6x6_SRGB_BLOCK,\n\tVK_FORMAT_ASTC_6x6_UNORM_BLOCK,\n\tKHR_DF_PRIMARIES_UNSPECIFIED,\n\tKHR_DF_PRIMARIES_BT709,\n\tKHR_DF_PRIMARIES_DISPLAYP3\n} from '../libs/ktx-parse.module.js';\nimport { ZSTDDecoder } from '../libs/zstddec.module.js';\nimport { DisplayP3ColorSpace, LinearDisplayP3ColorSpace } from '../math/ColorSpaces.js';\n\nconst _taskCache = new WeakMap();\n\nlet _activeLoaders = 0;\n\nlet _zstd;\n\nclass KTX2Loader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.transcoderPath = '';\n\t\tthis.transcoderBinary = null;\n\t\tthis.transcoderPending = null;\n\n\t\tthis.workerPool = new WorkerPool();\n\t\tthis.workerSourceURL = '';\n\t\tthis.workerConfig = null;\n\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\n\n\t\t\tconsole.warn(\n\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\n\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tsetTranscoderPath( path ) {\n\n\t\tthis.transcoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( num ) {\n\n\t\tthis.workerPool.setWorkerLimit( num );\n\n\t\treturn this;\n\n\t}\n\n\tasync detectSupportAsync( renderer ) {\n\n\t\tthis.workerConfig = {\n\t\t\tastcSupported: await renderer.hasFeatureAsync( 'texture-compression-astc' ),\n\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\tetc1Supported: await renderer.hasFeatureAsync( 'texture-compression-etc1' ),\n\t\t\tetc2Supported: await renderer.hasFeatureAsync( 'texture-compression-etc2' ),\n\t\t\tdxtSupported: await renderer.hasFeatureAsync( 'texture-compression-bc' ),\n\t\t\tbptcSupported: await renderer.hasFeatureAsync( 'texture-compression-bptc' ),\n\t\t\tpvrtcSupported: await renderer.hasFeatureAsync( 'texture-compression-pvrtc' )\n\t\t};\n\n\t\treturn this;\n\n\t}\n\n\tdetectSupport( renderer ) {\n\n\t\tif ( renderer.isWebGPURenderer === true ) {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.hasFeature( 'texture-compression-astc' ),\n\t\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\t\tetc1Supported: renderer.hasFeature( 'texture-compression-etc1' ),\n\t\t\t\tetc2Supported: renderer.hasFeature( 'texture-compression-etc2' ),\n\t\t\t\tdxtSupported: renderer.hasFeature( 'texture-compression-bc' ),\n\t\t\t\tbptcSupported: renderer.hasFeature( 'texture-compression-bptc' ),\n\t\t\t\tpvrtcSupported: renderer.hasFeature( 'texture-compression-pvrtc' )\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\n\t\t\t\tastcHDRSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' )\n\t\t\t\t\t&& renderer.extensions.get( 'WEBGL_compressed_texture_astc' ).getSupportedProfiles().includes( 'hdr' ),\n\t\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\n\t\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\n\t\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\n\t\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\n\t\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\n\t\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\n\t\t\t};\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinit() {\n\n\t\tif ( ! this.transcoderPending ) {\n\n\t\t\t// Load transcoder wrapper.\n\t\t\tconst jsLoader = new FileLoader( this.manager );\n\t\t\tjsLoader.setPath( this.transcoderPath );\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst jsContent = jsLoader.loadAsync( 'basis_transcoder.js' );\n\n\t\t\t// Load transcoder WASM binary.\n\t\t\tconst binaryLoader = new FileLoader( this.manager );\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst binaryContent = binaryLoader.loadAsync( 'basis_transcoder.wasm' );\n\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\n\n\t\t\t\t\tconst fn = KTX2Loader.BasisWorker.toString();\n\n\t\t\t\t\tconst body = [\n\t\t\t\t\t\t'/* constants */',\n\t\t\t\t\t\t'let _EngineFormat = ' + JSON.stringify( KTX2Loader.EngineFormat ),\n\t\t\t\t\t\t'let _EngineType = ' + JSON.stringify( KTX2Loader.EngineType ),\n\t\t\t\t\t\t'let _TranscoderFormat = ' + JSON.stringify( KTX2Loader.TranscoderFormat ),\n\t\t\t\t\t\t'let _BasisFormat = ' + JSON.stringify( KTX2Loader.BasisFormat ),\n\t\t\t\t\t\t'/* basis_transcoder.js */',\n\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t\t].join( '\\n' );\n\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\n\n\t\t\t\t\tthis.workerPool.setWorkerCreator( () => {\n\n\t\t\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\t\t\t\t\t\tconst transcoderBinary = this.transcoderBinary.slice( 0 );\n\n\t\t\t\t\t\tworker.postMessage( { type: 'init', config: this.workerConfig, transcoderBinary }, [ transcoderBinary ] );\n\n\t\t\t\t\t\treturn worker;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\tif ( _activeLoaders > 0 ) {\n\n\t\t\t\t// Each instance loads a transcoder and allocates workers, increasing network and memory cost.\n\n\t\t\t\tconsole.warn(\n\n\t\t\t\t\t'THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues.'\n\t\t\t\t\t+ ' Use a single KTX2Loader instance, or call .dispose() on old instances.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_activeLoaders ++;\n\n\t\t}\n\n\t\treturn this.transcoderPending;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( buffer, onLoad, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\n\n\t\t}\n\n\t\tthis._createTexture( buffer )\n\t\t\t.then( ( texture ) => onLoad ? onLoad( texture ) : null )\n\t\t\t.catch( onError );\n\n\t}\n\n\t_createTextureFrom( transcodeResult, container ) {\n\n\t\tconst { type: messageType, error, data: { faces, width, height, format, type, dfdFlags } } = transcodeResult;\n\n\t\tif ( messageType === 'error' ) return Promise.reject( error );\n\n\t\tlet texture;\n\n\t\tif ( container.faceCount === 6 ) {\n\n\t\t\ttexture = new CompressedCubeTexture( faces, format, type );\n\n\t\t} else {\n\n\t\t\tconst mipmaps = faces[ 0 ].mipmaps;\n\n\t\t\ttexture = container.layerCount > 1\n\t\t\t\t? new CompressedArrayTexture( mipmaps, width, height, container.layerCount, format, type )\n\t\t\t\t: new CompressedTexture( mipmaps, width, height, format, type );\n\n\t\t}\n\n\t\ttexture.minFilter = faces[ 0 ].mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\t\ttexture.generateMipmaps = false;\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.colorSpace = parseColorSpace( container );\n\t\ttexture.premultiplyAlpha = !! ( dfdFlags & KHR_DF_FLAG_ALPHA_PREMULTIPLIED );\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * @param {ArrayBuffer} buffer\n\t * @param {object?} config\n\t * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\n\t */\n\tasync _createTexture( buffer, config = {} ) {\n\n\t\tconst container = read( new Uint8Array( buffer ) );\n\n\t\t// Basis UASTC HDR is a subset of ASTC, which can be transcoded efficiently\n\t\t// to BC6H. To detect whether a KTX2 file uses Basis UASTC HDR, or default\n\t\t// ASTC, inspect the DFD color model.\n\t\t//\n\t\t// Source: https://github.com/BinomialLLC/basis_universal/issues/381\n\t\tconst isBasisHDR = container.vkFormat === VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT\n\t\t\t&& container.dataFormatDescriptor[ 0 ].colorModel === 0xA7;\n\n\t\t// If the device supports ASTC, Basis UASTC HDR requires no transcoder.\n\t\tconst needsTranscoder = container.vkFormat === VK_FORMAT_UNDEFINED\n\t\t\t|| isBasisHDR && ! this.workerConfig.astcHDRSupported;\n\n\t\tif ( ! needsTranscoder ) {\n\n\t\t\treturn createRawTexture( container );\n\n\t\t}\n\n\t\t//\n\t\tconst taskConfig = config;\n\t\tconst texturePending = this.init().then( () => {\n\n\t\t\treturn this.workerPool.postMessage( { type: 'transcode', buffer, taskConfig: taskConfig }, [ buffer ] );\n\n\t\t} ).then( ( e ) => this._createTextureFrom( e.data, container ) );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, { promise: texturePending } );\n\n\t\treturn texturePending;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.workerPool.dispose();\n\t\tif ( this.workerSourceURL ) URL.revokeObjectURL( this.workerSourceURL );\n\n\t\t_activeLoaders --;\n\n\t\treturn this;\n\n\t}\n\n}\n\n\n/* CONSTANTS */\n\nKTX2Loader.BasisFormat = {\n\tETC1S: 0,\n\tUASTC: 1,\n\tUASTC_HDR: 2,\n};\n\n// Source: https://github.com/BinomialLLC/basis_universal/blob/master/webgl/texture_test/index.html\nKTX2Loader.TranscoderFormat = {\n\tETC1: 0,\n\tETC2: 1,\n\tBC1: 2,\n\tBC3: 3,\n\tBC4: 4,\n\tBC5: 5,\n\tBC7_M6_OPAQUE_ONLY: 6,\n\tBC7_M5: 7,\n\tPVRTC1_4_RGB: 8,\n\tPVRTC1_4_RGBA: 9,\n\tASTC_4x4: 10,\n\tATC_RGB: 11,\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\n\tRGBA32: 13,\n\tRGB565: 14,\n\tBGR565: 15,\n\tRGBA4444: 16,\n\tBC6H: 22,\n\tRGB_HALF: 24,\n\tRGBA_HALF: 25,\n};\n\nKTX2Loader.EngineFormat = {\n\tRGBAFormat: RGBAFormat,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGB_BPTC_UNSIGNED_Format: RGB_BPTC_UNSIGNED_Format,\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n};\n\nKTX2Loader.EngineType = {\n\tUnsignedByteType: UnsignedByteType,\n\tHalfFloatType: HalfFloatType,\n\tFloatType: FloatType,\n};\n\n/* WEB WORKER */\n\nKTX2Loader.BasisWorker = function () {\n\n\tlet config;\n\tlet transcoderPending;\n\tlet BasisModule;\n\n\tconst EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\tconst EngineType = _EngineType; // eslint-disable-line no-undef\n\tconst TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\tconst BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n\tself.addEventListener( 'message', function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tconfig = message.config;\n\t\t\t\tinit( message.transcoderBinary );\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\ttranscoderPending.then( () => {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} );\n\n\tfunction init( wasmBinary ) {\n\n\t\ttranscoderPending = new Promise( ( resolve ) => {\n\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\n\n\t\t} ).then( () => {\n\n\t\t\tBasisModule.initializeBasis();\n\n\t\t\tif ( BasisModule.KTX2File === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tfunction transcode( buffer ) {\n\n\t\tconst ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );\n\n\t\tfunction cleanup() {\n\n\t\t\tktx2File.close();\n\t\t\tktx2File.delete();\n\n\t\t}\n\n\t\tif ( ! ktx2File.isValid() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file' );\n\n\t\t}\n\n\t\tlet basisFormat;\n\n\t\tif ( ktx2File.isUASTC() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC;\n\n\t\t} else if ( ktx2File.isETC1S() ) {\n\n\t\t\tbasisFormat = BasisFormat.ETC1S;\n\n\t\t} else if ( ktx2File.isHDR() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC_HDR;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unknown Basis encoding' );\n\n\t\t}\n\n\t\tconst width = ktx2File.getWidth();\n\t\tconst height = ktx2File.getHeight();\n\t\tconst layerCount = ktx2File.getLayers() || 1;\n\t\tconst levelCount = ktx2File.getLevels();\n\t\tconst faceCount = ktx2File.getFaces();\n\t\tconst hasAlpha = ktx2File.getHasAlpha();\n\t\tconst dfdFlags = ktx2File.getDFDFlags();\n\n\t\tconst { transcoderFormat, engineFormat, engineType } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tif ( ! width || ! height || ! levelCount ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid texture' );\n\n\t\t}\n\n\t\tif ( ! ktx2File.startTranscoding() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader: .startTranscoding failed' );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst buffers = [];\n\n\t\tfor ( let face = 0; face < faceCount; face ++ ) {\n\n\t\t\tconst mipmaps = [];\n\n\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\n\n\t\t\t\tconst layerMips = [];\n\n\t\t\t\tlet mipWidth, mipHeight;\n\n\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\n\n\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\n\n\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( levelCount > 1 ) {\n\n\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\n\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\n\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\n\t\t\t\t\t\t// See mrdoob/three.js#25908.\n\t\t\t\t\t\tmipWidth = levelInfo.width;\n\t\t\t\t\t\tmipHeight = levelInfo.height;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\n\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, - 1, - 1 );\n\n\t\t\t\t\tif ( engineType === EngineType.HalfFloatType ) {\n\n\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! status ) {\n\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\tthrow new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayerMips.push( dst );\n\n\t\t\t\t}\n\n\t\t\t\tconst mipData = concat( layerMips );\n\n\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\n\t\t\t\tbuffers.push( mipData.buffer );\n\n\t\t\t}\n\n\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\n\n\t\t}\n\n\t\tcleanup();\n\n\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\n\n\t}\n\n\t//\n\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S, UASTC, or\n\t// UASTC HDR), device capabilities, and texture dimensions. The list below ranks the formats\n\t// separately for each format. Currently, priority is assigned based on:\n\t//\n\t//   high quality > low quality > uncompressed\n\t//\n\t// Prioritization may be revisited, or exposed for configuration, in the future.\n\t//\n\t// Reference: https://github.com/KhronosGroup/3D-Formats-Guidelines/blob/main/KTXDeveloperGuide.md\n\tconst FORMAT_OPTIONS = [\n\t\t{\n\t\t\tif: 'astcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: Infinity,\n\t\t\tpriorityUASTC: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 3,\n\t\t\tpriorityUASTC: 2,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'dxtSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 4,\n\t\t\tpriorityUASTC: 5,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc2Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 1,\n\t\t\tpriorityUASTC: 3,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc1Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 2,\n\t\t\tpriorityUASTC: 4,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'pvrtcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 5,\n\t\t\tpriorityUASTC: 6,\n\t\t\tneedsPowerOfTwo: true,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC6H ],\n\t\t\tengineFormat: [ EngineFormat.RGB_BPTC_UNSIGNED_Format ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\n\t\t// Uncompressed fallbacks.\n\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA32, TranscoderFormat.RGBA32 ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat, EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.UnsignedByteType, EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 100,\n\t\t\tpriorityUASTC: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA_HALF ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t}\n\t];\n\n\tconst OPTIONS = {\n\t\t// TODO: For ETC1S we intentionally sort by _UASTC_ priority, preserving\n\t\t// a historical accident shown to avoid performance pitfalls for Linux with\n\t\t// Firefox & AMD GPU (RadeonSI). Further work needed.\n\t\t// See https://github.com/mrdoob/three.js/pull/29730.\n\t\t[ BasisFormat.ETC1S ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.ETC1S ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC_HDR ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC_HDR ) )\n\t\t\t.sort( ( a, b ) => a.priorityHDR - b.priorityHDR ),\n\t};\n\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\n\n\t\tconst options = OPTIONS[ basisFormat ];\n\n\t\tfor ( let i = 0; i < options.length; i ++ ) {\n\n\t\t\tconst opt = options[ i ];\n\n\t\t\tif ( opt.if && ! config[ opt.if ] ) continue;\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\n\t\t\tif ( hasAlpha && opt.transcoderFormat.length < 2 ) continue;\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\n\n\t\t\tconst transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineType = opt.engineType[ 0 ];\n\n\t\t\treturn { transcoderFormat, engineFormat, engineType };\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Failed to identify transcoding target.' );\n\n\t}\n\n\tfunction isPowerOfTwo( value ) {\n\n\t\tif ( value <= 2 ) return true;\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n\t/**\n\t * Concatenates N byte arrays.\n\t *\n\t * @param {Uint8Array[]} arrays\n\t * @return {Uint8Array}\n\t */\n\tfunction concat( arrays ) {\n\n\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\n\n\t\tlet totalByteLength = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\ttotalByteLength += array.byteLength;\n\n\t\t}\n\n\t\tconst result = new Uint8Array( totalByteLength );\n\n\t\tlet byteOffset = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\tresult.set( array, byteOffset );\n\n\t\t\tbyteOffset += array.byteLength;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n};\n\n// Parsing for non-Basis textures. These textures may have supercompression\n// like Zstd, but they do not require transcoding.\n\nconst UNCOMPRESSED_FORMATS = new Set( [ RGBAFormat, RGFormat, RedFormat ] );\n\nconst FORMAT_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: RGBAFormat,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R8G8_UNORM ]: RGFormat,\n\t[ VK_FORMAT_R8G8_SRGB ]: RGFormat,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R16_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R8_SRGB ]: RedFormat,\n\t[ VK_FORMAT_R8_UNORM ]: RedFormat,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: RGBA_ASTC_4x4_Format,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: RGBA_ASTC_6x6_Format,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: RGBA_ASTC_6x6_Format,\n\n};\n\nconst TYPE_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8_SRGB ]: UnsignedByteType,\n\t[ VK_FORMAT_R8_UNORM ]: UnsignedByteType,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: HalfFloatType,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: UnsignedByteType,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: UnsignedByteType,\n\n};\n\nasync function createRawTexture( container ) {\n\n\tconst { vkFormat } = container;\n\n\tif ( FORMAT_MAP[ vkFormat ] === undefined ) {\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported vkFormat.' );\n\n\t}\n\n\t//\n\n\tlet zstd;\n\n\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\tif ( ! _zstd ) {\n\n\t\t\t_zstd = new Promise( async ( resolve ) => {\n\n\t\t\t\tconst zstd = new ZSTDDecoder();\n\t\t\t\tawait zstd.init();\n\t\t\t\tresolve( zstd );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tzstd = await _zstd;\n\n\t}\n\n\t//\n\n\tconst mipmaps = [];\n\n\n\tfor ( let levelIndex = 0; levelIndex < container.levels.length; levelIndex ++ ) {\n\n\t\tconst levelWidth = Math.max( 1, container.pixelWidth >> levelIndex );\n\t\tconst levelHeight = Math.max( 1, container.pixelHeight >> levelIndex );\n\t\tconst levelDepth = container.pixelDepth ? Math.max( 1, container.pixelDepth >> levelIndex ) : 0;\n\n\t\tconst level = container.levels[ levelIndex ];\n\n\t\tlet levelData;\n\n\t\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE ) {\n\n\t\t\tlevelData = level.levelData;\n\n\t\t} else if ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\t\tlevelData = zstd.decode( level.levelData, level.uncompressedByteLength );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported supercompressionScheme.' );\n\n\t\t}\n\n\t\tlet data;\n\n\t\tif ( TYPE_MAP[ vkFormat ] === FloatType ) {\n\n\t\t\tdata = new Float32Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Float32Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else if ( TYPE_MAP[ vkFormat ] === HalfFloatType ) {\n\n\t\t\tdata = new Uint16Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Uint16Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tdata = levelData;\n\n\t\t}\n\n\t\tmipmaps.push( {\n\n\t\t\tdata: data,\n\t\t\twidth: levelWidth,\n\t\t\theight: levelHeight,\n\t\t\tdepth: levelDepth,\n\n\t\t} );\n\n\t}\n\n\tlet texture;\n\n\tif ( UNCOMPRESSED_FORMATS.has( FORMAT_MAP[ vkFormat ] ) ) {\n\n\t\ttexture = container.pixelDepth === 0\n\t\t\t? new DataTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight )\n\t\t\t: new Data3DTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight, container.pixelDepth );\n\n\t} else {\n\n\t\tif ( container.pixelDepth > 0 ) throw new Error( 'THREE.KTX2Loader: Unsupported pixelDepth.' );\n\n\t\ttexture = new CompressedTexture( mipmaps, container.pixelWidth, container.pixelHeight );\n\n\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\n\t}\n\n\ttexture.mipmaps = mipmaps;\n\n\ttexture.type = TYPE_MAP[ vkFormat ];\n\ttexture.format = FORMAT_MAP[ vkFormat ];\n\ttexture.colorSpace = parseColorSpace( container );\n\ttexture.needsUpdate = true;\n\n\t//\n\n\treturn Promise.resolve( texture );\n\n}\n\nfunction parseColorSpace( container ) {\n\n\tconst dfd = container.dataFormatDescriptor[ 0 ];\n\n\tif ( dfd.colorPrimaries === KHR_DF_PRIMARIES_BT709 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_DISPLAYP3 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? DisplayP3ColorSpace : LinearDisplayP3ColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_UNSPECIFIED ) {\n\n\t\treturn NoColorSpace;\n\n\t} else {\n\n\t\tconsole.warn( `THREE.KTX2Loader: Unsupported color primaries, \"${ dfd.colorPrimaries }\"` );\n\t\treturn NoColorSpace;\n\n\t}\n\n}\n\nexport { KTX2Loader };\n","import { LinearTransfer, Matrix3, SRGBTransfer } from 'three';\n\n// Reference: http://www.russellcottrell.com/photo/matrixCalculator.htm\n\nconst P3_PRIMARIES = [ 0.680, 0.320, 0.265, 0.690, 0.150, 0.060 ];\nconst P3_LUMINANCE_COEFFICIENTS = [ 0.2289, 0.6917, 0.0793 ];\nconst REC2020_PRIMARIES = [ 0.708, 0.292, 0.170, 0.797, 0.131, 0.046 ];\nconst REC2020_LUMINANCE_COEFFICIENTS = [ 0.2627, 0.6780, 0.0593 ];\nconst D65 = [ 0.3127, 0.3290 ];\n\n/******************************************************************************\n * Display P3 definitions\n */\n\nconst LINEAR_DISPLAY_P3_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.4865709, 0.2656677, 0.1982173,\n\t0.2289746, 0.6917385, 0.0792869,\n\t0.0000000, 0.0451134, 1.0439444\n);\n\nconst XYZ_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\n\t2.4934969, - 0.9313836, - 0.4027108,\n\t- 0.8294890, 1.7626641, 0.0236247,\n\t0.0358458, - 0.0761724, 0.9568845\n);\n\nexport const DisplayP3ColorSpace = 'display-p3';\nexport const LinearDisplayP3ColorSpace = 'display-p3-linear';\n\nexport const DisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: SRGBTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\nexport const LinearDisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\tworkingColorSpaceConfig: { unpackColorSpace: DisplayP3ColorSpace },\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\n/******************************************************************************\n * Rec. 2020 definitions\n */\n\nconst LINEAR_REC2020_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.6369580, 0.1446169, 0.1688810,\n\t0.2627002, 0.6779981, 0.0593017,\n\t0.0000000, 0.0280727, 1.0609851\n);\n\nconst XYZ_TO_LINEAR_REC2020 = /*@__PURE__*/ new Matrix3().set(\n\t1.7166512, - 0.3556708, - 0.2533663,\n\t- 0.6666844, 1.6164812, 0.0157685,\n\t0.0176399, - 0.0427706, 0.9421031\n);\n\nexport const LinearRec2020ColorSpace = 'rec2020-linear';\n\nexport const LinearRec2020ColorSpaceImpl = {\n\tprimaries: REC2020_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_REC2020_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_REC2020,\n\tluminanceCoefficients: REC2020_LUMINANCE_COEFFICIENTS,\n};\n","import {\n\tBox3,\n\tMathUtils,\n\tMatrix4,\n\tMatrix3,\n\tRay,\n\tVector3\n} from 'three';\n\n// module scope helper variables\n\nconst a = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst b = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst R = [[], [], []];\nconst AbsR = [[], [], []];\nconst t = [];\n\nconst xAxis = new Vector3();\nconst yAxis = new Vector3();\nconst zAxis = new Vector3();\nconst v1 = new Vector3();\nconst size = new Vector3();\nconst closestPoint = new Vector3();\nconst rotationMatrix = new Matrix3();\nconst aabb = new Box3();\nconst matrix = new Matrix4();\nconst inverse = new Matrix4();\nconst localRay = new Ray();\n\n// OBB\n\nclass OBB {\n\n\tconstructor( center = new Vector3(), halfSize = new Vector3(), rotation = new Matrix3() ) {\n\n\t\tthis.center = center;\n\t\tthis.halfSize = halfSize;\n\t\tthis.rotation = rotation;\n\n\t}\n\n\tset( center, halfSize, rotation ) {\n\n\t\tthis.center = center;\n\t\tthis.halfSize = halfSize;\n\t\tthis.rotation = rotation;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( obb ) {\n\n\t\tthis.center.copy( obb.center );\n\t\tthis.halfSize.copy( obb.halfSize );\n\t\tthis.rotation.copy( obb.rotation );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tgetSize( result ) {\n\n\t\treturn result.copy( this.halfSize ).multiplyScalar( 2 );\n\n\t}\n\n\t/**\n\t* Reference: Closest Point on OBB to Point in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 5.1.4)\n\t*\n\t* @param {Vector3} point\n\t* @param {Vector3} result\n\t* @returns {Vector3}\n\t*/\n\tclampPoint( point, result ) {\n\n\t\tconst halfSize = this.halfSize;\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// start at the center position of the OBB\n\n\t\tresult.copy( this.center );\n\n\t\t// project the target onto the OBB axes and walk towards that point\n\n\t\tconst x = MathUtils.clamp( v1.dot( xAxis ), - halfSize.x, halfSize.x );\n\t\tresult.add( xAxis.multiplyScalar( x ) );\n\n\t\tconst y = MathUtils.clamp( v1.dot( yAxis ), - halfSize.y, halfSize.y );\n\t\tresult.add( yAxis.multiplyScalar( y ) );\n\n\t\tconst z = MathUtils.clamp( v1.dot( zAxis ), - halfSize.z, halfSize.z );\n\t\tresult.add( zAxis.multiplyScalar( z ) );\n\n\t\treturn result;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// project v1 onto each axis and check if these points lie inside the OBB\n\n\t\treturn Math.abs( v1.dot( xAxis ) ) <= this.halfSize.x &&\n\t\t\t\tMath.abs( v1.dot( yAxis ) ) <= this.halfSize.y &&\n\t\t\t\tMath.abs( v1.dot( zAxis ) ) <= this.halfSize.z;\n\n\t}\n\n\tintersectsBox3( box3 ) {\n\n\t\treturn this.intersectsOBB( obb.fromBox3( box3 ) );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// find the point on the OBB closest to the sphere center\n\n\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t// if that point is inside the sphere, the OBB and sphere intersect\n\n\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\t/**\n\t* Reference: OBB-OBB Intersection in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 4.4.1)\n\t*\n\t* @param {OBB} obb\n\t* @param {Number} [epsilon=Number.EPSILON] - A small value to prevent arithmetic errors\n\t* @returns {Boolean}\n\t*/\n\tintersectsOBB( obb, epsilon = Number.EPSILON ) {\n\n\t\t// prepare data structures (the code uses the same nomenclature like the reference)\n\n\t\ta.c = this.center;\n\t\ta.e[ 0 ] = this.halfSize.x;\n\t\ta.e[ 1 ] = this.halfSize.y;\n\t\ta.e[ 2 ] = this.halfSize.z;\n\t\tthis.rotation.extractBasis( a.u[ 0 ], a.u[ 1 ], a.u[ 2 ] );\n\n\t\tb.c = obb.center;\n\t\tb.e[ 0 ] = obb.halfSize.x;\n\t\tb.e[ 1 ] = obb.halfSize.y;\n\t\tb.e[ 2 ] = obb.halfSize.z;\n\t\tobb.rotation.extractBasis( b.u[ 0 ], b.u[ 1 ], b.u[ 2 ] );\n\n\t\t// compute rotation matrix expressing b in a's coordinate frame\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tR[ i ][ j ] = a.u[ i ].dot( b.u[ j ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute translation vector\n\n\t\tv1.subVectors( b.c, a.c );\n\n\t\t// bring translation into a's coordinate frame\n\n\t\tt[ 0 ] = v1.dot( a.u[ 0 ] );\n\t\tt[ 1 ] = v1.dot( a.u[ 1 ] );\n\t\tt[ 2 ] = v1.dot( a.u[ 2 ] );\n\n\t\t// compute common subexpressions. Add in an epsilon term to\n\t\t// counteract arithmetic errors when two edges are parallel and\n\t\t// their cross product is (near) null\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tAbsR[ i ][ j ] = Math.abs( R[ i ][ j ] ) + epsilon;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet ra, rb;\n\n\t\t// test axes L = A0, L = A1, L = A2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ i ];\n\t\t\trb = b.e[ 0 ] * AbsR[ i ][ 0 ] + b.e[ 1 ] * AbsR[ i ][ 1 ] + b.e[ 2 ] * AbsR[ i ][ 2 ];\n\t\t\tif ( Math.abs( t[ i ] ) > ra + rb ) return false;\n\n\n\t\t}\n\n\t\t// test axes L = B0, L = B1, L = B2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ 0 ] * AbsR[ 0 ][ i ] + a.e[ 1 ] * AbsR[ 1 ][ i ] + a.e[ 2 ] * AbsR[ 2 ][ i ];\n\t\t\trb = b.e[ i ];\n\t\t\tif ( Math.abs( t[ 0 ] * R[ 0 ][ i ] + t[ 1 ] * R[ 1 ][ i ] + t[ 2 ] * R[ 2 ][ i ] ) > ra + rb ) return false;\n\n\t\t}\n\n\t\t// test axis L = A0 x B0\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 0 ] - t[ 1 ] * R[ 2 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B1\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 1 ] - t[ 1 ] * R[ 2 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B2\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 1 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 1 ] + b.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 2 ] - t[ 1 ] * R[ 2 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 0 ] - t[ 2 ] * R[ 0 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 1 ] - t[ 2 ] * R[ 0 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 1 ] + b.e[ 1 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 2 ] - t[ 2 ] * R[ 0 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 0 ] + a.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 1 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 0 ] - t[ 0 ] * R[ 1 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 1 ] + a.e[ 1 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 1 ] - t[ 0 ] * R[ 1 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 2 ] + a.e[ 1 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 1 ] + b.e[ 1 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 2 ] - t[ 0 ] * R[ 1 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// since no separating axis is found, the OBBs must be intersecting\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t* Reference: Testing Box Against Plane in Real-Time Collision Detection\n\t* by Christer Ericson (chapter 5.2.3)\n\t*\n\t* @param {Plane} plane\n\t* @returns {Boolean}\n\t*/\n\tintersectsPlane( plane ) {\n\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// compute the projection interval radius of this OBB onto L(t) = this->center + t * p.normal;\n\n\t\tconst r = this.halfSize.x * Math.abs( plane.normal.dot( xAxis ) ) +\n\t\t\t\tthis.halfSize.y * Math.abs( plane.normal.dot( yAxis ) ) +\n\t\t\t\tthis.halfSize.z * Math.abs( plane.normal.dot( zAxis ) );\n\n\t\t// compute distance of the OBB's center from the plane\n\n\t\tconst d = plane.normal.dot( this.center ) - plane.constant;\n\n\t\t// Intersection occurs when distance d falls within [-r,+r] interval\n\n\t\treturn Math.abs( d ) <= r;\n\n\t}\n\n\t/**\n\t* Performs a ray/OBB intersection test and stores the intersection point\n\t* to the given 3D vector. If no intersection is detected, *null* is returned.\n\t*\n\t* @param {Ray} ray\n\t* @param {Vector3} result\n\t* @return {Vector3?}\n\t*/\n\tintersectRay( ray, result ) {\n\n\t\t// the idea is to perform the intersection test in the local space\n\t\t// of the OBB.\n\n\t\tthis.getSize( size );\n\t\taabb.setFromCenterAndSize( v1.set( 0, 0, 0 ), size );\n\n\t\t// create a 4x4 transformation matrix\n\n\t\tmatrix.setFromMatrix3( this.rotation );\n\t\tmatrix.setPosition( this.center );\n\n\t\t// transform ray to the local space of the OBB\n\n\t\tinverse.copy( matrix ).invert();\n\t\tlocalRay.copy( ray ).applyMatrix4( inverse );\n\n\t\t// perform ray <-> AABB intersection test\n\n\t\tif ( localRay.intersectBox( aabb, result ) ) {\n\n\t\t\t// transform the intersection point back to world space\n\n\t\t\treturn result.applyMatrix4( matrix );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t* Performs a ray/OBB intersection test. Returns either true or false if\n\t* there is a intersection or not.\n\t*\n\t* @param {Ray} ray\n\t* @returns {Boolean}\n\t*/\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, v1 ) !== null;\n\n\t}\n\n\tfromBox3( box3 ) {\n\n\t\tbox3.getCenter( this.center );\n\n\t\tbox3.getSize( this.halfSize ).multiplyScalar( 0.5 );\n\n\t\tthis.rotation.identity();\n\n\t\treturn this;\n\n\t}\n\n\tequals( obb ) {\n\n\t\treturn obb.center.equals( this.center ) &&\n\t\t\tobb.halfSize.equals( this.halfSize ) &&\n\t\t\tobb.rotation.equals( this.rotation );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst e = matrix.elements;\n\n\t\tlet sx = v1.set( e[ 0 ], e[ 1 ], e[ 2 ] ).length();\n\t\tconst sy = v1.set( e[ 4 ], e[ 5 ], e[ 6 ] ).length();\n\t\tconst sz = v1.set( e[ 8 ], e[ 9 ], e[ 10 ] ).length();\n\n\t\tconst det = matrix.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\trotationMatrix.setFromMatrix4( matrix );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\trotationMatrix.elements[ 0 ] *= invSX;\n\t\trotationMatrix.elements[ 1 ] *= invSX;\n\t\trotationMatrix.elements[ 2 ] *= invSX;\n\n\t\trotationMatrix.elements[ 3 ] *= invSY;\n\t\trotationMatrix.elements[ 4 ] *= invSY;\n\t\trotationMatrix.elements[ 5 ] *= invSY;\n\n\t\trotationMatrix.elements[ 6 ] *= invSZ;\n\t\trotationMatrix.elements[ 7 ] *= invSZ;\n\t\trotationMatrix.elements[ 8 ] *= invSZ;\n\n\t\tthis.rotation.multiply( rotationMatrix );\n\n\t\tthis.halfSize.x *= sx;\n\t\tthis.halfSize.y *= sy;\n\t\tthis.halfSize.z *= sz;\n\n\t\tv1.setFromMatrixPosition( matrix );\n\t\tthis.center.add( v1 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst obb = new OBB();\n\nexport { OBB };\n","import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3,\n\tColor,\n\tSRGBColorSpace\n} from 'three';\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n//\n\nclass OBJLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.materials = null;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue; // skip comments\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] ),\n\t\t\t\t\t\t\t\tSRGBColorSpace\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\nexport { OBJLoader };\n","import {\n\tColor,\n\tColorManagement,\n\tDefaultLoadingManager,\n\tFileLoader,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMeshPhongMaterial,\n\tRepeatWrapping,\n\tTextureLoader,\n\tVector2,\n\tSRGBColorSpace\n} from 'three';\n\n/**\n * Loads a Wavefront .mtl file specifying materials\n */\n\nclass MTLLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to load.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tsetMaterialOptions( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @param {String} path\n\t * @return {MaterialCreator}\n\t *\n\t * @see setPath setResourcePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setResourcePath() explicitly prior to parse.\n\t */\n\tparse( text, path ) {\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet info = {};\n\t\tconst delimiter_pattern = /\\s+/;\n\t\tconst materialsInfo = {};\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlet line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst pos = line.indexOf( ' ' );\n\n\t\t\tlet key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tlet value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tconst ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst materialCreator = new MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n}\n\n/**\n * Create a new MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nclass MaterialCreator {\n\n\tconstructor( baseUrl = '', options = {} ) {\n\n\t\tthis.baseUrl = baseUrl;\n\t\tthis.options = options;\n\t\tthis.materialsInfo = {};\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t\tthis.crossOrigin = 'anonymous';\n\n\t\tthis.side = ( this.options.side !== undefined ) ? this.options.side : FrontSide;\n\t\tthis.wrap = ( this.options.wrap !== undefined ) ? this.options.wrap : RepeatWrapping;\n\n\t}\n\n\tsetCrossOrigin( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t}\n\n\tsetManager( value ) {\n\n\t\tthis.manager = value;\n\n\t}\n\n\tsetMaterials( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t}\n\n\tconvert( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tconst converted = {};\n\n\t\tfor ( const mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tconst mat = materialsInfo[ mn ];\n\n\t\t\tconst covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( const prop in mat ) {\n\n\t\t\t\tlet save = true;\n\t\t\t\tlet value = mat[ prop ];\n\t\t\t\tconst lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t}\n\n\tpreload() {\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t}\n\n\tgetIndex( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t}\n\n\tgetAsArray() {\n\n\t\tlet index = 0;\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t}\n\n\tcreate( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tcreateMaterial_( materialName ) {\n\n\t\t// Create material\n\n\t\tconst scope = this;\n\t\tconst mat = this.materialsInfo[ materialName ];\n\t\tconst params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tconst texParams = scope.getTextureParams( value, params );\n\t\t\tconst map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tif ( mapType === 'map' || mapType === 'emissiveMap' ) {\n\n\t\t\t\tmap.colorSpace = SRGBColorSpace;\n\n\t\t\t}\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( const prop in mat ) {\n\n\t\t\tconst value = mat[ prop ];\n\t\t\tlet n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = ColorManagement.toWorkingColorSpace( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( 'map', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( 'specularMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( 'emissiveMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( 'normalMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( 'bumpMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( 'alphaMap', value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tgetTextureParams( value, matParams ) {\n\n\t\tconst texParams = {\n\n\t\t\tscale: new Vector2( 1, 1 ),\n\t\t\toffset: new Vector2( 0, 0 )\n\n\t\t };\n\n\t\tconst items = value.split( /\\s+/ );\n\t\tlet pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t}\n\n\tloadTexture( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tconst manager = ( this.manager !== undefined ) ? this.manager : DefaultLoadingManager;\n\t\tlet loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\n\t\tconst texture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n}\n\nexport { MTLLoader };\n","import {\n\tColor,\n\tLightProbe,\n\tLinearSRGBColorSpace,\n\tSphericalHarmonics3,\n\tVector3,\n\tSRGBColorSpace,\n\tNoColorSpace,\n\tHalfFloatType,\n\tDataUtils,\n\tWebGLCoordinateSystem\n} from 'three';\n\nclass LightProbeGenerator {\n\n\t// https://www.ppsloan.org/publications/StupidSH36.pdf\n\tstatic fromCubeTexture( cubeTexture ) {\n\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tconst image = cubeTexture.image[ faceIndex ];\n\n\t\t\tconst width = image.width;\n\t\t\tconst height = image.height;\n\n\t\t\tconst canvas = document.createElement( 'canvas' );\n\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\n\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, width, height );\n\n\t\t\tconst data = imageData.data;\n\n\t\t\tconst imageWidth = imageData.width; // assumed to be square\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( data[ i ] / 255, data[ i + 1 ] / 255, data[ i + 2 ] / 255 );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeTexture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = - 1 + ( pixelIndex % imageWidth + 0.5 ) * pixelSize;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1, row, - col ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1, row, col ); break;\n\n\t\t\t\t\tcase 2: coord.set( - col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( - col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( - col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n\tstatic async fromCubeRenderTarget( renderer, cubeRenderTarget ) {\n\n\t\tconst flip = renderer.coordinateSystem === WebGLCoordinateSystem ? - 1 : 1;\n\n\t\t// The renderTarget must be set to RGBA in order to make readRenderTargetPixels works\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tconst dataType = cubeRenderTarget.texture.type;\n\t\tconst imageWidth = cubeRenderTarget.width; // assumed to be square\n\n\t\tlet data;\n\n\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\tdata = new Uint16Array( imageWidth * imageWidth * 4 );\n\n\t\t\t} else {\n\n\t\t\t\t// assuming UnsignedByteType\n\n\t\t\t\tdata = new Uint8Array( imageWidth * imageWidth * 4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\t\tawait renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, data, faceIndex );\n\n\t\t\t} else {\n\n\t\t\t\tdata = await renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, 0, faceIndex );\n\n\t\t\t}\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\tlet r, g, b;\n\n\t\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\t\tr = DataUtils.fromHalfFloat( data[ i ] );\n\t\t\t\t\tg = DataUtils.fromHalfFloat( data[ i + 1 ] );\n\t\t\t\t\tb = DataUtils.fromHalfFloat( data[ i + 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr = data[ i ] / 255;\n\t\t\t\t\tg = data[ i + 1 ] / 255;\n\t\t\t\t\tb = data[ i + 2 ] / 255;\n\n\t\t\t\t}\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( r, g, b );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeRenderTarget.texture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = ( 1 - ( pixelIndex % imageWidth + 0.5 ) * pixelSize ) * flip;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1 * flip, row, col * flip ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1 * flip, row, - col * flip ); break;\n\n\t\t\t\t\tcase 2: coord.set( col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( - col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n}\n\nfunction convertColorToLinear( color, colorSpace ) {\n\n\tswitch ( colorSpace ) {\n\n\t\tcase SRGBColorSpace:\n\n\t\t\tcolor.convertSRGBToLinear();\n\t\t\tbreak;\n\n\t\tcase LinearSRGBColorSpace:\n\t\tcase NoColorSpace:\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tconsole.warn( 'WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.' );\n\t\t\tbreak;\n\n\t}\n\n\treturn color;\n\n}\n\nexport { LightProbeGenerator };\n","/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nexport var DeviceOrientationControls = function ( object ) {\n\n  var scope = this;\n\n  this.object = object;\n  this.object.rotation.reorder( 'YXZ' );\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alphaOffset = 0; // radians\n\n  var onDeviceOrientationChangeEvent = function ( event ) {\n\n    scope.deviceOrientation = event;\n\n  };\n\n  var onScreenOrientationChangeEvent = function () {\n\n    scope.screenOrientation = window.orientation || 0;\n\n  };\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setObjectQuaternion = function () {\n\n    var zee = new THREE.Vector3( 0, 0, 1 );\n\n    var euler = new THREE.Euler();\n\n    var q0 = new THREE.Quaternion();\n\n    var q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n    return function ( quaternion, alpha, beta, gamma, orient ) {\n\n      euler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n      quaternion.setFromEuler( euler ); // orient the device\n\n      quaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n      quaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n    };\n\n  }();\n\n  this.connect = function () {\n \n    onScreenOrientationChangeEvent();\n\n    window.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = true;\n\n  };\n\n  this.disconnect = function () {\n\n    window.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = false;\n\n  };\n\n  this.update = function () {\n\n    if ( scope.enabled === false ) return;\n\n    var device = scope.deviceOrientation;\n\n    if ( device ) {\n\n      var alpha = device.alpha ? THREE.MathUtils.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\n      var beta = device.beta ? THREE.MathUtils.degToRad( device.beta ) : 0; // X'\n\n      var gamma = device.gamma ? THREE.MathUtils.degToRad( device.gamma ) : 0; // Y''\n\n      var orient = scope.screenOrientation ? THREE.MathUtils.degToRad( scope.screenOrientation ) : 0; // O\n\n      setObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\n    }\n\n\n  };\n\n  this.dispose = function () {\n\n    scope.disconnect();\n\n  };\n\n  this.connect();\n\n};\n","import * as SUPER_THREE from 'three';\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\nimport { OBB } from 'three/addons/math/OBB.js';\nimport { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\nimport { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\nimport * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\nimport { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\nimport { DeviceOrientationControls } from '../../vendor/DeviceOrientationControls.js'; // THREE.DeviceOrientationControls\n\nvar THREE = globalThis.THREE = {...SUPER_THREE};\n\n// TODO: Eventually include these only if they are needed by a component.\nTHREE.DRACOLoader = DRACOLoader;\nTHREE.GLTFLoader = GLTFLoader;\nTHREE.KTX2Loader = KTX2Loader;\nTHREE.OBJLoader = OBJLoader;\nTHREE.MTLLoader = MTLLoader;\nTHREE.OBB = OBB;\nTHREE.BufferGeometryUtils = BufferGeometryUtils;\nTHREE.LightProbeGenerator = LightProbeGenerator;\nTHREE.DeviceOrientationControls = DeviceOrientationControls;\n\nTHREE.Cache.enabled = true;\n\nexport default THREE;\n","export var AFRAME_CDN_ROOT = window.AFRAME_CDN_ROOT || 'https://cdn.aframe.io/';\nexport var AFRAME_INJECTED = 'aframe-injected';\nexport var DEFAULT_CAMERA_HEIGHT = 1.6;\nexport var DEFAULT_HANDEDNESS = 'right';\n","import debug from 'debug';\n\nvar settings = {\n  colors: {\n    debug: 'gray',\n    error: 'red',\n    info: 'gray',\n    warn: 'orange'\n  }\n};\n\n/**\n * Overwrite `debug` so we can colorize error/warning messages  and remove Time Diff\n *\n * (See issue: https://github.com/debug-js/debug/issues/582#issuecomment-1755718739)\n */\ndebug.formatArgs = formatArgs;\n\nfunction formatArgs (args) {\n  args[0] =\n    (this.useColors ? '%c' : '') +\n    this.namespace +\n    (this.useColors ? ' %c' : ' ') +\n    args[0] +\n    (this.useColors ? '%c ' : ' ');\n\n  if (!this.useColors) {\n    return;\n  }\n  this.color = getDebugNamespaceColor(this.namespace);\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit');\n\n  // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n    index++;\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Returns the type of the namespace (e.g., `error`, `warn`).\n *\n * @param {String} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {String} The type of the namespace (e.g., `warn`).\n * @api private\n */\nfunction getDebugNamespaceType (namespace) {\n  var chunks = namespace.split(':');\n\n  return chunks[chunks.length - 1];  // Return the last one\n}\n\n/**\n * Returns the color of the namespace (e.g., `orange`).\n *\n * @param {String} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {String} The color of the namespace (e.g., `orange`).\n * @api private\n */\nfunction getDebugNamespaceColor (namespace) {\n  var type = getDebugNamespaceType(namespace);\n\n  var color = settings.colors && settings.colors[type];\n\n  return color || null;\n}\n\n/**\n * Returns `localStorage` if possible.\n *\n * This is necessary because Safari throws when a user disables\n * cookies or `localStorage` and you attempt to access it.\n *\n * @returns {localStorage}\n * @api private\n */\nfunction storage () {\n  try {\n    return window.localStorage;\n  } catch (e) {\n  }\n}\n\n/**\n * To enable console logging, type this in the Console of your Dev Tools:\n *\n *   localStorage.logs = 1\n *\n * To disable console logging:\n *\n *   localStorage.logs = 0\n *\n */\nvar ls = storage();\nif (ls && (parseInt(ls.logs, 10) || ls.logs === 'true')) {\n  debug.enable('*');\n} else {\n  debug.enable('*:error,*:info,*:warn');\n}\n\nexport default debug;\n","import debug from './debug.js';\nvar error = debug('device:error');\n\nvar supportsVRSession = false;\nvar supportsARSession = false;\n\nexport var isWebXRAvailable = navigator.xr !== undefined;\n\n// Support both WebVR and WebXR APIs.\nif (isWebXRAvailable) {\n  var updateEnterInterfaces = function () {\n    var sceneEl = document.querySelector('a-scene');\n    if (!sceneEl) {\n      window.addEventListener('DOMContentLoaded', updateEnterInterfaces);\n      return;\n    }\n    if (sceneEl.hasLoaded) {\n      sceneEl.components['xr-mode-ui'].updateEnterInterfaces();\n    } else {\n      sceneEl.addEventListener('loaded', updateEnterInterfaces);\n    }\n  };\n  var errorHandler = function (err) {\n    error('WebXR session support error: ' + err.message);\n  };\n  if (navigator.xr.isSessionSupported) {\n    // Current WebXR spec uses a boolean-returning isSessionSupported promise\n    navigator.xr.isSessionSupported('immersive-vr').then(function (supported) {\n      supportsVRSession = supported;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n\n    navigator.xr.isSessionSupported('immersive-ar').then(function (supported) {\n      supportsARSession = supported;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else if (navigator.xr.supportsSession) {\n    // Fallback for implementations that haven't updated to the new spec yet,\n    // the old version used supportsSession which is rejected for missing\n    // support.\n    navigator.xr.supportsSession('immersive-vr').then(function () {\n      supportsVRSession = true;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n    navigator.xr.supportsSession('immersive-ar').then(function () {\n      supportsARSession = true;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else {\n    error('WebXR has neither isSessionSupported or supportsSession?!');\n  }\n}\n\n/**\n * Determine if a headset is connected.\n */\nexport function checkHeadsetConnected () {\n  return supportsVRSession || supportsARSession;\n}\n\nexport function checkARSupport () { return supportsARSession; }\n\nexport function checkVRSupport () { return supportsVRSession; }\n\n/**\n * Checks if browser is mobile and not stand-alone dedicated vr device.\n * @return {Boolean} True if mobile browser detected.\n */\nexport var isMobile = (function () {\n  var _isMobile = false;\n  (function (a) {\n    // eslint-disable-next-line no-useless-escape\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function () { return _isMobile; };\n})();\n\n/**\n *  Detect tablet devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n */\nexport function isTablet (mockUserAgent) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n\n  var isTablet = /Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n\n  // Additional check for iPad or MacIntel with touch capabilities and not an MSStream device\n  return isTablet || isIpad();\n}\n\n/**\n *  Detect ipad devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n *  @param {string} mockDevicePlatform - Allow passing a mock device platform for testing.\n *  @param {string} mockDeviceTouchPoints - Allow passing a mock device touch points for testing.\n*/\nexport function isIpad (mockUserAgent, mockDevicePlatform, mockDeviceTouchPoints) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n  var platform = mockDevicePlatform || window.navigator.platform;\n  var maxTouchPoints = mockDeviceTouchPoints || window.navigator.maxTouchPoints || 0;\n\n  return ((platform === 'iPad' || platform === 'MacIntel') && maxTouchPoints > 0 && /Macintosh|Intel|iPad|ipad/i.test(userAgent) && !window.MSStream);\n}\n\n/**\n *  Detect Apple Vision Pro devices.\n */\nexport function isAppleVisionPro () {\n  // Safari for Apple Vision Pro presents itself as a desktop browser.\n  var isMacintosh = navigator.userAgent.includes('Macintosh');\n  // Discriminates between a \"real\" desktop browser and Safari for Vision Pro.\n  var hasFiveTouchPoints = navigator.maxTouchPoints === 5;\n  // isWebXRAvailable discriminates between Vision Pro and iPad / iPhone.\n  // This will no longer work once WebXR ships in iOS / iPad OS.\n  return isMacintosh && hasFiveTouchPoints && isWebXRAvailable;\n}\n\nexport function isIOS () {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform);\n}\n\nexport function isMobileDeviceRequestingDesktopSite () {\n  return !isMobile() && !isMobileVR() && window.orientation !== undefined;\n}\n\n/**\n *  Detect Oculus Browser (standalone headset)\n */\nexport function isOculusBrowser () {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect Firefox Reality (standalone headset)\n */\nexport function isFirefoxReality () {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect browsers in Stand-Alone headsets\n */\nexport function isMobileVR () {\n  return isOculusBrowser() || isFirefoxReality() || isAppleVisionPro();\n}\n\nexport function isR7 () {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\n/**\n * Checks mobile device orientation.\n * @return {Boolean} True if landscape orientation.\n */\nexport function isLandscape () {\n  var orientation = window.orientation;\n  if (isR7()) { orientation += 90; }\n  return orientation === 90 || orientation === -90;\n}\n\n/**\n * Check if running in a browser or spoofed browser (bundler).\n * We need to check a node api that isn't mocked on either side.\n * `require` and `module.exports` are mocked in browser by bundlers.\n */\nexport var isBrowserEnvironment = typeof process === 'undefined';\n\n/**\n * Check if running in node on the server.\n */\nexport var isNodeEnvironment = !isBrowserEnvironment;\n","/*\n  Adapted deePool by Kyle Simpson.\n  MIT License: http://getify.mit-license.org\n*/\nvar EMPTY_SLOT = Object.freeze(Object.create(null));\n\n// Default object factory.\nfunction defaultObjectFactory () { return {}; }\n\n/**\n * Create a new pool.\n */\nexport function createPool (objectFactory) {\n  var objPool = [];\n  var nextFreeSlot = null;  // Pool location to look for a free object to use.\n\n  objectFactory = objectFactory || defaultObjectFactory;\n\n  function use () {\n    var objToUse;\n    if (nextFreeSlot === null || nextFreeSlot === objPool.length) {\n      grow(objPool.length || 5);\n    }\n    objToUse = objPool[nextFreeSlot];\n    objPool[nextFreeSlot++] = EMPTY_SLOT;\n    clearObject(objToUse);\n    return objToUse;\n  }\n\n  function recycle (obj) {\n    if (!(obj instanceof Object)) { return; }\n    if (nextFreeSlot === null || nextFreeSlot === -1) {\n      objPool[objPool.length] = obj;\n      return;\n    }\n    objPool[--nextFreeSlot] = obj;\n  }\n\n  function grow (count) {\n    var currentLength;\n    var i;\n\n    count = count === undefined ? objPool.length : count;\n    if (count > 0 && nextFreeSlot == null) {\n      nextFreeSlot = 0;\n    }\n\n    if (count > 0) {\n      currentLength = objPool.length;\n      objPool.length += Number(count);\n      for (i = currentLength; i < objPool.length; i++) {\n        // Add new obj to pool.\n        objPool[i] = objectFactory();\n      }\n    }\n\n    return objPool.length;\n  }\n\n  function size () {\n    return objPool.length;\n  }\n\n  return {\n    grow: grow,\n    pool: objPool,\n    recycle: recycle,\n    size: size,\n    use: use\n  };\n}\n\nexport function clearObject (obj) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) { obj[key] = undefined; }\n}\n\nexport function removeUnusedKeys (obj, schema) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) {\n    if (!(key in schema)) {\n      delete obj[key];\n    }\n  }\n}\n","/* global THREE */\nimport debug from './debug.js';\n\nvar warn = debug('utils:coordinates:warn');\n\n// Order of coordinates parsed by coordinates.parse.\nvar COORDINATE_KEYS = ['x', 'y', 'z', 'w'];\n\n// Coordinate string regex. Handles negative, positive, and decimals.\nexport var regex = /^\\s*((-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s+){2,3}(-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s*$/;\n\nvar whitespaceRegex = /\\s+/g;\n\n/**\n * Parses coordinates from an \"x y z\" string.\n * Example: \"3 10 -5\" to {x: 3, y: 10, z: -5}.\n *\n * @param {string} val - An \"x y z\" string.\n * @param {string} defaultVec - fallback value.\n * @param {object} target - Optional target object for coordinates.\n * @returns {object} An object with keys [x, y, z].\n */\nexport function parse (value, defaultVec, target) {\n  var coordinate;\n  var defaultVal;\n  var key;\n  var i;\n  var vec = (target && typeof target === 'object') ? target : {};\n  var x;\n  var y;\n  var z;\n  var w;\n\n  if (value && value instanceof Object) {\n    x = value.x === undefined ? defaultVec && defaultVec.x : value.x;\n    y = value.y === undefined ? defaultVec && defaultVec.y : value.y;\n    z = value.z === undefined ? defaultVec && defaultVec.z : value.z;\n    w = value.w === undefined ? defaultVec && defaultVec.w : value.w;\n    if (x !== undefined && x !== null) { vec.x = parseIfString(x); }\n    if (y !== undefined && y !== null) { vec.y = parseIfString(y); }\n    if (z !== undefined && z !== null) { vec.z = parseIfString(z); }\n    if (w !== undefined && w !== null) { vec.w = parseIfString(w); }\n    return vec;\n  }\n\n  if (value === null || value === undefined) {\n    return typeof defaultVec === 'object' ? Object.assign(vec, defaultVec) : defaultVec;\n  }\n\n  coordinate = value.trim().split(whitespaceRegex);\n  for (i = 0; i < COORDINATE_KEYS.length; i++) {\n    key = COORDINATE_KEYS[i];\n    if (coordinate[i]) {\n      vec[key] = parseFloat(coordinate[i], 10);\n    } else {\n      defaultVal = defaultVec && defaultVec[key];\n      if (defaultVal === undefined) { continue; }\n      vec[key] = parseIfString(defaultVal);\n    }\n  }\n  return vec;\n}\n\n/**\n * Stringify coordinates from an object with keys [x y z].\n * Example: {x: 3, y: 10, z: -5} to \"3 10 -5\".\n *\n * @param {object|string} data - An object with keys [x y z].\n * @returns {string} An \"x y z\" string.\n */\nexport function stringify (data) {\n  var str;\n  if (typeof data !== 'object') { return data; }\n  str = data.x + ' ' + data.y;\n  if (data.z != null) { str += ' ' + data.z; }\n  if (data.w != null) { str += ' ' + data.w; }\n  return str;\n}\n\n/**\n * Compares the values of two coordinates to check equality.\n *\n * @param {object|string} a - An object with keys [x y z].\n * @param {object|string} b - An object with keys [x y z].\n * @returns {boolean} True if both coordinates are equal, false otherwise\n */\nexport function equals (a, b) {\n  if (typeof a !== 'object' || typeof b !== 'object') {\n    return a === b;\n  }\n  return a.x === b.x && a.y === b.y && a.z === b.z && a.w === b.w;\n}\n\n/**\n * @returns {bool}\n */\nexport function isCoordinates (value) {\n  return regex.test(value);\n}\n\nexport function isCoordinate (value) {\n  warn('`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`');\n  return isCoordinates(value);\n}\n\nfunction parseIfString (val) {\n  if (val !== null && val !== undefined && val.constructor === String) {\n    return parseFloat(val, 10);\n  }\n  return val;\n}\n\n/**\n * Convert {x, y, z} object to three.js Vector3.\n */\nexport function toVector3 (vec3) {\n  return new THREE.Vector3(vec3.x, vec3.y, vec3.z);\n}\n","/**\n * String split with cached result.\n */\nexport var split = (function () {\n  var splitCache = {};\n\n  return function (str, delimiter) {\n    if (!(delimiter in splitCache)) { splitCache[delimiter] = {}; }\n\n    if (str in splitCache[delimiter]) { return splitCache[delimiter][str]; }\n\n    splitCache[delimiter][str] = str.split(delimiter);\n    return splitCache[delimiter][str];\n  };\n})();\n","import { split } from './split.js';\n\n/**\n * Split a delimited component property string (e.g., `material.color`) to an object\n * containing `component` name and `property` name. If there is no delimiter, just return the\n * string back.\n *\n * Uses the caching split implementation `AFRAME.utils.split`\n *\n * @param {string} str - e.g., `material.opacity`.\n * @param {string} delimiter - e.g., `.`.\n * @returns {array} e.g., `['material', 'opacity']`.\n */\nexport function getComponentPropertyPath (str, delimiter) {\n  delimiter = delimiter || '.';\n  var parts = split(str, delimiter);\n  if (parts.length === 1) {\n    return parts[0];\n  }\n  return parts;\n}\n\n/**\n * Get component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function getComponentProperty (el, name, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      return el.getAttribute(splitName);\n    }\n    return el.getAttribute(splitName[0])[splitName[1]];\n  }\n  return el.getAttribute(name);\n}\n\n/**\n * Set component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function setComponentProperty (el, name, value, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      el.setAttribute(splitName, value);\n    } else {\n      el.setAttribute(splitName[0], splitName[1], value);\n    }\n    return;\n  }\n  el.setAttribute(name, value);\n}\n","export default function forceCanvasResizeSafariMobile (canvasEl) {\n  var width = canvasEl.style.width;\n  var height = canvasEl.style.height;\n  // Taken from webvr-polyfill (https://github.com/borismus/webvr-polyfill/blob/85f657cd502ec9417bf26b87c3cb2afa6a70e079/src/util.js#L200)\n  // iOS only workaround for https://bugs.webkit.org/show_bug.cgi?id=152556\n  // By changing the size 1 pixel and restoring the previous value\n  // we trigger a size recalculation cycle.\n  canvasEl.style.width = (parseInt(width, 10) + 1) + 'px';\n  canvasEl.style.height = (parseInt(height, 10) + 1) + 'px';\n  setTimeout(function () {\n    canvasEl.style.width = width;\n    canvasEl.style.height = height;\n  }, 200);\n}\n","/* global Image, XMLHttpRequest */\nimport debug from './debug.js';\n\nvar warn = debug('utils:src-loader:warn');\n\n/**\n * Validate a texture, either as a selector or as a URL.\n * Detects whether `src` is pointing to an image or video and invokes the appropriate\n * callback.\n *\n * `src` will be passed into the callback\n *\n * @params {string|Element} src - URL or media element.\n * @params {function} isImageCb - callback if texture is an image.\n * @params {function} isVideoCb - callback if texture is a video.\n */\nexport function validateSrc (src, isImageCb, isVideoCb) {\n  checkIsImage(src, function isAnImageUrl (isImage) {\n    if (isImage) {\n      isImageCb(src);\n      return;\n    }\n    isVideoCb(src);\n  });\n}\n\n/**\n * Validates either six images as a cubemap or one image as an Equirectangular image.\n *\n * @param {string} src - A selector, image URL or comma-separated image URLs. Image URLS\n          must be wrapped by `url()`.\n * @param {*} isCubemapCb - callback if src is a cubemap.\n * @param {*} isEquirectCb - callback is src is a singular equirectangular image.\n */\nexport function validateEnvMapSrc (src, isCubemapCb, isEquirectCb) {\n  var el;\n  var cubemapSrcRegex = '';\n  var i;\n  var urls;\n  var validatedUrls = [];\n\n  if (typeof src === 'string') {\n    for (i = 0; i < 5; i++) {\n      cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\),\\\\s*)';\n    }\n    cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\)\\\\s*)';\n    urls = src.match(new RegExp(cubemapSrcRegex));\n\n    // `src` is a comma-separated list of URLs.\n    // In this case, re-use validateSrc for each side of the cube.\n    function isImageCb (url) {\n      validatedUrls.push(url);\n      if (validatedUrls.length === 6) {\n        isCubemapCb(validatedUrls);\n      }\n    }\n    if (urls) {\n      for (i = 1; i < 7; i++) {\n        validateSrc(parseUrl(urls[i]), isImageCb);\n      }\n      return;\n    }\n\n    // Single URL src\n    if (!src.startsWith('#')) {\n      var parsedSrc = parseUrl(src);\n      if (parsedSrc) {\n        validateSrc(parsedSrc, isEquirectCb);\n      } else {\n        validateSrc(src, isEquirectCb);\n      }\n      return;\n    }\n  }\n\n  // `src` is either an element or a query selector to an element (<a-cubemap> or <img>).\n  if (src.tagName) {\n    el = src;\n  } else {\n    el = validateAndGetQuerySelector(src);\n  }\n\n  if (!el) { return; }\n  if (el.tagName === 'A-CUBEMAP' && el.srcs) {\n    return isCubemapCb(el.srcs);\n  }\n  if (el.tagName === 'IMG') {\n    return isEquirectCb(el);\n  }\n  // Else if el is not a valid element, either <a-cubemap> or <img>.\n  warn('Selector \"%s\" does not point to <a-cubemap> or <img>', src);\n}\n\n/**\n * Validates six images as a cubemap, either as selector or comma-separated\n * URLs.\n *\n * @param {string} src - A selector or comma-separated image URLs. Image URLs\n          must be wrapped by `url()`.\n * @param {function} cb - callback if src is a cubemap.\n */\nexport function validateCubemapSrc (src, cb) {\n  return validateEnvMapSrc(src, cb, function isEquirectCb () {\n    warn('Expected cubemap but got image');\n  });\n}\n\n/**\n * Parses src from `url(src)`.\n * @param  {string} src - String to parse.\n * @return {string} The parsed src, if parseable.\n */\nexport function parseUrl (src) {\n  var parsedSrc = src.match(/url\\((.+)\\)/);\n  if (!parsedSrc) { return; }\n  return parsedSrc[1];\n}\n\n/**\n * Call back whether `src` is an image.\n *\n * @param {string|Element} src - URL or element that will be tested.\n * @param {function} onResult - Callback with whether `src` is an image.\n */\nfunction checkIsImage (src, onResult) {\n  var request;\n\n  if (src.tagName) {\n    onResult(src.tagName === 'IMG');\n    return;\n  }\n  request = new XMLHttpRequest();\n\n  // Try to send HEAD request to check if image first.\n  request.open('HEAD', src);\n  request.addEventListener('load', function (event) {\n    var contentType;\n    if (request.status >= 200 && request.status < 300) {\n      contentType = request.getResponseHeader('Content-Type');\n      if (contentType == null) {\n        checkIsImageFallback(src, onResult);\n      } else {\n        if (contentType.startsWith('image')) {\n          onResult(true);\n        } else {\n          onResult(false);\n        }\n      }\n    } else {\n      checkIsImageFallback(src, onResult);\n    }\n    request.abort();\n  });\n  request.send();\n}\n\nfunction checkIsImageFallback (src, onResult) {\n  var tester = new Image();\n  tester.addEventListener('load', onLoad);\n  function onLoad () { onResult(true); }\n  tester.addEventListener('error', onError);\n  function onError () { onResult(false); }\n  tester.src = src;\n}\n\n/**\n * Query and validate a query selector,\n *\n * @param  {string} selector - DOM selector.\n * @return {object|null|undefined} Selected DOM element if exists.\n           null if query yields no results.\n           undefined if `selector` is not a valid selector.\n */\nfunction validateAndGetQuerySelector (selector) {\n  try {\n    var el = document.querySelector(selector);\n    if (!el) {\n      warn('No element was found matching the selector: \"%s\"', selector);\n    }\n    return el;\n  } catch (e) {  // Capture exception if it's not a valid selector.\n    warn('\"%s\" is not a valid selector', selector);\n    return undefined;\n  }\n}\n","/* global HTMLCanvasElement, HTMLVideoElement */\nimport THREE from '../lib/three.js';\nimport * as srcLoader from './src-loader.js';\nimport debug from './debug.js';\nvar warn = debug('utils:material:warn');\n\nvar COLOR_MAPS = new Set([\n  'emissiveMap',\n  'envMap',\n  'map',\n  'specularMap'\n]);\n\n/**\n * Set texture properties such as repeat and offset.\n *\n * @param {object} data - With keys like `repeat`.\n */\nexport function setTextureProperties (texture, data) {\n  var offset = data.offset || {x: 0, y: 0};\n  var repeat = data.repeat || {x: 1, y: 1};\n  var npot = data.npot || false;\n  var anisotropy = data.anisotropy || THREE.Texture.DEFAULT_ANISOTROPY;\n  var wrapS = texture.wrapS;\n  var wrapT = texture.wrapT;\n  var magFilter = texture.magFilter;\n  var minFilter = texture.minFilter;\n\n  // To support NPOT textures, wrap must be ClampToEdge (not Repeat),\n  // and filters must not use mipmaps (i.e. Nearest or Linear).\n  if (npot) {\n    wrapS = THREE.ClampToEdgeWrapping;\n    wrapT = THREE.ClampToEdgeWrapping;\n    magFilter = THREE.LinearFilter;\n    minFilter = THREE.LinearFilter;\n  }\n\n  // Set wrap mode to repeat only if repeat isn't 1/1. Power-of-two is required to repeat.\n  if (repeat.x !== 1 || repeat.y !== 1) {\n    wrapS = THREE.RepeatWrapping;\n    wrapT = THREE.RepeatWrapping;\n  }\n\n  // Apply texture properties\n  texture.offset.set(offset.x, offset.y);\n  texture.repeat.set(repeat.x, repeat.y);\n\n  if (texture.wrapS !== wrapS || texture.wrapT !== wrapT ||\n      texture.magFilter !== magFilter || texture.minFilter !== minFilter ||\n      texture.anisotropy !== anisotropy) {\n    texture.wrapS = wrapS;\n    texture.wrapT = wrapT;\n    texture.magFilter = magFilter;\n    texture.minFilter = minFilter;\n    texture.anisotropy = anisotropy;\n    texture.needsUpdate = true;\n  }\n}\n\n/**\n * Update `material` texture property (usually but not always `map`)\n * from `data` property (usually but not always `src`).\n *\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMapMaterialFromData (materialName, dataName, shader, data) {\n  var el = shader.el;\n  var material = shader.material;\n  var rendererSystem = el.sceneEl.systems.renderer;\n  var src = data[dataName];\n\n  // Because a single material / shader may have multiple textures,\n  // we need to remember the source value for this data property\n  // to avoid redundant operations which can be expensive otherwise\n  // (e.g. video texture loads).\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    // Remove the texture from the material.\n    setMap(null);\n    return;\n  }\n\n  // If material src hasn't changed, and we already have a texture,\n  // just update properties, but don't reload the texture.\n  if (src === shader.materialSrcs[materialName] &&\n      material[materialName]) {\n    setTextureProperties(material[materialName], data);\n    return;\n  }\n\n  // Remember the new src for this texture (there may be multiple).\n  shader.materialSrcs[materialName] = src;\n\n  // If the new material src is already a texture, just use it.\n  if (src instanceof THREE.Texture) { setMap(src); } else {\n    // Load texture source for the new material src.\n    // (And check if we should still use it once available in callback.)\n    el.sceneEl.systems.material.loadTextureSource(src, updateTexture);\n  }\n\n  function updateTexture (source) {\n    // If the source has been changed, don't use loaded texture.\n    if (shader.materialSrcs[materialName] !== src) { return; }\n\n    var texture = material[materialName];\n\n    // Handle removal or texture type change\n    if (texture && (source === null || !isCompatibleTexture(texture, source))) {\n      texture = null;\n    }\n\n    // Create texture if needed\n    if (!texture && source) {\n      texture = createCompatibleTexture(source);\n    }\n\n    // Update texture source and properties\n    if (texture) {\n      if (texture.source !== source) {\n        texture.source = source;\n        texture.needsUpdate = true;\n      }\n      if (COLOR_MAPS.has(materialName)) {\n        rendererSystem.applyColorCorrection(texture);\n      }\n      setTextureProperties(texture, data);\n    }\n\n    // Set map property on the material\n    setMap(texture);\n  }\n\n  function setMap (texture) {\n    // Nothing to do if texture is the same\n    if (material[materialName] === texture) {\n      return;\n    }\n\n    // Dispose old texture if present\n    if (material[materialName]) {\n      material[materialName].dispose();\n    }\n\n    material[materialName] = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Update `material.map` given `data.src`. For standard and flat shaders.\n *\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMap (shader, data) {\n  return updateMapMaterialFromData('map', 'src', shader, data);\n}\n\n/**\n * Updates the material's maps which give the illusion of extra geometry.\n *\n * @param {string} longType - The friendly name of the map from the component e.g. ambientOcclusionMap becomes aoMap in THREE.js\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateDistortionMap (longType, shader, data) {\n  var shortType = longType;\n  if (longType === 'ambientOcclusion') { shortType = 'ao'; }\n\n  var info = {};\n  info.src = data[longType + 'Map'];\n\n  // Pass through the repeat and offset to be handled by the material loader.\n  info.offset = data[longType + 'TextureOffset'];\n  info.repeat = data[longType + 'TextureRepeat'];\n  info.wrap = data[longType + 'TextureWrap'];\n  return updateMapMaterialFromData(shortType + 'Map', 'src', shader, info);\n}\n\n// Cache env map results as promises\nvar envMapPromises = {};\n\n/**\n * Updates the material's environment map providing reflections or refractions.\n *\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateEnvMap (shader, data) {\n  var material = shader.material;\n  var el = shader.el;\n  var materialName = 'envMap';\n  var src = data.envMap;\n  var sphericalEnvMap = data.sphericalEnvMap;\n  var refract = data.refract;\n\n  if (sphericalEnvMap) {\n    src = sphericalEnvMap;\n    warn('`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. ' +\n      'Use `envMap` property with a CubeMap or Equirectangular image instead.');\n  }\n\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  // EnvMap has been removed\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    material.envMap = null;\n    material.needsUpdate = true;\n    return;\n  }\n\n  // Remember the new src for this env map.\n  shader.materialSrcs[materialName] = src;\n\n  // Env map is already loading. Wait on promise.\n  if (envMapPromises[src]) {\n    envMapPromises[src].then(checkSetMap);\n    return;\n  }\n\n  // First time loading this env map.\n  envMapPromises[src] = new Promise(function (resolve) {\n    srcLoader.validateEnvMapSrc(src, function loadCubeMap (srcs) {\n      el.sceneEl.systems.material.loadCubeMapTexture(srcs, function (texture) {\n        texture.mapping = refract ? THREE.CubeRefractionMapping : THREE.CubeReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    }, function loadEquirectMap (src) {\n      el.sceneEl.systems.material.loadTexture(src, {src: src}, function (texture) {\n        texture.mapping = refract ? THREE.EquirectangularRefractionMapping : THREE.EquirectangularReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    });\n  });\n\n  function checkSetMap (texture) {\n    if (shader.materialSrcs[materialName] !== src) { return; }\n    material.envMap = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Emit event on entities on texture-related events.\n *\n * @param {Element} el - Entity.\n * @param {object} texture - three.js Texture.\n */\nexport function handleTextureEvents (el, texture) {\n  if (!texture) { return; }\n\n  el.emit('materialtextureloaded', {src: texture.image, texture: texture});\n\n  // Video events.\n  if (!texture.image || texture.image.tagName !== 'VIDEO') { return; }\n\n  texture.image.addEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n  texture.image.addEventListener('ended', emitVideoTextureEndedAll);\n  function emitVideoTextureLoadedDataAll () {\n    el.emit('materialvideoloadeddata', {src: texture.image, texture: texture});\n  }\n  function emitVideoTextureEndedAll () {\n    // Works for non-looping videos only.\n    el.emit('materialvideoended', {src: texture.image, texture: texture});\n  }\n\n  // Video source can outlive texture, so cleanup event listeners when texture is disposed\n  texture.addEventListener('dispose', function cleanupListeners () {\n    texture.image.removeEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n    texture.image.removeEventListener('ended', emitVideoTextureEndedAll);\n  });\n}\n\n/**\n * Checks if a given texture type is compatible with a given source.\n *\n * @param {THREE.Texture} texture - The texture to check compatibility with\n * @param {THREE.Source} source - The source to check compatibility with\n * @returns {boolean} True if the texture is compatible with the source, false otherwise\n */\nexport function isCompatibleTexture (texture, source) {\n  if (texture.source !== source) {\n    return false;\n  }\n\n  if (source.data instanceof HTMLCanvasElement) {\n    return texture.isCanvasTexture;\n  }\n\n  if (source.data instanceof HTMLVideoElement) {\n    return texture.isVideoTexture;\n  }\n\n  return texture.isTexture && !texture.isCanvasTexture && !texture.isVideoTexture;\n}\n\nexport function createCompatibleTexture (source) {\n  var texture;\n\n  if (source.data instanceof HTMLCanvasElement) {\n    texture = new THREE.CanvasTexture();\n  } else if (source.data instanceof HTMLVideoElement) {\n    // Pass underlying video to constructor to ensure requestVideoFrameCallback is setup\n    texture = new THREE.VideoTexture(source.data);\n  } else {\n    texture = new THREE.Texture();\n  }\n\n  texture.source = source;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nvar HLS_MIMETYPES = ['application/x-mpegurl', 'application/vnd.apple.mpegurl'];\n\n/**\n * Given video element src and type, guess whether stream is HLS.\n *\n * @param {string} src - src from video element (generally URL to content).\n * @param {string} type - type from video element (generally MIME type if present).\n */\nexport function isHLS (src, type) { \n  if (type && HLS_MIMETYPES.includes(type.toLowerCase())) { return true; }\n  if (src && src.toLowerCase().indexOf('.m3u8') > 0) { return true; }\n  return false;\n};\n","/**\n * Utils for parsing style-like strings (e.g., \"primitive: box; width: 5; height: 4.5\").\n * Some code adapted from `style-attr` (https://github.com/joshwnj/style-attr)\n * by Josh Johnston (MIT License).\n */\nvar DASH_REGEX = /-([a-z])/g;\n\n/**\n * Deserialize style-like string into an object of properties.\n *\n * @param {string} value - HTML attribute value.\n * @param {object} obj - Reused object for object pooling.\n * @returns {object} Property data.\n */\nexport function parse (value, obj) {\n  var parsedData;\n  if (typeof value !== 'string') { return value; }\n  parsedData = styleParse(value, obj);\n  // The style parser returns an object { \"\" : \"test\"} when fed a string\n  if (parsedData['']) { return value; }\n  return parsedData;\n}\n\n/**\n * Serialize an object of properties into a style-like string.\n *\n * @param {object} data - Property data.\n * @returns {string}\n */\nexport function stringify (data) {\n  if (typeof data === 'string') { return data; }\n  return styleStringify(data);\n}\n\n/**\n * Converts string from hyphen to camelCase.\n *\n * @param {string} str - String to camelCase.\n * @return {string} CamelCased string.\n */\nexport function toCamelCase (str) {\n  return str.replace(DASH_REGEX, upperCase);\n}\n\n/**\n * Split a string into chunks matching `<key>: <value>`\n */\nvar getKeyValueChunks = (function () {\n  var chunks = [];\n  var hasUnclosedUrl = /url\\([^)]+$/;\n\n  return function getKeyValueChunks (raw) {\n    var chunk = '';\n    var nextSplit;\n    var offset = 0;\n    var sep = ';';\n\n    chunks.length = 0;\n\n    while (offset < raw.length) {\n      nextSplit = raw.indexOf(sep, offset);\n      if (nextSplit === -1) { nextSplit = raw.length; }\n\n      chunk += raw.substring(offset, nextSplit);\n\n      // data URIs can contain semicolons, so make sure we get the whole thing\n      if (hasUnclosedUrl.test(chunk)) {\n        chunk += ';';\n        offset = nextSplit + 1;\n        continue;\n      }\n\n      chunks.push(chunk.trim());\n      chunk = '';\n      offset = nextSplit + 1;\n    }\n\n    return chunks;\n  };\n})();\n\n/**\n * Convert a style attribute string to an object.\n *\n * @param {object} str - Attribute string.\n * @param {object} obj - Object to reuse as a base, else a new one will be allocated.\n */\nfunction styleParse (str, obj) {\n  var chunks;\n  var i;\n  var item;\n  var pos;\n  var key;\n  var val;\n\n  obj = obj || {};\n\n  chunks = getKeyValueChunks(str);\n  for (i = 0; i < chunks.length; i++) {\n    item = chunks[i];\n    if (!item) { continue; }\n    // Split with `.indexOf` rather than `.split` because the value may also contain colons.\n    pos = item.indexOf(':');\n    key = item.substr(0, pos).trim();\n    val = item.substr(pos + 1).trim();\n    obj[toCamelCase(key)] = val;\n  }\n  return obj;\n}\n\n/**\n * Convert an object into an attribute string\n **/\nfunction styleStringify (obj) {\n  var key;\n  var keyCount = 0;\n  var i = 0;\n  var str = '';\n\n  for (key in obj) { keyCount++; }\n\n  for (key in obj) {\n    str += (key + ': ' + obj[key]);\n    if (i < keyCount - 1) { str += '; '; }\n    i++;\n  }\n  return str;\n}\n\nfunction upperCase (str) { return str[1].toUpperCase(); }\n","var AXIS_LABELS = ['x', 'y', 'z', 'w'];\n\n/**\n * Called on controller component `.play` handlers.\n * Check if controller matches parameters and inject tracked-controls component.\n * Handle event listeners.\n * Generate controllerconnected or controllerdisconnected events.\n *\n * @param {object} component - Tracked controls component.\n * @param {object} idPrefix - Prefix to match in gamepad id if any.\n * @param {object} queryObject - Map of values to match.\n */\nexport function checkControllerPresentAndSetup (component, idPrefix, queryObject) {\n  var el = component.el;\n  var controller;\n  var isControllerPresent = isControllerPresentWebXR;\n  var isPresent;\n\n  controller = isControllerPresent(component, idPrefix, queryObject);\n  isPresent = !!controller;\n\n  // Nothing changed, no need to do anything.\n  if (isPresent === component.controllerPresent) { return isPresent; }\n\n  component.controllerPresent = isPresent;\n\n  // Update controller presence.\n  if (isPresent) {\n    component.addEventListeners();\n    component.injectTrackedControls(controller);\n    el.emit('controllerconnected', {name: component.name, component: component});\n  } else {\n    component.removeEventListeners();\n    el.emit('controllerdisconnected', {name: component.name, component: component});\n  }\n}\n\n/**\n *\n * @param {object} component - Tracked controls component.\n */\nexport function isControllerPresentWebXR (component, id, queryObject) {\n  var controllers;\n  var sceneEl = component.el.sceneEl;\n  var trackedControlsSystem = sceneEl && sceneEl.systems['tracked-controls'];\n  if (!trackedControlsSystem) { return false; }\n\n  controllers = trackedControlsSystem.controllers;\n  if (!controllers || !controllers.length) { return false; }\n\n  return findMatchingControllerWebXR(\n    controllers, id,\n    queryObject.hand, queryObject.index, queryObject.iterateControllerProfiles, queryObject.handTracking);\n}\n\nexport function findMatchingControllerWebXR (controllers, idPrefix, handedness, index, iterateProfiles, handTracking) {\n  var i;\n  var j;\n  var controller;\n  var controllerMatch = false;\n  var controllerHasHandedness;\n  var profiles;\n  for (i = 0; i < controllers.length; i++) {\n    controller = controllers[i];\n    profiles = controller.profiles;\n    if (handTracking) {\n      controllerMatch = controller.hand;\n    } else {\n      if (iterateProfiles) {\n        for (j = 0; j < profiles.length; j++) {\n          controllerMatch = profiles[j].startsWith(idPrefix);\n          if (controllerMatch) { break; }\n        }\n      } else {\n        controllerMatch = profiles.length > 0 && profiles[0].startsWith(idPrefix);\n      }\n    }\n    if (!controllerMatch) { continue; }\n    // Vive controllers are assigned handedness at runtime and it might not be always available.\n    controllerHasHandedness = controller.handedness === 'right' || controller.handedness === 'left';\n    if (controllerHasHandedness) {\n      if (controller.handedness === handedness) { return controllers[i]; }\n    } else { // Fallback to index if controller has no handedness.\n      if ((i === index)) { return controllers[i]; }\n    }\n  }\n  return undefined;\n}\n\n/**\n * Emit specific `moved` event(s) if axes changed based on original axismove event.\n *\n * @param {object} component - Controller component in use.\n * @param {array} axesMapping - For example `{thumbstick: [0, 1]}`.\n * @param {object} evt - Event to process.\n */\nexport function emitIfAxesChanged (component, axesMapping, evt) {\n  var axes;\n  var buttonType;\n  var changed;\n  var detail;\n  var j;\n\n  for (buttonType in axesMapping) {\n    axes = axesMapping[buttonType];\n\n    changed = false;\n    for (j = 0; j < axes.length; j++) {\n      if (evt.detail.changed[axes[j]]) { changed = true; }\n    }\n\n    if (!changed) { continue; }\n\n    // Axis has changed. Emit the specific moved event with axis values in detail.\n    detail = {};\n    for (j = 0; j < axes.length; j++) {\n      detail[AXIS_LABELS[j]] = evt.detail.axis[axes[j]];\n    }\n    component.el.emit(buttonType + 'moved', detail);\n  }\n}\n\n/**\n * Handle a button event and reemits the events.\n *\n * @param {string} id - id of the button.\n * @param {string} evtName - name of the reemitted event\n * @param {object} component - reference to the component\n * @param {string} hand - handedness of the controller: left or right.\n */\nexport function onButtonEvent (id, evtName, component, hand) {\n  var mapping = hand ? component.mapping[hand] : component.mapping;\n  var buttonName = mapping.buttons[id];\n  component.el.emit(buttonName + evtName);\n  if (component.updateModel) {\n    component.updateModel(buttonName, evtName);\n  }\n}\n","/* global location */\n\n/* Centralized place to reference utilities since utils is exposed to the user. */\nimport debug from './debug.js';\nimport deepAssign from 'deep-assign';\nimport * as device from './device.js';\nimport * as objectPool from './object-pool.js';\n\nvar warn = debug('utils:warn');\n\n/** @deprecated */\nexport function bind (fn) {\n  return fn.bind.apply(fn, Array.prototype.slice.call(arguments, 1));\n}\nexport * as coordinates from './coordinates.js';\nexport { default as debug } from './debug.js';\nexport * as device from './device.js';\nexport * as entity from './entity.js';\nexport { default as forceCanvasResizeSafariMobile } from './forceCanvasResizeSafariMobile.js';\nexport * as material from './material.js';\nexport * as objectPool from './object-pool.js';\nexport { split } from './split.js';\nexport * as styleParser from './styleParser.js';\nexport * as trackedControls from './tracked-controls.js';\n\nexport function checkHeadsetConnected () {\n  warn('`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`');\n  return device.checkHeadsetConnected(arguments);\n}\n\nexport function isIOS () {\n  warn('`utils.isIOS` has moved to `utils.device.isIOS`');\n  return device.isIOS(arguments);\n}\n\nexport function isMobile () {\n  warn('`utils.isMobile has moved to `utils.device.isMobile`');\n  return device.isMobile(arguments);\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttle (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * If there are multiple calls in the last interval we call the function one additional\n * time.\n * It behaves like throttle except for the very last call that gets deferred until the end of the interval.\n * This is useful when an event is used to trigger synchronization of state, and there is a need to converge\n * to the correct final state following a burst of events.\n *\n * Example use cases:\n * - synchronizing state based on the componentchanged event\n * - following a mouse pointer using the mousemove event\n * - integrating with THREE.TransformControls, via the objectChange event.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleLeadingAndTrailing (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  var deferTimer;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  var args;\n  var timerExpired = function () {\n    // Reached end of interval, call function\n    lastTime = Date.now();\n    functionToThrottle.apply(this, args);\n    deferTimer = undefined;\n  };\n\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (sinceLastTime >= minimumInterval) {\n      // Outside of minimum interval, call throttled function.\n      // Clear any pending timer as timeout imprecisions could otherwise cause two calls\n      // for the same interval.\n      clearTimeout(deferTimer);\n      deferTimer = undefined;\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    } else {\n      // Inside minimum interval, create timer if needed.\n      deferTimer = deferTimer || setTimeout(timerExpired, minimumInterval - sinceLastTime);\n      // Update args for when timer expires.\n      args = arguments;\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * Uses the time/timeDelta timestamps provided by the global render loop for better perf.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleTick (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function (time, delta) {\n    var sinceLastTime = typeof lastTime === 'undefined' ? delta : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle(time, sinceLastTime);\n    }\n  };\n}\n\n/**\n * Returns debounce function that gets called only once after a set of repeated calls.\n *\n * @param {function} functionToDebounce\n * @param {number} wait - Time to wait for repeated function calls (milliseconds).\n * @param {boolean} immediate - Calls the function immediately regardless of if it should be waiting.\n * @returns {function} Debounced function.\n */\nexport function debounce (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this;\n    var args = arguments;\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\n/**\n * Mix the properties of source object(s) into a destination object.\n *\n * @param  {object} dest - The object to which properties will be copied.\n * @param  {...object} source - The object(s) from which properties will be copied.\n */\nexport var extend = Object.assign;\nexport var extendDeep = deepAssign;\n\nexport function clone (obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Checks if two values are equal.\n * Includes objects and arrays and nested objects and arrays.\n * Try to keep this function performant as it will be called often to see if a component\n * should be updated.\n *\n * @param {object} a - First object.\n * @param {object} b - Second object.\n * @returns {boolean} Whether two objects are deeply equal.\n */\nexport var deepEqual = (function () {\n  var arrayPool = objectPool.createPool(function () { return []; });\n\n  return function (a, b) {\n    var key;\n    var keysA;\n    var keysB;\n    var i;\n    var valA;\n    var valB;\n\n    // If not objects or arrays, compare as values.\n    if (a === undefined || b === undefined || a === null || b === null ||\n        !(a && b && (a.constructor === Object && b.constructor === Object) ||\n                    (a.constructor === Array && b.constructor === Array))) {\n      return a === b;\n    }\n\n    // Different number of keys, not equal.\n    keysA = arrayPool.use();\n    keysB = arrayPool.use();\n    keysA.length = 0;\n    keysB.length = 0;\n    for (key in a) { keysA.push(key); }\n    for (key in b) { keysB.push(key); }\n    if (keysA.length !== keysB.length) {\n      arrayPool.recycle(keysA);\n      arrayPool.recycle(keysB);\n      return false;\n    }\n\n    // Return `false` at the first sign of inequality.\n    for (i = 0; i < keysA.length; ++i) {\n      valA = a[keysA[i]];\n      valB = b[keysA[i]];\n      // Check nested array and object.\n      if ((typeof valA === 'object' || typeof valB === 'object') ||\n          (Array.isArray(valA) && Array.isArray(valB))) {\n        if (valA === valB) { continue; }\n        if (!deepEqual(valA, valB)) {\n          arrayPool.recycle(keysA);\n          arrayPool.recycle(keysB);\n          return false;\n        }\n      } else if (valA !== valB) {\n        arrayPool.recycle(keysA);\n        arrayPool.recycle(keysB);\n        return false;\n      }\n    }\n\n    arrayPool.recycle(keysA);\n    arrayPool.recycle(keysB);\n    return true;\n  };\n})();\n\n/**\n * Computes the difference between two objects.\n *\n * @param {object} a - First object to compare (e.g., oldData).\n * @param {object} b - Second object to compare (e.g., newData).\n * @returns {object}\n *   Difference object where set of keys note which values were not equal, and values are\n *   `b`'s values.\n */\nexport var diff = (function () {\n  var keys = [];\n\n  return function (a, b, targetObject) {\n    var aVal;\n    var bVal;\n    var bKey;\n    var diff;\n    var key;\n    var i;\n    var isComparingObjects;\n\n    diff = targetObject || {};\n\n    // Collect A keys.\n    keys.length = 0;\n    for (key in a) { keys.push(key); }\n\n    if (!b) { return diff; }\n\n    // Collect B keys.\n    for (bKey in b) {\n      if (keys.indexOf(bKey) === -1) {\n        keys.push(bKey);\n      }\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      key = keys[i];\n      aVal = a[key];\n      bVal = b[key];\n      isComparingObjects = aVal && bVal &&\n                          aVal.constructor === Object && bVal.constructor === Object;\n      if ((isComparingObjects && !deepEqual(aVal, bVal)) ||\n          (!isComparingObjects && aVal !== bVal)) {\n        diff[key] = bVal;\n      }\n    }\n    return diff;\n  };\n})();\n\n/**\n * Returns whether we should capture this keyboard event for keyboard shortcuts.\n * @param {Event} event Event object.\n * @returns {Boolean} Whether the key event should be captured.\n */\nexport function shouldCaptureKeyEvent (event) {\n  if (event.metaKey) { return false; }\n  return document.activeElement === document.body;\n}\n\n/**\n * Splits a string into an array based on a delimiter.\n *\n * @param   {string=} [str='']        Source string\n * @param   {string=} [delimiter=' '] Delimiter to use\n * @returns {array}                   Array of delimited strings\n */\nexport function splitString (str, delimiter) {\n  if (typeof delimiter === 'undefined') { delimiter = ' '; }\n  // First collapse the whitespace (or whatever the delimiter is).\n  var regex = new RegExp(delimiter, 'g');\n  str = (str || '').replace(regex, delimiter);\n  // Then split.\n  return str.split(delimiter);\n}\n\n/**\n * Extracts data from the element given an object that contains expected keys.\n *\n * @param {Element} Source element.\n * @param {Object} [defaults={}] Object of default key-value pairs.\n * @returns {Object}\n */\nexport function getElData (el, defaults) {\n  defaults = defaults || {};\n  var data = {};\n  Object.keys(defaults).forEach(copyAttribute);\n  function copyAttribute (key) {\n    if (el.hasAttribute(key)) {\n      data[key] = el.getAttribute(key);\n    }\n  }\n  return data;\n}\n\n/**\n * Retrieves querystring value.\n * @param  {String} name Name of querystring key.\n * @return {String}      Value\n */\nexport function getUrlParameter (name) {\n  // eslint-disable-next-line no-useless-escape\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * Detects whether context is within iframe.\n */\nexport function isIframed () {\n  return window.top !== window.self;\n}\n\n/**\n * Finds all elements under the element that have the isScene\n * property set to true\n */\nexport function findAllScenes (el) {\n  var matchingElements = [];\n  var allElements = el.getElementsByTagName('*');\n  for (var i = 0, n = allElements.length; i < n; i++) {\n    if (allElements[i].isScene) {\n      // Element exists with isScene set.\n      matchingElements.push(allElements[i]);\n    }\n  }\n  return matchingElements;\n}\n\n// Must be at bottom to avoid circular dependency.\nexport * as srcLoader from './src-loader.js';\n","import * as constants from '../../constants/index.js';\nimport { extend } from '../../utils/index.js';\n\nexport var MOBILE_HEAD_TAGS = [\n  Meta({name: 'viewport', content: 'width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover'}),\n\n  // W3C-standardised meta tags.\n  Meta({name: 'mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'theme-color', content: 'black'})\n];\n\nexport var MOBILE_IOS_HEAD_TAGS = [\n  // iOS-specific meta tags for fullscreen when pinning to homescreen.\n  Meta({name: 'apple-mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'apple-mobile-web-app-status-bar-style', content: 'black'}),\n  Link({rel: 'apple-touch-icon', href: 'https://aframe.io/images/aframe-logo-152.png'})\n];\n\nfunction Meta (attrs) {\n  return {\n    tagName: 'meta',\n    attributes: attrs,\n    exists: function () { return document.querySelector('meta[name=\"' + attrs.name + '\"]'); }\n  };\n}\n\nfunction Link (attrs) {\n  return {\n    tagName: 'link',\n    attributes: attrs,\n    exists: function () { return document.querySelector('link[rel=\"' + attrs.rel + '\"]'); }\n  };\n}\n\n/**\n * Injects the necessary metatags in the document for mobile support:\n * 1. Prevent the user to zoom in the document.\n * 2. Ensure that window.innerWidth and window.innerHeight have the correct\n *    values and the canvas is properly scaled.\n * 3. To allow fullscreen mode when pinning a web app on the home screen on\n *    iOS.\n * Adapted from https://www.reddit.com/r/web_design/comments/3la04p/\n *\n * @param {object} scene - Scene element\n * @returns {Array}\n */\nexport var inject = function injectHeadTags (scene) {\n  var headEl = document.head;\n  var headScriptEl = headEl.querySelector('script');\n  var tag;\n  var headTags = [];\n  MOBILE_HEAD_TAGS.forEach(createAndInjectTag);\n  if (scene.isIOS) {\n    MOBILE_IOS_HEAD_TAGS.forEach(createAndInjectTag);\n  }\n  return headTags;\n\n  function createAndInjectTag (tagObj) {\n    if (!tagObj || tagObj.exists()) { return; }\n\n    tag = createTag(tagObj);\n    if (!tag) { return; }\n\n    if (headScriptEl) {\n      headScriptEl.parentNode.insertBefore(tag, headScriptEl);\n    } else {\n      headEl.appendChild(tag);\n    }\n\n    headTags.push(tag);\n  }\n};\n\nfunction createTag (tagObj) {\n  if (!tagObj || !tagObj.tagName) { return; }\n  var meta = document.createElement(tagObj.tagName);\n  meta.setAttribute(constants.AFRAME_INJECTED, '');\n  return extend(meta, tagObj.attributes);\n}\n","/* global THREE */\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\nvar styleParser = utils.styleParser;\n\nvar sceneEl;\nvar titleEl;\nvar getSceneCanvasSize;\n\nvar ATTR_NAME = 'loading-screen';\nvar LOADER_TITLE_CLASS = 'a-loader-title';\n\nexport function setup (el, getCanvasSize) {\n  sceneEl = el;\n  getSceneCanvasSize = getCanvasSize;\n  var loaderAttribute = sceneEl.hasAttribute(ATTR_NAME) ? styleParser.parse(sceneEl.getAttribute(ATTR_NAME)) : undefined;\n  var dotsColor = loaderAttribute && loaderAttribute.dotsColor || 'white';\n  var backgroundColor = loaderAttribute && loaderAttribute.backgroundColor || '#24CAFF';\n  var loaderEnabled = loaderAttribute === undefined || loaderAttribute.enabled === 'true' || loaderAttribute.enabled === undefined; // true default\n  var loaderScene;\n  var sphereGeometry;\n  var sphereMaterial;\n  var sphereMesh1;\n  var sphereMesh2;\n  var sphereMesh3;\n  var camera;\n  var clock;\n  var time;\n  var render;\n\n  if (!loaderEnabled) { return; }\n\n  // Setup Scene.\n  loaderScene = new THREE.Scene();\n  sphereGeometry = new THREE.SphereGeometry(0.20, 36, 18, 0, 2 * Math.PI, 0, Math.PI);\n  sphereMaterial = new THREE.MeshBasicMaterial({color: dotsColor});\n  sphereMesh1 = new THREE.Mesh(sphereGeometry, sphereMaterial);\n  sphereMesh2 = sphereMesh1.clone();\n  sphereMesh3 = sphereMesh1.clone();\n  camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.0005, 10000);\n  clock = new THREE.Clock();\n  time = 0;\n  render = function () {\n    sceneEl.renderer.render(loaderScene, camera);\n    time = clock.getElapsedTime() % 4;\n    sphereMesh1.visible = time >= 1;\n    sphereMesh2.visible = time >= 2;\n    sphereMesh3.visible = time >= 3;\n  };\n\n  loaderScene.background = new THREE.Color(backgroundColor);\n  loaderScene.add(camera);\n  sphereMesh1.position.set(-1, 0, -15);\n  sphereMesh2.position.set(0, 0, -15);\n  sphereMesh3.position.set(1, 0, -15);\n  camera.add(sphereMesh1);\n  camera.add(sphereMesh2);\n  camera.add(sphereMesh3);\n  setupTitle();\n\n  // Delay 200ms to avoid loader flashes.\n  setTimeout(function () {\n    if (sceneEl.hasLoaded) { return; }\n    resize(camera);\n    titleEl.style.display = 'block';\n    window.addEventListener('resize', function () { resize(camera); });\n    sceneEl.renderer.setAnimationLoop(render);\n  }, 200);\n}\n\nexport function remove () {\n  window.removeEventListener('resize', resize);\n  if (!titleEl) { return; }\n  // Hide title.\n  titleEl.style.display = 'none';\n}\n\nfunction resize (camera) {\n  var embedded = sceneEl.hasAttribute('embedded');\n  var size = getSceneCanvasSize(sceneEl.canvas, embedded, sceneEl.maxCanvasSize, sceneEl.is('vr-mode'));\n  camera.aspect = size.width / size.height;\n  camera.updateProjectionMatrix();\n   // Notify renderer of size change.\n  sceneEl.renderer.setSize(size.width, size.height, false);\n}\n\nfunction setupTitle () {\n  titleEl = document.createElement('div');\n  titleEl.className = LOADER_TITLE_CLASS;\n  titleEl.innerHTML = document.title;\n  titleEl.style.display = 'none';\n  titleEl.setAttribute(AFRAME_INJECTED, '');\n  sceneEl.appendChild(titleEl);\n}\n","/*\n  Scene index for keeping track of created scenes.\n*/\nexport default [];\n","import * as coordinates from '../utils/coordinates.js';\nimport debug from 'debug';\n\nvar warn = debug('core:propertyTypes:warn');\n\nexport var propertyTypes = {};\nvar nonCharRegex = /[,> .[\\]:]/;\nvar urlRegex = /url\\((.+)\\)/;\n\n// Built-in property types.\nregisterPropertyType('audio', '', assetParse, assetStringify);\nregisterPropertyType('array', [], arrayParse, arrayStringify, arrayEquals);\nregisterPropertyType('asset', '', assetParse, assetStringify);\nregisterPropertyType('boolean', false, boolParse);\nregisterPropertyType('color', '#FFF');\nregisterPropertyType('int', 0, intParse);\nregisterPropertyType('number', 0, numberParse);\nregisterPropertyType('map', '', assetParse, assetStringify);\nregisterPropertyType('model', '', assetParse, assetStringify);\nregisterPropertyType('selector', null, selectorParse, selectorStringify, defaultEquals, false);\nregisterPropertyType('selectorAll', null, selectorAllParse, selectorAllStringify, arrayEquals, false);\nregisterPropertyType('src', '', srcParse, assetStringify);\nregisterPropertyType('string', '');\nregisterPropertyType('time', 0, intParse);\nregisterPropertyType('vec2', {x: 0, y: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec3', {x: 0, y: 0, z: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec4', {x: 0, y: 0, z: 0, w: 1}, vecParse, coordinates.stringify, coordinates.equals);\n\n/**\n * Register a parser for re-use such that when someone uses `type` in the schema,\n * `schema.process` will set the property `parse` and `stringify`.\n *\n * @param {string} type - Type name.\n * @param [defaultValue=null] -\n *   Default value to use if component does not define default value.\n * @param {function} [parse=defaultParse] - Parse string function.\n * @param {function} [stringify=defaultStringify] - Stringify to DOM function.\n * @param {function} [equals=defaultEquals] - Equality comparator.\n * @param {boolean} [cachable=false] - Whether or not the parsed value of a property can be cached.\n */\nexport function registerPropertyType (type, defaultValue, parse, stringify, equals, cacheable) {\n  if (type in propertyTypes) {\n    throw new Error('Property type ' + type + ' is already registered.');\n  }\n\n  propertyTypes[type] = {\n    default: defaultValue,\n    parse: parse || defaultParse,\n    stringify: stringify || defaultStringify,\n    equals: equals || defaultEquals,\n    isCacheable: cacheable !== false\n  };\n}\n\nfunction arrayParse (value) {\n  if (Array.isArray(value)) { return value; }\n  if (!value || typeof value !== 'string') { return []; }\n  return value.split(',').map(trim);\n  function trim (str) { return str.trim(); }\n}\n\nfunction arrayStringify (value) {\n  return value.join(', ');\n}\n\nfunction arrayEquals (a, b) {\n  if (!Array.isArray(a) || !Array.isArray(b)) {\n    return a === b;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; i++) {\n    // FIXME: Deep-equals for objects?\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * For general assets.\n *\n * @param {string} value - Can either be `url(<value>)`, an ID selector to an asset, or\n *   just string.\n * @returns {string} Parsed value from `url(<value>)`, src from `<someasset src>`, or\n *   just string.\n */\nfunction assetParse (value) {\n  var el;\n  var parsedUrl;\n\n  // If an element was provided (e.g. canvas or video), just return it.\n  if (typeof value !== 'string') { return value; }\n\n  // Wrapped `url()` in case of data URI.\n  parsedUrl = value.match(urlRegex);\n  if (parsedUrl) { return parsedUrl[1]; }\n\n  // ID.\n  if (value.charAt(0) === '#') {\n    el = document.getElementById(value.substring(1));\n    if (el) {\n      // Pass through media elements. If we have the elements, we don't have to call\n      // three.js loaders which would re-request the assets.\n      if (el.tagName === 'CANVAS' || el.tagName === 'VIDEO' || el.tagName === 'IMG') {\n        return el;\n      }\n      return el.getAttribute('src');\n    }\n    warn('\"' + value + '\" asset not found.');\n    return;\n  }\n\n  // Non-wrapped url().\n  return value;\n}\n\nfunction assetStringify (value) {\n  if (value.getAttribute) {\n    var id = value.getAttribute('id');\n    if (id) {\n      return '#' + value.getAttribute('id');\n    }\n    // HTMLElement without id can not be stringified, as there is no string assetParse\n    // could convert back to this exact element, using the src attribute instead.\n    return value.getAttribute('src');\n  }\n  return defaultStringify(value);\n}\n\nfunction defaultParse (value) {\n  return value;\n}\n\nfunction defaultStringify (value) {\n  if (value === null) { return 'null'; }\n  return value.toString();\n}\n\nfunction defaultEquals (a, b) {\n  return a === b;\n}\n\nfunction boolParse (value) {\n  return value !== 'false' && value !== false;\n}\n\nfunction intParse (value) {\n  return parseInt(value, 10);\n}\n\nfunction numberParse (value) {\n  return parseFloat(value, 10);\n}\n\nfunction selectorParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  if (value[0] === '#' && !nonCharRegex.test(value)) {\n    // When selecting element by ID only, use getElementById for better performance.\n    // Don't match like #myId .child.\n    return document.getElementById(value.substring(1));\n  }\n  return document.querySelector(value);\n}\n\nfunction selectorAllParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  return Array.prototype.slice.call(document.querySelectorAll(value), 0);\n}\n\nfunction selectorStringify (value) {\n  if (value.getAttribute) {\n    return '#' + value.getAttribute('id');\n  }\n  return defaultStringify(value);\n}\n\nfunction selectorAllStringify (value) {\n  if (value instanceof Array) {\n    return value.map(function (element) {\n      return '#' + element.getAttribute('id');\n    }).join(', ');\n  }\n  return defaultStringify(value);\n}\n\nfunction srcParse (value) {\n  warn('`src` property type is deprecated. Use `asset` instead.');\n  return assetParse(value);\n}\n\nfunction vecParse (value, defaultValue, target) {\n  return coordinates.parse(value, defaultValue, target);\n}\n\n/**\n * Validate the default values in a schema to match their type.\n *\n * @param {string} type - Property type name.\n * @param defaultVal - Property type default value.\n * @returns {boolean} Whether default value is accurate given the type.\n */\nexport function isValidDefaultValue (type, defaultVal) {\n  if (type === 'audio' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'array' && !Array.isArray(defaultVal)) { return false; }\n  if (type === 'asset' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'boolean' && typeof defaultVal !== 'boolean') { return false; }\n  if (type === 'color' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'int' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'number' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'map' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'model' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'selector' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'selectorAll' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'src' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'string' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'time' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'vec2') { return isValidDefaultCoordinate(defaultVal, 2); }\n  if (type === 'vec3') { return isValidDefaultCoordinate(defaultVal, 3); }\n  if (type === 'vec4') { return isValidDefaultCoordinate(defaultVal, 4); }\n  return true;\n}\n\n/**\n * Checks if default coordinates are valid.\n *\n * @param possibleCoordinates\n * @param {number} dimensions - 2 for 2D Vector, 3 for 3D vector.\n * @returns {boolean} Whether coordinates are parsed correctly.\n */\nexport function isValidDefaultCoordinate (possibleCoordinates, dimensions) {\n  if (possibleCoordinates === null) { return true; }\n  if (typeof possibleCoordinates !== 'object') { return false; }\n\n  if (Object.keys(possibleCoordinates).length !== dimensions) {\n    return false;\n  } else {\n    var x = possibleCoordinates.x;\n    var y = possibleCoordinates.y;\n    var z = possibleCoordinates.z;\n    var w = possibleCoordinates.w;\n\n    if (typeof x !== 'number' || typeof y !== 'number') { return false; }\n    if (dimensions > 2 && typeof z !== 'number') { return false; }\n    if (dimensions > 3 && typeof w !== 'number') { return false; }\n  }\n\n  return true;\n}\n","import * as utils from '../utils/index.js';\nimport * as PropertyTypes from './propertyTypes.js';\n\nvar debug = utils.debug;\nvar isValidDefaultValue = PropertyTypes.isValidDefaultValue;\nvar propertyTypes = PropertyTypes.propertyTypes;\n\nvar warn = debug('core:schema:warn');\n\n/**\n * A schema is classified as a schema for a single property if:\n * - `type` is defined on the schema as a string.\n * - OR `default` is defined on the schema, as a reserved keyword.\n * - OR schema is empty.\n */\nexport function isSingleProperty (schema) {\n  if ('type' in schema) {\n    return typeof schema.type === 'string';\n  }\n  return 'default' in schema;\n}\n\n/**\n * Build step to schema to use `type` to inject default value, parser, and stringifier.\n *\n * @param {object} schema\n * @param {string} componentName\n * @returns {object} Schema.\n */\nexport function process (schema, componentName) {\n  var propName;\n\n  // For single property schema, run processPropDefinition over the whole schema.\n  if (isSingleProperty(schema)) {\n    return processPropertyDefinition(schema, componentName);\n  }\n\n  // For multi-property schema, run processPropDefinition over each property definition.\n  for (propName in schema) {\n    schema[propName] = processPropertyDefinition(schema[propName], componentName);\n  }\n  return schema;\n}\n\n/**\n * Inject default value, parser, stringifier for single property.\n *\n * @param {object} propDefinition\n * @param {string} componentName\n */\nexport function processPropertyDefinition (propDefinition, componentName) {\n  var defaultVal = propDefinition.default;\n  var isCustomType;\n  var propType;\n  var typeName = propDefinition.type;\n\n  // Type inference.\n  if (!propDefinition.type) {\n    if (defaultVal !== undefined &&\n        (typeof defaultVal === 'boolean' || typeof defaultVal === 'number')) {\n      // Type inference.\n      typeName = typeof defaultVal;\n    } else if (Array.isArray(defaultVal)) {\n      typeName = 'array';\n    } else {\n      // Fall back to string.\n      typeName = 'string';\n    }\n  } else if (propDefinition.type === 'bool') {\n    typeName = 'boolean';\n  } else if (propDefinition.type === 'float') {\n    typeName = 'number';\n  }\n\n  propType = propertyTypes[typeName];\n  if (!propType) {\n    warn('Unknown property type for component `' + componentName + '`: ' + typeName);\n  }\n\n  // Fill in parse and stringify using property types.\n  isCustomType = !!propDefinition.parse;\n  propDefinition.parse = propDefinition.parse || propType.parse;\n  propDefinition.stringify = propDefinition.stringify || propType.stringify;\n  propDefinition.equals = propDefinition.equals || propType.equals;\n  propDefinition.isCacheable = propDefinition.isCacheable === true || propType.isCacheable;\n\n  // Fill in type name.\n  propDefinition.type = typeName;\n\n  // Check that default value exists.\n  if ('default' in propDefinition) {\n    // Check that default values are valid.\n    if (!isCustomType && !isValidDefaultValue(typeName, defaultVal)) {\n      warn('Default value `' + defaultVal + '` does not match type `' + typeName +\n           '` in component `' + componentName + '`');\n    }\n  } else {\n    // Fill in default value.\n    propDefinition.default = propType.default;\n  }\n\n  return propDefinition;\n}\n\n/**\n * Parse propData using schema. Use default values if not existing in propData.\n *\n * @param {object} propData - Unparsed properties.\n * @param {object} schema - Property types definition.\n * @param {boolean} getPartialData - Whether to return full component data or just the data\n *        with keys in `propData`.\n * @param {string } componentName - Name of the component, used for the property warning.\n * @param {boolean} silent - Suppress warning messages.\n */\nexport var parseProperties = (function () {\n  var propNames = [];\n\n  return function (propData, schema, getPartialData, componentName, silent) {\n    var i;\n    var propName;\n    var propDefinition;\n    var propValue;\n\n    propNames.length = 0;\n    for (propName in (getPartialData ? propData : schema)) {\n      if (getPartialData && propData[propName] === undefined) { continue; }\n      propNames.push(propName);\n    }\n\n    if (propData === null || typeof propData !== 'object') { return propData; }\n\n    // Validation errors.\n    for (propName in propData) {\n      if (propData[propName] !== undefined && !schema[propName] && !silent) {\n        warn('Unknown property `' + propName +\n             '` for component/system `' + componentName + '`.');\n      }\n    }\n\n    for (i = 0; i < propNames.length; i++) {\n      propName = propNames[i];\n      propDefinition = schema[propName];\n      propValue = propData[propName];\n      if (!(schema[propName])) { return; }\n      propData[propName] = parseProperty(propValue, propDefinition);\n    }\n\n    return propData;\n  };\n})();\n\n/**\n * Deserialize a single property.\n *\n * @param {any} value - The value to parse.\n * @param {object} propDefinition - The single property schema for the property.\n * @param {any} target - Optional target value to parse into (reuse).\n */\nexport function parseProperty (value, propDefinition, target) {\n  // Use default value if value is falsy.\n  if (value === undefined || value === null || value === '') {\n    value = propDefinition.default;\n    if (Array.isArray(value)) { value = value.slice(); }\n  }\n  // Invoke property type parser.\n  return propDefinition.parse(value, propDefinition.default, target);\n}\n\n/**\n * Serialize a group of properties.\n */\nexport function stringifyProperties (propData, schema) {\n  var propName;\n  var propDefinition;\n  var propValue;\n  var stringifiedData = {};\n  var value;\n\n  for (propName in propData) {\n    propDefinition = schema[propName];\n    propValue = propData[propName];\n    value = propValue;\n    if (typeof value === 'object') {\n      value = stringifyProperty(propValue, propDefinition);\n      if (!propDefinition) { warn('Unknown component property: ' + propName); }\n    }\n    if (value !== undefined) {\n      stringifiedData[propName] = value;\n    }\n  }\n  return stringifiedData;\n}\n\n/**\n * Serialize a single property.\n */\nexport function stringifyProperty (value, propDefinition) {\n  // This function stringifies but it's used in a context where\n  // there's always second stringification pass. By returning the original\n  // value when it's not an object we save one unnecessary call\n  // to JSON.stringify.\n  if (typeof value !== 'object') { return value; }\n  // if there's no schema for the property we use standard JSON stringify\n  if (!propDefinition || value === null) { return JSON.stringify(value); }\n  return propDefinition.stringify(value);\n}\n","/* global Node */\nimport * as schema from './schema.js';\nimport scenes from './scene/scenes.js';\nimport * as systems from './system.js';\nimport * as utils from '../utils/index.js';\n\nexport var components = {}; // Keep track of registered components.\nvar parseProperty = schema.parseProperty;\nvar processSchema = schema.process;\nvar isSingleProp = schema.isSingleProperty;\nvar stringifyProperties = schema.stringifyProperties;\nvar stringifyProperty = schema.stringifyProperty;\nvar styleParser = utils.styleParser;\nvar warn = utils.debug('core:component:warn');\n\nvar aframeScript = document.currentScript;\nvar upperCaseRegExp = new RegExp('[A-Z]+');\n\n// Object pools by component, created upon registration.\nvar objectPools = {};\nvar emptyInitialOldData = Object.freeze({});\nvar encounteredUnknownProperties = [];\n\n// Handler translating get/set into getComputedPropertyValue and recomputeProperty.\nvar attrValueProxyHandler = {\n  get: function (target, prop) {\n    return target.getComputedPropertyValue(prop);\n  },\n  set: function (target, prop, newValue) {\n    if (prop in target.schema) {\n      target.recomputeProperty(prop, newValue);\n    } else if (newValue !== undefined) {\n      target.handleUnknownProperty(prop, newValue);\n    }\n    return true;\n  }\n};\n\n/**\n * Component class definition.\n *\n * Components configure appearance, modify behavior, or add functionality to\n * entities. The behavior and appearance of an entity can be changed at runtime\n * by adding, removing, or updating components. Entities do not share instances\n * of components.\n *\n * @member {object} el - Reference to the entity element.\n * @member {string} attrValue - Value of the corresponding HTML attribute.\n * @member {string} id - Optional id for differentiating multiple instances on the same entity.\n */\nexport var Component = function (el, attrValue, id) {\n  var self = this;\n\n  // If component is sceneOnly check the entity is the scene element\n  if (this.sceneOnly && !el.isScene) {\n    throw new Error('Component `' + this.name + '` can only be applied to <a-scene>');\n  }\n\n  // If component name has an id we check component type multiplicity.\n  if (id && !this.multiple) {\n    throw new Error('Trying to initialize multiple ' +\n                    'components of type `' + this.name +\n                    '`. There can only be one component of this type per entity.');\n  }\n\n  this.el = el;\n  this.id = id;\n  this.attrName = this.name + (id ? '__' + id : '');\n  this.evtDetail = {id: this.id, name: this.name};\n  this.initialized = false;\n  this.el.components[this.attrName] = this;\n  this.objectPool = objectPools[this.name];\n\n  var events = this.events;\n  this.events = {};\n  eventsBind(this, events);\n\n  // Allocate data and oldData.\n  this.attrValue = undefined;\n  if (this.isObjectBased) {\n    this.data = this.objectPool.use();\n    // Drop any properties added by dynamic schemas in previous use\n    utils.objectPool.removeUnusedKeys(this.data, this.schema);\n    this.oldData = this.objectPool.use();\n    utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n\n    this.attrValueProxy = new Proxy(this, attrValueProxyHandler);\n  } else {\n    this.data = undefined;\n    this.oldData = undefined;\n    this.attrValueProxy = undefined;\n  }\n\n  // Dynamic schema requires special handling of unknown properties to avoid false-positives.\n  this.deferUnknownPropertyWarnings = !!this.updateSchema;\n\n  // Last value passed to updateProperties.\n  // This type of throttle ensures that when a burst of changes occurs, the final change to the\n  // component always triggers an event (so a consumer of this event will end up reading the correct\n  // final state, following a burst of changes).\n  this.throttledEmitComponentChanged = utils.throttleLeadingAndTrailing(function emitChange () {\n    el.emit('componentchanged', self.evtDetail, false);\n  }, 200);\n\n  // Initial call to updateProperties, force clobber to trigger an initial computation of all properties.\n  this.updateProperties(attrValue, true);\n};\n\nComponent.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during component initialization and is only run once.\n   * Components can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Map of event names to bound event handlers that will be lifecycle-handled.\n   * Will be detached on pause / remove.\n   * Will be attached on play.\n   */\n  events: {},\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever component's data changes.\n   * Also called on component initialization when the component receives initial data.\n   *\n   * @param {object} prevData - Previous attributes of the component.\n   */\n  update: function (prevData) { /* no-op */ },\n\n  /**\n   * Update schema handler. Allows the component to dynamically change its schema.\n   * Called whenever a property marked as schemaChange changes.\n   * Also called on initialization when the component receives initial data.\n   *\n   * @param {object} data - The data causing the schema change\n   */\n  updateSchema: undefined,\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   * @param {object} camera - Camera used to render the last frame.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ },\n\n  /**\n   * Remove handler. Similar to detachedCallback.\n   * Called whenever component is removed from the entity (i.e., removeAttribute).\n   * Components can use this to reset behavior on the entity.\n   */\n  remove: function () { /* no-op */ },\n\n  /**\n   * Stringify properties if necessary.\n   *\n   * Only called from `Entity.setAttribute` for properties whose parsers accept a non-string\n   * value (e.g., selector, vec3 property types).\n   *\n   * @param {object} data - Complete component data.\n   * @returns {string}\n   */\n  stringify: function (data) {\n    var schema = this.schema;\n    if (typeof data === 'string') { return data; }\n    if (this.isSingleProperty) { return stringifyProperty(data, schema); }\n    data = stringifyProperties(data, schema);\n    return styleParser.stringify(data);\n  },\n\n  /**\n   * Write cached attribute data to the entity DOM element.\n   *\n   * @param {boolean} isDefault - Whether component is a default component. Always flush for\n   *   default components.\n   */\n  flushToDOM: function (isDefault) {\n    var attrValue = isDefault ? this.data : this.attrValue;\n    if (attrValue === null || attrValue === undefined) { return; }\n    window.HTMLElement.prototype.setAttribute.call(this.el, this.attrName,\n                                                   this.stringify(attrValue));\n  },\n\n  /**\n   * Apply new component data if data has changed (from setAttribute).\n   *\n   * @param {string} attrValue - HTML attribute value.\n   *        If undefined, use the cached attribute value and continue updating properties.\n   * @param {boolean} clobber - The previous component data is overwritten by the attrValue.\n   */\n  updateProperties: function (attrValue, clobber) {\n    var el = this.el;\n\n    // Update data\n    this.updateData(attrValue, clobber);\n\n    // Just cache the attribute if the entity has not loaded\n    // Components are not initialized until the entity has loaded\n    if (!el.hasLoaded && !el.isLoading) {\n      return;\n    }\n\n    if (this.initialized) {\n      this.callUpdateHandler();\n    } else {\n      this.initComponent();\n    }\n  },\n\n  initComponent: function () {\n    var el = this.el;\n    var initialOldData;\n\n    // Component is already being initialized.\n    if (el.initializingComponents[this.name]) { return; }\n\n    // Prevent infinite loop in case of init method setting same component on the entity.\n    el.initializingComponents[this.name] = true;\n    // Initialize component.\n    this.init();\n    this.initialized = true;\n    delete el.initializingComponents[this.name];\n\n    // For oldData, pass empty object to multiple-prop schemas or object single-prop schema.\n    // Pass undefined to rest of types.\n    initialOldData = this.isObjectBased ? emptyInitialOldData : undefined;\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n    this.storeOldData();\n    this.update(initialOldData);\n\n    // Play the component if the entity is playing.\n    if (el.isPlaying) { this.play(); }\n    el.emit('componentinitialized', this.evtDetail, false);\n  },\n\n  /**\n   * @param {string|object} attrValue - Passed argument from setAttribute.\n   * @param {bool} clobber - Whether or not to overwrite previous data by the attrValue.\n   */\n  updateData: function (attrValue, clobber) {\n    // Single property (including object based single property)\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    // Multi-property\n    if (clobber) {\n      // Clobber. Rebuild.\n      utils.objectPool.clearObject(this.attrValue);\n      this.recomputeData(attrValue);\n      // Quirk: always update schema when clobbering, even if there are no schemaChange properties in schema.\n      this.schemaChangeRequired = !!this.updateSchema;\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    } else {\n      // AttrValue is an object, apply it to the attrValueProxy object\n      utils.extend(this.attrValueProxy, attrValue);\n    }\n\n    // Update schema if needed\n    this.updateSchemaIfNeeded(attrValue);\n  },\n\n  updateSchemaIfNeeded: function (attrValue) {\n    if (this.schemaChangeRequired && this.updateSchema) {\n      encounteredUnknownProperties.length = 0;\n\n      this.updateSchema(this.data);\n      utils.objectPool.removeUnusedKeys(this.data, this.schema);\n      this.recomputeData(attrValue);\n      this.schemaChangeRequired = false;\n\n      // Report any excess properties not valid in the updated schema\n      for (var key in this.attrValue) {\n        if (this.attrValue[key] === undefined) { continue; }\n        if (encounteredUnknownProperties.indexOf(key) !== -1) { continue; }\n        if (!(key in this.schema)) {\n          warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n        }\n      }\n    }\n\n    // Log any pending unknown property warning\n    for (var i = 0; i < encounteredUnknownProperties.length; i++) {\n      warn('Unknown property `' + encounteredUnknownProperties[i] +\n            '` for component `' + this.name + '`.');\n    }\n    encounteredUnknownProperties.length = 0;\n  },\n\n  /**\n   * Check if component should fire update and fire update lifecycle handler.\n   */\n  callUpdateHandler: function () {\n    // Don't update if properties haven't changed.\n    // Always update rotation, position, scale.\n    if (!this.isPositionRotationScale && !this.dataChanged) { return; }\n\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n\n    // Flag oldData in use while inside `update()`\n    var oldData = this.oldData;\n    this.oldDataInUse = true;\n    this.update(oldData);\n    if (oldData !== this.oldData) {\n      // Recursive update replaced oldData, so clean up our copy.\n      this.objectPool.recycle(oldData);\n    }\n    this.oldDataInUse = false;\n\n    // Update oldData to match current data state for next update\n    this.storeOldData();\n\n    this.throttledEmitComponentChanged();\n  },\n\n  handleMixinUpdate: function () {\n    this.recomputeData();\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Reset value of a property to the property's default value.\n   * If single property component, reset value to component's default value.\n   *\n   * @param {string} propertyName - Name of property to reset.\n   */\n  resetProperty: function (propertyName) {\n    if (!this.isSingleProperty && !(propertyName in this.schema)) { return; }\n\n    // Reset attrValue for single- and multi-property components\n    if (propertyName) {\n      this.attrValue[propertyName] = undefined;\n    } else {\n      // Return attrValue for object based single property components\n      if (this.isObjectBased) {\n        this.objectPool.recycle(this.attrValue);\n      }\n      this.attrValue = undefined;\n    }\n    this.recomputeProperty(propertyName, undefined);\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Extend schema of component given a partial schema.\n   *\n   * Some components might want to mutate their schema based on certain properties.\n   * e.g., Material component changes its schema based on `shader` to account for different\n   * uniforms.\n   *\n   * @param {object} schemaAddon - Schema chunk that extend base schema.\n   */\n  extendSchema: function (schemaAddon) {\n    var extendedSchema;\n    // Clone base schema.\n    extendedSchema = utils.extend({}, components[this.name].schema);\n    // Extend base schema with new schema chunk.\n    utils.extend(extendedSchema, schemaAddon);\n    this.schema = processSchema(extendedSchema);\n    this.el.emit('schemachanged', this.evtDetail);\n  },\n\n  getComputedPropertyValue: function (key) {\n    var mixinEls = this.el.mixinEls;\n\n    // Defined as attribute on entity\n    var attrValue = (this.attrValue && key) ? this.attrValue[key] : this.attrValue;\n    if (attrValue !== undefined) {\n      return attrValue;\n    }\n\n    // Inherited from mixin\n    for (var i = mixinEls.length - 1; i >= 0; i--) {\n      var mixinData = mixinEls[i].getAttribute(this.attrName);\n      if ((mixinData === null) || (key && !(key in mixinData))) { continue; }\n      return key ? mixinData[key] : mixinData;\n    }\n\n    // Schema default\n    var schemaDefault = key ? this.schema[key].default : this.schema.default;\n    return schemaDefault;\n  },\n\n  recomputeProperty: function (key, newValue) {\n    var propertySchema = key ? this.schema[key] : this.schema;\n\n    if (newValue !== undefined && newValue !== null) {\n      // Initialize attrValue ad-hoc as it's the return value of getDOMAttribute\n      // and is expected to be undefined until a property has been set.\n      if (this.attrValue === undefined && this.isObjectBased) {\n        this.attrValue = this.objectPool.use();\n      }\n\n      // Parse the new value into attrValue (re-using objects where possible)\n      var newAttrValue = key ? this.attrValue[key] : this.attrValue;\n      // Some property types (like selectors) depend on external state (e.g. DOM) during parsing and can't be cached.\n      newAttrValue = propertySchema.isCacheable ? parseProperty(newValue, propertySchema, newAttrValue) : newValue;\n      // In case the output is a string, store the unparsed value (no double parsing and helps inspector)\n      if (typeof newAttrValue === 'string') {\n        // Quirk: empty strings aren't considered values for single-property schemas\n        newAttrValue = newValue === '' ? undefined : newValue;\n      }\n      // Update attrValue with new, possibly parsed, value.\n      if (key) {\n        this.attrValue[key] = newAttrValue;\n      } else {\n        this.attrValue = newAttrValue;\n      }\n    }\n\n    // Quirk: recursive updates keep this.oldData in use, meaning oldData isn't up-to-date yet.\n    // Before the first change to data is made, provision a new oldData and update it.\n    // Cleanup of orphaned oldData objects is handled in callUpdateHandler.\n    if (this.oldDataInUse) {\n      this.oldData = this.objectPool.use();\n      utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n      this.storeOldData();\n      this.oldDataInUse = false;\n    }\n\n    var oldComputedValue = key ? this.oldData[key] : this.oldData;\n    var targetValue = key ? this.data[key] : this.data;\n\n    var newComputedValue = parseProperty(this.getComputedPropertyValue(key), propertySchema, targetValue);\n    // Quirk: Single-property arrays DO NOT share references, while arrays in multi-property components do.\n    if (propertySchema.type === 'array' && !key) {\n      newComputedValue = utils.clone(newComputedValue);\n    }\n\n    // Check if the resulting (parsed) value differs from before\n    if (!propertySchema.equals(newComputedValue, oldComputedValue)) {\n      this.dataChanged = true;\n\n      // Mark schema change required\n      if (propertySchema.schemaChange) {\n        this.schemaChangeRequired = true;\n      }\n    }\n\n    // Update data with the newly computed value.\n    if (key) {\n      this.data[key] = newComputedValue;\n    } else {\n      this.data = newComputedValue;\n    }\n\n    return newComputedValue;\n  },\n\n  handleUnknownProperty: function (key, newValue) {\n    // Persist the raw value on attrValue\n    if (this.attrValue === undefined) {\n      this.attrValue = this.objectPool.use();\n    }\n    this.attrValue[key] = newValue;\n\n    // Handle warning the user about the unknown property.\n    // Since a component might have a dynamic schema, the warning might be\n    // silenced or deferred to avoid false-positives.\n    if (this.deferUnknownPropertyWarnings) {\n      encounteredUnknownProperties.push(key);\n    } else if (!this.silenceUnknownPropertyWarnings) {\n      warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n    }\n  },\n\n  /**\n   * Updates oldData to the current state of data taking care to\n   * copy and clone objects where necessary.\n   */\n  storeOldData: function () {\n    // Non object based single properties\n    if (!this.isObjectBased) {\n      this.oldData = this.data;\n      return;\n    }\n\n    // Object based single property\n    if (this.isSingleProperty) {\n      this.oldData = parseProperty(this.data, this.schema, this.oldData);\n      return;\n    }\n\n    // Object based\n    var key;\n    for (key in this.schema) {\n      if (this.data[key] === undefined) { continue; }\n      if (this.data[key] && typeof this.data[key] === 'object') {\n        this.oldData[key] = parseProperty(this.data[key], this.schema[key], this.oldData[key]);\n      } else {\n        this.oldData[key] = this.data[key];\n      }\n    }\n  },\n\n  /**\n   * Triggers a recompute of the data object.\n   *\n   * @param {string|object} attrValue - Optional additional data updates\n   */\n  recomputeData: function (attrValue) {\n    var key;\n\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    for (key in this.schema) {\n      this.attrValueProxy[key] = undefined;\n    }\n\n    if (attrValue && typeof attrValue === 'object') {\n      utils.extend(this.attrValueProxy, attrValue);\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    }\n  },\n\n  /**\n   * Attach events from component-defined events map.\n   */\n  eventsAttach: function () {\n    var eventName;\n    // Safety detach to prevent double-registration.\n    this.eventsDetach();\n    for (eventName in this.events) {\n      this.el.addEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Detach events from component-defined events map.\n   */\n  eventsDetach: function () {\n    var eventName;\n    for (eventName in this.events) {\n      this.el.removeEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Release and free memory.\n   */\n  destroy: function () {\n    this.objectPool.recycle(this.attrValue);\n    this.objectPool.recycle(this.data);\n    this.objectPool.recycle(this.oldData);\n    this.attrValue = this.data = this.oldData = this.attrValueProxy = undefined;\n  }\n};\n\nfunction eventsBind (component, events) {\n  var eventName;\n  for (eventName in events) {\n    component.events[eventName] = events[eventName].bind(component);\n  }\n}\n\n// For testing.\nexport var registrationOrderWarnings = {};\n\n/**\n * Register a component to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component schema and lifecycle method handlers.\n * @returns {object} Component.\n */\nexport function registerComponent (name, definition) {\n  var NewComponent;\n  var proto = {};\n  var schema;\n  var schemaIsSingleProp;\n\n  // Warning if component is statically registered after the scene.\n  if (document.currentScript && document.currentScript !== aframeScript) {\n    scenes.forEach(function checkPosition (sceneEl) {\n      // Okay to register component after the scene at runtime.\n      if (sceneEl.hasLoaded) { return; }\n\n      // Check that component is declared before the scene.\n      if (document.currentScript.compareDocumentPosition(sceneEl) ===\n          Node.DOCUMENT_POSITION_FOLLOWING) { return; }\n\n      warn('The component `' + name + '` was registered in a <script> tag after the scene. ' +\n           'Component <script> tags in an HTML file should be declared *before* the scene ' +\n           'such that the component is available to entities during scene initialization.');\n\n      // For testing.\n      if (window.debug) { registrationOrderWarnings[name] = true; }\n    });\n  }\n\n  if (upperCaseRegExp.test(name) === true) {\n    warn('The component name `' + name + '` contains uppercase characters, but ' +\n         'HTML will ignore the capitalization of attribute names. ' +\n         'Change the name to be lowercase: `' + name.toLowerCase() + '`');\n  }\n\n  if (name.indexOf('__') !== -1) {\n    throw new Error('The component name `' + name + '` is not allowed. ' +\n                    'The sequence __ (double underscore) is reserved to specify an id' +\n                    ' for multiple components of the same type');\n  }\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (components[name]) {\n    throw new Error('The component `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same component ' +\n                    'or two different components of the same name.');\n  }\n\n  NewComponent = function (el, attr, id) {\n    Component.call(this, el, attr, id);\n  };\n\n  NewComponent.prototype = Object.create(Component.prototype, proto);\n  NewComponent.prototype.name = name;\n  NewComponent.prototype.isPositionRotationScale =\n    name === 'position' || name === 'rotation' || name === 'scale';\n  NewComponent.prototype.constructor = NewComponent;\n  NewComponent.prototype.system = systems && systems.systems[name];\n  NewComponent.prototype.play = wrapPlay(NewComponent.prototype.play);\n  NewComponent.prototype.pause = wrapPause(NewComponent.prototype.pause);\n\n  schema = utils.extend(processSchema(NewComponent.prototype.schema,\n                                      NewComponent.prototype.name));\n  NewComponent.prototype.isSingleProperty = schemaIsSingleProp = isSingleProp(NewComponent.prototype.schema);\n  NewComponent.prototype.isObjectBased = !schemaIsSingleProp ||\n              (schemaIsSingleProp && (isObject(schema.default) || isObject(parseProperty(undefined, schema))));\n\n  // Create object pool for class of components.\n  objectPools[name] = utils.objectPool.createPool();\n\n  components[name] = {\n    Component: NewComponent,\n    dependencies: NewComponent.prototype.dependencies,\n    before: NewComponent.prototype.before,\n    after: NewComponent.prototype.after,\n    isSingleProperty: NewComponent.prototype.isSingleProperty,\n    isObjectBased: NewComponent.prototype.isObjectBased,\n    multiple: NewComponent.prototype.multiple,\n    sceneOnly: NewComponent.prototype.sceneOnly,\n    name: name,\n    schema: schema,\n    stringify: NewComponent.prototype.stringify\n  };\n\n  // Notify all scenes\n  for (var i = 0; i < scenes.length; i++) {\n    scenes[i].emit('componentregistered', {name: name}, false);\n  }\n\n  return NewComponent;\n}\n\n/**\n * Checks if a component has defined a method that needs to run every frame.\n */\nfunction hasBehavior (component) {\n  return component.tick || component.tock;\n}\n\n/**\n * Wrapper for defined pause method.\n * Pause component by removing tick behavior and calling user's pause method.\n *\n * @param pauseMethod {function}\n */\nfunction wrapPause (pauseMethod) {\n  return function pause () {\n    var sceneEl = this.el.sceneEl;\n    if (!this.isPlaying) { return; }\n    pauseMethod.call(this);\n    this.isPlaying = false;\n    this.eventsDetach();\n    // Remove tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.removeBehavior(this);\n  };\n}\n\n/**\n * Wrapper for defined play method.\n * Play component by adding tick behavior and calling user's play method.\n *\n * @param playMethod {function}\n */\nfunction wrapPlay (playMethod) {\n  return function play () {\n    var sceneEl = this.el.sceneEl;\n    var shouldPlay = this.el.isPlaying && !this.isPlaying;\n    if (!this.initialized || !shouldPlay) { return; }\n    playMethod.call(this);\n    this.isPlaying = true;\n    this.eventsAttach();\n    // Add tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.addBehavior(this);\n  };\n}\n\nfunction isObject (value) {\n  return value && value.constructor === Object && !(value instanceof window.HTMLElement);\n}\n","/* global CustomEvent */\n\n/**\n * Flag indicating if A-Frame can initialize the scene or should wait.\n */\nexport var canInitializeElements = false;\n\n/**\n * Waits for the document to be ready.\n */\nexport function waitForDocumentReadyState () {\n  if (document.readyState === 'complete') {\n    emitReady();\n    return;\n  }\n\n  document.addEventListener('readystatechange', function onReadyStateChange () {\n    if (document.readyState !== 'complete') { return; }\n    document.removeEventListener('readystatechange', onReadyStateChange);\n    emitReady();\n  });\n}\n\n/**\n * Signals A-Frame that everything is ready to initialize.\n */\nexport function emitReady () {\n  if (canInitializeElements) { return; }\n  canInitializeElements = true;\n  setTimeout(function () {\n    document.dispatchEvent(new CustomEvent('aframeready'));\n  });\n}\n\n/** Resets the canInitializeElements flag, used for testing */\nexport function reset () {\n  canInitializeElements = false;\n}\n","import { parseProperties, parseProperty, process as processSchema, isSingleProperty as isSingleProp } from './schema.js';\nimport * as components from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as ready from './readyState.js';\n\nvar styleParser = utils.styleParser;\n\nexport var systems = {};  // Keep track of registered systems.\n\n/**\n * System class definition.\n *\n * Systems provide global scope and services to a group of instantiated components of the\n * same class. They can also help abstract logic away from components such that components\n * only have to worry about data.\n *\n * For example, a physics component that creates a physics world that oversees\n * all entities with a physics or rigid body component.\n *\n * TODO: Have the System prototype reuse the Component prototype. Most code is copied\n * and some pieces are missing from the Component facilities (e.g., attribute caching,\n * setAttribute behavior).\n *\n * @member {string} name - Name that system is registered under.\n * @member {Element} sceneEl - Handle to the scene element where system applies to.\n */\nexport var System = function (sceneEl) {\n  var component = components && components.components[this.name];\n\n  // Set reference to scene.\n  this.el = sceneEl;\n  this.sceneEl = sceneEl;\n\n  // Set reference to matching component (if exists).\n  if (component) { component.Component.prototype.system = this; }\n\n  // Process system configuration.\n  this.buildData();\n  this.init();\n  this.update({});\n};\n\nSystem.prototype = {\n  /**\n   * Schema to configure system.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Called during scene initialization and is only run once.\n   * Systems can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Update handler. Called during scene attribute updates.\n   * Systems can use this to dynamically update their state.\n   */\n  update: function (oldData) { /* no-op */ },\n\n  /**\n   * Build data and call update handler.\n   *\n   * @private\n   */\n  updateProperties: function (rawData) {\n    var oldData = this.data;\n    if (Object.keys(this.schema).length === 0) { return; }\n    this.buildData(rawData);\n    this.update(oldData);\n  },\n\n  /**\n   * Parse data.\n   */\n  buildData: function (rawData) {\n    var schema = this.schema;\n    if (Object.keys(schema).length === 0) { return; }\n    rawData = rawData || window.HTMLElement.prototype.getAttribute.call(this.sceneEl, this.name);\n    if (isSingleProp(schema)) {\n      this.data = parseProperty(rawData, schema);\n    } else {\n      this.data = parseProperties(styleParser.parse(rawData) || {}, schema, false, this.name);\n    }\n  },\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ }\n};\n\n/**\n * Registers a system to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component property and methods.\n * @returns {object} Component.\n */\nexport function registerSystem (name, definition) {\n  var i;\n  var NewSystem;\n  var proto = {};\n  var scenes = utils.findAllScenes(document);\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (systems[name]) {\n    throw new Error('The system `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same system ' +\n                    'or two different systems of the same name.');\n  }\n  NewSystem = function (sceneEl) { System.call(this, sceneEl); };\n  NewSystem.prototype = Object.create(System.prototype, proto);\n  NewSystem.prototype.name = name;\n  NewSystem.prototype.constructor = NewSystem;\n  NewSystem.prototype.schema = utils.extend(processSchema(NewSystem.prototype.schema));\n  systems[name] = NewSystem;\n\n  // Initialize systems for existing scenes\n  if (ready.canInitializeElements) {\n    for (i = 0; i < scenes.length; i++) { scenes[i].initSystem(name); }\n  }\n}\n","/* global customElements, CustomEvent, HTMLElement, MutationObserver */\nimport * as utils from '../utils/index.js';\nimport * as readyState from './readyState.js';\n\nvar warn = utils.debug('core:a-node:warn');\n\nexport var knownTags = {\n  'a-scene': true,\n  'a-assets': true,\n  'a-assets-items': true,\n  'a-cubemap': true,\n  'a-mixin': true,\n  'a-node': true,\n  'a-entity': true\n};\n\nfunction isNode (node) {\n  return node.tagName.toLowerCase() in knownTags || node.isNode;\n}\n\n/**\n * Base class for A-Frame that manages loading of objects.\n *\n * Nodes can be modified using mixins.\n * Nodes emit a `loaded` event when they and their children have initialized.\n */\nexport class ANode extends HTMLElement {\n  constructor () {\n    super();\n    this.computedMixinStr = '';\n    this.hasLoaded = false;\n    this.isNode = true;\n    this.mixinEls = [];\n  }\n\n  connectedCallback () {\n    // Defer if not ready to initialize.\n    if (!readyState.canInitializeElements) {\n      document.addEventListener('aframeready', this.connectedCallback.bind(this));\n      return;\n    }\n    this.doConnectedCallback();\n  }\n\n  doConnectedCallback () {\n    var mixins;\n\n    this.sceneEl = this.closestScene();\n\n    if (!this.sceneEl) {\n      warn('You are attempting to attach <' + this.tagName + '> outside of an A-Frame ' +\n           'scene. Append this element to `<a-scene>` instead.');\n    }\n\n    this.hasLoaded = false;\n    this.emit('nodeready', undefined, false);\n\n    if (!this.isMixin) {\n      mixins = this.getAttribute('mixin');\n      if (mixins) { this.updateMixins(mixins); }\n    }\n  }\n\n  /**\n   * Handle mixin.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n    if (newVal === this.computedMixinStr) { return; }\n\n    if (attr === 'mixin' && !this.isMixin) {\n      this.updateMixins(newVal, oldVal);\n    }\n  }\n\n /**\n  * Returns the first scene by traversing up the tree starting from and\n  * including receiver element.\n  */\n  closestScene () {\n    var element = this;\n    while (element) {\n      if (element.isScene) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  /**\n   * Returns first element matching a selector by traversing up the tree starting\n   * from and including receiver element.\n   *\n   * @param {string} selector - Selector of element to find.\n   */\n  closest (selector) {\n    var matches = this.matches || this.mozMatchesSelector ||\n      this.msMatchesSelector || this.oMatchesSelector || this.webkitMatchesSelector;\n    var element = this;\n    while (element) {\n      if (matches.call(element, selector)) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  disconnectedCallback () {\n    this.hasLoaded = false;\n  }\n\n  /**\n   * Wait for children to load, if any.\n   * Then emit `loaded` event and set `hasLoaded`.\n   */\n  load (cb, childFilter) {\n    var children;\n    var childrenLoaded;\n    var self = this;\n\n    if (this.hasLoaded) { return; }\n\n    // Default to waiting for all nodes.\n    childFilter = childFilter || isNode;\n    // Wait for children to load (if any), then load.\n    children = this.getChildren();\n    childrenLoaded = children.filter(childFilter).map(function (child) {\n      return new Promise(function waitForLoaded (resolve, reject) {\n        if (child.hasLoaded) { return resolve(); }\n        child.addEventListener('loaded', resolve);\n        child.addEventListener('error', reject);\n      });\n    });\n\n    Promise.allSettled(childrenLoaded).then(function emitLoaded (results) {\n      results.forEach(function checkResultForError (result) {\n        if (result.status === 'rejected') {\n          // An \"error\" event has already been fired by THREE.js loader,\n          // so we don't need to fire another one.\n          // A warning explaining the consequences of the error is sufficient.\n          warn('Rendering scene with errors on node: ', result.reason.target);\n        }\n      });\n\n      self.isLoading = true;\n      self.setupMutationObserver();\n      if (cb) { cb(); }\n      self.isLoading = false;\n      self.hasLoaded = true;\n      // loaded-private is an event analog to loaded that gives A-Frame an opportunity to manage internal\n      // affairs before the publicly loaded event fires and corresponding handlers executed.\n      self.emit('loaded-private', undefined, false);\n      self.emit('loaded', undefined, false);\n    });\n  }\n\n  /**\n   * With custom elements V1 attributeChangedCallback only fires\n   * for attributes defined statically via observedAttributes.\n   * One can assign any arbitrary components to an A-Frame entity\n   * hence we can't know the list of attributes beforehand.\n   * This function setup a mutation observer to keep track of the entity attribute changes\n   * in the DOM and update components accordingly.\n   */\n  setupMutationObserver () {\n    var self = this;\n    var observerConfig = {attributes: true, attributeOldValue: true};\n    var observer = new MutationObserver(function callAttributeChangedCallback (mutationList) {\n      var i;\n      for (i = 0; i < mutationList.length; i++) {\n        if (mutationList[i].type === 'attributes') {\n          var attributeName = mutationList[i].attributeName;\n          var newValue = window.HTMLElement.prototype.getAttribute.call(self, attributeName);\n          var oldValue = mutationList[i].oldValue;\n          self.attributeChangedCallback(attributeName, oldValue, newValue);\n        }\n      }\n    });\n    observer.observe(this, observerConfig);\n  }\n\n  getChildren () {\n    return Array.prototype.slice.call(this.children, 0);\n  }\n\n  /**\n   * Unregister old mixins and listeners.\n   * Register new mixins and listeners.\n   * Registering means to update `this.mixinEls` with listeners.\n   */\n  updateMixins (newMixins, oldMixins) {\n    var newMixinIdArray = ANode.newMixinIdArray;\n    var oldMixinIdArray = ANode.oldMixinIdArray;\n    var mixinIds = ANode.mixinIds;\n\n    var i;\n    var newMixinIds;\n    var oldMixinIds;\n\n    newMixinIdArray.length = 0;\n    oldMixinIdArray.length = 0;\n    newMixinIds = newMixins ? utils.split(newMixins.trim(), /\\s+/) : newMixinIdArray;\n    oldMixinIds = oldMixins ? utils.split(oldMixins.trim(), /\\s+/) : oldMixinIdArray;\n\n    mixinIds.newMixinIds = newMixinIds;\n    mixinIds.oldMixinIds = oldMixinIds;\n\n    // Unregister old mixins.\n    for (i = 0; i < oldMixinIds.length; i++) {\n      if (newMixinIds.indexOf(oldMixinIds[i]) === -1) {\n        this.unregisterMixin(oldMixinIds[i]);\n      }\n    }\n\n    // Register new mixins.\n    this.computedMixinStr = '';\n    this.mixinEls.length = 0;\n    for (i = 0; i < newMixinIds.length; i++) {\n      this.registerMixin(newMixinIds[i]);\n    }\n\n    // Update DOM. Keep track of `computedMixinStr` to not recurse back here after\n    // update.\n    if (this.computedMixinStr) {\n      this.computedMixinStr = this.computedMixinStr.trim();\n      window.HTMLElement.prototype.setAttribute.call(this, 'mixin',\n                                                     this.computedMixinStr);\n    }\n\n    if (newMixinIds.length === 0) {\n      window.HTMLElement.prototype.removeAttribute.call(this, 'mixin');\n    }\n\n    return mixinIds;\n  }\n\n  /**\n   * From mixin ID, add mixin element to `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to register.\n   */\n  registerMixin (mixinId) {\n    var compositedMixinIds;\n    var i;\n    var mixin;\n    var mixinEl = document.getElementById(mixinId);\n\n    if (!mixinEl) {\n      warn('No mixin was found with id `%s`', mixinId);\n      return;\n    }\n\n    // Register composited mixins (if mixin has mixins).\n    mixin = mixinEl.getAttribute('mixin');\n    if (mixin) {\n      compositedMixinIds = utils.split(mixin.trim(), /\\s+/);\n      for (i = 0; i < compositedMixinIds.length; i++) {\n        this.registerMixin(compositedMixinIds[i]);\n      }\n    }\n\n    // Register mixin.\n    this.computedMixinStr = this.computedMixinStr + ' ' + mixinEl.id;\n    this.mixinEls.push(mixinEl);\n  }\n\n  setAttribute (attr, newValue) {\n    if (attr === 'mixin') { this.updateMixins(newValue); }\n    window.HTMLElement.prototype.setAttribute.call(this, attr, newValue);\n  }\n\n  /**\n   * Removes the mixin element from `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to remove.\n   */\n  unregisterMixin (mixinId) {\n    var i;\n    var mixinEls = this.mixinEls;\n    var mixinEl;\n    for (i = 0; i < mixinEls.length; ++i) {\n      mixinEl = mixinEls[i];\n      if (mixinId === mixinEl.id) {\n        mixinEls.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Emit a DOM event.\n   *\n   * @param {string} name - Name of event.\n   * @param {object} [detail={}] - Custom data to pass as `detail` to the event.\n   * @param {boolean} [bubbles=true] - Whether the event should bubble.\n   * @param {object} [extraData] - Extra data to pass to the event, if any.\n   */\n  emit (name, detail, bubbles, extraData) {\n    var data = ANode.evtData;\n\n    if (bubbles === undefined) { bubbles = true; }\n    data.bubbles = !!bubbles;\n    data.detail = detail;\n\n    // If extra data is present, we need to create a new object.\n    if (extraData) { data = utils.extend({}, extraData, data); }\n\n    this.dispatchEvent(new CustomEvent(name, data));\n  }\n}\n\nANode.evtData = {};\nANode.newMixinIdArray = [];\nANode.oldMixinIdArray = [];\nANode.mixinIds = {};\n\ncustomElements.define('a-node', ANode);\n","/* global customElements */\nimport THREE from '../lib/three.js';\nimport { ANode } from './a-node.js';\nimport { components as COMPONENTS } from './component.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug('core:a-entity:debug');\nvar warn = utils.debug('core:a-entity:warn');\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\nvar OBJECT3D_COMPONENTS = ['position', 'rotation', 'scale', 'visible'];\nvar ONCE = {once: true};\n\nconst {addEntity, removeEntity, addComponent} = require('bitecs');\n\n// NOTE this should be kept in sync with addObject3DComponent in Hubs. Redefined here to avoid needing to import hubs\nfunction addObject3DComponent (world, eid, obj) {\n  addComponent(window.APP.world, world.nameToComponent['object3d'], eid);\n  world.eid2obj.set(eid, obj);\n  obj.eid = eid;\n  return eid;\n}\n\n/**\n * Entity is a container object that components are plugged into to comprise everything in\n * the scene. In A-Frame, they inherently have position, rotation, and scale.\n *\n * To be able to take components, the scene element inherits from the entity definition.\n *\n * @member {object} components - entity's currently initialized components.\n * @member {object} object3D - three.js object.\n * @member {array} states.\n * @member {boolean} isPlaying - false if dynamic behavior of the entity is paused.\n */\nexport class AEntity extends ANode {\n  constructor () {\n    super();\n    this.components = {};\n    // To avoid double initializations and infinite loops.\n    this.initializingComponents = {};\n    this.componentsToUpdate = {};\n    this.isEntity = true;\n    this.isPlaying = false;\n    this.object3D = new THREE.Group();\n    this.object3D.rotation.order = 'YXZ';\n    this.object3D.el = this;\n    this.object3DMap = {};\n    this.parentEl = null;\n    this.rotationObj = {};\n    this.states = [];\n  }\n\n  /**\n   * Handle changes coming from the browser DOM inspector.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    var component = this.components[attr];\n\n    super.attributeChangedCallback();\n    // If the empty string is passed by the component initialization\n    // logic we ignore the component update.\n    if (component && component.justInitialized && newVal === '') {\n      delete component.justInitialized;\n      return;\n    }\n    // When a component is removed after calling el.removeAttribute('material')\n    if (!component && newVal === null) { return; }\n    this.setEntityAttribute(attr, oldVal, newVal);\n  }\n\n  doConnectedCallback () {\n    var self = this;  // Component.\n    var assetsEl;  // Asset management system element.\n    var sceneEl;\n\n    // ANode method.\n    super.doConnectedCallback();\n\n    const eid = addEntity(window.APP.world);\n    this.eid = eid;\n    addComponent(window.APP.world, window.APP.world.nameToComponent.AEntity, eid);\n    addObject3DComponent(window.APP.world, eid, this.object3D);\n\n    sceneEl = this.sceneEl;\n\n    this.addToParent();\n\n    // Don't .load() scene on attachedCallback.\n    if (this.isScene) { return; }\n\n    // Gracefully not error when outside of <a-scene> (e.g., tests).\n    if (!sceneEl) {\n      this.load();\n      return;\n    }\n\n    // Wait for asset management system to finish before loading.\n    assetsEl = sceneEl.querySelector('a-assets');\n    if (assetsEl && !assetsEl.hasLoaded) {\n      assetsEl.addEventListener('loaded', function () { self.load(); });\n      return;\n    }\n    this.load();\n  }\n\n  /**\n   * Tell parent to remove this element's object3D from its object3D.\n   * Do not call on scene element because that will cause a call to document.body.remove().\n   */\n  disconnectedCallback () {\n    var componentName;\n\n    if (!this.parentEl) { return; }\n\n    // Remove components.\n    for (componentName in this.components) {\n      this.removeComponent(componentName, false);\n    }\n\n    if (this.isScene) { return; }\n\n    this.removeFromParent();\n    super.disconnectedCallback();\n\n    // Remove cyclic reference.\n    this.object3D.el = null;\n\n    removeEntity(window.APP.world, this.object3D.eid);\n    delete this.eid;\n  }\n\n  getObject3D (type) {\n    return this.object3DMap[type];\n  }\n\n  /**\n   * Set a THREE.Object3D into the map.\n   *\n   * @param {string} type - Developer-set name of the type of object, will be unique per type.\n   * @param {object} obj - A THREE.Object3D.\n   */\n  setObject3D (type, obj) {\n    var oldObj;\n    var self = this;\n\n    if (!(obj instanceof THREE.Object3D)) {\n      throw new Error(\n        '`Entity.setObject3D` was called with an object that was not an instance of ' +\n        'THREE.Object3D.'\n      );\n    }\n\n    // Remove existing object of the type.\n    oldObj = this.getObject3D(type);\n    if (oldObj) { this.object3D.remove(oldObj); }\n\n    // Set references to A-Frame entity.\n    obj.el = this;\n    if (obj.children.length) {\n      obj.traverse(function bindEl (child) {\n        child.el = self;\n      });\n    }\n\n    // Add.\n    this.object3D.add(obj);\n    this.object3DMap[type] = obj;\n    this.emit('object3dset', {object: obj, type: type});\n  }\n\n  /**\n   * Remove object from scene and entity object3D map.\n   */\n  removeObject3D (type) {\n    var obj = this.getObject3D(type);\n    if (!obj) {\n      warn('Tried to remove `Object3D` of type:', type, 'which was not defined.');\n      return;\n    }\n    this.object3D.remove(obj);\n    delete this.object3DMap[type];\n    this.emit('object3dremove', {type: type});\n  }\n\n  /**\n   * Gets or creates an object3D of a given type.\n   *\n   * @param {string} type - Type of the object3D.\n   * @param {string} Constructor - Constructor to use to create the object3D if needed.\n   * @returns {object}\n   */\n  getOrCreateObject3D (type, Constructor) {\n    var object3D = this.getObject3D(type);\n    if (!object3D && Constructor) {\n      object3D = new Constructor();\n      this.setObject3D(type, object3D);\n    }\n    warn('`getOrCreateObject3D` has been deprecated. Use `setObject3D()` ' +\n         'and `object3dset` event instead.');\n    return object3D;\n  }\n\n  /**\n   * Add child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  add (el) {\n    if (!el.object3D) {\n      throw new Error(\"Trying to add an element that doesn't have an `object3D`\");\n    }\n    this.object3D.add(el.object3D);\n    this.emit('child-attached', {el: el});\n  }\n\n  /**\n   * Tell parentNode to add this entity to itself.\n   */\n  addToParent () {\n    var parentNode = this.parentEl = this.parentNode;\n\n    // `!parentNode` check primarily for unit tests.\n    if (!parentNode || !parentNode.add || this.attachedToParent) { return; }\n\n    parentNode.add(this);\n    this.attachedToParent = true;  // To prevent multiple attachments to same parent.\n  }\n\n  /**\n   * Tell parentNode to remove this entity from itself.\n   */\n  removeFromParent () {\n    var parentEl = this.parentEl;\n    this.parentEl.remove(this);\n    this.attachedToParent = false;\n    this.parentEl = null;\n    parentEl.emit('child-detached', {el: this});\n  }\n\n  load () {\n    var self = this;\n\n    if (this.hasLoaded || !this.parentEl) { return; }\n\n    super.load.call(this, function entityLoadCallback () {\n      // Check if entity was detached while it was waiting to load.\n      if (!self.parentEl) { return; }\n\n      self.updateComponents();\n      if (self.isScene || self.parentEl.isPlaying) { self.play(); }\n    });\n  }\n\n  /**\n   * Remove child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  remove (el) {\n    if (el) {\n      this.object3D.remove(el.object3D);\n    } else {\n      this.parentNode.removeChild(this);\n    }\n  }\n\n  /**\n   * @returns {array} Direct children that are entities.\n   */\n  getChildEntities () {\n    var children = this.children;\n    var childEntities = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      if (child instanceof AEntity) {\n        childEntities.push(child);\n      }\n    }\n\n    return childEntities;\n  }\n\n  /**\n   * Initialize component.\n   *\n   * @param {string} attrName - Attribute name associated to the component.\n   * @param {object} data - Component data\n   * @param {boolean} isDependency - True if the component is a dependency.\n   */\n  initComponent (attrName, data, isDependency) {\n    var component;\n    var componentId;\n    var componentInfo;\n    var componentName;\n    var isComponentDefined;\n\n    componentInfo = utils.split(attrName, MULTIPLE_COMPONENT_DELIMITER);\n    componentName = componentInfo[0];\n    componentId = componentInfo.length > 2\n      ? componentInfo.slice(1).join('__')\n      : componentInfo[1];\n\n    // Not a registered component.\n    if (!COMPONENTS[componentName]) { return; }\n\n    // Component is not a dependency and is undefined.\n    // If a component is a dependency, then it is okay to have no data.\n    isComponentDefined = checkComponentDefined(this, attrName) ||\n                         data !== undefined;\n    if (!isComponentDefined && !isDependency) { return; }\n\n    // Component already initialized.\n    if (attrName in this.components) { return; }\n\n    // Initialize dependencies first\n    this.initComponentDependencies(componentName);\n\n    // Initialize component\n    component = new COMPONENTS[componentName].Component(this, data, componentId);\n    if (this.isPlaying) { component.play(); }\n\n    // Components are reflected in the DOM as attributes but the state is not shown\n    // hence we set the attribute to empty string.\n    // The flag justInitialized is for attributeChangedCallback to not overwrite\n    // the component with the empty string.\n    if (!this.hasAttribute(attrName)) {\n      component.justInitialized = true;\n      window.HTMLElement.prototype.setAttribute.call(this, attrName, '');\n    }\n\n    debug('Component initialized: %s', attrName);\n  }\n\n  /**\n   * Initialize dependencies of a component.\n   *\n   * @param {string} name - Root component name.\n   */\n  initComponentDependencies (name) {\n    var self = this;\n    var component = COMPONENTS[name];\n    var dependencies;\n    var i;\n\n    // Not a component.\n    if (!component) { return; }\n\n    // No dependencies.\n    dependencies = COMPONENTS[name].dependencies;\n\n    if (!dependencies) { return; }\n\n    // Initialize dependencies.\n    for (i = 0; i < dependencies.length; i++) {\n      // Call getAttribute to initialize the data from the DOM.\n      self.initComponent(\n        dependencies[i],\n        window.HTMLElement.prototype.getAttribute.call(self, dependencies[i]) || undefined,\n        true\n      );\n    }\n  }\n\n  removeComponent (name, destroy) {\n    var component;\n\n    component = this.components[name];\n    if (!component) { return; }\n\n    // Wait for component to initialize.\n    if (!component.initialized) {\n      this.addEventListener('componentinitialized', function tryRemoveLater (evt) {\n        if (evt.detail.name !== name) { return; }\n        this.removeComponent(name, destroy);\n        this.removeEventListener('componentinitialized', tryRemoveLater);\n      });\n      return;\n    }\n\n    component.pause();\n    component.remove();\n\n    // Keep component attached to entity in case of just full entity detach.\n    if (destroy) {\n      component.destroy();\n      delete this.components[name];\n      // Remove attribute from DOM, if still present\n      if (this.hasAttribute(name)) {\n        window.HTMLElement.prototype.removeAttribute.call(this, name);\n      }\n    }\n\n    this.emit('componentremoved', component.evtDetail, false);\n  }\n\n  /**\n   * Initialize or update all components.\n   * Build data using initial components, defined attributes, mixins, and defaults.\n   * Update default components before the rest.\n   *\n   * @member {function} getExtraComponents - Can be implemented to include component data\n   *   from other sources (e.g., implemented by primitives).\n   */\n  updateComponents () {\n    var data;\n    var extraComponents;\n    var i;\n    var name;\n    var componentsToUpdate = this.componentsToUpdate;\n\n    if (!this.hasLoaded && !this.isLoading) { return; }\n\n    // Gather mixin-defined components.\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (name in this.mixinEls[i].componentCache) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather from extra initial component data if defined (e.g., primitives).\n    if (this.getExtraComponents) {\n      extraComponents = this.getExtraComponents();\n      for (name in extraComponents) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather entity-defined components.\n    for (i = 0; i < this.attributes.length; ++i) {\n      name = this.attributes[i].name;\n      if (OBJECT3D_COMPONENTS.indexOf(name) !== -1) { continue; }\n      if (isComponent(name)) { componentsToUpdate[name] = true; }\n    }\n\n    // object3D components first (position, rotation, scale, visible).\n    for (i = 0; i < OBJECT3D_COMPONENTS.length; i++) {\n      name = OBJECT3D_COMPONENTS[i];\n      if (!this.hasAttribute(name)) { continue; }\n      this.updateComponent(name, this.getDOMAttribute(name));\n    }\n\n    // Initialize or update rest of components.\n    for (name in componentsToUpdate) {\n      data = mergeComponentData(this.getDOMAttribute(name),\n                                extraComponents && extraComponents[name]);\n      this.updateComponent(name, data);\n      delete componentsToUpdate[name];\n    }\n  }\n\n  /**\n   * Initialize, update, or remove a single component.\n   *\n   * When initializing, we set the component on `this.components`.\n   *\n   * @param {string} attr - Component name.\n   * @param {object} attrValue - Value of the DOM attribute.\n   * @param {boolean} clobber - If new attrValue completely replaces previous properties.\n   */\n  updateComponent (attr, attrValue, clobber) {\n    var component = this.components[attr];\n\n    if (component) {\n      // Remove component.\n      if (attrValue === null && !checkComponentDefined(this, attr)) {\n        this.removeComponent(attr, true);\n        return;\n      }\n      // Component already initialized. Update component.\n      component.updateProperties(attrValue, clobber);\n      return;\n    }\n\n    // Component not yet initialized. Initialize component.\n    this.initComponent(attr, attrValue, false);\n  }\n\n  /**\n   * If `attr` is a component name, detach the component from the entity.\n   *\n   * If `propertyName` is given, reset the component property value to its default.\n   *\n   * @param {string} attr - Attribute name, which could also be a component name.\n   * @param {string} propertyName - Component prop name, if resetting an individual prop.\n   */\n  removeAttribute (attr, propertyName) {\n    var component = this.components[attr];\n\n    // Remove component.\n    if (component && propertyName === undefined) {\n      this.removeComponent(attr, true);\n    }\n\n    // Reset component property value.\n    if (component && propertyName !== undefined) {\n      component.resetProperty(propertyName);\n      return;\n    }\n\n    // Remove mixins.\n    if (attr === 'mixin') {\n      this.mixinUpdate('');\n    }\n\n    window.HTMLElement.prototype.removeAttribute.call(this, attr);\n  }\n\n  /**\n   * Start dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also play.\n   */\n  play () {\n    var entities;\n    var i;\n    var key;\n\n    // Already playing.\n    if (this.isPlaying || (!this.hasLoaded && !this.isLoading)) { return; }\n    this.isPlaying = true;\n\n    // Wake up all components.\n    for (key in this.components) { this.components[key].play(); }\n\n    // Tell all child entities to play.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].play(); }\n\n    this.emit('play');\n  }\n\n  /**\n   * Pause dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also pause.\n   */\n  pause () {\n    var entities;\n    var i;\n    var key;\n\n    if (!this.isPlaying) { return; }\n    this.isPlaying = false;\n\n    // Sleep all components.\n    for (key in this.components) { this.components[key].pause(); }\n\n    // Tell all child entities to pause.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].pause(); }\n\n    this.emit('pause');\n  }\n\n  /**\n   * Deals with updates on entity-specific attributes (i.e., components and mixins).\n   *\n   * @param {string} attr\n   * @param {string} oldVal\n   * @param {string|object} newVal\n   */\n  setEntityAttribute (attr, oldVal, newVal) {\n    if (COMPONENTS[attr] || this.components[attr]) {\n      this.updateComponent(attr, newVal);\n      return;\n    }\n    if (attr === 'mixin') {\n      // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n      if (newVal === this.computedMixinStr) { return; }\n      this.mixinUpdate(newVal, oldVal);\n    }\n  }\n\n  /**\n   * When mixins updated, trigger init or optimized-update of relevant components.\n   */\n  mixinUpdate (newMixins, oldMixins, deferred) {\n    var componentsUpdated = AEntity.componentsUpdated;\n\n    var component;\n    var mixinEl;\n    var mixinIds;\n    var i;\n    var self = this;\n\n    if (!deferred) { oldMixins = oldMixins || this.getAttribute('mixin'); }\n\n    if (!this.hasLoaded) {\n      this.addEventListener('loaded-private', function () {\n        self.mixinUpdate(newMixins, oldMixins, true);\n      }, ONCE);\n      return;\n    }\n\n    mixinIds = this.updateMixins(newMixins, oldMixins);\n\n    // Loop over current mixins.\n    componentsUpdated.length = 0;\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (component in this.mixinEls[i].componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            // Update. Just rebuild data.\n            this.components[component].handleMixinUpdate();\n          } else {\n            // Init. buildData will gather mixin values.\n            this.initComponent(component, null);\n          }\n          componentsUpdated.push(component);\n        }\n      }\n    }\n\n    // Loop over old mixins to call for data rebuild.\n    for (i = 0; i < mixinIds.oldMixinIds.length; i++) {\n      mixinEl = document.getElementById(mixinIds.oldMixinIds[i]);\n      if (!mixinEl) { continue; }\n      for (component in mixinEl.componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            if (this.getDOMAttribute(component)) {\n              // Update component if explicitly defined.\n              this.components[component].handleMixinUpdate();\n            } else {\n              // Remove component if not explicitly defined.\n              this.removeComponent(component, true);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * setAttribute can:\n   *\n   * 1. Set a single property of a multi-property component.\n   * 2. Set multiple properties of a multi-property component.\n   * 3. Replace properties of a multi-property component.\n   * 4. Set a value for a single-property component, mixin, or normal HTML attribute.\n   *\n   * @param {string} attrName - Component or attribute name.\n   * @param {*} arg1 - Can be a value, property name, CSS-style property string, or\n   *   object of properties.\n   * @param {*|bool} arg2 - If arg1 is a property name, this should be a value. Otherwise,\n   *   it is a boolean indicating whether to clobber previous values (defaults to false).\n   */\n  setAttribute (attrName, arg1, arg2) {\n    var singlePropUpdate = AEntity.singlePropUpdate;\n\n    var newAttrValue;\n    var clobber;\n    var componentName;\n    var delimiterIndex;\n    var isDebugMode;\n    var key;\n\n    delimiterIndex = attrName.indexOf(MULTIPLE_COMPONENT_DELIMITER);\n    componentName = delimiterIndex > 0 ? attrName.substring(0, delimiterIndex) : attrName;\n\n    // Not a component. Normal set attribute.\n    if (!COMPONENTS[componentName]) {\n      if (attrName === 'mixin') { this.mixinUpdate(arg1); }\n      super.setAttribute.call(this, attrName, arg1);\n      return;\n    }\n\n    // Initialize component first if not yet initialized.\n    if (!this.components[attrName] && this.hasAttribute(attrName)) {\n      this.updateComponent(\n        attrName,\n        window.HTMLElement.prototype.getAttribute.call(this, attrName));\n    }\n\n    // Determine new attributes from the arguments\n    if (typeof arg2 !== 'undefined' &&\n        typeof arg1 === 'string' &&\n        arg1.length > 0 &&\n        typeof utils.styleParser.parse(arg1) === 'string') {\n      // Update a single property of a multi-property component\n      for (key in singlePropUpdate) { delete singlePropUpdate[key]; }\n      newAttrValue = singlePropUpdate;\n      newAttrValue[arg1] = arg2;\n      clobber = false;\n    } else {\n      // Update with a value, object, or CSS-style property string, with the possibility\n      // of clobbering previous values.\n      newAttrValue = arg1;\n      clobber = (arg2 === true);\n    }\n\n    // Update component\n    this.updateComponent(attrName, newAttrValue, clobber);\n\n    // In debug mode, write component data up to the DOM.\n    isDebugMode = this.sceneEl && this.sceneEl.getAttribute('debug');\n    if (isDebugMode) { this.components[attrName].flushToDOM(); }\n  }\n\n  /**\n   * Reflect component data in the DOM (as seen from the browser DOM Inspector).\n   *\n   * @param {bool} recursive - Also flushToDOM on the children.\n   **/\n  flushToDOM (recursive) {\n    var components = this.components;\n    var child;\n    var children = this.children;\n    var i;\n    var key;\n\n    // Flush entity's components to DOM.\n    for (key in components) {\n      components[key].flushToDOM();\n    }\n\n    // Recurse.\n    if (!recursive) { return; }\n    for (i = 0; i < children.length; ++i) {\n      child = children[i];\n      if (!child.flushToDOM) { continue; }\n      child.flushToDOM(recursive);\n    }\n  }\n\n  /**\n   * If `attr` is a component, returns ALL component data including applied mixins and\n   * defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getAttribute (attr) {\n    // If component, return component data.\n    var component;\n    if (attr === 'position') { return this.object3D.position; }\n    if (attr === 'rotation') { return getRotation(this); }\n    if (attr === 'scale') { return this.object3D.scale; }\n    if (attr === 'visible') { return this.object3D.visible; }\n    component = this.components[attr];\n    if (component) { return component.data; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * If `attr` is a component, returns JUST the component data defined on the entity.\n   * Like a partial version of `getComputedAttribute` as returned component data\n   * does not include applied mixins or defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getDOMAttribute (attr) {\n    // If cached value exists, return partial component data.\n    var component = this.components[attr];\n    if (component) { return component.attrValue; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  addState (state) {\n    if (this.is(state)) { return; }\n    this.states.push(state);\n    this.emit('stateadded', state);\n  }\n\n  removeState (state) {\n    var stateIndex = this.states.indexOf(state);\n    if (stateIndex === -1) { return; }\n    this.states.splice(stateIndex, 1);\n    this.emit('stateremoved', state);\n  }\n\n  /**\n   * Checks if the element is in a given state. e.g. el.is('alive');\n   * @type {string} state - Name of the state we want to check\n   */\n  is (state) {\n    return this.states.indexOf(state) !== -1;\n  }\n\n  /**\n   * Open Inspector to this entity.\n   */\n  inspect () {\n    this.sceneEl.components.inspector.openInspector(this);\n  }\n\n  /**\n   * Clean up memory and return memory to object pools.\n   */\n  destroy () {\n    var key;\n    if (this.parentNode) {\n      warn('Entity can only be destroyed if detached from scenegraph.');\n      return;\n    }\n    for (key in this.components) {\n      this.components[key].destroy();\n    }\n  }\n}\n\n/**\n * Check if a component is *defined* for an entity, including defaults and mixins.\n * Does not check whether the component has been *initialized* for an entity.\n *\n * @param {string} el - Entity.\n * @param {string} name - Component name.\n * @returns {boolean}\n */\nfunction checkComponentDefined (el, name) {\n  // Check if element contains the component.\n  if (el.components[name] && el.components[name].attrValue) { return true; }\n\n  return isComponentMixedIn(name, el.mixinEls);\n}\n\n/**\n * Check if any mixins contains a component.\n *\n * @param {string} name - Component name.\n * @param {array} mixinEls - Array of <a-mixin>s.\n */\nfunction isComponentMixedIn (name, mixinEls) {\n  var i;\n  var inMixin = false;\n  for (i = 0; i < mixinEls.length; ++i) {\n    inMixin = mixinEls[i].hasAttribute(name);\n    if (inMixin) { break; }\n  }\n  return inMixin;\n}\n\n/**\n * Given entity defined value, merge in extra data if necessary.\n * Handle both single and multi-property components.\n *\n * @param {string} attrValue - Entity data.\n * @param extraData - Entity data from another source to merge in.\n */\nfunction mergeComponentData (attrValue, extraData) {\n  // Extra data not defined, just return attrValue.\n  if (!extraData) { return attrValue; }\n\n  // Merge multi-property data.\n  if (extraData.constructor === Object) {\n    return utils.extend(extraData, utils.styleParser.parse(attrValue || {}));\n  }\n\n  // Return data, precedence to the defined value.\n  return attrValue || extraData;\n}\n\nfunction isComponent (componentName) {\n  if (componentName.indexOf(MULTIPLE_COMPONENT_DELIMITER) !== -1) {\n    componentName = utils.split(componentName, MULTIPLE_COMPONENT_DELIMITER)[0];\n  }\n  if (!COMPONENTS[componentName]) { return false; }\n  return true;\n}\n\nfunction getRotation (entityEl) {\n  var radToDeg = THREE.MathUtils.radToDeg;\n  var rotation = entityEl.object3D.rotation;\n  var rotationObj = entityEl.rotationObj;\n  rotationObj.x = radToDeg(rotation.x);\n  rotationObj.y = radToDeg(rotation.y);\n  rotationObj.z = radToDeg(rotation.z);\n  return rotationObj;\n}\n\nAEntity.componentsUpdated = [];\nAEntity.singlePropUpdate = {};\n\ncustomElements.define('a-entity', AEntity);\n","import { isIframed } from '../../utils/index.js';\n\n/**\n * Provides a post message API for scenes contained\n * in an iframe.\n */\nexport function initPostMessageAPI (scene) {\n  // Handles fullscreen behavior when inside an iframe.\n  if (!isIframed()) { return; }\n  // postMessage API handler\n  window.addEventListener('message', postMessageAPIHandler.bind(scene));\n}\n\nfunction postMessageAPIHandler (event) {\n  var scene = this;\n  if (!event.data) { return; }\n\n  switch (event.data.type) {\n    case 'vr': {\n      switch (event.data.data) {\n        case 'enter':\n          scene.enterVR();\n          break;\n        case 'exit':\n          scene.exitVR();\n          break;\n      }\n    }\n  }\n}\n","import { isIOS } from './device.js';\n\n// Safari regression introduced in iOS 12 and remains in iOS 13.\n// https://stackoverflow.com/questions/62717621/white-space-at-page-bottom-after-device-rotation-in-ios-safari\nif (isIOS()) {\n  window.addEventListener('orientationchange', function () {\n    document.documentElement.style.height = 'initial';\n    setTimeout(function () {\n      document.documentElement.style.height = '100%';\n      setTimeout(function () {\n        // this line prevents the content\n        // from hiding behind the address bar\n        window.scrollTo(0, 1);\n      }, 500);\n    }, 500);\n  });\n}\n","/* global Promise, customElements, screen */\nimport THREE from '../../lib/three.js';\nimport { inject as initMetaTags } from './metaTags.js';\nimport { initWakelock } from './wakelock.js';\nimport * as loadingScreen from './loadingScreen.js';\nimport scenes from './scenes.js';\nimport { systems } from '../system.js';\nimport { components } from '../component.js';\nimport * as utils from '../../utils/index.js';\n\n// Require after.\nimport { AEntity } from '../a-entity.js';\nimport { ANode } from '../a-node.js';\nimport { initPostMessageAPI } from './postMessage.js';\n\nimport '../../utils/ios-orientationchange-blank-bug.js';\n\nvar warn = utils.debug('core:a-scene:warn');\n\nvar isIOS = utils.device.isIOS();\nvar isMobile = utils.device.isMobile();\nvar isWebXRAvailable = utils.device.isWebXRAvailable;\n\n/**\n * Scene element, holds all entities.\n *\n * @member {array} behaviors - Component instances that have registered themselves to be\n           updated on every tick.\n * @member {object} camera - three.js Camera object.\n * @member {object} canvas\n * @member {bool} isScene - Differentiates as scene entity as opposed to other entities.\n * @member {bool} isMobile - Whether browser is mobile (via UA detection).\n * @member {object} object3D - Root three.js Scene object.\n * @member {object} renderer\n * @member {bool} renderStarted\n * @member {object} systems - Registered instantiated systems.\n * @member {number} time\n */\n\nexport class AScene extends AEntity {\n  constructor () {\n    var self;\n    super();\n    self = this;\n    self.clock = new THREE.Clock();\n    self.isIOS = isIOS;\n    self.isMobile = isMobile;\n    self.hasWebXR = isWebXRAvailable;\n    self.isAR = false;\n    self.isScene = true;\n    self.object3D = new THREE.Scene();\n    self.object3D.onAfterRender = function (renderer, scene, camera) {\n      // THREE may swap the camera used for the rendering if in VR, so we pass it to tock\n      if (self.isPlaying) { self.tock(self.time, self.delta, camera); }\n    };\n    self.resize = self.resize.bind(self);\n    self.render = self.render.bind(self);\n    self.systems = {};\n    self.systemNames = [];\n    self.time = self.delta = 0;\n    self.usedOfferSession = false;\n\n    self.componentOrder = [];\n    self.behaviors = {};\n    self.hasLoaded = false;\n    self.isPlaying = false;\n    self.originalHTML = self.innerHTML;\n  }\n\n  addFullScreenStyles () {\n    document.documentElement.classList.add('a-fullscreen');\n  }\n\n  removeFullScreenStyles () {\n    document.documentElement.classList.remove('a-fullscreen');\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    var embedded = this.hasAttribute('embedded');\n\n    // Default components.\n    this.setAttribute('inspector', '');\n    this.setAttribute('keyboard-shortcuts', '');\n    this.setAttribute('screenshot', '');\n    this.setAttribute('xr-mode-ui', '');\n    this.setAttribute('device-orientation-permission-ui', '');\n    super.doConnectedCallback();\n\n    // Renderer initialization\n    setupCanvas(this);\n    this.setupRenderer();\n    loadingScreen.setup(this, getCanvasSize);\n\n    this.resize();\n    if (!embedded) { this.addFullScreenStyles(); }\n    initPostMessageAPI(this);\n\n    initMetaTags(this);\n    initWakelock(this);\n\n    // Bind functions.\n    this.enterVRBound = function () { self.enterVR(); };\n    this.exitVRBound = function () { self.exitVR(); };\n\n    window.addEventListener('sessionend', this.resize);\n    // Camera set up by camera system.\n    this.addEventListener('cameraready', function () {\n      self.attachedCallbackPostCamera();\n    });\n\n    this.initSystems();\n    // Compute component order\n    this.componentOrder = determineComponentBehaviorOrder(components, this.componentOrder);\n    this.addEventListener('componentregistered', function () {\n      // Recompute order\n      self.componentOrder = determineComponentBehaviorOrder(components, self.componentOrder);\n    });\n\n    // WebXR Immersive navigation handler.\n    if (this.hasWebXR && navigator.xr && navigator.xr.addEventListener) {\n      navigator.xr.addEventListener('sessiongranted', function () { self.enterVR(); });\n    }\n  }\n\n  attachedCallbackPostCamera () {\n    var resize;\n    var self = this;\n\n    window.addEventListener('load', resize);\n    window.addEventListener('resize', function () {\n      // Workaround for a Webkit bug (https://bugs.webkit.org/show_bug.cgi?id=170595)\n      // where the window does not contain the correct viewport size\n      // after an orientation change. The window size is correct if the operation\n      // is postponed a few milliseconds.\n      // self.resize can be called directly once the bug above is fixed.\n      if (self.isIOS) {\n        setTimeout(self.resize, 100);\n      } else {\n        self.resize();\n      }\n    });\n    this.play();\n\n    // Add to scene index.\n    scenes.push(this);\n  }\n\n  /**\n   * Initialize all systems.\n   */\n  initSystems () {\n    var name;\n\n    // Initialize camera system first.\n    this.initSystem('camera');\n\n    for (name in systems) {\n      if (name === 'camera') { continue; }\n      this.initSystem(name);\n    }\n  }\n\n  /**\n   * Initialize a system.\n   */\n  initSystem (name) {\n    if (this.systems[name]) { return; }\n    this.systems[name] = new systems[name](this);\n    this.systemNames.push(name);\n  }\n\n  /**\n   * Shut down scene on detach.\n   */\n  disconnectedCallback () {\n    // Remove from scene index.\n    var sceneIndex = scenes.indexOf(this);\n    super.disconnectedCallback();\n\n    scenes.splice(sceneIndex, 1);\n\n    window.removeEventListener('sessionend', this.resize);\n    this.removeFullScreenStyles();\n    this.renderer.dispose();\n  }\n\n  /**\n   * Add ticks and tocks.\n   *\n   * @param {object} behavior - A component.\n   */\n  addBehavior (behavior) {\n    var behaviorSet;\n    var behaviors = this.behaviors[behavior.name];\n    var behaviorType;\n\n    if (!behaviors) {\n      behaviors = this.behaviors[behavior.name] = {\n        tick: { inUse: false, array: [], markedForRemoval: [] },\n        tock: { inUse: false, array: [], markedForRemoval: [] }\n      };\n    }\n\n    // Check if behavior has tick and/or tock and add the behavior to the appropriate list.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n\n      // In case the behaviorSet is in use, make sure this behavior isn't on the removal list.\n      if (behaviorSet.inUse) {\n        var index = behaviorSet.markedForRemoval.indexOf(behavior);\n        if (index !== -1) {\n          behaviorSet.markedForRemoval.splice(index, 1);\n        }\n      }\n      // Add behavior to the set\n      if (behaviorSet.array.indexOf(behavior) === -1) {\n        behaviorSet.array.push(behavior);\n      }\n    }\n  }\n\n  /**\n   * For tests.\n   */\n  getPointerLockElement () {\n    return document.pointerLockElement;\n  }\n\n  /**\n   * For tests.\n   */\n  checkHeadsetConnected () {\n    return utils.device.checkHeadsetConnected();\n  }\n\n  enterAR () {\n    var errorMessage;\n    if (!this.hasWebXR) {\n      errorMessage = 'Failed to enter AR mode, WebXR not supported.';\n      throw new Error(errorMessage);\n    }\n    if (!utils.device.checkARSupport()) {\n      errorMessage = 'Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.';\n      throw new Error(errorMessage);\n    }\n    return this.enterVR(true);\n  }\n\n  /**\n   * Call `requestPresent` if WebVR or WebVR polyfill.\n   * Call `requestFullscreen` on desktop.\n   * Handle events, states, fullscreen styles.\n   *\n   * @param {bool?} useAR - if true, try immersive-ar mode\n   * @returns {Promise}\n   */\n  enterVR (useAR, useOfferSession) {\n    var self = this;\n    var vrManager = self.renderer.xr;\n    var xrInit;\n\n    // Don't enter VR if already in VR.\n    if (useOfferSession && (!navigator.xr || !navigator.xr.offerSession)) { return Promise.resolve('OfferSession is not supported.'); }\n    if (self.usedOfferSession && useOfferSession) { return Promise.resolve('OfferSession was already called.'); }\n    if (this.is('vr-mode')) { return Promise.resolve('Already in VR.'); }\n\n    // Has VR.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      var rendererSystem = self.getAttribute('renderer');\n      vrManager.enabled = true;\n\n      if (this.hasWebXR && !rendererSystem.forceWebVR) {\n        // XR API.\n        if (this.xrSession) {\n          this.xrSession.removeEventListener('end', this.exitVRBound);\n        }\n        var refspace = this.sceneEl.systems.webxr.sessionReferenceSpaceType;\n        vrManager.setReferenceSpaceType(refspace);\n        var xrMode = useAR ? 'immersive-ar' : 'immersive-vr';\n        xrInit = this.sceneEl.systems.webxr.sessionConfiguration;\n        return new Promise(function (resolve, reject) {\n          var requestSession = useOfferSession ? navigator.xr.offerSession.bind(navigator.xr) : navigator.xr.requestSession.bind(navigator.xr);\n          self.usedOfferSession |= useOfferSession;\n          requestSession(xrMode, xrInit).then(\n            function requestSuccess (xrSession) {\n              if (useOfferSession) {\n                self.usedOfferSession = false;\n              }\n\n              vrManager.layersEnabled = xrInit.requiredFeatures.indexOf('layers') !== -1;\n              vrManager.setSession(xrSession).then(function () {\n                vrManager.setFoveation(rendererSystem.foveationLevel);\n                self.xrSession = xrSession;\n                self.systems.renderer.setWebXRFrameRate(xrSession);\n                xrSession.addEventListener('end', self.exitVRBound);\n                enterVRSuccess(resolve);\n              });\n            },\n            function requestFail (error) {\n              var useAR = xrMode === 'immersive-ar';\n              var mode = useAR ? 'AR' : 'VR';\n              reject(new Error('Failed to enter ' + mode + ' mode (`requestSession`)', { cause: error }));\n            }\n          );\n        });\n      } else {\n        var mode = useAR ? 'AR' : 'VR';\n        throw new Error('Failed to enter ' + mode + ' no WebXR');\n      }\n    }\n\n    // No VR.\n    enterVRSuccess();\n    return Promise.resolve();\n\n    // Callback that happens on enter VR success or enter fullscreen (any API).\n    function enterVRSuccess (resolve) {\n      if (useAR) {\n        self.addState('ar-mode');\n      } else {\n        self.addState('vr-mode');\n      }\n      self.emit('enter-vr', {target: self});\n      // Lock to landscape orientation on mobile.\n      if (!self.hasWebXR && self.isMobile && screen.orientation && screen.orientation.lock) {\n        screen.orientation.lock('landscape');\n      }\n      self.addFullScreenStyles();\n\n      // On mobile, the polyfill handles fullscreen.\n      // TODO: 07/16 Chromium builds break when `requestFullscreen`ing on a canvas\n      // that we are also `requestPresent`ing. Until then, don't fullscreen if headset\n      // connected.\n      if (!self.isMobile && !self.checkHeadsetConnected()) {\n        requestFullscreen(self.canvas);\n      }\n\n      self.resize();\n      if (resolve) { resolve(); }\n    }\n  }\n\n   /**\n   * Call `exitPresent` if WebVR / WebXR or WebVR polyfill.\n   * Handle events, states, fullscreen styles.\n   *\n   * @returns {Promise}\n   */\n  exitVR () {\n    var self = this;\n    var vrManager = this.renderer.xr;\n\n    // Don't exit VR if not in VR.\n    if (!this.is('vr-mode') && !this.is('ar-mode')) { return Promise.resolve('Not in immersive mode.'); }\n\n    // Handle exiting VR if not yet already and in a headset or polyfill.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      vrManager.enabled = false;\n      var rendererSystem = self.getAttribute('renderer');\n\n      if (this.hasWebXR && !rendererSystem.forceWebVR) {\n        this.xrSession.removeEventListener('end', this.exitVRBound);\n        // Capture promise to avoid errors.\n        this.xrSession.end().then(function () {}, function () {});\n        this.xrSession = undefined;\n      } else {\n        throw Error('Failed to exit VR - no WebXR');\n      }\n    } else {\n      exitFullscreen();\n    }\n\n    // Handle exiting VR in all other cases (2D fullscreen, external exit VR event).\n    exitVRSuccess();\n\n    return Promise.resolve();\n\n    function exitVRSuccess () {\n      self.removeState('vr-mode');\n      self.removeState('ar-mode');\n      // Lock to landscape orientation on mobile.\n      if (self.isMobile && screen.orientation && screen.orientation.unlock) {\n        screen.orientation.unlock();\n      }\n      // Exiting VR in embedded mode, no longer need fullscreen styles.\n      if (self.hasAttribute('embedded')) { self.removeFullScreenStyles(); }\n\n      self.resize();\n      if (self.isIOS) { utils.forceCanvasResizeSafariMobile(self.canvas); }\n      self.renderer.setPixelRatio(window.devicePixelRatio);\n      self.emit('exit-vr', {target: self});\n    }\n  }\n\n  /**\n   * Wraps Entity.getAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Wraps Entity.getDOMAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getDOMAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getDOMAttribute.call(this, attr);\n  }\n\n  /**\n   * Wrap Entity.setAttribute to take into account for systems.\n   * If system exists, then skip component initialization checks and do a normal\n   * setAttribute.\n   */\n  setAttribute (attr, value, componentPropValue) {\n    // Check if system exists (i.e. is registered).\n    if (systems[attr]) {\n      ANode.prototype.setAttribute.call(this, attr, value);\n\n      // Update system instance, if initialized on the scene.\n      var system = this.systems[attr];\n      if (system) {\n        system.updateProperties(value);\n      }\n      return;\n    }\n    AEntity.prototype.setAttribute.call(this, attr, value, componentPropValue);\n  }\n\n  /**\n   * @param {object} behavior - A component.\n   */\n  removeBehavior (behavior) {\n    var behaviorSet;\n    var behaviorType;\n    var behaviors = this.behaviors[behavior.name];\n    var index;\n\n    // Check if behavior has tick and/or tock and remove the behavior from the appropriate\n    // array.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n      index = behaviorSet.array.indexOf(behavior);\n      if (index !== -1) {\n        // Check if the behavior can safely be removed.\n        if (behaviorSet.inUse) {\n          // Set is in use, so only mark for removal.\n          if (behaviorSet.markedForRemoval.indexOf(behavior) === -1) {\n            behaviorSet.markedForRemoval.push(behavior);\n          }\n        } else {\n          // Swap and remove from the end\n          behaviorSet.array[index] = behaviorSet.array[behaviorSet.array.length - 1];\n          behaviorSet.array.pop();\n        }\n      }\n    }\n  }\n\n  resize () {\n    var camera = this.camera;\n    var canvas = this.canvas;\n    var embedded;\n    var isVRPresenting;\n    var size;\n    var isPresenting = this.renderer.xr.isPresenting;\n    isVRPresenting = this.renderer.xr.enabled && isPresenting;\n\n    if (this.hasAttribute('disable-resize')) {\n      return;\n    }\n\n    // Do not update renderer, if a camera or a canvas have not been injected.\n    // In VR mode, three handles canvas resize based on the dimensions returned by\n    // the getEyeParameters function of the WebVR API. These dimensions are independent of\n    // the window size, therefore should not be overwritten with the window's width and\n    // height, // except when in fullscreen mode.\n    if (!camera || !canvas || (this.is('vr-mode') && (this.isMobile || isVRPresenting))) {\n      return;\n    }\n\n    // Update camera.\n    embedded = this.getAttribute('embedded') && !this.is('vr-mode');\n    size = getCanvasSize(canvas, embedded, this.maxCanvasSize, this.is('vr-mode'));\n    camera.aspect = size.width / size.height;\n    camera.updateProjectionMatrix();\n\n    // Notify renderer of size change.\n    this.renderer.setSize(size.width, size.height, false);\n    this.emit('rendererresize', null, false);\n  }\n\n  setupRenderer () {\n    var self = this;\n    var renderer;\n    var rendererAttr;\n    var rendererAttrString;\n    var rendererConfig;\n\n    rendererConfig = {\n      alpha: true,\n      antialias: !isMobile,\n      canvas: this.canvas,\n      logarithmicDepthBuffer: false,\n      powerPreference: 'high-performance',\n      preuploadVideos: /Oculus/.test(navigator.userAgent),\n      forceWebVR: false\n    };\n\n    this.maxCanvasSize = {height: -1, width: -1};\n\n    if (this.hasAttribute('renderer')) {\n      rendererAttrString = this.getAttribute('renderer');\n      rendererAttr = utils.styleParser.parse(rendererAttrString);\n\n      if (rendererAttr.precision) {\n        rendererConfig.precision = rendererAttr.precision + 'p';\n      }\n\n      if (rendererAttr.antialias && rendererAttr.antialias !== 'auto') {\n        rendererConfig.antialias = rendererAttr.antialias === 'true';\n      }\n\n      if (rendererAttr.logarithmicDepthBuffer && rendererAttr.logarithmicDepthBuffer !== 'auto') {\n        rendererConfig.logarithmicDepthBuffer = rendererAttr.logarithmicDepthBuffer === 'true';\n      }\n\n      if (rendererAttr.alpha) {\n        rendererConfig.alpha = rendererAttr.alpha === 'true';\n      }\n\n      if (rendererAttr.stencil) {\n        rendererConfig.stencil = rendererAttr.stencil === 'true';\n      }\n\n      if (rendererAttr.multiviewStereo) {\n        rendererConfig.multiviewStereo = rendererAttr.multiviewStereo === 'true';\n      }\n\n      if (rendererAttr.forceWebVR) {\n        rendererConfig.forceWebVR = rendererAttr.forceWebVR === 'true';\n      }\n\n      if (window.forceWebVR === true) {\n        rendererConfig.forceWebVR = window.forceWebVR;\n      }\n\n      this.maxCanvasSize = {\n        width: rendererAttr.maxCanvasWidth\n          ? parseInt(rendererAttr.maxCanvasWidth)\n          : this.maxCanvasSize.width,\n        height: rendererAttr.maxCanvasHeight\n          ? parseInt(rendererAttr.maxCanvasHeight)\n          : this.maxCanvasSize.height\n      };\n    }\n\n    renderer = this.renderer = new THREE.WebGLRenderer(rendererConfig);\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    // if (this.camera) { renderer.xr.setPoseTarget(this.camera.el.object3D); }\n    // this.addEventListener('camera-set-active', function () {\n    //   renderer.xr.setPoseTarget(self.camera.el.object3D);\n    // });\n  }\n\n  /**\n   * Handler attached to elements to help scene know when to kick off.\n   * Scene waits for all entities to load.\n   */\n  play () {\n    var self = this;\n    var sceneEl = this;\n\n    if (this.renderStarted) {\n      AEntity.prototype.play.call(this);\n      return;\n    }\n\n    this.addEventListener('loaded', function () {\n      var renderer = this.renderer;\n      AEntity.prototype.play.call(this);  // .play() *before* render.\n\n      if (sceneEl.renderStarted) { return; }\n      sceneEl.resize();\n\n      // Kick off render loop.\n      if (sceneEl.renderer) {\n        if (window.performance) { window.performance.mark('render-started'); }\n        loadingScreen.remove();\n        renderer.setAnimationLoop(this.render);\n        sceneEl.renderStarted = true;\n        sceneEl.emit('renderstart');\n      }\n    });\n\n    // setTimeout to wait for all nodes to attach and run their callbacks.\n    setTimeout(function () {\n      AEntity.prototype.load.call(self);\n    });\n  }\n\n  /**\n   * Wrap `updateComponent` to not initialize the component if the component has a system\n   * (aframevr/aframe#2365).\n   */\n  updateComponent (componentName) {\n    if (componentName in systems) { return; }\n    AEntity.prototype.updateComponent.apply(this, arguments);\n  }\n\n  /**\n   * Behavior-updater meant to be called from scene render.\n   * Abstracted to a different function to facilitate unit testing (`scene.tick()`) without\n   * needing to render.\n   */\n  tick (time, timeDelta) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tick', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tick) { continue; }\n      systems[this.systemNames[i]].tick(time, timeDelta);\n    }\n  }\n\n  /**\n   * Behavior-updater meant to be called after scene render for post processing purposes.\n   * Abstracted to a different function to facilitate unit testing (`scene.tock()`) without\n   * needing to render.\n   */\n  tock (time, timeDelta, camera) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tock', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tock) { continue; }\n      systems[this.systemNames[i]].tock(time, timeDelta, camera);\n    }\n  }\n\n  /**\n   * The render loop.\n   *\n   * Updates animations.\n   * Updates behaviors.\n   * Renders with request animation frame.\n   */\n  render (time, frame) {\n    var renderer = this.renderer;\n\n    this.frame = frame;\n    this.delta = this.clock.getDelta() * 1000;\n    this.time = this.clock.elapsedTime * 1000;\n\n    if (this.isPlaying) { this.tick(this.time, this.delta); }\n    var savedBackground = null;\n    if (this.is('ar-mode')) {\n      // In AR mode, don't render the default background. Hide it, then\n      // restore it again after rendering.\n      savedBackground = this.object3D.background;\n      this.object3D.background = null;\n    }\n    renderer.render(this.object3D, this.camera);\n    if (savedBackground) {\n      this.object3D.background = savedBackground;\n    }\n  }\n\n  callComponentBehaviors (behavior, time, timeDelta) {\n    var i;\n\n    for (var c = 0; c < this.componentOrder.length; c++) {\n      var behaviors = this.behaviors[this.componentOrder[c]];\n      if (!behaviors) { continue; }\n      var behaviorSet = behaviors[behavior];\n\n      behaviorSet.inUse = true;\n      for (i = 0; i < behaviorSet.array.length; i++) {\n        if (!behaviorSet.array[i].isPlaying) { continue; }\n        behaviorSet.array[i][behavior](time, timeDelta);\n      }\n      behaviorSet.inUse = false;\n\n      // Clean up any behaviors marked for removal\n      for (i = 0; i < behaviorSet.markedForRemoval.length; i++) {\n        this.removeBehavior(behaviorSet.markedForRemoval[i]);\n      }\n      behaviorSet.markedForRemoval.length = 0;\n    }\n  }\n}\n\n/**\n * Derives an ordering from the components, taking any before and after\n * constraints into account.\n *\n * @param {object} components - The components to order\n * @param {array} array - Optional array to use as output\n */\nexport function determineComponentBehaviorOrder (components, array) {\n  var graph = {};\n  var i;\n  var key;\n  var result = array || [];\n  result.length = 0;\n\n  // Construct graph nodes for each element\n  for (key in components) {\n    var element = components[key];\n    if (element === undefined) { continue; }\n    var before = element.before ? element.before.slice(0) : [];\n    var after = element.after ? element.after.slice(0) : [];\n    graph[key] = { before: before, after: after, visited: false, done: false };\n  }\n\n  // Normalize to after constraints, warn about missing nodes\n  for (key in graph) {\n    for (i = 0; i < graph[key].before.length; i++) {\n      var beforeName = graph[key].before[i];\n      if (!(beforeName in graph)) {\n        warn('Invalid ordering constraint, no component named `' + beforeName + '` referenced by `' + key + '`');\n        continue;\n      }\n\n      graph[beforeName].after.push(key);\n    }\n  }\n\n  // Perform topological depth-first search\n  // https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search\n  function visit (name) {\n    if (!(name in graph) || graph[name].done) {\n      return;\n    }\n\n    if (graph[name].visited) {\n      warn('Cycle detected, ignoring one or more before/after constraints. ' +\n        'The resulting order might be incorrect');\n      return;\n    }\n\n    graph[name].visited = true;\n\n    for (var i = 0; i < graph[name].after.length; i++) {\n      var afterName = graph[name].after[i];\n      if (!(afterName in graph)) {\n        warn('Invalid before/after constraint, no component named `' +\n            afterName + '` referenced in `' + name + '`');\n      }\n      visit(afterName);\n    }\n\n    graph[name].done = true;\n    result.push(name);\n  }\n\n  for (key in graph) {\n    if (graph[key].done) {\n      continue;\n    }\n    visit(key);\n  }\n  return result;\n}\n\n/**\n * Return size constrained to maxSize - maintaining aspect ratio.\n *\n * @param {object} size - size parameters (width and height).\n * @param {object} maxSize - Max size parameters (width and height).\n * @returns {object} Width and height.\n */\nfunction constrainSizeTo (size, maxSize) {\n  var aspectRatio;\n  var pixelRatio = window.devicePixelRatio;\n\n  if (!maxSize || (maxSize.width === -1 && maxSize.height === -1)) {\n    return size;\n  }\n\n  if (size.width * pixelRatio < maxSize.width &&\n    size.height * pixelRatio < maxSize.height) {\n    return size;\n  }\n\n  aspectRatio = size.width / size.height;\n\n  if ((size.width * pixelRatio) > maxSize.width && maxSize.width !== -1) {\n    size.width = Math.round(maxSize.width / pixelRatio);\n    size.height = Math.round(maxSize.width / aspectRatio / pixelRatio);\n  }\n\n  if ((size.height * pixelRatio) > maxSize.height && maxSize.height !== -1) {\n    size.height = Math.round(maxSize.height / pixelRatio);\n    size.width = Math.round(maxSize.height * aspectRatio / pixelRatio);\n  }\n\n  return size;\n}\n\ncustomElements.define('a-scene', AScene);\n\n/**\n * Return the canvas size where the scene will be rendered.\n * Will be always the window size except when the scene is embedded.\n * The parent size will be returned in that case.\n * the returned size will be constrained to the maxSize maintaining aspect ratio.\n *\n * @param {object} canvasEl - the canvas element\n * @param {boolean} embedded - Is the scene embedded?\n * @param {object} max - Max size parameters\n * @param {boolean} isVR - If in VR\n */\nfunction getCanvasSize (canvasEl, embedded, maxSize, isVR) {\n  if (!canvasEl.parentElement) { return {height: 0, width: 0}; }\n  if (embedded) {\n    var size;\n    size = {\n      height: canvasEl.parentElement.offsetHeight,\n      width: canvasEl.parentElement.offsetWidth\n    };\n    return constrainSizeTo(size, maxSize);\n  }\n  return getMaxSize(maxSize, isVR);\n}\n\n/**\n * Return the canvas size. Will be the window size unless that size is greater than the\n * maximum size (1920x1920 by default).  The constrained size will be returned in that case,\n * maintaining aspect ratio\n *\n * @param {object} maxSize - Max size parameters (width and height).\n * @param {boolean} isVR - If in VR.\n * @returns {object} Width and height.\n */\nfunction getMaxSize (maxSize, isVR) {\n  var size;\n  size = {height: document.body.offsetHeight, width: document.body.offsetWidth};\n  if (isVR) {\n    return size;\n  } else {\n    return constrainSizeTo(size, maxSize);\n  }\n}\n\nfunction requestFullscreen (canvas) {\n  var requestFullscreen =\n    canvas.requestFullscreen ||\n    canvas.webkitRequestFullscreen ||\n    canvas.mozRequestFullScreen ||  // The capitalized `S` is not a typo.\n    canvas.msRequestFullscreen;\n  // Hide navigation buttons on Android.\n  requestFullscreen.apply(canvas, [{navigationUI: 'hide'}]);\n}\n\nfunction exitFullscreen () {\n  var fullscreenEl =\n    document.fullscreenElement ||\n    document.webkitFullscreenElement ||\n    document.mozFullScreenElement;\n  if (!fullscreenEl) { return; }\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n\nexport function setupCanvas (sceneEl) {\n  var canvasEl;\n\n  canvasEl = document.createElement('canvas');\n  canvasEl.classList.add('a-canvas');\n  // Mark canvas as provided/injected by A-Frame.\n  canvasEl.dataset.aframeCanvas = true;\n  sceneEl.appendChild(canvasEl);\n\n  document.addEventListener('fullscreenchange', onFullScreenChange);\n  document.addEventListener('mozfullscreenchange', onFullScreenChange);\n  document.addEventListener('webkitfullscreenchange', onFullScreenChange);\n  document.addEventListener('MSFullscreenChange', onFullScreenChange);\n\n  // Prevent overscroll on mobile.\n  canvasEl.addEventListener('touchmove', function (event) { event.preventDefault(); }, {passive: false});\n\n  // Set canvas on scene.\n  sceneEl.canvas = canvasEl;\n  sceneEl.emit('render-target-loaded', {target: canvasEl});\n  // For unknown reasons a synchronous resize does not work on desktop when\n  // entering/exiting fullscreen.\n  setTimeout(sceneEl.resize.bind(sceneEl), 0);\n\n  function onFullScreenChange () {\n    var fullscreenEl =\n      document.fullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    // No fullscreen element === exit fullscreen\n    if (!fullscreenEl) { sceneEl.exitVR(); }\n    document.activeElement.blur();\n    document.body.focus();\n  }\n}\n","import Wakelock from '../../../vendor/wakelock/wakelock.js';\n\nexport function initWakelock (scene) {\n  if (!scene.isMobile) { return; }\n\n  var wakelock = scene.wakelock = new Wakelock();\n  scene.addEventListener('enter-vr', function () { wakelock.request(); });\n  scene.addEventListener('exit-vr', function () { wakelock.release(); });\n}\n","import * as schema from './schema.js';\nimport THREE from '../lib/three.js';\n\nvar processSchema = schema.process;\nexport var geometries = {};  // Registered geometries.\nexport var geometryNames = [];  // Names of registered geometries.\n\n/**\n * Geometry class definition.\n *\n * Geometries extend the geometry component API to create and register geometry types.\n */\nexport var Geometry = function () {};\n\nGeometry.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.geometry = new THREE.BufferGeometry();\n    return this.geometry;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated geometry data changes.\n   *\n   * @param {object} data - New geometry data.\n   */\n  update: function (data) { /* no-op */ }\n};\n\n/**\n * Registers a geometry to A-Frame.\n *\n * @param {string} name - Geometry name.\n * @param {object} definition - Geometry property and methods.\n * @returns {object} Geometry.\n */\nexport function registerGeometry (name, definition) {\n  var NewGeometry;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function expandDefinition (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (geometries[name]) {\n    throw new Error('The geometry `' + name + '` has been already registered');\n  }\n  NewGeometry = function () { Geometry.call(this); };\n  NewGeometry.prototype = Object.create(Geometry.prototype, proto);\n  NewGeometry.prototype.name = name;\n  NewGeometry.prototype.constructor = NewGeometry;\n  geometries[name] = {\n    Geometry: NewGeometry,\n    schema: processSchema(NewGeometry.prototype.schema)\n  };\n  geometryNames.push(name);\n  return NewGeometry;\n}\n","/* global customElements */\nimport { knownTags } from '../../core/a-node.js';\nimport { AEntity } from '../../core/a-entity.js';\nimport { components } from '../../core/component.js';\nimport * as utils from '../../utils/index.js';\n\nvar debug = utils.debug;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar log = debug('extras:primitives:debug');\nvar warn = debug('extras:primitives:warn');\nvar error = debug('extras:primitives:error');\n\nexport var primitives = {};\n\nexport function registerPrimitive (name, definition) {\n  name = name.toLowerCase();\n\n  if (knownTags[name]) {\n    error('Trying to register primitive ' + name + ' that has been already previously registered');\n    return;\n  }\n\n  knownTags[name] = true;\n\n  log('Registering <%s>', name);\n\n  // Deprecation warning for defaultAttributes usage.\n  if (definition.defaultAttributes) {\n    warn(\"The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.\");\n  }\n\n  var mappings = definition.mappings || {};\n  var primitiveClass = class extends AEntity {\n    constructor () {\n      super();\n      this.defaultComponentsFromPrimitive = definition.defaultComponents || definition.defaultAttributes || {};\n      this.deprecated = definition.deprecated || null;\n      this.deprecatedMappings = definition.deprecatedMappings || {};\n      this.mappings = mappings;\n\n      if (definition.deprecated) { console.warn(definition.deprecated); }\n      this.resolveMappingCollisions();\n    }\n\n    /**\n     * If a mapping collides with a registered component name\n     * it renames the mapping to componentname-property\n     */\n    resolveMappingCollisions () {\n      var mappings = this.mappings;\n      var self = this;\n      Object.keys(mappings).forEach(function resolveCollision (key) {\n        var newAttribute;\n        if (key !== key.toLowerCase()) { warn('Mapping keys should be specified in lower case. The mapping key ' + key + ' may not be recognized'); }\n        if (components[key]) {\n          newAttribute = mappings[key].replace('.', '-');\n          mappings[newAttribute] = mappings[key];\n          delete mappings[key];\n          console.warn('The primitive ' + self.tagName.toLowerCase() + ' has a mapping collision. ' +\n                       'The attribute ' + key + ' has the same name as a registered component and' +\n                       ' has been renamed to ' + newAttribute);\n        }\n      });\n    }\n\n    getExtraComponents () {\n      var attr;\n      var data;\n      var i;\n      var mapping;\n      var mixins;\n      var self = this;\n\n      // Gather component data from default components.\n      data = utils.clone(this.defaultComponentsFromPrimitive);\n\n      // Factor in mixins to overwrite default components.\n      mixins = this.getAttribute('mixin');\n      if (mixins) {\n        mixins = utils.split(mixins.trim(), /\\s+/);\n        mixins.forEach(function applyMixin (mixinId) {\n          var mixinEl = document.getElementById(mixinId);\n          if (!mixinEl) { return; }\n          var rawAttributeCache = mixinEl.rawAttributeCache;\n          var mixinComponents = mixinEl.componentCache;\n          for (var name in rawAttributeCache) {\n            // Check if the attribute matches a mapping.\n            mapping = self.mappings[name];\n            if (mapping) {\n              applyMapping(mapping, rawAttributeCache[name], data);\n              return;\n            }\n\n            // Check if the attribute belongs to a component.\n            if (name in mixinComponents) {\n              data[name] = extend(data[name], mixinComponents[name]);\n            }\n          }\n        });\n      }\n\n      // Gather component data from mappings.\n      for (i = 0; i < this.attributes.length; i++) {\n        attr = this.attributes[i];\n        mapping = this.mappings[attr.name];\n        if (mapping) {\n          applyMapping(mapping, attr.value, data);\n        }\n      }\n\n      return data;\n\n      /**\n       * For the base to be extensible, both objects must be pure JavaScript objects.\n       * The function assumes that base is undefined, or null or a pure object.\n       */\n      function extend (base, extension) {\n        if (isUndefined(base)) {\n          return copy(extension);\n        }\n        if (isUndefined(extension)) {\n          return copy(base);\n        }\n        if (isPureObject(base) && isPureObject(extension)) {\n          return utils.extendDeep(base, extension);\n        }\n        return copy(extension);\n      }\n\n      function isUndefined (value) {\n        return typeof value === 'undefined';\n      }\n\n      function copy (value) {\n        if (isPureObject(value)) {\n          return utils.extendDeep({}, value);\n        }\n        return value;\n      }\n\n      function isPureObject (value) {\n        return value !== null && value.constructor === Object;\n      }\n    }\n\n    /**\n     * Sync to attribute to component property whenever mapped attribute changes.\n     * If attribute is mapped to a component property, set the component property using\n     * the attribute value.\n     */\n    attributeChangedCallback (attr, oldVal, value) {\n      var componentName = this.mappings[attr];\n\n      if (attr in this.deprecatedMappings) {\n        console.warn(this.deprecatedMappings[attr]);\n      }\n\n      if (!attr || !componentName) {\n        super.attributeChangedCallback(attr, oldVal, value);\n        return;\n      }\n\n      // Set value.\n      setComponentProperty(this, componentName, value);\n    }\n  };\n\n  customElements.define(name, primitiveClass);\n  primitiveClass.mappings = mappings;\n\n  // Store.\n  primitives[name] = primitiveClass;\n  return primitiveClass;\n}\n\n/**\n * Sets the relevant property based on the mapping property path.\n *\n * @param {string} mapping - The mapped property path.\n * @param {string} attrValue - The (raw) attribute value.\n * @param {object} data - The data object to apply the mapping to.\n */\nfunction applyMapping (mapping, attrValue, data) {\n  var path = utils.entity.getComponentPropertyPath(mapping);\n  if (path.constructor === Array) {\n    data[path[0]] = data[path[0]] || {};\n    data[path[0]][path[1]] = attrValue.trim();\n  } else {\n    data[path] = attrValue.trim();\n  }\n}\n\n/**\n * Add component mappings using schema.\n */\nfunction addComponentMapping (componentName, mappings) {\n  var schema = components[componentName].schema;\n  Object.keys(schema).forEach(function (prop) {\n    // Hyphenate where there is camelCase.\n    var attrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    // If there is a mapping collision, prefix with component name and hyphen.\n    if (mappings[attrName] !== undefined) { attrName = componentName + '-' + prop; }\n    mappings[attrName] = componentName + '.' + prop;\n  });\n}\n\n/**\n * Helper to define a primitive, building mappings using a component schema.\n */\nexport function definePrimitive (tagName, defaultComponents, mappings) {\n  // If no initial mappings provided, start from empty map.\n  mappings = mappings || {};\n\n  // From the default components, add mapping automagically.\n  Object.keys(defaultComponents).forEach(function buildMappings (componentName) {\n    addComponentMapping(componentName, mappings);\n  });\n\n  // Register the primitive.\n  registerPrimitive(tagName, utils.extendDeep({}, null, {\n    defaultComponents: defaultComponents,\n    mappings: mappings\n  }));\n}\n","import THREE from '../lib/three.js';\nimport { process as processSchema } from './schema.js';\nimport * as utils from '../utils/index.js';\n\nexport var shaders = {};  // Keep track of registered shaders.\nexport var shaderNames = [];  // Keep track of the names of registered shaders.\n\n// A-Frame properties to three.js uniform types.\nvar propertyToThreeMapping = {\n  array: 'v3',\n  color: 'v3',\n  int: 'i',\n  number: 'f',\n  map: 't',\n  time: 'f',\n  vec2: 'v2',\n  vec3: 'v3',\n  vec4: 'v4'\n};\n\n/**\n * Shader class definition.\n *\n * Shaders extend the material component API so you can create your own library\n * of customized materials.\n *\n */\nexport var Shader = function () {};\n\nShader.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  vertexShader:\n    'void main() {' +\n      'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);' +\n    '}',\n\n  fragmentShader:\n    'void main() {' +\n      'gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);' +\n    '}',\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.uniforms = this.initUniforms();\n    this.material = new (this.raw ? THREE.RawShaderMaterial : THREE.ShaderMaterial)({\n      uniforms: this.uniforms,\n      glslVersion: this.raw || this.glsl3 ? THREE.GLSL3 : null,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader\n    });\n    return this.material;\n  },\n\n  initUniforms: function () {\n    var key;\n    var schema = this.schema;\n    var variables = {};\n    var varType;\n\n    for (key in schema) {\n      if (schema[key].is !== 'uniform') { continue; }\n      varType = propertyToThreeMapping[schema[key].type];\n      variables[key] = {\n        type: varType,\n        value: undefined  // Let update handle setting these.\n      };\n    }\n    return variables;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated material data changes.\n   *\n   * @param {object} data - New material data.\n   */\n  update: function (data) {\n    var key;\n    var materialKey;\n    var schema = this.schema;\n    var uniforms = this.uniforms;\n\n    for (key in data) {\n      if (!schema[key] || schema[key].is !== 'uniform') { continue; }\n\n      if (schema[key].type === 'map') {\n        // If data unchanged, get out early.\n        if (!uniforms[key] || uniforms[key].value === data[key]) { continue; }\n\n        // Special handling is needed for textures.\n        materialKey = '_texture_' + key;\n\n        // We can't actually set the variable correctly until we've loaded the texture.\n        this.setMapOnTextureLoad(uniforms, key, materialKey);\n\n        // Kick off the texture update now that handler is added.\n        utils.material.updateMapMaterialFromData(materialKey, key, this, data);\n        continue;\n      }\n      uniforms[key].value = this.parseValue(schema[key].type, data[key]);\n      uniforms[key].needsUpdate = true;\n    }\n  },\n\n  parseValue: function (type, value) {\n    var color;\n    switch (type) {\n      case 'vec2': {\n        return new THREE.Vector2(value.x, value.y);\n      }\n      case 'vec3': {\n        return new THREE.Vector3(value.x, value.y, value.z);\n      }\n      case 'vec4': {\n        return new THREE.Vector4(value.x, value.y, value.z, value.w);\n      }\n      case 'color': {\n        color = new THREE.Color(value);\n        return new THREE.Vector3(color.r, color.g, color.b);\n      }\n      default: {\n        return value;\n      }\n    }\n  },\n\n  setMapOnTextureLoad: function (uniforms, key, materialKey) {\n    var self = this;\n    this.el.addEventListener('materialtextureloaded', function () {\n      uniforms[key].value = self.material[materialKey];\n      uniforms[key].needsUpdate = true;\n    });\n  }\n};\n\n/**\n * Registers a shader to A-Frame.\n *\n * @param {string} name - shader name.\n * @param {object} definition - shader property and methods.\n * @returns {object} Shader.\n */\nexport function registerShader (name, definition) {\n  var NewShader;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (shaders[name]) {\n    throw new Error('The shader ' + name + ' has already been registered');\n  }\n  NewShader = function () { Shader.call(this); };\n  NewShader.prototype = Object.create(Shader.prototype, proto);\n  NewShader.prototype.name = name;\n  NewShader.prototype.constructor = NewShader;\n  shaders[name] = {\n    Shader: NewShader,\n    schema: processSchema(NewShader.prototype.schema)\n  };\n  shaderNames.push(name);\n  return NewShader;\n}\n","/* global customElements */\nimport THREE from '../lib/three.js';\nimport { ANode } from './a-node.js';\nimport { debug } from '../utils/index.js';\n\nvar fileLoader = new THREE.FileLoader();\nvar warn = debug('core:a-assets:warn');\n\n/**\n * Asset management system. Handles blocking on asset loading.\n */\nclass AAssets extends ANode {\n  constructor () {\n    super();\n    this.isAssets = true;\n    this.fileLoader = fileLoader;\n    this.timeout = null;\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    \n    setTimeout(() => self.load(), 500);\n  }\n\n  disconnectedCallback () {\n    super.disconnectedCallback();\n    if (this.timeout) { clearTimeout(this.timeout); }\n  }\n\n  load () {\n    // Filter out all children, as waiting already took place in doConnectedCallback.\n    super.load.call(this, null, function () { return false; });\n  }\n}\n\ncustomElements.define('a-assets', AAssets);\n\n/**\n * Preload using XHRLoader for any type of asset.\n */\nclass AAssetItem extends ANode {\n  constructor () {\n    super();\n    this.data = null;\n    this.isAssetItem = true;\n  }\n\n  connectedCallback () {\n    var self = this;\n    var src = this.getAttribute('src');\n    fileLoader.setResponseType(\n      this.getAttribute('response-type') || inferResponseType(src));\n    fileLoader.load(src, function handleOnLoad (response) {\n      self.data = response;\n      ANode.prototype.load.call(self);\n    }, function handleOnProgress (xhr) {\n      self.emit('progress', {\n        loadedBytes: xhr.loaded,\n        totalBytes: xhr.total,\n        xhr: xhr\n      });\n    }, function handleOnError (xhr) {\n      self.emit('error', {xhr: xhr}, false);\n    });\n  }\n}\n\ncustomElements.define('a-asset-item', AAssetItem);\n\n/**\n * Create a Promise that resolves once the media element has finished buffering.\n *\n * @param {Element} el - HTMLMediaElement.\n * @returns {Promise}\n */\nfunction mediaElementLoaded (el) {\n  if (!el.hasAttribute('autoplay') && el.getAttribute('preload') !== 'auto') {\n    return;\n  }\n\n  // If media specifies autoplay or preload, wait until media is completely buffered.\n  return new Promise(function (resolve, reject) {\n    if (el.readyState === 4) { return resolve(); }  // Already loaded.\n    if (el.error) { return reject(); }  // Error.\n\n    el.addEventListener('loadeddata', checkProgress, false);\n    el.addEventListener('progress', checkProgress, false);\n    el.addEventListener('error', reject, false);\n\n    function checkProgress () {\n      // Add up the seconds buffered.\n      var secondsBuffered = 0;\n      for (var i = 0; i < el.buffered.length; i++) {\n        secondsBuffered += el.buffered.end(i) - el.buffered.start(i);\n      }\n\n      // Compare seconds buffered to media duration.\n      if (secondsBuffered >= el.duration) {\n        // Set in cache because we won't be needing to call three.js loader if we have.\n        // a loaded media element.\n        // Store video elements only. three.js loader is used for audio elements.\n        // See assetParse too.\n        if (el.tagName === 'VIDEO') {\n          THREE.Cache.add(el.getAttribute('src'), el);\n        }\n        resolve();\n      }\n    }\n  });\n}\n\n/**\n * Automatically add attributes to media elements where convenient.\n * crossorigin, playsinline.\n */\nfunction fixUpMediaElement (mediaEl) {\n  // Cross-origin.\n  var newMediaEl = setCrossOrigin(mediaEl);\n\n  // Plays inline for mobile.\n  if (newMediaEl.tagName && newMediaEl.tagName.toLowerCase() === 'video') {\n    newMediaEl.setAttribute('playsinline', '');\n    newMediaEl.setAttribute('webkit-playsinline', '');\n  }\n\n  if (newMediaEl !== mediaEl) {\n    mediaEl.parentNode.appendChild(newMediaEl);\n    mediaEl.parentNode.removeChild(mediaEl);\n  }\n  return newMediaEl;\n}\n\n/**\n * Automatically set `crossorigin` if not defined on the media element.\n * If it is not defined, we must create and re-append a new media element <img> and\n * have the browser re-request it with `crossorigin` set.\n *\n * @param {Element} Media element (e.g., <img>, <audio>, <video>).\n * @returns {Element} Media element to be used to listen to for loaded events.\n */\nfunction setCrossOrigin (mediaEl) {\n  var newMediaEl;\n  var src;\n\n  // Already has crossorigin set.\n  if (mediaEl.hasAttribute('crossorigin')) { return mediaEl; }\n\n  src = mediaEl.getAttribute('src');\n\n  if (src !== null) {\n    // Does not have protocol.\n    if (src.indexOf('://') === -1) { return mediaEl; }\n\n    // Determine if cross origin is actually needed.\n    if (extractDomain(src) === window.location.host) { return mediaEl; }\n  }\n\n  warn('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. ' +\n       'A-Frame will re-request the asset with `crossorigin` attribute set. ' +\n       'Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)', src);\n  mediaEl.crossOrigin = 'anonymous';\n  newMediaEl = mediaEl.cloneNode(true);\n  return newMediaEl;\n}\n\n/**\n * Extract domain out of URL.\n *\n * @param {string} url\n * @returns {string}\n */\nfunction extractDomain (url) {\n  // Find and remove protocol (e.g., http, ftp, etc.) to get domain.\n  var domain = url.indexOf('://') > -1 ? url.split('/')[2] : url.split('/')[0];\n\n  // Find and remove port number.\n  return domain.substring(0, domain.indexOf(':'));\n}\n\n/**\n * Infer response-type attribute from src.\n * Default is text (default XMLHttpRequest.responseType)\n * and arraybuffer for .glb files.\n *\n * @param {string} src\n * @returns {string}\n */\nexport function inferResponseType (src) {\n  var fileName = getFileNameFromURL(src);\n  var dotLastIndex = fileName.lastIndexOf('.');\n  if (dotLastIndex >= 0) {\n    var extension = fileName.slice(dotLastIndex, src.search(/\\?|#|$/));\n    if (extension === '.glb') {\n      return 'arraybuffer';\n    }\n  }\n  return 'text';\n}\n\n/**\n * Extract filename from URL\n *\n * @param {string} url\n * @returns {string}\n */\nexport function getFileNameFromURL (url) {\n  var parser = document.createElement('a');\n  parser.href = url;\n  var query = parser.search.replace(/^\\?/, '');\n  var filePath = url.replace(query, '').replace('?', '');\n  return filePath.substring(filePath.lastIndexOf('/') + 1);\n}\n","/* global customElements, HTMLElement */\nimport { debug } from '../utils/index.js';\n\nvar warn = debug('core:cubemap:warn');\n\n/**\n * Cubemap element that handles validation and exposes list of six image sources (URL or <img>).\n * Does not listen to updates.\n */\nclass ACubeMap extends HTMLElement {\n  /**\n   * Calculates this.srcs.\n   */\n\n  constructor (self) {\n    self = super(self);\n    return self;\n  }\n\n  onReadyStateChange () {\n    if (document.readyState === 'complete') {\n      this.doConnectedCallback();\n    }\n  }\n\n  connectedCallback () {\n    // Defer if DOM is not ready.\n    if (document.readyState !== 'complete') {\n      document.addEventListener('readystatechange', this.onReadyStateChange.bind(this));\n      return;\n    }\n    ACubeMap.prototype.doConnectedCallback.call(this);\n  }\n\n  doConnectedCallback () {\n    this.srcs = this.validate();\n  }\n\n  /**\n   * Checks for exactly six elements with [src].\n   * When <img>s are used they will be prefetched.\n   *\n   * @returns {Array|null} - six URLs or <img> elements if valid, else null.\n   */\n  validate () {\n    var elements = this.querySelectorAll('[src]');\n    var i;\n    var srcs = [];\n    if (elements.length === 6) {\n      for (i = 0; i < elements.length; i++) {\n        if (elements[i].tagName === 'IMG') {\n          srcs.push(elements[i]);\n        } else {\n          srcs.push(elements[i].getAttribute('src'));\n        }\n      }\n      return srcs;\n    }\n    // Else if there are not six elements, throw a warning.\n    warn(\n      '<a-cubemap> did not contain exactly six elements each with a ' +\n      '`src` attribute.');\n  }\n}\n\ncustomElements.define('a-cubemap', ACubeMap);\n","/* global customElements */\nimport { ANode } from './a-node.js';\nimport { components } from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as styleParser from '../utils/styleParser.js';\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\n\n/**\n * @member {object} componentCache - Cache of pre-parsed values. An object where the keys\n *         are component names and the values are already parsed by the component.\n * @member {object} rawAttributeCache - Cache of the raw attribute values.\n */\nclass AMixin extends ANode {\n  constructor () {\n    super();\n    this.componentCache = {};\n    this.rawAttributeCache = {};\n    this.isMixin = true;\n  }\n\n  doConnectedCallback () {\n    super.doConnectedCallback();\n\n    this.sceneEl = this.closestScene();\n    this.id = this.getAttribute('id');\n    this.cacheAttributes();\n    this.updateEntities();\n    this.load();\n  }\n\n  attributeChangedCallback (attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n    this.cacheAttribute(attr, newVal);\n    this.updateEntities();\n  }\n\n  /**\n   * setAttribute that parses and caches component values.\n   */\n  setAttribute (attr, value) {\n    window.HTMLElement.prototype.setAttribute.call(this, attr, value);\n    this.cacheAttribute(attr, value);\n  }\n\n  /**\n   * If `attr` is a component, then parse the value using the schema and store it.\n   */\n  cacheAttribute (attr, value) {\n    var component;\n    var componentName;\n\n    // Get component data.\n    componentName = utils.split(attr, MULTIPLE_COMPONENT_DELIMITER)[0];\n    component = components[componentName];\n    if (value === undefined) {\n      value = window.HTMLElement.prototype.getAttribute.call(this, attr);\n    }\n\n    this.rawAttributeCache[attr] = value;\n    if (!component) { return; }\n    this.componentCache[attr] = this.parseComponentAttrValue(component, value);\n  }\n\n  /**\n   * Given an HTML attribute value parses the string based on the component schema.\n   * To avoid double parsing of strings when mixed into the actual component,\n   * we store the original instead of the parsed one.\n   *\n   * @param {object} component - The component to parse for.\n   * @param {string} attrValue - HTML attribute value.\n   */\n  parseComponentAttrValue (component, attrValue) {\n    var parsedValue;\n    if (typeof attrValue !== 'string') { return attrValue; }\n    if (component.isSingleProperty) {\n      parsedValue = component.schema.parse(attrValue);\n      if (typeof parsedValue === 'string') { parsedValue = attrValue; }\n    } else {\n      // Use style parser as the values will be parsed once mixed in.\n      // Furthermore parsing might fail with dynamic schema's.\n      parsedValue = styleParser.parse(attrValue);\n    }\n    return parsedValue;\n  }\n\n  /**\n   * If `attr` is a component, then grab pre-parsed value from the cache.\n   * Else do a normal getAttribute.\n   */\n  getAttribute (attr) {\n    return this.componentCache[attr] ||\n      window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Parse and cache every component defined on the mixin.\n   */\n  cacheAttributes () {\n    var attributes = this.attributes;\n    var attrName;\n    var i;\n    for (i = 0; i < attributes.length; i++) {\n      attrName = attributes[i].name;\n      this.cacheAttribute(attrName);\n    }\n  }\n\n  /**\n   * For entities that already have been loaded by the time the mixin was attached, tell\n   * those entities to register the mixin and refresh their component data.\n   */\n  updateEntities () {\n    var entity;\n    var entities;\n    var i;\n\n    if (!this.sceneEl) { return; }\n\n    entities = this.sceneEl.querySelectorAll('[mixin~=' + this.id + ']');\n    for (i = 0; i < entities.length; i++) {\n      entity = entities[i];\n      if (!entity.hasLoaded || entity.isMixin) { continue; }\n      entity.mixinUpdate(this.id);\n    }\n  }\n}\n\ncustomElements.define('a-mixin', AMixin);\n","import THREE from '../lib/three.js';\nimport anime from 'super-animejs';\nimport { registerComponent, components } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = 'color';\nvar PROP_POSITION = 'position';\nvar PROP_ROTATION = 'rotation';\nvar PROP_SCALE = 'scale';\nvar STRING_COMPONENTS = 'components';\nvar STRING_OBJECT3D = 'object3D';\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nexport var Component = registerComponent('animation', {\n  schema: {\n    autoplay: {default: true},\n    delay: {default: 0},\n    dir: {default: ''},\n    dur: {default: 1000},\n    easing: {default: 'easeInQuad'},\n    elasticity: {default: 400},\n    enabled: {default: true},\n    from: {default: ''},\n    loop: {\n      default: 0,\n      parse: function (value) {\n        // Boolean or integer.\n        if (value === true || value === 'true') { return true; }\n        if (value === false || value === 'false') { return false; }\n        return parseInt(value, 10);\n      }\n    },\n    property: {default: ''},\n    startEvents: {type: 'array'},\n    pauseEvents: {type: 'array'},\n    resumeEvents: {type: 'array'},\n    round: {default: false},\n    to: {default: ''},\n    type: {default: ''},\n    isRawProperty: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.eventDetail = {name: this.attrName};\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function () {\n        self.animationIsPlaying = false;\n        self.el.emit('animationcomplete', self.eventDetail, false);\n        if (self.id) {\n          self.el.emit('animationcomplete__' + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function (oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) { return; }\n\n    if (!data.property) { return; }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function (t, dt) {\n    if (!this.animationIsPlaying) { return; }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function () {\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  pause: function () {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function () {\n    if (!this.paused) { return; }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function () {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n    this.animation.began = true;\n\n    this.removeEventListeners();\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || data.startEvents && data.startEvents.length) { return; }\n\n    // Delay animation.\n    if (data.delay) {\n      setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function () {\n    this.updateConfig();\n    this.animation.began = true;\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit('animationbegin', this.eventDetail, false);\n  },\n\n  pauseAnimation: function () {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function () {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function () {\n    if (!this.data.enabled) { return; }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === '' ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r &&\n            value.g === lastValue.g &&\n            value.b === lastValue.b) { return; }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === '') {\n      // Infer from.\n      from = isRawProperty(data)\n        ? getRawProperty(el, data.property)\n        : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === 'true' || data.to === 'false' ||\n                data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === 'true' || data.from === true ? 1 : 0;\n      to = data.to === 'true' || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function () {\n      var lastValue;\n\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaneously even if the value has not changed. Also better for perf\n        // anyway.\n        if (value === lastValue) { return; }\n        lastValue = value;\n\n        if (isBoolean) { value = value >= 1; }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n    var split = splitDot(data.property);\n    var property = split[0] === 'object3D' ? split[1] : split[0];\n\n    // Parse coordinates.\n    from = data.from !== ''\n      ? utils.coordinates.parse(data.from)  // If data.from defined, use that.\n      : getComponentProperty(el, property);  // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (property === PROP_POSITION || property === PROP_ROTATION ||\n        property === PROP_SCALE) {\n      config.update = (function () {\n        var lastValue = {};\n        return function (anim) {\n          var value = anim.animatables[0].target;\n\n          // For animation timeline.\n          if (value.x === lastValue.x &&\n              value.y === lastValue.y &&\n              value.z === lastValue.z) { return; }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[property].set(value.x, value.y, value.z);\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value = anim.animatables[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x &&\n            value.y === lastValue.y &&\n            value.z === lastValue.z) { return; }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function () {\n    var propType;\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === 'vec2' || propType === 'vec3' || propType === 'vec4') {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function (cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== '') { return false; }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) { return false; }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) { return false; }\n\n    el.addEventListener('componentinitialized', function wait (evt) {\n      if (evt.detail.name !== componentName) { return; }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener('componentinitialized', wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function () {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) { continue; }\n      if (component.name !== 'animation') { continue; }\n      if (!component.animationIsPlaying) { continue; }\n      if (component.data.property !== this.data.property) { continue; }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  setColorConfig: function (from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType (el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split('.');\n  // Object3D.\n  if (split[0] === 'object3D' && !split[2]) {\n    if (split[1] === 'position' ||\n        split[1] === 'rotation' ||\n        split[1] === 'scale') {\n      return 'vec3';\n    }\n  }\n\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) { return null; }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) { return null; }\n\n  // Multi-prop.\n  if (propertyName) { return component.schema[propertyName].type; }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians (obj) {\n  obj.x = THREE.MathUtils.degToRad(obj.x);\n  obj.y = THREE.MathUtils.degToRad(obj.y);\n  obj.z = THREE.MathUtils.degToRad(obj.z);\n}\n\nfunction addEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty (el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  if (value === undefined) {\n    console.log(el);\n    throw new Error('[animation] property (' + path + ') could not be found');\n  }\n  return value;\n}\n\nfunction setRawProperty (el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith('object3D.rotation')) {\n    value = THREE.MathUtils.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) { targetValue = targetValue[split[i]]; }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if ('r' in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot (path) {\n  if (path in splitCache) { return splitCache[path]; }\n  splitCache[path] = path.split('.');\n  return splitCache[path];\n}\n\nfunction isRawProperty (data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) ||\n         data.property.startsWith(STRING_OBJECT3D);\n}\n","/* global THREE, XRRigidTransform, localStorage */\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:anchored:warn');\n\n/**\n * Anchored component.\n * Feature only available in browsers that implement the WebXR anchors module.\n * Once anchored the entity remains to a fixed position in real-world space.\n * If the anchor is persistent, the anchor positioned remains across sessions or until the browser data is cleared.\n */\nexport var Component = registerComponent('anchored', {\n  schema: {\n    persistent: {default: false}\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('anchors') === -1) {\n      optionalFeaturesArray.push('anchors');\n      this.el.sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.auxQuaternion = new THREE.Quaternion();\n\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n  },\n\n  onEnterVR: function () {\n    this.anchor = undefined;\n    this.requestPersistentAnchorPending = this.data.persistent;\n    this.requestAnchorPending = !this.data.persistent;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var refSpace;\n    var pose;\n    var object3D = this.el.object3D;\n\n    if ((!sceneEl.is('ar-mode') && !sceneEl.is('vr-mode'))) { return; }\n    if (!this.anchor && this.requestPersistentAnchorPending) { this.restorePersistentAnchor(); }\n    if (!this.anchor && this.requestAnchorPending) { this.createAnchor(); }\n    if (!this.anchor) { return; }\n\n    frame = sceneEl.frame;\n    refSpace = xrManager.getReferenceSpace();\n\n    pose = frame.getPose(this.anchor.anchorSpace, refSpace);\n    // Apply position and orientation, leave scale as-is (see aframevr/aframe#5630)\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n  },\n\n  createAnchor: async function createAnchor (position, quaternion) {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var referenceSpace;\n    var anchorPose;\n    var anchor;\n    var object3D = this.el.object3D;\n\n    position = position || object3D.position;\n    quaternion = quaternion || this.auxQuaternion.setFromEuler(object3D.rotation);\n\n    if (!anchorsSupported(sceneEl)) {\n      warn('This browser doesn\\'t support the WebXR anchors module');\n      return;\n    }\n\n    if (this.anchor) { this.deleteAnchor(); }\n\n    frame = sceneEl.frame;\n    referenceSpace = xrManager.getReferenceSpace();\n    anchorPose = new XRRigidTransform(\n      {\n        x: position.x,\n        y: position.y,\n        z: position.z\n      },\n      {\n        x: quaternion.x,\n        y: quaternion.y,\n        z: quaternion.z,\n        w: quaternion.w\n      });\n\n    this.requestAnchorPending = false;\n    anchor = await frame.createAnchor(anchorPose, referenceSpace);\n    if (this.data.persistent) {\n      if (this.el.id) {\n        this.persistentHandle = await anchor.requestPersistentHandle();\n        localStorage.setItem(this.el.id, this.persistentHandle);\n      } else {\n        warn('The anchor won\\'t be persisted because the entity has no assigned id.');\n      }\n    }\n    sceneEl.object3D.attach(this.el.object3D);\n    this.anchor = anchor;\n  },\n\n  restorePersistentAnchor: async function restorePersistentAnchor () {\n    var xrManager = this.el.sceneEl.renderer.xr;\n    var session = xrManager.getSession();\n    var persistentAnchors = session.persistentAnchors;\n    var storedPersistentHandle;\n    this.requestPersistentAnchorPending = false;\n    if (!this.el.id) {\n      warn('The entity associated to the persistent anchor cannot be retrieved because it doesn\\'t have an assigned id.');\n      this.requestAnchorPending = true;\n      return;\n    }\n    if (persistentAnchors) {\n      storedPersistentHandle = localStorage.getItem(this.el.id);\n      for (var i = 0; i < persistentAnchors.length; ++i) {\n        if (storedPersistentHandle !== persistentAnchors[i]) { continue; }\n        this.anchor = await session.restorePersistentAnchor(persistentAnchors[i]);\n        if (this.anchor) { this.persistentHandle = persistentAnchors[i]; }\n        break;\n      }\n      if (!this.anchor) { this.requestAnchorPending = true; }\n    } else {\n      this.requestPersistentAnchorPending = true;\n    }\n  },\n\n  deleteAnchor: function () {\n    var xrManager;\n    var session;\n    var anchor = this.anchor;\n\n    if (!anchor) { return; }\n    xrManager = this.el.sceneEl.renderer.xr;\n    session = xrManager.getSession();\n\n    anchor.delete();\n    this.el.sceneEl.object3D.add(this.el.object3D);\n    if (this.persistentHandle) { session.deletePersistentAnchor(this.persistentHandle); }\n    this.anchor = undefined;\n  }\n});\n\nfunction anchorsSupported (sceneEl) {\n  var xrManager = sceneEl.renderer.xr;\n  var session = xrManager.getSession();\n  return (session && session.restorePersistentAnchor);\n}\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Camera component.\n * Pairs along with camera system to handle tracking the active camera.\n */\nexport var Component = registerComponent('camera', {\n  schema: {\n    active: {default: true},\n    far: {default: 10000},\n    fov: {default: 80, min: 0},\n    near: {default: 0.005, min: 0},\n    spectator: {default: false},\n    zoom: {default: 1, min: 0}\n  },\n\n  /**\n   * Initialize three.js camera and add it to the entity.\n   * Add reference from scene to this entity as the camera.\n   */\n  init: function () {\n    var camera;\n    var el = this.el;\n\n    // Create camera.\n    camera = this.camera = new THREE.PerspectiveCamera();\n    el.setObject3D('camera', camera);\n  },\n\n  /**\n   * Update three.js camera.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var camera = this.camera;\n\n    // Update properties.\n    camera.aspect = data.aspect || (window.innerWidth / window.innerHeight);\n    camera.far = data.far;\n    camera.fov = data.fov;\n    camera.near = data.near;\n    camera.zoom = data.zoom;\n    camera.updateProjectionMatrix();\n\n    this.updateActiveCamera(oldData);\n    this.updateSpectatorCamera(oldData);\n  },\n\n  updateActiveCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // Active property did not change.\n    if (oldData && oldData.active === data.active || data.spectator) { return; }\n\n    // If `active` property changes, or first update, handle active camera with system.\n    if (data.active && system.activeCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setActiveCamera(el);\n    } else if (!data.active && system.activeCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableActiveCamera();\n    }\n  },\n\n  updateSpectatorCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // spectator property did not change.\n    if (oldData && oldData.spectator === data.spectator) { return; }\n\n    // If `spectator` property changes, or first update, handle spectator camera with system.\n    if (data.spectator && system.spectatorCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setSpectatorCamera(el);\n    } else if (!data.spectator && system.spectatorCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableSpectatorCamera();\n    }\n  },\n\n  /**\n   * Remove camera on remove (callback).\n   */\n  remove: function () {\n    this.el.removeObject3D('camera');\n  }\n});\n","/* global THREE, MouseEvent, TouchEvent */\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar EVENTS = {\n  CLICK: 'click',\n  FUSING: 'fusing',\n  MOUSEENTER: 'mouseenter',\n  MOUSEDOWN: 'mousedown',\n  MOUSELEAVE: 'mouseleave',\n  MOUSEUP: 'mouseup'\n};\n\nvar STATES = {\n  FUSING: 'cursor-fusing',\n  HOVERING: 'cursor-hovering',\n  HOVERED: 'cursor-hovered'\n};\n\nvar CANVAS_EVENTS = {\n  DOWN: ['mousedown', 'touchstart'],\n  UP: ['mouseup', 'touchend']\n};\n\nvar WEBXR_EVENTS = {\n  DOWN: ['selectstart'],\n  UP: ['selectend']\n};\n\nvar CANVAS_HOVER_CLASS = 'a-mouse-cursor-hover';\n\n/**\n * Cursor component. Applies the raycaster component specifically for starting the raycaster\n * from the camera and pointing from camera's facing direction, and then only returning the\n * closest intersection. Cursor can be fine-tuned by setting raycaster properties.\n *\n * @member {object} fuseTimeout - Timeout to trigger fuse-click.\n * @member {Element} cursorDownEl - Entity that was last mousedowned during current click.\n * @member {object} intersection - Attributes of the current intersection event, including\n *         3D- and 2D-space coordinates. See: http://threejs.org/docs/api/core/Raycaster.html\n * @member {Element} intersectedEl - Currently-intersected entity. Used to keep track to\n *         emit events when unintersecting.\n */\nexport var Component = registerComponent('cursor', {\n  dependencies: ['raycaster'],\n\n  schema: {\n    downEvents: {default: []},\n    fuse: {default: utils.device.isMobile()},\n    fuseTimeout: {default: 1500, min: 0},\n    mouseCursorStylesEnabled: {default: true},\n    upEvents: {default: []},\n    rayOrigin: {default: 'entity', oneOf: ['mouse', 'entity', 'xrselect']}\n  },\n\n  after: ['tracked-controls'],\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.fuseTimeout = undefined;\n    this.cursorDownEl = null;\n    this.intersectedEl = null;\n    this.canvasBounds = document.body.getBoundingClientRect();\n    this.isCursorDown = false;\n    this.activeXRInput = null;\n\n    // Debounce.\n    this.updateCanvasBounds = utils.debounce(function updateCanvasBounds () {\n      self.canvasBounds = self.el.sceneEl.canvas.getBoundingClientRect();\n    }, 500);\n\n    this.eventDetail = {};\n    this.intersectedEventDetail = {cursorEl: this.el};\n\n    // Bind methods.\n    this.onCursorDown = this.onCursorDown.bind(this);\n    this.onCursorUp = this.onCursorUp.bind(this);\n    this.onIntersection = this.onIntersection.bind(this);\n    this.onIntersectionCleared = this.onIntersectionCleared.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  update: function (oldData) {\n    var rayOrigin = this.data.rayOrigin;\n    if (rayOrigin === oldData.rayOrigin) { return; }\n    if (rayOrigin === 'entity') { this.resetRaycaster(); }\n    this.updateMouseEventListeners();\n    // Update the WebXR event listeners if needed.\n    // This handles the cases a cursor is created or has its rayOrigin changed during an XR session.\n    // In the case the cursor is created before we have an active XR session, it does not add the WebXR event listeners here (addWebXREventListeners is a no-op without xrSession), upon onEnterVR they are added.\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n    if (oldData.rayOrigin === 'xrselect' || oldData.rayOrigin === 'entity') {\n      this.removeWebXREventListeners();\n    }\n  },\n\n  tick: function () {\n    // Update on frame to allow someone to select and mousemove\n    var frame = this.el.sceneEl.frame;\n    var inputSource = this.activeXRInput;\n    if (this.data.rayOrigin === 'xrselect' && frame && inputSource) {\n      this.onMouseMove({\n        frame: frame,\n        inputSource: inputSource,\n        type: 'fakeselectevent'\n      });\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeState(STATES.HOVERING);\n    el.removeState(STATES.FUSING);\n    clearTimeout(this.fuseTimeout);\n    if (this.intersectedEl) { this.intersectedEl.removeState(STATES.HOVERED); }\n    this.removeEventListeners();\n  },\n\n  addEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    function addCanvasListeners () {\n      canvas = el.sceneEl.canvas;\n      if (data.downEvents.length || data.upEvents.length) { return; }\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.addEventListener(downEvent, self.onCursorDown, {passive: false});\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.addEventListener(upEvent, self.onCursorUp, {passive: false});\n      });\n    }\n\n    canvas = el.sceneEl.canvas;\n    if (canvas) {\n      addCanvasListeners();\n    } else {\n      el.sceneEl.addEventListener('render-target-loaded', addCanvasListeners);\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.addEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.addEventListener(upEvent, self.onCursorUp);\n    });\n    el.addEventListener('raycaster-intersection', this.onIntersection);\n    el.addEventListener('raycaster-closest-entity-changed', this.onIntersection);\n\n    el.addEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n\n    el.sceneEl.addEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    window.addEventListener('resize', this.updateCanvasBounds);\n    window.addEventListener('scroll', this.updateCanvasBounds);\n\n    this.updateMouseEventListeners();\n  },\n\n  removeEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    canvas = el.sceneEl.canvas;\n    if (canvas && !data.downEvents.length && !data.upEvents.length) {\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.removeEventListener(downEvent, self.onCursorDown);\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.removeEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.removeEventListener(upEvent, self.onCursorUp);\n    });\n    el.removeEventListener('raycaster-intersection', this.onIntersection);\n    el.removeEventListener('raycaster-closest-entity-changed', this.onIntersection);\n    el.removeEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchstart', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n\n    el.sceneEl.removeEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    window.removeEventListener('resize', this.updateCanvasBounds);\n    window.removeEventListener('scroll', this.updateCanvasBounds);\n\n    this.removeWebXREventListeners();\n  },\n\n  updateMouseEventListeners: function () {\n    var canvas;\n    var el = this.el;\n\n    canvas = el.sceneEl.canvas;\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n    el.setAttribute('raycaster', 'useWorldCoordinates', false);\n    if (this.data.rayOrigin !== 'mouse') { return; }\n    canvas.addEventListener('mousemove', this.onMouseMove);\n    canvas.addEventListener('touchmove', this.onMouseMove, {passive: false});\n    el.setAttribute('raycaster', 'useWorldCoordinates', true);\n    this.updateCanvasBounds();\n  },\n\n  resetRaycaster: function () {\n    this.el.setAttribute('raycaster', {\n      direction: new THREE.Vector3().set(0, 0, -1),\n      origin: new THREE.Vector3()\n    });\n  },\n\n  addWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.addEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.addEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  removeWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.removeEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  onMouseMove: (function () {\n    var direction = new THREE.Vector3();\n    var mouse = new THREE.Vector2();\n    var origin = new THREE.Vector3();\n    var rayCasterConfig = {origin: origin, direction: direction};\n\n    return function (evt) {\n      var bounds = this.canvasBounds;\n      var camera = this.el.sceneEl.camera;\n      var cameraElParent;\n      var left;\n      var point;\n      var top;\n\n      var frame;\n      var inputSource;\n      var referenceSpace;\n      var pose;\n      var transform;\n\n      camera.parent.updateMatrixWorld();\n\n      // Calculate mouse position based on the canvas element\n      if (evt.type === 'touchmove' || evt.type === 'touchstart') {\n        // Track the first touch for simplicity.\n        point = evt.touches.item(0);\n      } else {\n        point = evt;\n      }\n\n      left = point.clientX - bounds.left;\n      top = point.clientY - bounds.top;\n      mouse.x = (left / bounds.width) * 2 - 1;\n      mouse.y = -(top / bounds.height) * 2 + 1;\n\n      if (this.data.rayOrigin === 'xrselect' && (evt.type === 'selectstart' || evt.type === 'fakeselectevent')) {\n        frame = evt.frame;\n        inputSource = evt.inputSource;\n        referenceSpace = this.el.sceneEl.renderer.xr.getReferenceSpace();\n        pose = frame.getPose(inputSource.targetRaySpace, referenceSpace);\n        if (pose) {\n          transform = pose.transform;\n          direction.set(0, 0, -1);\n          direction.applyQuaternion(transform.orientation);\n          origin.copy(transform.position);\n\n          // Transform XRPose into world space\n          cameraElParent = camera.el.object3D.parent;\n          cameraElParent.localToWorld(origin);\n          direction.transformDirection(cameraElParent.matrixWorld);\n        }\n      } else if (evt.type === 'fakeselectout') {\n        direction.set(0, 1, 0);\n        origin.set(0, 9999, 0);\n      } else if (camera && camera.isPerspectiveCamera) {\n        origin.setFromMatrixPosition(camera.matrixWorld);\n        direction.set(mouse.x, mouse.y, 0.5).unproject(camera).sub(origin).normalize();\n      } else if (camera && camera.isOrthographicCamera) {\n        origin.set(mouse.x, mouse.y, (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera); // set origin in plane of camera\n        direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n      } else {\n        console.error('AFRAME.Raycaster: Unsupported camera type: ' + camera.type);\n      }\n\n      this.el.setAttribute('raycaster', rayCasterConfig);\n      if (evt.type === 'touchmove') { evt.preventDefault(); }\n    };\n  })(),\n\n  /**\n   * Trigger mousedown and keep track of the mousedowned entity.\n   */\n  onCursorDown: function (evt) {\n    this.isCursorDown = true;\n    // Raycast again for touch.\n    if (this.data.rayOrigin === 'mouse' && evt.type === 'touchstart') {\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n      evt.preventDefault();\n    }\n\n    if (this.data.rayOrigin === 'xrselect' && evt.type === 'selectstart') {\n      this.activeXRInput = evt.inputSource;\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n\n      // if something was tapped on don't do ar-hit-test things\n      if (\n        this.el.components.raycaster.intersectedEls.length &&\n        this.el.sceneEl.components['ar-hit-test'] !== undefined &&\n        this.el.sceneEl.getAttribute('ar-hit-test').enabled\n      ) {\n        // Cancel the ar-hit-test behaviours and disable the ar-hit-test\n        this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', false);\n        this.reenableARHitTest = true;\n      }\n    }\n\n    this.twoWayEmit(EVENTS.MOUSEDOWN, evt);\n    this.cursorDownEl = this.intersectedEl;\n  },\n\n  /**\n   * Trigger mouseup if:\n   * - Not fusing (mobile has no mouse).\n   * - Currently intersecting an entity.\n   * - Currently-intersected entity is the same as the one when mousedown was triggered,\n   *   in case user mousedowned one entity, dragged to another, and mouseupped.\n   */\n  onCursorUp: function (evt) {\n    if (!this.isCursorDown) { return; }\n    if (this.data.rayOrigin === 'xrselect' && this.activeXRInput !== evt.inputSource) { return; }\n\n    this.isCursorDown = false;\n\n    var data = this.data;\n    this.twoWayEmit(EVENTS.MOUSEUP, evt);\n\n    if (this.reenableARHitTest === true) {\n      this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', true);\n      this.reenableARHitTest = undefined;\n    }\n\n    // If intersected entity has changed since the cursorDown, still emit mouseUp on the\n    // previously cursorUp entity.\n    if (this.cursorDownEl && this.cursorDownEl !== this.intersectedEl) {\n      this.intersectedEventDetail.intersection = null;\n      this.cursorDownEl.emit(EVENTS.MOUSEUP, this.intersectedEventDetail);\n    }\n\n    if ((!data.fuse || data.rayOrigin === 'mouse' || data.rayOrigin === 'xrselect') &&\n        this.intersectedEl && this.cursorDownEl === this.intersectedEl) {\n      this.twoWayEmit(EVENTS.CLICK, evt);\n    }\n\n    // if the current xr input stops selecting then make the ray caster point somewhere else\n    if (data.rayOrigin === 'xrselect') {\n      this.onMouseMove({\n        type: 'fakeselectout'\n      });\n    }\n\n    this.activeXRInput = null;\n    this.cursorDownEl = null;\n    if (evt.type === 'touchend') { evt.preventDefault(); }\n  },\n\n  /**\n   * Handle intersection.\n   */\n  onIntersection: function (evt) {\n    var currentIntersection;\n    var cursorEl = this.el;\n    var index;\n    var intersectedEl;\n    var intersection;\n\n    // Select closest object, excluding the cursor.\n    index = evt.detail.els[0] === cursorEl ? 1 : 0;\n    intersection = evt.detail.intersections[index];\n    intersectedEl = evt.detail.els[index];\n\n    // If cursor is the only intersected object, ignore the event.\n    if (!intersectedEl) { return; }\n\n    // Already intersecting this entity.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Ignore events further away than active intersection.\n    if (this.intersectedEl) {\n      currentIntersection = this.el.components.raycaster.getIntersection(this.intersectedEl);\n      if (currentIntersection && currentIntersection.distance <= intersection.distance) { return; }\n    }\n\n    // Unset current intersection.\n    this.clearCurrentIntersection(true);\n\n    this.setIntersection(intersectedEl, intersection);\n  },\n\n  /**\n   * Handle intersection cleared.\n   */\n  onIntersectionCleared: function (evt) {\n    var clearedEls = evt.detail.clearedEls;\n    // Check if the current intersection has ended\n    if (clearedEls.indexOf(this.intersectedEl) === -1) { return; }\n    this.clearCurrentIntersection();\n  },\n\n  onEnterVR: function () {\n    var rayOrigin = this.data.rayOrigin;\n    this.clearCurrentIntersection(true);\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n  },\n\n  setIntersection: function (intersectedEl, intersection) {\n    var cursorEl = this.el;\n    var data = this.data;\n    var self = this;\n\n    // Already intersecting.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Set new intersection.\n    this.intersectedEl = intersectedEl;\n\n    // Hovering.\n    cursorEl.addState(STATES.HOVERING);\n    intersectedEl.addState(STATES.HOVERED);\n    this.twoWayEmit(EVENTS.MOUSEENTER);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.add(CANVAS_HOVER_CLASS);\n    }\n\n    // Begin fuse if necessary.\n    if (data.fuseTimeout === 0 || !data.fuse || data.rayOrigin === 'xrselect' || data.rayOrigin === 'mouse') { return; }\n    cursorEl.addState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.FUSING);\n    this.fuseTimeout = setTimeout(function fuse () {\n      cursorEl.removeState(STATES.FUSING);\n      self.twoWayEmit(EVENTS.CLICK);\n    }, data.fuseTimeout);\n  },\n\n  clearCurrentIntersection: function (ignoreRemaining) {\n    var index;\n    var intersection;\n    var intersections;\n    var cursorEl = this.el;\n\n    // Nothing to be cleared.\n    if (!this.intersectedEl) { return; }\n\n    // No longer hovering (or fusing).\n    this.intersectedEl.removeState(STATES.HOVERED);\n    cursorEl.removeState(STATES.HOVERING);\n    cursorEl.removeState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.MOUSELEAVE);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.remove(CANVAS_HOVER_CLASS);\n    }\n\n    // Unset intersected entity (after emitting the event).\n    this.intersectedEl = null;\n\n    // Clear fuseTimeout.\n    clearTimeout(this.fuseTimeout);\n\n    // Set intersection to another raycast element if any.\n    if (ignoreRemaining === true) { return; }\n    intersections = this.el.components.raycaster.intersections;\n    if (intersections.length === 0) { return; }\n    // Exclude the cursor.\n    index = intersections[0].object.el === cursorEl ? 1 : 0;\n    intersection = intersections[index];\n    if (!intersection) { return; }\n    this.setIntersection(intersection.object.el, intersection);\n  },\n\n  /**\n   * Helper to emit on both the cursor and the intersected entity (if exists).\n   */\n  twoWayEmit: function (evtName, originalEvent) {\n    var el = this.el;\n    var intersectedEl = this.intersectedEl;\n    var intersection;\n\n    function addOriginalEvent (detail, evt) {\n      if (originalEvent instanceof MouseEvent) {\n        detail.mouseEvent = originalEvent;\n      } else if (typeof TouchEvent !== 'undefined' &&\n                 originalEvent instanceof TouchEvent) {\n        detail.touchEvent = originalEvent;\n      }\n    }\n\n    intersection = this.el.components.raycaster.getIntersection(intersectedEl);\n    this.eventDetail.intersectedEl = intersectedEl;\n    this.eventDetail.intersection = intersection;\n    addOriginalEvent(this.eventDetail, originalEvent);\n    el.emit(evtName, this.eventDetail);\n\n    if (!intersectedEl) { return; }\n\n    this.intersectedEventDetail.intersection = intersection;\n    addOriginalEvent(this.intersectedEventDetail, originalEvent);\n    intersectedEl.emit(evtName, this.intersectedEventDetail);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { geometries, geometryNames } from '../core/geometry.js';\nimport { registerComponent } from '../core/component.js';\n\nvar dummyGeometry = new THREE.BufferGeometry();\n\n/**\n * Geometry component. Combined with material component to make a mesh in 3D object.\n * Extended with registered geometries.\n */\nexport var Component = registerComponent('geometry', {\n  schema: {\n    buffer: {default: true},\n    primitive: {default: 'box', oneOf: geometryNames, schemaChange: true},\n    skipCache: {default: false}\n  },\n\n  init: function () {\n    this.geometry = null;\n  },\n\n  /**\n   * Talk to geometry system to get or create geometry.\n   */\n  update: function (previousData) {\n    var data = this.data;\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    // Dispose old geometry if we created one.\n    if (this.geometry) {\n      system.unuseGeometry(previousData);\n      this.geometry = null;\n    }\n\n    // Create new geometry.\n    this.geometry = system.getOrCreateGeometry(data);\n\n    // Set on mesh. If mesh does not exist, create it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.geometry = this.geometry;\n    } else {\n      mesh = new THREE.Mesh();\n      mesh.geometry = this.geometry;\n      // Default material if not defined on the entity.\n      if (!this.el.getAttribute('material')) {\n        mesh.material = new THREE.MeshStandardMaterial({\n          color: Math.random() * 0xFFFFFF,\n          metalness: 0,\n          roughness: 0.5\n        });\n      }\n      el.setObject3D('mesh', mesh);\n    }\n  },\n\n  /**\n   * Tell geometry system that entity is no longer using the geometry.\n   * Unset the geometry on the mesh\n   */\n  remove: function () {\n    this.system.unuseGeometry(this.data);\n    this.el.getObject3D('mesh').geometry = dummyGeometry;\n    this.geometry = null;\n  },\n\n  /**\n   * Update geometry component schema based on geometry type.\n   */\n  updateSchema: function (data) {\n    var currentGeometryType = this.oldData && this.oldData.primitive;\n    var newGeometryType = data.primitive;\n    var schema = geometries[newGeometryType] && geometries[newGeometryType].schema;\n\n    // Geometry has no schema.\n    if (!schema) { throw new Error('Unknown geometry schema `' + newGeometryType + '`'); }\n    // Nothing has changed.\n    if (currentGeometryType && currentGeometryType === newGeometryType) { return; }\n\n    this.extendSchema(schema);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar GAMEPAD_ID_PREFIX = 'generic';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - thumbstick\n *\n * Axis:\n * 0 - touchpad\n * 1 - thumbstick\n *\n */\nvar INPUT_MAPPING = {\n  axes: {\n    touchpad: [0, 1],\n    thumbstick: [2, 3]\n  },\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('generic-tracked-controller-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    defaultModel: {default: true},\n    defaultModelColor: {default: 'gray'},\n    disabled: {default: false}\n  },\n\n  after: ['tracked-controls'],\n\n  /**\n   * Button IDs:\n   * 0 - trackpad\n   * 1 - trigger\n   */\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.wasControllerConnected = false;\n    this.bindMethods();\n\n    // generic-tracked-controller-controls has the lowest precedence.\n    // Disable this component if there are more specialized controls components.\n    this.el.addEventListener('controllerconnected', function (evt) {\n      if (evt.detail.name === self.name) { return; }\n      self.wasControllerConnected = true;\n      self.removeEventListeners();\n      self.removeControllersUpdateListener();\n    });\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, GAMEPAD_ID_PREFIX,\n      {hand: hand, iterateControllerProfiles: true});\n  },\n\n  play: function () {\n    if (this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // Do nothing if tracked-controls already set.\n    // Generic controls have the lowest precedence.\n    if (this.el.components['tracked-controls']) {\n      this.removeEventListeners();\n      return;\n    }\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX,\n      iterateControllerProfiles: true\n    });\n    if (!this.data.defaultModel) { return; }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    if (!this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  initDefaultModel: function () {\n    var modelEl = this.modelEl = document.createElement('a-entity');\n    modelEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 0.03\n    });\n    modelEl.setAttribute('material', {color: this.data.color});\n    this.el.appendChild(modelEl);\n    this.el.emit('controllermodelready', {\n      name: 'generic-tracked-controller-controls',\n      model: this.modelEl,\n      rayOrigin: {origin: {x: 0, y: 0, z: -0.01}, direction: {x: 0, y: 0, z: -1}}\n    });\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:gltf-model:warn');\n\n/**\n * glTF model loader.\n */\nexport var Component = registerComponent('gltf-model', {\n  schema: {type: 'model'},\n\n  init: function () {\n    var self = this;\n    var dracoLoader = this.system.getDRACOLoader();\n    var meshoptDecoder = this.system.getMeshoptDecoder();\n    var ktxLoader = this.system.getKTX2Loader();\n    this.model = null;\n    this.loader = new THREE.GLTFLoader();\n    if (dracoLoader) {\n      this.loader.setDRACOLoader(dracoLoader);\n    }\n    if (meshoptDecoder) {\n      this.ready = meshoptDecoder.then(function (meshoptDecoder) {\n        self.loader.setMeshoptDecoder(meshoptDecoder);\n      });\n    } else {\n      this.ready = Promise.resolve();\n    }\n    if (ktxLoader) {\n      this.loader.setKTX2Loader(ktxLoader);\n    }\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.ready.then(function () {\n      self.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene || gltfModel.scenes[0];\n        self.model.animations = gltfModel.animations;\n\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      }, undefined /* onProgress */, function gltfFailed (error) {\n        var message = (error && error.message) ? error.message : 'Failed to load glTF model';\n        warn(message);\n        el.emit('model-error', {format: 'gltf', src: src});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\nregisterComponent('grabbable', {\n  init: function () {\n    this.el.setAttribute('obb-collider', 'centerModel: true');\n  }\n});\n","/* global THREE, XRHand */\nimport { registerComponent } from '../core/component.js';\nimport { AEntity } from '../core/a-entity.js';\nimport { checkControllerPresentAndSetup } from '../utils/tracked-controls.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\nvar LEFT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/left.glb';\nvar RIGHT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/right.glb';\n\nvar JOINTS = [\n  'wrist',\n  'thumb-metacarpal',\n  'thumb-phalanx-proximal',\n  'thumb-phalanx-distal',\n  'thumb-tip',\n  'index-finger-metacarpal',\n  'index-finger-phalanx-proximal',\n  'index-finger-phalanx-intermediate',\n  'index-finger-phalanx-distal',\n  'index-finger-tip',\n  'middle-finger-metacarpal',\n  'middle-finger-phalanx-proximal',\n  'middle-finger-phalanx-intermediate',\n  'middle-finger-phalanx-distal',\n  'middle-finger-tip',\n  'ring-finger-metacarpal',\n  'ring-finger-phalanx-proximal',\n  'ring-finger-phalanx-intermediate',\n  'ring-finger-phalanx-distal',\n  'ring-finger-tip',\n  'pinky-finger-metacarpal',\n  'pinky-finger-phalanx-proximal',\n  'pinky-finger-phalanx-intermediate',\n  'pinky-finger-phalanx-distal',\n  'pinky-finger-tip'\n];\n\nvar WRIST_INDEX = 0;\nvar THUMB_TIP_INDEX = 4;\nvar INDEX_TIP_INDEX = 9;\n\nvar PINCH_START_DISTANCE = 0.015;\nvar PINCH_END_DISTANCE = 0.02;\n\n/**\n * Controls for hand tracking\n */\nexport var Component = registerComponent('hand-tracking-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    modelStyle: {default: 'mesh', oneOf: ['dots', 'mesh']},\n    modelColor: {default: 'white'},\n    modelOpacity: {default: 1.0}\n  },\n\n  after: ['tracked-controls'],\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n  },\n\n  addEventListeners: function () {\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = true;\n    }\n  },\n\n  removeEventListeners: function () {\n    this.el.removeEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = false;\n    }\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('hand-tracking') === -1) {\n      optionalFeaturesArray.push('hand-tracking');\n      sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.wristObject3D = new THREE.Object3D();\n    this.el.sceneEl.object3D.add(this.wristObject3D);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onChildAttached = this.onChildAttached.bind(this);\n    this.jointEls = [];\n    this.controllerPresent = false;\n    this.isPinched = false;\n    this.pinchEventDetail = {\n      position: new THREE.Vector3(),\n      wristRotation: new THREE.Quaternion()\n    };\n    this.indexTipPosition = new THREE.Vector3();\n\n    this.hasPoses = false;\n    this.jointPoses = new Float32Array(16 * JOINTS.length);\n    this.jointRadii = new Float32Array(JOINTS.length);\n\n    this.bindMethods();\n\n    this.updateReferenceSpace = this.updateReferenceSpace.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.updateReferenceSpace);\n    this.el.sceneEl.addEventListener('exit-vr', this.updateReferenceSpace);\n    this.el.addEventListener('child-attached', this.onChildAttached);\n\n    this.wristObject3D.visible = false;\n  },\n\n  onChildAttached: function (evt) {\n    this.addChildEntity(evt.detail.el);\n  },\n\n  update: function () {\n    this.updateModelMaterial();\n  },\n\n  updateModelMaterial: function () {\n    var jointEls = this.jointEls;\n    var skinnedMesh = this.skinnedMesh;\n    var transparent = !(this.data.modelOpacity === 1.0);\n    if (skinnedMesh) {\n      this.skinnedMesh.material.color.set(this.data.modelColor);\n      this.skinnedMesh.material.transparent = transparent;\n      this.skinnedMesh.material.opacity = this.data.modelOpacity;\n    }\n\n    for (var i = 0; i < jointEls.length; i++) {\n      jointEls[i].setAttribute('material', {\n        color: this.data.modelColor,\n        transparent: transparent,\n        opacity: this.data.modelOpacity\n      });\n    }\n  },\n\n  updateReferenceSpace: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    this.referenceSpace = undefined;\n    if (!xrSession) { return; }\n    var referenceSpaceType = self.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(referenceSpaceType).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (error) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(referenceSpaceType, 'tracked-controls-webxr uses reference space ' + referenceSpaceType);\n      throw error;\n    });\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, '',\n      {hand: hand, iterateControllerProfiles: true, handTracking: true});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var frame = sceneEl.frame;\n    var trackedControlsWebXR = this.el.components['tracked-controls'];\n    var referenceSpace = this.referenceSpace;\n    if (!controller || !frame || !referenceSpace || !trackedControlsWebXR) { return; }\n    this.hasPoses = false;\n    if (controller.hand) {\n      this.el.object3D.position.set(0, 0, 0);\n      this.el.object3D.rotation.set(0, 0, 0);\n\n      this.hasPoses = frame.fillPoses(controller.hand.values(), referenceSpace, this.jointPoses) &&\n        frame.fillJointRadii(controller.hand.values(), this.jointRadii);\n\n      this.updateHandModel();\n      this.detectGesture();\n      this.updateWristObject();\n    }\n  },\n\n  updateWristObject: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var wristObject3D = this.wristObject3D;\n      if (!wristObject3D || !this.hasPoses) { return; }\n      jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16);\n      wristObject3D.position.setFromMatrixPosition(jointPose);\n      wristObject3D.quaternion.setFromRotationMatrix(jointPose);\n    };\n  })(),\n\n  updateHandModel: function () {\n    this.wristObject3D.visible = true;\n    this.el.object3D.visible = true;\n\n    if (this.data.modelStyle === 'dots') {\n      this.updateHandDotsModel();\n    }\n\n    if (this.data.modelStyle === 'mesh') {\n      this.updateHandMeshModel();\n    }\n  },\n\n  getBone: function (name) {\n    var bones = this.bones;\n    for (var i = 0; i < bones.length; i++) {\n      if (bones[i].name === name) { return bones[i]; }\n    }\n    return null;\n  },\n\n  updateHandMeshModel: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var i = 0;\n      var jointPoses = this.jointPoses;\n      var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n      if (!controller || !this.mesh) { return; }\n      this.mesh.visible = false;\n      if (!this.hasPoses) { return; }\n      for (var inputjoint of controller.hand.values()) {\n        var bone = this.getBone(inputjoint.jointName);\n        if (bone != null) {\n          this.mesh.visible = true;\n          jointPose.fromArray(jointPoses, i * 16);\n          bone.position.setFromMatrixPosition(jointPose);\n          bone.quaternion.setFromRotationMatrix(jointPose);\n        }\n        i++;\n      }\n    };\n  })(),\n\n  updateHandDotsModel: function () {\n    var jointPoses = this.jointPoses;\n    var jointRadii = this.jointRadii;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var jointEl;\n    var object3D;\n\n    for (var i = 0; i < controller.hand.size; i++) {\n      jointEl = this.jointEls[i];\n      object3D = jointEl.object3D;\n      jointEl.object3D.visible = this.hasPoses;\n      if (!this.hasPoses) { continue; }\n      object3D.matrix.fromArray(jointPoses, i * 16);\n      object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n      jointEl.setAttribute('scale', {x: jointRadii[i], y: jointRadii[i], z: jointRadii[i]});\n    }\n  },\n\n  detectGesture: function () {\n    this.detectPinch();\n  },\n\n  detectPinch: (function () {\n    var thumbTipPosition = new THREE.Vector3();\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var indexTipPosition = this.indexTipPosition;\n      var pinchEventDetail = this.pinchEventDetail;\n      if (!this.hasPoses) { return; }\n\n      thumbTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, THUMB_TIP_INDEX * 16));\n      indexTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, INDEX_TIP_INDEX * 16));\n      pinchEventDetail.wristRotation.setFromRotationMatrix(jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16));\n\n      var distance = indexTipPosition.distanceTo(thumbTipPosition);\n\n      if (distance < PINCH_START_DISTANCE && this.isPinched === false) {\n        this.isPinched = true;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchstarted', pinchEventDetail);\n      }\n\n      if (distance > PINCH_END_DISTANCE && this.isPinched === true) {\n        this.isPinched = false;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchended', pinchEventDetail);\n      }\n\n      if (this.isPinched) {\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchmoved', pinchEventDetail);\n      }\n    };\n  })(),\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      id: '',\n      hand: data.hand,\n      iterateControllerProfiles: true,\n      handTrackingEnabled: true\n    });\n\n    if (this.mesh) {\n      if (this.mesh !== el.getObject3D('mesh')) {\n        el.setObject3D('mesh', this.mesh);\n      }\n      return;\n    }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    var el = this.el;\n    var controller;\n    this.checkIfControllerPresent();\n    controller = el.components['tracked-controls'] && el.components['tracked-controls'].controller;\n    if (!this.mesh) { return; }\n    if (controller && controller.hand && (controller.hand instanceof XRHand)) {\n      el.setObject3D('mesh', this.mesh);\n    }\n  },\n\n  initDefaultModel: function () {\n    var data = this.data;\n    if (data.modelStyle === 'dots') {\n      this.initDotsModel();\n    }\n\n    if (data.modelStyle === 'mesh') {\n      this.initMeshHandModel();\n    }\n\n    this.el.object3D.visible = true;\n    this.wristObject3D.visible = true;\n  },\n\n  initDotsModel: function () {\n     // Add models just once.\n    if (this.jointEls.length !== 0) { return; }\n    for (var i = 0; i < JOINTS.length; ++i) {\n      var jointEl = this.jointEl = document.createElement('a-entity');\n      jointEl.setAttribute('geometry', {\n        primitive: 'sphere',\n        radius: 1.0\n      });\n      jointEl.object3D.visible = false;\n      this.el.appendChild(jointEl);\n      this.jointEls.push(jointEl);\n    }\n    this.updateModelMaterial();\n  },\n\n  initMeshHandModel: function () {\n    var modelURL = this.data.hand === 'left' ? LEFT_HAND_MODEL_URL : RIGHT_HAND_MODEL_URL;\n    this.el.setAttribute('gltf-model', modelURL);\n  },\n\n  onModelLoaded: function () {\n    var mesh = this.mesh = this.el.getObject3D('mesh').children[0];\n    var skinnedMesh = this.skinnedMesh = mesh.getObjectByProperty('type', 'SkinnedMesh');\n    if (!this.skinnedMesh) { return; }\n    this.bones = skinnedMesh.skeleton.bones;\n    this.el.removeObject3D('mesh');\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(0, 0, 0);\n    skinnedMesh.frustumCulled = false;\n    skinnedMesh.material = new THREE.MeshStandardMaterial();\n    this.updateModelMaterial();\n    this.setupChildrenEntities();\n    this.el.setObject3D('mesh', mesh);\n  },\n\n  setupChildrenEntities: function () {\n    var childrenEls = this.el.children;\n    for (var i = 0; i < childrenEls.length; ++i) {\n      if (!(childrenEls[i] instanceof AEntity)) { continue; }\n      this.addChildEntity(childrenEls[i]);\n    }\n  },\n\n  addChildEntity: function (childEl) {\n    if (!(childEl instanceof AEntity)) { return; }\n    this.wristObject3D.add(childEl.object3D);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport THREE from '../lib/three.js';\n\nregisterComponent('hand-tracking-grab-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    color: {type: 'color', default: 'white'},\n    hoverColor: {type: 'color', default: '#538df1'},\n    hoverEnabled: {default: false}\n  },\n\n  init: function () {\n    var el = this.el;\n    var data = this.data;\n    var trackedObject3DVariable;\n\n    if (data.hand === 'right') {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.3';\n    } else {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.21';\n    }\n\n    el.setAttribute('hand-tracking-controls', {hand: data.hand});\n    el.setAttribute('obb-collider', {trackedObject3D: trackedObject3DVariable, size: 0.04});\n\n    this.auxMatrix = new THREE.Matrix4();\n\n    this.onCollisionStarted = this.onCollisionStarted.bind(this);\n    this.el.addEventListener('obbcollisionstarted', this.onCollisionStarted);\n\n    this.onCollisionEnded = this.onCollisionEnded.bind(this);\n    this.el.addEventListener('obbcollisionended', this.onCollisionEnded);\n\n    this.onPinchStarted = this.onPinchStarted.bind(this);\n    this.el.addEventListener('pinchstarted', this.onPinchStarted);\n\n    this.onPinchEnded = this.onPinchEnded.bind(this);\n    this.el.addEventListener('pinchended', this.onPinchEnded);\n  },\n\n  transferEntityOwnership: function () {\n    var grabbingElComponent;\n    var grabbingEls = this.el.sceneEl.querySelectorAll('[hand-tracking-grab-controls]');\n    for (var i = 0; i < grabbingEls.length; ++i) {\n      grabbingElComponent = grabbingEls[i].components['hand-tracking-grab-controls'];\n      if (grabbingElComponent === this) { continue; }\n      if (this.grabbedEl && this.grabbedEl === grabbingElComponent.grabbedEl) {\n        grabbingElComponent.releaseGrabbedEntity();\n      }\n    }\n    return false;\n  },\n\n  onCollisionStarted: function (evt) {\n    var withEl = evt.detail.withEl;\n    if (this.collidedEl) { return; }\n    if (!withEl.getAttribute('grabbable')) { return; }\n    this.collidedEl = withEl;\n    this.grabbingObject3D = evt.detail.trackedObject3D;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.hoverColor);\n    }\n  },\n\n  onCollisionEnded: function () {\n    this.collidedEl = undefined;\n    if (this.grabbedEl) { return; }\n    this.grabbingObject3D = undefined;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.color);\n    }\n  },\n\n  onPinchStarted: function (evt) {\n    if (!this.collidedEl) { return; }\n    this.grabbedEl = this.collidedEl;\n    this.transferEntityOwnership();\n    this.grab();\n  },\n\n  onPinchEnded: function () {\n    this.releaseGrabbedEntity();\n  },\n\n  releaseGrabbedEntity: function () {\n    var grabbedEl = this.grabbedEl;\n    if (!grabbedEl) { return; }\n\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    var newParent = this.originalParent;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabended', {grabbedEl: grabbedEl});\n    this.grabbedEl = undefined;\n    this.originalParent = undefined;\n  },\n\n  grab: function () {\n    var grabbedEl = this.grabbedEl;\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    this.originalParent = parent;\n    var newParent = this.el.components['hand-tracking-controls'].wristObject3D;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabstarted', {grabbedEl: grabbedEl});\n  }\n});\n","/* global THREE */\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\n// Found at https://github.com/aframevr/assets.\nvar MODEL_URLS = {\n  toonLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHand.glb',\n  toonRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHand.glb',\n  lowPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandLow.glb',\n  lowPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandLow.glb',\n  highPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandHigh.glb',\n  highPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandHigh.glb'\n};\n\n// Poses.\nvar ANIMATIONS = {\n  open: 'Open',\n  // point: grip active, trackpad surface active, trigger inactive.\n  point: 'Point',\n  // pointThumb: grip active, trigger inactive, trackpad surface inactive.\n  pointThumb: 'Point + Thumb',\n  // fist: grip active, trigger active, trackpad surface active.\n  fist: 'Fist',\n  // hold: trigger active, grip inactive.\n  hold: 'Hold',\n  // thumbUp: grip active, trigger active, trackpad surface inactive.\n  thumbUp: 'Thumb Up'\n};\n\n// Map animation to public events for the API.\nvar EVENTS = {};\nEVENTS[ANIMATIONS.fist] = 'grip';\nEVENTS[ANIMATIONS.thumbUp] = 'pistol';\nEVENTS[ANIMATIONS.point] = 'pointing';\n\n/**\n * Hand controls component that abstracts 6DoF controls:\n *   meta-touch-controls, vive-controls, windows-motion-controls.\n *\n * Originally meant to be a sample implementation of applications-specific controls that\n * abstracts multiple types of controllers.\n *\n * Auto-detect appropriate controller.\n * Handle common events coming from the detected vendor-specific controls.\n * Translate button events to semantic hand-related event names:\n *   (gripclose, gripopen, thumbup, thumbdown, pointup, pointdown)\n * Load hand model with gestures that are applied based on the button pressed.\n *\n * @property {string} Hand mapping (`left`, `right`).\n */\nexport var Component = registerComponent('hand-controls', {\n  schema: {\n    color: {default: 'white', type: 'color'},\n    hand: { default: 'left' },\n    handModelStyle: {default: 'lowPoly', oneOf: ['lowPoly', 'highPoly', 'toon']}\n  },\n\n  after: ['tracked-controls'],\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    // Active buttons populated by events provided by the attached controls.\n    this.pressedButtons = {};\n    this.touchedButtons = {};\n    this.loader = new THREE.GLTFLoader();\n    this.loader.setCrossOrigin('anonymous');\n\n    this.onGripDown = function () { self.handleButton('grip', 'down'); };\n    this.onGripUp = function () { self.handleButton('grip', 'up'); };\n    this.onTrackpadDown = function () { self.handleButton('trackpad', 'down'); };\n    this.onTrackpadUp = function () { self.handleButton('trackpad', 'up'); };\n    this.onTrackpadTouchStart = function () { self.handleButton('trackpad', 'touchstart'); };\n    this.onTrackpadTouchEnd = function () { self.handleButton('trackpad', 'touchend'); };\n    this.onTriggerDown = function () { self.handleButton('trigger', 'down'); };\n    this.onTriggerUp = function () { self.handleButton('trigger', 'up'); };\n    this.onTriggerTouchStart = function () { self.handleButton('trigger', 'touchstart'); };\n    this.onTriggerTouchEnd = function () { self.handleButton('trigger', 'touchend'); };\n    this.onGripTouchStart = function () { self.handleButton('grip', 'touchstart'); };\n    this.onGripTouchEnd = function () { self.handleButton('grip', 'touchend'); };\n    this.onThumbstickDown = function () { self.handleButton('thumbstick', 'down'); };\n    this.onThumbstickUp = function () { self.handleButton('thumbstick', 'up'); };\n    this.onAorXTouchStart = function () { self.handleButton('AorX', 'touchstart'); };\n    this.onAorXTouchEnd = function () { self.handleButton('AorX', 'touchend'); };\n    this.onBorYTouchStart = function () { self.handleButton('BorY', 'touchstart'); };\n    this.onBorYTouchEnd = function () { self.handleButton('BorY', 'touchend'); };\n    this.onSurfaceTouchStart = function () { self.handleButton('surface', 'touchstart'); };\n    this.onSurfaceTouchEnd = function () { self.handleButton('surface', 'touchend'); };\n    this.onControllerConnected = this.onControllerConnected.bind(this);\n    this.onControllerDisconnected = this.onControllerDisconnected.bind(this);\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n\n    // Hidden by default.\n    el.object3D.visible = false;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var mesh = this.el.getObject3D('mesh');\n\n    if (!mesh || !mesh.mixer) { return; }\n\n    mesh.mixer.update(delta / 1000);\n  },\n\n  onControllerConnected: function (evt) {\n    var el = this.el;\n    var hand = this.data.hand;\n    var mesh = this.el.getObject3D('mesh');\n\n    el.object3D.visible = true;\n\n    var handModelOrientationZ = hand === 'left' ? Math.PI / 2 : -Math.PI / 2;\n    // The WebXR standard defines the grip space such that a cylinder held in a closed hand points\n    // along the Z axis. The models currently have such a cylinder point along the X-Axis.\n    var handModelOrientationX = el.sceneEl.hasWebXR ? -Math.PI / 2 : 0;\n\n    // Pico4, at least on Wolvic, needs a different rotation offset\n    // for the hand model. Pico Browser claims to use oculus\n    // controllers instead; will load meta-touch-controls and does\n    // not require this adjustment.\n    if (evt.detail.name === 'pico-controls') {\n      handModelOrientationX += Math.PI / 4;\n    }\n\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(handModelOrientationX, 0, handModelOrientationZ);\n  },\n\n  onControllerDisconnected: function () {\n    this.el.object3D.visible = false;\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('gripdown', this.onGripDown);\n    el.addEventListener('gripup', this.onGripUp);\n    el.addEventListener('trackpaddown', this.onTrackpadDown);\n    el.addEventListener('trackpadup', this.onTrackpadUp);\n    el.addEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.addEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.addEventListener('triggerdown', this.onTriggerDown);\n    el.addEventListener('triggerup', this.onTriggerUp);\n    el.addEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.addEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.addEventListener('griptouchstart', this.onGripTouchStart);\n    el.addEventListener('griptouchend', this.onGripTouchEnd);\n    el.addEventListener('thumbstickdown', this.onThumbstickDown);\n    el.addEventListener('thumbstickup', this.onThumbstickUp);\n    el.addEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.addEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('gripdown', this.onGripDown);\n    el.removeEventListener('gripup', this.onGripUp);\n    el.removeEventListener('trackpaddown', this.onTrackpadDown);\n    el.removeEventListener('trackpadup', this.onTrackpadUp);\n    el.removeEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.removeEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.removeEventListener('triggerdown', this.onTriggerDown);\n    el.removeEventListener('triggerup', this.onTriggerUp);\n    el.removeEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.removeEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.removeEventListener('griptouchstart', this.onGripTouchStart);\n    el.removeEventListener('griptouchend', this.onGripTouchEnd);\n    el.removeEventListener('thumbstickdown', this.onThumbstickDown);\n    el.removeEventListener('thumbstickup', this.onThumbstickUp);\n    el.removeEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.removeEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  /**\n   * Update handler. More like the `init` handler since the only property is the hand, and\n   * that won't be changing much.\n   */\n  update: function (previousHand) {\n    var controlConfiguration;\n    var el = this.el;\n    var hand = this.data.hand;\n    var handModelStyle = this.data.handModelStyle;\n    var handColor = this.data.color;\n    var self = this;\n\n    // Get common configuration to abstract different vendor controls.\n    controlConfiguration = {\n      hand: hand,\n      model: false\n    };\n\n    // Set model.\n    if (hand !== previousHand) {\n      var handmodelUrl = MODEL_URLS[handModelStyle + hand.charAt(0).toUpperCase() + hand.slice(1)];\n      this.loader.load(handmodelUrl, function (gltf) {\n        var mesh = gltf.scene.children[0];\n        mesh.mixer = new THREE.AnimationMixer(mesh);\n        self.clips = gltf.animations;\n        el.setObject3D('mesh', mesh);\n        mesh.traverse(function (object) {\n          if (!object.isMesh) { return; }\n          object.material.color = new THREE.Color(handColor);\n        });\n        el.setAttribute('magicleap-controls', controlConfiguration);\n        el.setAttribute('vive-controls', controlConfiguration);\n        el.setAttribute('meta-touch-controls', controlConfiguration);\n        el.setAttribute('pico-controls', controlConfiguration);\n        el.setAttribute('windows-motion-controls', controlConfiguration);\n        el.setAttribute('hp-mixed-reality-controls', controlConfiguration);\n      });\n    }\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  /**\n   * Play model animation, based on which button was pressed and which kind of event.\n   *\n   * 1. Process buttons.\n   * 2. Determine gesture (this.determineGesture()).\n   * 3. Animation gesture (this.animationGesture()).\n   * 4. Emit gesture events (this.emitGestureEvents()).\n   *\n   * @param {string} button - Name of the button.\n   * @param {string} evt - Type of event for the button (i.e., down/up/touchstart/touchend).\n   */\n  handleButton: function (button, evt) {\n    var lastGesture;\n    var isPressed = evt === 'down';\n    var isTouched = evt === 'touchstart';\n\n    // Update objects.\n    if (evt.indexOf('touch') === 0) {\n      // Update touch object.\n      if (isTouched === this.touchedButtons[button]) { return; }\n      this.touchedButtons[button] = isTouched;\n    } else {\n      // Update button object.\n      if (isPressed === this.pressedButtons[button]) { return; }\n      this.pressedButtons[button] = isPressed;\n    }\n\n    // Determine the gesture.\n    lastGesture = this.gesture;\n    this.gesture = this.determineGesture();\n\n    // Same gesture.\n    if (this.gesture === lastGesture) { return; }\n    // Animate gesture.\n    this.animateGesture(this.gesture, lastGesture);\n\n    // Emit events.\n    this.emitGestureEvents(this.gesture, lastGesture);\n  },\n\n  /**\n   * Determine which pose hand should be in considering active and touched buttons.\n   */\n  determineGesture: function () {\n    var gesture;\n    var isGripActive = this.pressedButtons.grip;\n    var isSurfaceActive = this.pressedButtons.surface || this.touchedButtons.surface;\n    var isTrackpadActive = this.pressedButtons.trackpad || this.touchedButtons.trackpad;\n    var isTriggerActive = this.pressedButtons.trigger || this.touchedButtons.trigger;\n    var isABXYActive = this.touchedButtons.AorX || this.touchedButtons.BorY;\n    var isVive = isViveController(this.el.components['tracked-controls']);\n\n    // Works well with Oculus Touch and Windows Motion Controls, but Vive needs tweaks.\n    if (isVive) {\n      if (isGripActive || isTriggerActive) {\n        gesture = ANIMATIONS.fist;\n      } else if (isTrackpadActive) {\n        gesture = ANIMATIONS.point;\n      }\n    } else {\n      if (isGripActive) {\n        if (isSurfaceActive || isABXYActive || isTrackpadActive) {\n          gesture = isTriggerActive ? ANIMATIONS.fist : ANIMATIONS.point;\n        } else {\n          gesture = isTriggerActive ? ANIMATIONS.thumbUp : ANIMATIONS.pointThumb;\n        }\n      } else if (isTriggerActive) {\n        gesture = ANIMATIONS.hold;\n      }\n    }\n\n    return gesture;\n  },\n\n  /**\n   * Play corresponding clip to a gesture\n   */\n  getClip: function (gesture) {\n    var clip;\n    var i;\n    for (i = 0; i < this.clips.length; i++) {\n      clip = this.clips[i];\n      if (clip.name !== gesture) { continue; }\n      return clip;\n    }\n  },\n\n  /**\n   * Play gesture animation.\n   *\n   * @param {string} gesture - Which pose to animate to. If absent, then animate to open.\n   * @param {string} lastGesture - Previous gesture, to reverse back to open if needed.\n   */\n  animateGesture: function (gesture, lastGesture) {\n    if (gesture) {\n      this.playAnimation(gesture || ANIMATIONS.open, lastGesture, false);\n      return;\n    }\n\n    // If no gesture, then reverse the current gesture back to open pose.\n    this.playAnimation(lastGesture, lastGesture, true);\n  },\n\n  /**\n   * Emit `hand-controls`-specific events.\n   */\n  emitGestureEvents: function (gesture, lastGesture) {\n    var el = this.el;\n    var eventName;\n\n    if (lastGesture === gesture) { return; }\n\n    // Emit event for lastGesture not inactive.\n    eventName = getGestureEventName(lastGesture, false);\n    if (eventName) { el.emit(eventName); }\n\n    // Emit event for current gesture now active.\n    eventName = getGestureEventName(gesture, true);\n    if (eventName) { el.emit(eventName); }\n  },\n\n  /**\n  * Play hand animation based on button state.\n  *\n  * @param {string} gesture - Name of the animation as specified by the model.\n  * @param {string} lastGesture - Previous pose.\n  * @param {boolean} reverse - Whether animation should play in reverse.\n  */\n  playAnimation: function (gesture, lastGesture, reverse) {\n    var clip;\n    var fromAction;\n    var mesh = this.el.getObject3D('mesh');\n    var toAction;\n\n    if (!mesh) { return; }\n\n    // Grab clip action.\n    clip = this.getClip(gesture);\n    toAction = mesh.mixer.clipAction(clip);\n\n    // Reverse from gesture to no gesture.\n    if (reverse) {\n      toAction.paused = false;\n      toAction.timeScale = -1;\n      return;\n    }\n\n    toAction.clampWhenFinished = true;\n    toAction.loop = THREE.LoopOnce;\n    toAction.repetitions = 0;\n    toAction.timeScale = 1;\n    toAction.time = 0;\n    toAction.weight = 1;\n\n    // No gesture to gesture.\n    if (!lastGesture) {\n      // Play animation.\n      mesh.mixer.stopAllAction();\n      toAction.play();\n      return;\n    }\n\n    // Animate or crossfade from gesture to gesture.\n    clip = this.getClip(lastGesture);\n    toAction.reset();\n    toAction.play();\n    fromAction = mesh.mixer.clipAction(clip);\n    fromAction.crossFadeTo(toAction, 0.15, true);\n  }\n});\n\n/**\n * Suffix gestures based on toggle state (e.g., open/close, up/down, start/end).\n *\n * @param {string} gesture\n * @param {boolean} active\n */\nfunction getGestureEventName (gesture, active) {\n  var eventName;\n\n  if (!gesture) { return; }\n\n  eventName = EVENTS[gesture];\n  if (eventName === 'grip') {\n    return eventName + (active ? 'close' : 'open');\n  }\n  if (eventName === 'point') {\n    return eventName + (active ? 'up' : 'down');\n  }\n  if (eventName === 'pointing' || eventName === 'pistol') {\n    return eventName + (active ? 'start' : 'end');\n  }\n}\n\nfunction isViveController (trackedControls) {\n  var controller = trackedControls && trackedControls.controller;\n  var isVive = controller && (controller.id && controller.id.indexOf('OpenVR ') === 0 ||\n    (controller.profiles &&\n     controller.profiles[0] &&\n     controller.profiles[0] === 'htc-vive'));\n  return isVive;\n}\n","import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-ar', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('ar-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n","import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-vr', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('vr-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport THREE from '../lib/three.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'hp-mixed-reality';\nvar HP_MIXED_REALITY_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/hp/mixed-reality/';\n\nvar HP_MIXED_REALITY_POSITION_OFFSET = {x: 0, y: 0, z: 0.06};\nvar HP_MIXED_REALITY_ROTATION_OFFSET = {_x: Math.PI / 4, _y: 0, _z: 0, _order: 'XYZ'};\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * HP Mixed Reality Controls\n */\nexport var Component = registerComponent('hp-mixed-reality-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', HP_MIXED_REALITY_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n\n    if (!this.data.model) { return; }\n\n    controllerObject3D.position.copy(HP_MIXED_REALITY_POSITION_OFFSET);\n    controllerObject3D.rotation.copy(HP_MIXED_REALITY_ROTATION_OFFSET);\n\n    this.el.emit('controllermodelready', {\n      name: 'hp-mixed-reality-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n","/* global THREE, XRRigidTransform, XRWebGLBinding */\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:layer:warn');\n\nexport var Component = registerComponent('layer', {\n  schema: {\n    type: {default: 'quad', oneOf: ['quad', 'monocubemap', 'stereocubemap']},\n    src: {type: 'map'},\n    rotateCubemap: {default: false},\n    width: {default: 0},\n    height: {default: 0}\n  },\n\n  init: function () {\n    var gl = this.el.sceneEl.renderer.getContext();\n\n    this.quaternion = new THREE.Quaternion();\n    this.position = new THREE.Vector3();\n\n    this.bindMethods();\n    this.needsRedraw = false;\n    this.frameBuffer = gl.createFramebuffer();\n\n    var webxrData = this.el.sceneEl.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    if (requiredFeaturesArray.indexOf('layers') === -1) {\n      requiredFeaturesArray.push('layers');\n      this.el.sceneEl.setAttribute('webxr', webxrData);\n    }\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    this.el.sceneEl.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  bindMethods: function () {\n    this.onRequestedReferenceSpace = this.onRequestedReferenceSpace.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n  },\n\n  update: function (oldData) {\n    if (this.data.src !== oldData.src) { this.updateSrc(); }\n  },\n\n  updateSrc: function () {\n    var type = this.data.type;\n    this.texture = undefined;\n    if (type === 'quad') {\n      this.loadQuadImage();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.loadCubeMapImages();\n      return;\n    }\n  },\n\n  loadCubeMapImages: function () {\n    var glayer;\n    var xrGLFactory = this.xrGLFactory;\n    var frame = this.el.sceneEl.frame;\n    var src = this.data.src;\n    var type = this.data.type;\n\n    this.visibilityChanged = false;\n    if (!this.layer) { return; }\n    if (type !== 'monocubemap' && type !== 'stereocubemap') { return; }\n\n    if (!src.complete) {\n      this.pendingCubeMapUpdate = true;\n    } else {\n      this.pendingCubeMapUpdate = false;\n    }\n\n    if (!this.loadingScreen) {\n      this.loadingScreen = true;\n    } else {\n      this.loadingScreen = false;\n    }\n\n    if (type === 'monocubemap') {\n      glayer = xrGLFactory.getSubImage(this.layer, frame);\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n    } else {\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'left');\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'right');\n      this.loadCubeMapImage(glayer.colorTexture, src, 6);\n    }\n  },\n\n  loadQuadImage: function () {\n    var src = this.data.src;\n    var self = this;\n    this.el.sceneEl.systems.material.loadTexture(src, {src: src}, function textureLoaded (texture) {\n      self.el.sceneEl.renderer.initTexture(texture);\n      self.texture = texture;\n      if (src.tagName === 'VIDEO') { setTimeout(function () { self.textureIsVideo = true; }, 1000); }\n      if (self.layer) {\n        self.layer.height = self.data.height / 2 || self.texture.image.height / 1000;\n        self.layer.width = self.data.width / 2 || self.texture.image.width / 1000;\n        self.needsRedraw = true;\n      }\n      self.updateQuadPanel();\n    });\n  },\n\n  preGenerateCubeMapTextures: function (src, callback) {\n    if (this.data.type === 'monocubemap') {\n      this.generateCubeMapTextures(src, 0, callback);\n    } else {\n      this.generateCubeMapTextures(src, 0, callback);\n      this.generateCubeMapTextures(src, 6, callback);\n    }\n  },\n\n  generateCubeMapTextures: function (src, faceOffset, callback) {\n    var data = this.data;\n    var cubeFaceSize = this.cubeFaceSize;\n    var textureSourceCubeFaceSize = Math.min(src.width, src.height);\n    var cubefaceTextures = [];\n    var imgTmp0;\n    var imgTmp2;\n\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n\n      if (data.rotateCubemap) {\n        if (i === 2 || i === 3) {\n          tempCanvasContext.save();\n          tempCanvasContext.translate(cubeFaceSize, cubeFaceSize);\n          tempCanvasContext.rotate(Math.PI);\n        }\n      }\n\n      // Note that this call to drawImage will not only copy the bytes to the\n      // canvas but also could resized the image if our cube face size is\n      // smaller than the source image due to GL max texture size.\n      tempCanvasContext.drawImage(\n        src,\n        (i + faceOffset) * textureSourceCubeFaceSize, // top left x coord in source\n        0, // top left y coord in source\n        textureSourceCubeFaceSize, // x pixel count from source\n        textureSourceCubeFaceSize, // y pixel count from source\n        0, // dest x offset in the canvas\n        0, // dest y offset in the canvas\n        cubeFaceSize, // x pixel count in dest\n        cubeFaceSize  // y pixel count in dest\n      );\n\n      tempCanvasContext.restore();\n\n      if (callback) { callback(); }\n      cubefaceTextures.push(tempCanvas);\n    }\n\n    if (data.rotateCubemap) {\n      imgTmp0 = cubefaceTextures[0];\n      imgTmp2 = cubefaceTextures[1];\n\n      cubefaceTextures[0] = imgTmp2;\n      cubefaceTextures[1] = imgTmp0;\n\n      imgTmp0 = cubefaceTextures[4];\n      imgTmp2 = cubefaceTextures[5];\n\n      cubefaceTextures[4] = imgTmp2;\n      cubefaceTextures[5] = imgTmp0;\n    }\n\n    if (callback) { callback(); }\n    return cubefaceTextures;\n  },\n\n  loadCubeMapImage: function (layerColorTexture, src, faceOffset) {\n    var gl = this.el.sceneEl.renderer.getContext();\n    var cubefaceTextures;\n\n    // don't flip the pixels as we load them into the texture buffer.\n    // TEXTURE_CUBE_MAP expects the Y to be flipped for the faces and it already\n    // is flipped in our texture image.\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, layerColorTexture);\n\n    if (!src.complete || this.loadingScreen) {\n      cubefaceTextures = this.loadingScreenImages;\n    } else {\n      cubefaceTextures = this.generateCubeMapTextures(src, faceOffset);\n    }\n\n    var errorCode = 0;\n    cubefaceTextures.forEach(function (canvas, i) {\n      gl.texSubImage2D(\n        gl.TEXTURE_CUBE_MAP_POSITIVE_X + i,\n        0,\n        0, 0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        canvas\n      );\n      errorCode = gl.getError();\n    });\n\n    if (errorCode !== 0) {\n      console.log('renderingError, WebGL Error Code: ' + errorCode);\n    }\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n  },\n\n  tick: function () {\n    if (!this.el.sceneEl.xrSession) { return; }\n    if (!this.referenceSpace) { return; }\n    if (!this.layer && (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode'))) { this.initLayer(); }\n    this.updateTransform();\n    if (this.data.src.complete && (this.pendingCubeMapUpdate || this.loadingScreen || this.visibilityChanged)) { this.loadCubeMapImages(); }\n    if (!this.needsRedraw && !this.layer.needsRedraw && !this.textureIsVideo) { return; }\n    if (this.data.type === 'quad') { this.draw(); }\n    this.needsRedraw = false;\n  },\n\n  initLayer: function () {\n    var self = this;\n    var type = this.data.type;\n\n    this.el.sceneEl.xrSession.onvisibilitychange = function (evt) {\n      self.visibilityChanged = evt.session.visibilityState !== 'hidden';\n    };\n\n    if (type === 'quad') {\n      this.initQuadLayer();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.initCubeMapLayer();\n      return;\n    }\n  },\n\n  initQuadLayer: function () {\n    var sceneEl = this.el.sceneEl;\n    var gl = sceneEl.renderer.getContext();\n    var xrGLFactory = this.xrGLFactory = new XRWebGLBinding(sceneEl.xrSession, gl);\n    if (!this.texture) { return; }\n    this.layer = xrGLFactory.createQuadLayer({\n      space: this.referenceSpace,\n      viewPixelHeight: 2048,\n      viewPixelWidth: 2048,\n      height: this.data.height / 2 || this.texture.image.height / 1000,\n      width: this.data.width / 2 || this.texture.image.width / 1000\n    });\n    this.initLoadingScreenImages();\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initCubeMapLayer: function () {\n    var src = this.data.src;\n    var sceneEl = this.el.sceneEl;\n    var gl = sceneEl.renderer.getContext();\n    var glSizeLimit = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    var cubeFaceSize = this.cubeFaceSize = Math.min(glSizeLimit, Math.min(src.width, src.height));\n    var xrGLFactory = this.xrGLFactory = new XRWebGLBinding(sceneEl.xrSession, gl);\n    this.layer = xrGLFactory.createCubeLayer({\n      space: this.referenceSpace,\n      viewPixelWidth: cubeFaceSize,\n      viewPixelHeight: cubeFaceSize,\n      layout: this.data.type === 'monocubemap' ? 'mono' : 'stereo',\n      isStatic: false\n    });\n\n    this.initLoadingScreenImages();\n    this.loadCubeMapImages();\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initLoadingScreenImages: function () {\n    var cubeFaceSize = this.cubeFaceSize;\n    var loadingScreenImages = this.loadingScreenImages = [];\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      tempCanvasContext.fillStyle = 'black';\n      tempCanvasContext.fillRect(0, 0, cubeFaceSize, cubeFaceSize);\n      if (i !== 2 && i !== 3) {\n        tempCanvasContext.translate(cubeFaceSize, 0);\n        tempCanvasContext.scale(-1, 1);\n        tempCanvasContext.fillStyle = 'white';\n        tempCanvasContext.font = '30px Arial';\n        tempCanvasContext.fillText('Loading', cubeFaceSize / 2, cubeFaceSize / 2);\n      }\n      loadingScreenImages.push(tempCanvas);\n    }\n  },\n\n  destroyLayer: function () {\n    if (!this.layer) { return; }\n    this.el.sceneEl.renderer.xr.removeLayer(this.layer);\n    this.layer.destroy();\n    this.layer = undefined;\n  },\n\n  toggleCompositorLayer: function () {\n    this.enableCompositorLayer(!this.layerEnabled);\n  },\n\n  enableCompositorLayer: function (enable) {\n    this.layerEnabled = enable;\n    this.quadPanelEl.object3D.visible = !this.layerEnabled;\n  },\n\n  updateQuadPanel: function () {\n    var quadPanelEl = this.quadPanelEl;\n    if (!this.quadPanelEl) {\n      quadPanelEl = this.quadPanelEl = document.createElement('a-entity');\n      this.el.appendChild(quadPanelEl);\n    }\n\n    quadPanelEl.setAttribute('material', {\n      shader: 'flat',\n      src: this.data.src,\n      transparent: true\n    });\n\n    quadPanelEl.setAttribute('geometry', {\n      primitive: 'plane',\n      height: this.data.height || this.texture.image.height / 1000,\n      width: this.data.width || this.texture.image.height / 1000\n    });\n  },\n\n  draw: function () {\n    var sceneEl = this.el.sceneEl;\n    var gl = this.el.sceneEl.renderer.getContext();\n    var glayer = this.xrGLFactory.getSubImage(this.layer, sceneEl.frame);\n    var texture = sceneEl.renderer.properties.get(this.texture).__webglTexture;\n    var previousFrameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n    gl.viewport(glayer.viewport.x, glayer.viewport.y, glayer.viewport.width, glayer.viewport.height);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, glayer.colorTexture, 0);\n\n    blitTexture(gl, texture, glayer, this.data.src);\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, previousFrameBuffer);\n  },\n\n  updateTransform: function () {\n    var el = this.el;\n    var position = this.position;\n    var quaternion = this.quaternion;\n    el.object3D.updateMatrixWorld();\n    position.setFromMatrixPosition(el.object3D.matrixWorld);\n    quaternion.setFromRotationMatrix(el.object3D.matrixWorld);\n    if (!this.layerEnabled) { position.set(0, 0, 100000000); }\n    this.layer.transform = new XRRigidTransform(position, quaternion);\n  },\n\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrSession = sceneEl.xrSession;\n    if (!sceneEl.hasWebXR || !XRWebGLBinding || !xrSession) {\n      warn('The layer component requires WebXR and the layers API enabled');\n      return;\n    }\n    xrSession.requestReferenceSpace('local-floor').then(this.onRequestedReferenceSpace);\n    this.layerEnabled = true;\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = false;\n    }\n    if (this.data.src.play) { this.data.src.play(); }\n  },\n\n  onExitVR: function () {\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = true;\n    }\n    this.destroyLayer();\n  },\n\n  onRequestedReferenceSpace: function (referenceSpace) {\n    this.referenceSpace = referenceSpace;\n  }\n});\n\nfunction blitTexture (gl, texture, subImage, textureEl) {\n  var xrReadFramebuffer = gl.createFramebuffer();\n  var x1offset = subImage.viewport.x;\n  var y1offset = subImage.viewport.y;\n  var x2offset = subImage.viewport.x + subImage.viewport.width;\n  var y2offset = subImage.viewport.y + subImage.viewport.height;\n\n  // Update video texture.\n  if (textureEl.tagName === 'VIDEO') {\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, textureEl.width, textureEl.height, gl.RGB, gl.UNSIGNED_BYTE, textureEl);\n  }\n\n  // Bind texture to read framebuffer.\n  gl.bindFramebuffer(gl.READ_FRAMEBUFFER, xrReadFramebuffer);\n  gl.framebufferTexture2D(gl.READ_FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n  // Blit into layer buffer.\n  gl.readBuffer(gl.COLOR_ATTACHMENT0);\n  gl.blitFramebuffer(0, 0, textureEl.width, textureEl.height, x1offset, y1offset, x2offset, y2offset, gl.COLOR_BUFFER_BIT, gl.NEAREST);\n\n  gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);\n  gl.deleteFramebuffer(xrReadFramebuffer);\n}\n","/**\n * Find the distance from a plane defined by a point on the plane and the normal of the plane to any point.\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @returns Number\n */\n export function distanceOfPointFromPlane (positionOnPlane, planeNormal, pointToTest) {\n  // the d value in the plane equation a*x + b*y + c*z=d\n   var d = planeNormal.dot(positionOnPlane);\n\n  // distance of point from plane\n   return (d - planeNormal.dot(pointToTest)) / planeNormal.length();\n }\n\n/**\n * Find the point on a plane that lies closest to\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @param {THREE.Vector3} resultPoint where to store the result.\n * @returns\n */\n export function nearestPointInPlane (positionOnPlane, planeNormal, pointToTest, resultPoint) {\n   var t = distanceOfPointFromPlane(positionOnPlane, planeNormal, pointToTest);\n  // closest point on the plane\n   resultPoint.copy(planeNormal);\n   resultPoint.multiplyScalar(t);\n   resultPoint.add(pointToTest);\n   return resultPoint;\n }\n","import { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nregisterComponent('laser-controls', {\n  schema: {\n    hand: {default: 'right'},\n    model: {default: true},\n    defaultModelColor: {type: 'color', default: 'grey'}\n  },\n\n  init: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n    var controlsConfiguration = {hand: data.hand, model: data.model};\n\n    // Set all controller models.\n    el.setAttribute('hp-mixed-reality-controls', controlsConfiguration);\n    el.setAttribute('magicleap-controls', controlsConfiguration);\n    el.setAttribute('oculus-go-controls', controlsConfiguration);\n    el.setAttribute('meta-touch-controls', controlsConfiguration);\n    el.setAttribute('pico-controls', controlsConfiguration);\n    el.setAttribute('valve-index-controls', controlsConfiguration);\n    el.setAttribute('vive-controls', controlsConfiguration);\n    el.setAttribute('vive-focus-controls', controlsConfiguration);\n    el.setAttribute('windows-motion-controls', controlsConfiguration);\n    el.setAttribute('generic-tracked-controller-controls', {hand: controlsConfiguration.hand});\n\n    // Wait for controller to connect, or have a valid pointing pose, before creating ray\n    el.addEventListener('controllerconnected', createRay);\n    el.addEventListener('controllerdisconnected', hideRay);\n    el.addEventListener('controllermodelready', function (evt) {\n      createRay(evt);\n      self.modelReady = true;\n    });\n\n    function createRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n\n      if (!controllerConfig) { return; }\n\n      // Show the line unless a particular config opts to hide it, until a controllermodelready\n      // event comes through.\n      var raycasterConfig = utils.extend({\n        showLine: true\n      }, controllerConfig.raycaster || {});\n\n      // The controllermodelready event contains a rayOrigin that takes into account\n      // offsets specific to the loaded model.\n      if (evt.detail.rayOrigin) {\n        raycasterConfig.origin = evt.detail.rayOrigin.origin;\n        raycasterConfig.direction = evt.detail.rayOrigin.direction;\n        raycasterConfig.showLine = true;\n      }\n\n      // Only apply a default raycaster if it does not yet exist. This prevents it overwriting\n      // config applied from a controllermodelready event.\n      if (evt.detail.rayOrigin || !self.modelReady) {\n        el.setAttribute('raycaster', raycasterConfig);\n      } else {\n        el.setAttribute('raycaster', 'showLine', true);\n      }\n\n      el.setAttribute('cursor', utils.extend({\n        fuse: false\n      }, controllerConfig.cursor));\n    }\n\n    function hideRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n      if (!controllerConfig) { return; }\n      el.setAttribute('raycaster', 'showLine', false);\n    }\n  },\n\n  config: {\n    'generic-tracked-controller-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'hp-mixed-reality-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'magicleap-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'oculus-go-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0.0005, z: 0}}\n    },\n\n    'meta-touch-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'pico-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'valve-index-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-focus-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'windows-motion-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {showLine: false}\n    }\n  }\n});\n","import THREE from '../lib/three.js';\nimport { diff, debug, srcLoader } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport * as mathUtils from '../utils/math.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\nvar warn = debug('components:light:warn');\nvar CubeLoader = new THREE.CubeTextureLoader();\n\nvar probeCache = {};\n\n/**\n * Light component.\n */\nexport var Component = registerComponent('light', {\n  schema: {\n    angle: {default: 60, if: {type: ['spot']}},\n    color: {type: 'color', if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot']}},\n    envMap: {default: '', if: {type: ['probe']}},\n    groundColor: {type: 'color', if: {type: ['hemisphere']}},\n    decay: {default: 1, if: {type: ['point', 'spot']}},\n    distance: {default: 0.0, min: 0, if: {type: ['point', 'spot']}},\n    intensity: {default: 3.14, min: 0, if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe']}},\n    penumbra: {default: 0, min: 0, max: 1, if: {type: ['spot']}},\n    type: {\n      default: 'directional',\n      oneOf: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe'],\n      schemaChange: true\n    },\n    target: {type: 'selector', if: {type: ['spot', 'directional']}},\n\n    // Shadows.\n    castShadow: {default: false, if: {type: ['point', 'spot', 'directional']}},\n    shadowBias: {default: 0, if: {castShadow: true}},\n    shadowCameraFar: {default: 500, if: {castShadow: true}},\n    shadowCameraFov: {default: 90, if: {castShadow: true}},\n    shadowCameraNear: {default: 0.5, if: {castShadow: true}},\n    shadowCameraTop: {default: 5, if: {castShadow: true}},\n    shadowCameraRight: {default: 5, if: {castShadow: true}},\n    shadowCameraBottom: {default: -5, if: {castShadow: true}},\n    shadowCameraLeft: {default: -5, if: {castShadow: true}},\n    shadowCameraVisible: {default: false, if: {castShadow: true}},\n    shadowCameraAutomatic: {default: '', if: {type: ['directional']}},\n    shadowMapHeight: {default: 512, if: {castShadow: true}},\n    shadowMapWidth: {default: 512, if: {castShadow: true}},\n    shadowRadius: {default: 1, if: {castShadow: true}}\n  },\n\n  /**\n   * Notifies scene a light has been added to remove default lighting.\n   */\n  init: function () {\n    var el = this.el;\n    this.light = null;\n    this.defaultTarget = null;\n    this.system.registerLight(el);\n  },\n\n  /**\n   * (Re)create or update light.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var diffData = diff(data, oldData);\n    var light = this.light;\n    var self = this;\n\n    // Existing light.\n    if (light && !('type' in diffData)) {\n      var shadowsLoaded = false;\n      // Light type has not changed. Update light.\n      Object.keys(diffData).forEach(function (key) {\n        var value = data[key];\n\n        switch (key) {\n          case 'color': {\n            light.color.set(value);\n            break;\n          }\n\n          case 'groundColor': {\n            light.groundColor.set(value);\n            break;\n          }\n\n          case 'angle': {\n            light.angle = degToRad(value);\n            break;\n          }\n\n          case 'target': {\n            // Reset target if selector is null.\n            if (value === null) {\n              if (data.type === 'spot' || data.type === 'directional') {\n                light.target = self.defaultTarget;\n              }\n            } else {\n              // Target specified, set target to entity's `object3D` when it is loaded.\n              if (value.hasLoaded) {\n                self.onSetTarget(value, light);\n              } else {\n                value.addEventListener('loaded', self.onSetTarget.bind(self, value, light));\n              }\n            }\n            break;\n          }\n\n          case 'envMap':\n            self.updateProbeMap(data, light);\n            break;\n\n          case 'castShadow':\n          case 'shadowBias':\n          case 'shadowCameraFar':\n          case 'shadowCameraFov':\n          case 'shadowCameraNear':\n          case 'shadowCameraTop':\n          case 'shadowCameraRight':\n          case 'shadowCameraBottom':\n          case 'shadowCameraLeft':\n          case 'shadowCameraVisible':\n          case 'shadowMapHeight':\n          case 'shadowMapWidth':\n          case 'shadowRadius':\n            if (!shadowsLoaded) {\n              self.updateShadow();\n              shadowsLoaded = true;\n            }\n            break;\n\n          case 'shadowCameraAutomatic':\n            if (data.shadowCameraAutomatic) {\n              self.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n            } else {\n              self.shadowCameraAutomaticEls = [];\n            }\n            break;\n\n          default: {\n            light[key] = value;\n          }\n        }\n      });\n      return;\n    }\n\n    // No light yet or light type has changed. Create and add light.\n    this.setLight(this.data);\n    this.updateShadow();\n  },\n\n  tick: (function () {\n    var bbox = new THREE.Box3();\n    var normal = new THREE.Vector3();\n    var cameraWorldPosition = new THREE.Vector3();\n    var tempMat = new THREE.Matrix4();\n    var sphere = new THREE.Sphere();\n    var tempVector = new THREE.Vector3();\n\n    return function () {\n      if (!(\n        this.data.type === 'directional' &&\n        this.light.shadow &&\n        this.light.shadow.camera instanceof THREE.OrthographicCamera &&\n        this.shadowCameraAutomaticEls.length\n      )) return;\n\n      var camera = this.light.shadow.camera;\n      camera.getWorldDirection(normal);\n      camera.getWorldPosition(cameraWorldPosition);\n      tempMat.copy(camera.matrixWorld);\n      tempMat.invert();\n\n      camera.near = 1;\n      camera.left = 100000;\n      camera.right = -100000;\n      camera.top = -100000;\n      camera.bottom = 100000;\n      this.shadowCameraAutomaticEls.forEach(function (el) {\n        bbox.setFromObject(el.object3D);\n        bbox.getBoundingSphere(sphere);\n        var distanceToPlane = mathUtils.distanceOfPointFromPlane(cameraWorldPosition, normal, sphere.center);\n        var pointOnCameraPlane = mathUtils.nearestPointInPlane(cameraWorldPosition, normal, sphere.center, tempVector);\n\n        var pointInXYPlane = pointOnCameraPlane.applyMatrix4(tempMat);\n        camera.near = Math.min(-distanceToPlane - sphere.radius - 1, camera.near);\n        camera.left = Math.min(-sphere.radius + pointInXYPlane.x, camera.left);\n        camera.right = Math.max(sphere.radius + pointInXYPlane.x, camera.right);\n        camera.top = Math.max(sphere.radius + pointInXYPlane.y, camera.top);\n        camera.bottom = Math.min(-sphere.radius + pointInXYPlane.y, camera.bottom);\n      });\n      camera.updateProjectionMatrix();\n    };\n  }()),\n\n  setLight: function (data) {\n    var el = this.el;\n    var newLight = this.getLight(data);\n    if (newLight) {\n      if (this.light) {\n        el.removeObject3D('light');\n      }\n\n      this.light = newLight;\n      this.light.el = el;\n      el.setObject3D('light', this.light);\n\n      // HACK solution for issue #1624\n      if (data.type === 'spot' || data.type === 'directional' || data.type === 'hemisphere') {\n        el.getObject3D('light').translateY(-1);\n      }\n\n      // set and position default lighttarget as a child to enable spotlight orientation\n      if (data.type === 'spot') {\n        el.setObject3D('light-target', this.defaultTarget);\n        el.getObject3D('light-target').position.set(0, 0, -1);\n      }\n\n      if (data.shadowCameraAutomatic) {\n        this.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n      } else {\n        this.shadowCameraAutomaticEls = [];\n      }\n    }\n  },\n\n  /**\n   * Updates shadow-related properties on the current light.\n   */\n  updateShadow: function () {\n    var el = this.el;\n    var data = this.data;\n    var light = this.light;\n\n    light.castShadow = data.castShadow;\n\n    // Shadow camera helper.\n    var cameraHelper = el.getObject3D('cameraHelper');\n    if (data.shadowCameraVisible && !cameraHelper) {\n      cameraHelper = new THREE.CameraHelper(light.shadow.camera);\n      el.setObject3D('cameraHelper', cameraHelper);\n    } else if (!data.shadowCameraVisible && cameraHelper) {\n      el.removeObject3D('cameraHelper');\n    }\n\n    if (!data.castShadow) { return light; }\n\n    // Shadow appearance.\n    light.shadow.bias = data.shadowBias;\n    light.shadow.radius = data.shadowRadius;\n    light.shadow.mapSize.height = data.shadowMapHeight;\n    light.shadow.mapSize.width = data.shadowMapWidth;\n\n    // Shadow camera.\n    light.shadow.camera.near = data.shadowCameraNear;\n    light.shadow.camera.far = data.shadowCameraFar;\n    if (light.shadow.camera instanceof THREE.OrthographicCamera) {\n      light.shadow.camera.top = data.shadowCameraTop;\n      light.shadow.camera.right = data.shadowCameraRight;\n      light.shadow.camera.bottom = data.shadowCameraBottom;\n      light.shadow.camera.left = data.shadowCameraLeft;\n    } else {\n      light.shadow.camera.fov = data.shadowCameraFov;\n    }\n    light.shadow.camera.updateProjectionMatrix();\n\n    if (cameraHelper) { cameraHelper.update(); }\n  },\n\n  /**\n   * Creates a new three.js light object given data object defining the light.\n   *\n   * @param {object} data\n   */\n  getLight: function (data) {\n    var angle = data.angle;\n    var color = new THREE.Color(data.color);\n    color = color.getHex();\n    var decay = data.decay;\n    var distance = data.distance;\n    var groundColor = new THREE.Color(data.groundColor);\n    groundColor = groundColor.getHex();\n    var intensity = data.intensity;\n    var type = data.type;\n    var target = data.target;\n    var light = null;\n\n    switch (type.toLowerCase()) {\n      case 'ambient': {\n        return new THREE.AmbientLight(color, intensity);\n      }\n\n      case 'directional': {\n        light = new THREE.DirectionalLight(color, intensity);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'hemisphere': {\n        return new THREE.HemisphereLight(color, groundColor, intensity);\n      }\n\n      case 'point': {\n        return new THREE.PointLight(color, intensity, distance, decay);\n      }\n\n      case 'spot': {\n        light = new THREE.SpotLight(color, intensity, distance, degToRad(angle), data.penumbra, decay);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'probe': {\n        light = new THREE.LightProbe();\n        this.updateProbeMap(data, light);\n        return light;\n      }\n\n      default: {\n        warn('%s is not a valid light type. ' +\n           'Choose from ambient, directional, hemisphere, point, spot.', type);\n      }\n    }\n  },\n\n  /**\n   * Generate the spherical harmonics for the LightProbe from a cube map\n   */\n  updateProbeMap: function (data, light) {\n    if (!data.envMap) {\n      // reset parameters if no map\n      light.copy(new THREE.LightProbe());\n      return;\n    }\n\n    // Populate the cache if not done for this envMap yet\n    if (probeCache[data.envMap] === undefined) {\n      probeCache[data.envMap] = new window.Promise(function (resolve) {\n        srcLoader.validateCubemapSrc(data.envMap, function loadEnvMap (urls) {\n          CubeLoader.load(urls, function (cube) {\n            var tempLightProbe = THREE.LightProbeGenerator.fromCubeTexture(cube);\n            probeCache[data.envMap] = tempLightProbe;\n            resolve(tempLightProbe);\n          });\n        });\n      });\n    }\n\n    // Copy over light probe properties\n    if (probeCache[data.envMap] instanceof window.Promise) {\n      probeCache[data.envMap].then(function (tempLightProbe) {\n        light.copy(tempLightProbe);\n      });\n    } else if (probeCache[data.envMap] instanceof THREE.LightProbe) {\n      light.copy(probeCache[data.envMap]);\n    }\n  },\n\n  onSetTarget: function (targetEl, light) {\n    light.target = targetEl.object3D;\n  },\n\n  /**\n   * Remove light on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    el.removeObject3D('light');\n    if (el.getObject3D('cameraHelper')) {\n      el.removeObject3D('cameraHelper');\n    }\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport { registerShader } from '../core/shader.js';\nvar DEFAULT_PREVIEW_DISTANCE = 15.0;\n\n/**\n * Link component. Connect experiences and traverse between them in VR\n *\n * @member {object} hiddenEls - Store the hidden elements during peek mode.\n */\nexport var Component = registerComponent('link', {\n  schema: {\n    backgroundColor: {default: 'red', type: 'color'},\n    borderColor: {default: 'white', type: 'color'},\n    highlighted: {default: false},\n    highlightedColor: {default: '#24CAFF', type: 'color'},\n    href: {default: ''},\n    image: {type: 'asset'},\n    on: {default: 'click'},\n    peekMode: {default: false},\n    title: {default: ''},\n    titleColor: {default: 'white', type: 'color'},\n    visualAspectEnabled: {default: false}\n  },\n\n  init: function () {\n    this.navigate = this.navigate.bind(this);\n    this.previousQuaternion = undefined;\n    this.quaternionClone = new THREE.Quaternion();\n    // Store hidden elements during peek mode so we can show them again later.\n    this.hiddenEls = [];\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var backgroundColor;\n    var strokeColor;\n\n    if (!data.visualAspectEnabled) { return; }\n\n    var elScale = this.el.getAttribute('scale');\n    this.previewDistance = DEFAULT_PREVIEW_DISTANCE * (elScale.x + elScale.y) / 2;\n\n    this.initVisualAspect();\n\n    backgroundColor = data.highlighted ? data.highlightedColor : data.backgroundColor;\n    strokeColor = data.highlighted ? data.highlightedColor : data.borderColor;\n    el.setAttribute('material', 'backgroundColor', backgroundColor);\n    el.setAttribute('material', 'strokeColor', strokeColor);\n\n    if (data.on !== oldData.on) { this.updateEventListener(); }\n\n    if (oldData.peekMode !== undefined &&\n        data.peekMode !== oldData.peekMode) { this.updatePeekMode(); }\n\n    if (!data.image || oldData.image === data.image) { return; }\n\n    el.setAttribute('material', 'pano',\n                    typeof data.image === 'string' ? data.image : data.image.src);\n  },\n\n  /*\n   * Toggle all elements and full 360 preview of the linked page.\n   */\n  updatePeekMode: function () {\n    var el = this.el;\n    var sphereEl = this.sphereEl;\n    if (this.data.peekMode) {\n      this.hideAll();\n      el.getObject3D('mesh').visible = false;\n      sphereEl.setAttribute('visible', true);\n    } else {\n      this.showAll();\n      el.getObject3D('mesh').visible = true;\n      sphereEl.setAttribute('visible', false);\n    }\n  },\n\n  play: function () {\n    this.updateEventListener();\n  },\n\n  pause: function () {\n    this.removeEventListener();\n  },\n\n  updateEventListener: function () {\n    var el = this.el;\n    if (!el.isPlaying) { return; }\n    this.removeEventListener();\n    el.addEventListener(this.data.on, this.navigate);\n  },\n\n  removeEventListener: function () {\n    var on = this.data.on;\n    if (!on) { return; }\n    this.el.removeEventListener(on, this.navigate);\n  },\n\n  initVisualAspect: function () {\n    var el = this.el;\n    var semiSphereEl;\n    var sphereEl;\n    var textEl;\n\n    if (!this.data.visualAspectEnabled || this.visualAspectInitialized) { return; }\n\n    textEl = this.textEl = this.textEl || document.createElement('a-entity');\n    sphereEl = this.sphereEl = this.sphereEl || document.createElement('a-entity');\n    semiSphereEl = this.semiSphereEl = this.semiSphereEl || document.createElement('a-entity');\n\n    // Set portal.\n    el.setAttribute('geometry', {primitive: 'circle', radius: 1.0, segments: 64});\n    el.setAttribute('material', {shader: 'portal', pano: this.data.image, side: 'double', previewDistance: this.previewDistance});\n\n    // Set text that displays the link title and URL.\n    textEl.setAttribute('text', {\n      color: this.data.titleColor,\n      align: 'center',\n      font: 'kelsonsans',\n      value: this.data.title || this.data.href,\n      width: 4\n    });\n    textEl.setAttribute('position', '0 1.5 0');\n    el.appendChild(textEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    semiSphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 1.0,\n      phiStart: 0,\n      segmentsWidth: 64,\n      segmentsHeight: 64,\n      phiLength: 180,\n      thetaStart: 0,\n      thetaLength: 360\n    });\n    semiSphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    semiSphereEl.setAttribute('rotation', '0 180 0');\n    semiSphereEl.setAttribute('position', '0 0 0');\n    semiSphereEl.setAttribute('visible', false);\n    el.appendChild(semiSphereEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    sphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 10,\n      segmentsWidth: 64,\n      segmentsHeight: 64\n    });\n    sphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    sphereEl.setAttribute('visible', false);\n    el.appendChild(sphereEl);\n\n    this.visualAspectInitialized = true;\n  },\n\n  navigate: function () {\n    window.location = this.data.href;\n  },\n\n  /**\n   * 1. Swap plane that represents portal with sphere with a hole when the camera is close\n   * so user can peek inside portal. Sphere is rendered on opposite side of portal\n   * from where user enters.\n   * 2. Place the url/title above or inside portal depending on distance to camera.\n   * 3. Face portal to camera when far away from user.\n   */\n  tick: (function () {\n    var cameraWorldPosition = new THREE.Vector3();\n    var elWorldPosition = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n    var scale = new THREE.Vector3();\n\n    return function () {\n      var el = this.el;\n      var object3D = el.object3D;\n      var camera = el.sceneEl.camera;\n      var cameraPortalOrientation;\n      var distance;\n      var textEl = this.textEl;\n\n      if (!this.data.visualAspectEnabled) { return; }\n\n      // Update matrices\n      object3D.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n\n      object3D.matrix.decompose(elWorldPosition, quaternion, scale);\n      elWorldPosition.setFromMatrixPosition(object3D.matrixWorld);\n      cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n      distance = elWorldPosition.distanceTo(cameraWorldPosition);\n\n      if (distance > this.previewDistance * 1.33333) {\n        // Store original orientation to be restored when the portal stops facing the camera.\n        if (!this.previousQuaternion) {\n          this.quaternionClone.copy(quaternion);\n          this.previousQuaternion = this.quaternionClone;\n        }\n        // If the portal is far away from the user, face portal to camera.\n        object3D.lookAt(cameraWorldPosition);\n      } else {\n        // When portal is close to the user/camera.\n        cameraPortalOrientation = this.calculateCameraPortalOrientation();\n        // If user gets very close to portal, replace with holed sphere they can peek in.\n        if (distance < 0.5) {\n          // Configure text size and sphere orientation depending side user approaches portal.\n          if (this.semiSphereEl.getAttribute('visible') === true) { return; }\n          textEl.setAttribute('text', 'width', 1.5);\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('position', '0 0 0.75');\n            textEl.setAttribute('rotation', '0 180 0');\n            this.semiSphereEl.setAttribute('rotation', '0 0 0');\n          } else {\n            textEl.setAttribute('position', '0 0 -0.75');\n            textEl.setAttribute('rotation', '0 0 0');\n            this.semiSphereEl.setAttribute('rotation', '0 180 0');\n          }\n          el.getObject3D('mesh').visible = false;\n          this.semiSphereEl.setAttribute('visible', true);\n          this.peekCameraPortalOrientation = cameraPortalOrientation;\n        } else {\n          // Calculate which side the camera is approaching the camera (back / front).\n          // Adjust text orientation based on camera position.\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('rotation', '0 180 0');\n          } else {\n            textEl.setAttribute('rotation', '0 0 0');\n          }\n          textEl.setAttribute('text', 'width', 5);\n          textEl.setAttribute('position', '0 1.5 0');\n          el.getObject3D('mesh').visible = true;\n          this.semiSphereEl.setAttribute('visible', false);\n          this.peekCameraPortalOrientation = undefined;\n        }\n        if (this.previousQuaternion) {\n          object3D.quaternion.copy(this.previousQuaternion);\n          this.previousQuaternion = undefined;\n        }\n      }\n    };\n  })(),\n\n  hideAll: function () {\n    var el = this.el;\n    var hiddenEls = this.hiddenEls;\n    var self = this;\n    if (hiddenEls.length > 0) { return; }\n    el.sceneEl.object3D.traverse(function (object) {\n      if (object && object.el && object.el.hasAttribute('link-controls')) { return; }\n      if (!object.el || object === el.sceneEl.object3D || object.el === el ||\n          object.el === self.sphereEl || object.el === el.sceneEl.cameraEl ||\n          object.el.getAttribute('visible') === false || object.el === self.textEl ||\n          object.el === self.semiSphereEl) {\n        return;\n      }\n      object.el.setAttribute('visible', false);\n      hiddenEls.push(object.el);\n    });\n  },\n\n  showAll: function () {\n    this.hiddenEls.forEach(function (el) { el.setAttribute('visible', true); });\n    this.hiddenEls = [];\n  },\n\n  /**\n   * Calculate whether the camera faces the front or back face of the portal.\n   * @returns {number} > 0 if camera faces front of portal, < 0 if it faces back of portal.\n   */\n  calculateCameraPortalOrientation: (function () {\n    var mat4 = new THREE.Matrix4();\n    var cameraPosition = new THREE.Vector3();\n    var portalNormal = new THREE.Vector3(0, 0, 1);\n    var portalPosition = new THREE.Vector3(0, 0, 0);\n\n    return function () {\n      var el = this.el;\n      var camera = el.sceneEl.camera;\n\n      // Reset tmp variables.\n      cameraPosition.set(0, 0, 0);\n      portalNormal.set(0, 0, 1);\n      portalPosition.set(0, 0, 0);\n\n      // Apply portal orientation to the normal.\n      el.object3D.matrixWorld.extractRotation(mat4);\n      portalNormal.applyMatrix4(mat4);\n\n      // Calculate portal world position.\n      el.object3D.updateMatrixWorld();\n      el.object3D.localToWorld(portalPosition);\n\n      // Calculate camera world position.\n      camera.parent.parent.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n      camera.localToWorld(cameraPosition);\n\n      // Calculate vector from portal to camera.\n      // (portal) -------> (camera)\n      cameraPosition.sub(portalPosition).normalize();\n      portalNormal.normalize();\n\n      // Side where camera approaches portal is given by sign of dot product of portal normal\n      // and portal to camera vectors.\n      return Math.sign(portalNormal.dot(cameraPosition));\n    };\n  })(),\n\n  remove: function () {\n    this.removeEventListener();\n  }\n});\n\n/* eslint-disable */\nregisterShader('portal', {\n  schema: {\n    borderEnabled: {default: 1.0, type: 'int', is: 'uniform'},\n    backgroundColor: {default: 'red', type: 'color', is: 'uniform'},\n    pano: {type: 'map', is: 'uniform'},\n    strokeColor: {default: 'white', type: 'color', is: 'uniform'},\n    previewDistance: {default: DEFAULT_PREVIEW_DISTANCE, type: 'float', is: 'uniform'}\n  },\n\n  vertexShader: [\n    'vec3 portalPosition;',\n    'varying vec3 vWorldPosition;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'void main() {',\n    'vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);',\n    'portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;',\n    'vDistance = length(portalPosition - cameraPosition);',\n    'vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    '#define RECIPROCAL_PI2 0.15915494',\n    'uniform sampler2D pano;',\n    'uniform vec3 strokeColor;',\n    'uniform vec3 backgroundColor;',\n    'uniform float borderEnabled;',\n    'uniform float previewDistance;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    'vec3 direction = normalize(vWorldPosition - cameraPosition);',\n    'vec2 sampleUV;',\n    'float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);',\n    'sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);',\n    'sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;',\n    'if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {',\n    'gl_FragColor = vec4(strokeColor, 1.0);',\n    '} else {',\n    'gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));',\n    '}',\n    '}'\n  ].join('\\n')\n});\n/* eslint-enable */\n","/* global THREE */\nimport { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('line', {\n  schema: {\n    start: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    end: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    color: {type: 'color', default: '#74BEC1'},\n    opacity: {type: 'number', default: 1},\n    visible: {default: true}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var data = this.data;\n    var geometry;\n    var material;\n    material = this.material = new THREE.LineBasicMaterial({\n      color: data.color,\n      opacity: data.opacity,\n      transparent: data.opacity < 1,\n      visible: data.visible\n    });\n    geometry = this.geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(geometry, material);\n    this.el.setObject3D(this.attrName, this.line);\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var geometry = this.geometry;\n    var geoNeedsUpdate = false;\n    var material = this.material;\n    var positionArray = geometry.attributes.position.array;\n\n    // Update geometry.\n    if (!isEqualVec3(data.start, oldData.start)) {\n      positionArray[0] = data.start.x;\n      positionArray[1] = data.start.y;\n      positionArray[2] = data.start.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (!isEqualVec3(data.end, oldData.end)) {\n      positionArray[3] = data.end.x;\n      positionArray[4] = data.end.y;\n      positionArray[5] = data.end.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (geoNeedsUpdate) {\n      geometry.attributes.position.needsUpdate = true;\n      geometry.computeBoundingSphere();\n    }\n\n    material.color.setStyle(data.color);\n    material.opacity = data.opacity;\n    material.transparent = data.opacity < 1;\n    material.visible = data.visible;\n  },\n\n  remove: function () {\n    this.el.removeObject3D(this.attrName, this.line);\n  }\n});\n\nfunction isEqualVec3 (a, b) {\n  if (!a || !b) { return false; }\n  return (a.x === b.x && a.y === b.y && a.z === b.z);\n}\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'logitech-mx-ink';\nvar LOGITECH_MX_INK_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/logitech/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 5 - touchpad\n * 6 - tip\n * 7 - dock\n *\n*/\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  },\n  right: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  }\n};\n\n/**\n * Logitech MX Ink Controls\n */\nexport var Component = registerComponent('logitech-mx-ink-controls', {\n  schema: {\n    hand: {default: 'left'},\n    model: {default: true},\n    orientationOffset: {type: 'vec3'}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    el.sceneEl.removeEventListener('exit-vr', this.onExitVR);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    var id = GAMEPAD_ID;\n    el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true,\n      orientationOffset: data.orientationOffset\n    });\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (!this.data.model) { return; }\n    if (controllerObject3D) {\n      controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n      this.el.setObject3D('mesh', controllerObject3D);\n      return;\n    }\n    this.el.setAttribute('gltf-model', LOGITECH_MX_INK_MODEL_GLB_BASE_URL + 'logitech-mx-ink.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'logitech-mx-ink-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n\n    this.controllerObject3D = this.el.getObject3D('mesh');\n    this.controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n","/* global DeviceOrientationEvent  */\nimport THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\n// To avoid recalculation at every mouse movement tick\nvar PI_2 = Math.PI / 2;\n\n/**\n * look-controls. Update entity pose, factoring mouse, touch.\n */\nexport var Component = registerComponent('look-controls', {\n  dependencies: ['position', 'rotation'],\n\n  schema: {\n    enabled: {default: true},\n    magicWindowTrackingEnabled: {default: true},\n    pointerLockEnabled: {default: false},\n    reverseMouseDrag: {default: false},\n    reverseTouchDrag: {default: false},\n    touchEnabled: {default: true},\n    mouseEnabled: {default: true}\n  },\n\n  init: function () {\n    this.deltaYaw = 0;\n    this.previousHMDPosition = new THREE.Vector3();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.magicWindowAbsoluteEuler = new THREE.Euler();\n    this.magicWindowDeltaEuler = new THREE.Euler();\n    this.position = new THREE.Vector3();\n    this.magicWindowObject = new THREE.Object3D();\n    this.rotation = {};\n    this.deltaRotation = {};\n    this.savedPose = null;\n    this.pointerLocked = false;\n    this.setupMouseControls();\n    this.bindMethods();\n    this.previousMouseEvent = {};\n\n    this.setupMagicWindowControls();\n\n    // To save / restore camera pose\n    this.savedPose = {\n      position: new THREE.Vector3(),\n      rotation: new THREE.Euler()\n    };\n\n    // Call enter VR handler if the scene has entered VR before the event listeners attached.\n    if (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode')) { this.onEnterVR(); }\n  },\n\n  setupMagicWindowControls: function () {\n    var magicWindowControls;\n    var data = this.data;\n\n    // Only on mobile devices and only enabled if DeviceOrientation permission has been granted.\n    if (utils.device.isMobile() || utils.device.isMobileDeviceRequestingDesktopSite()) {\n      magicWindowControls = this.magicWindowControls = new THREE.DeviceOrientationControls(this.magicWindowObject);\n      if (typeof DeviceOrientationEvent !== 'undefined' && DeviceOrientationEvent.requestPermission) {\n        magicWindowControls.enabled = false;\n        if (this.el.sceneEl.components['device-orientation-permission-ui'].permissionGranted) {\n          magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n        } else {\n          this.el.sceneEl.addEventListener('deviceorientationpermissiongranted', function () {\n            magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n          });\n        }\n      }\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n\n    // Disable grab cursor classes if no longer enabled.\n    if (data.enabled !== oldData.enabled) {\n      this.updateGrabCursor(data.enabled);\n    }\n\n    // Reset magic window eulers if tracking is disabled.\n    if (oldData && !data.magicWindowTrackingEnabled && oldData.magicWindowTrackingEnabled) {\n      this.magicWindowAbsoluteEuler.set(0, 0, 0);\n      this.magicWindowDeltaEuler.set(0, 0, 0);\n    }\n\n    // Pass on magic window tracking setting to magicWindowControls.\n    if (this.magicWindowControls) {\n      this.magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n    }\n\n    if (oldData && !data.pointerLockEnabled !== oldData.pointerLockEnabled) {\n      this.removeEventListeners();\n      this.addEventListeners();\n      if (this.pointerLocked) { this.exitPointerLock(); }\n    }\n  },\n\n  tick: function (t) {\n    var data = this.data;\n    if (!data.enabled) { return; }\n    this.updateOrientation();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  bindMethods: function () {\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n    this.onPointerLockChange = this.onPointerLockChange.bind(this);\n    this.onPointerLockError = this.onPointerLockError.bind(this);\n  },\n\n /**\n  * Set up states and Object3Ds needed to store rotation data.\n  */\n  setupMouseControls: function () {\n    this.mouseDown = false;\n    this.pitchObject = new THREE.Object3D();\n    this.yawObject = new THREE.Object3D();\n    this.yawObject.position.y = 10;\n    this.yawObject.add(this.pitchObject);\n  },\n\n  /**\n   * Add mouse and touch event listeners to canvas.\n   */\n  addEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    // Wait for canvas to load.\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    // Mouse events.\n    canvasEl.addEventListener('mousedown', this.onMouseDown, false);\n    window.addEventListener('mousemove', this.onMouseMove, false);\n    window.addEventListener('mouseup', this.onMouseUp, false);\n\n    // Touch events.\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\n    window.addEventListener('touchmove', this.onTouchMove, {passive: true});\n    window.addEventListener('touchend', this.onTouchEnd, {passive: true});\n\n    // sceneEl events.\n    sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    sceneEl.addEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    if (this.data.pointerLockEnabled) {\n      document.addEventListener('pointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('pointerlockerror', this.onPointerLockError, false);\n    }\n  },\n\n  /**\n   * Remove mouse and touch event listeners from canvas.\n   */\n  removeEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    if (!canvasEl) { return; }\n\n    // Mouse events.\n    canvasEl.removeEventListener('mousedown', this.onMouseDown);\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n\n    // Touch events.\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    // sceneEl events.\n    sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    sceneEl.removeEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    document.removeEventListener('pointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('pointerlockerror', this.onPointerLockError, false);\n  },\n\n  /**\n   * Update orientation for mobile, mouse drag, and headset.\n   * Mouse-drag only enabled if HMD is not active.\n   */\n  updateOrientation: function () {\n    var object3D = this.el.object3D;\n    var pitchObject = this.pitchObject;\n    var yawObject = this.yawObject;\n    var sceneEl = this.el.sceneEl;\n\n    // In VR or AR mode, THREE is in charge of updating the camera pose.\n    if ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected()) {\n      // With WebXR THREE applies headset pose to the object3D internally.\n      return;\n    }\n\n    this.updateMagicWindowOrientation();\n\n    // On mobile, do camera rotation with touch events and sensors.\n    object3D.rotation.x = this.magicWindowDeltaEuler.x + pitchObject.rotation.x;\n    object3D.rotation.y = this.magicWindowDeltaEuler.y + yawObject.rotation.y;\n    object3D.rotation.z = this.magicWindowDeltaEuler.z;\n  },\n\n  updateMagicWindowOrientation: function () {\n    var magicWindowAbsoluteEuler = this.magicWindowAbsoluteEuler;\n    var magicWindowDeltaEuler = this.magicWindowDeltaEuler;\n    // Calculate magic window HMD quaternion.\n    if (this.magicWindowControls && this.magicWindowControls.enabled) {\n      this.magicWindowControls.update();\n      magicWindowAbsoluteEuler.setFromQuaternion(this.magicWindowObject.quaternion, 'YXZ');\n      if (!this.previousMagicWindowYaw && magicWindowAbsoluteEuler.y !== 0) {\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n      if (this.previousMagicWindowYaw) {\n        magicWindowDeltaEuler.x = magicWindowAbsoluteEuler.x;\n        magicWindowDeltaEuler.y += magicWindowAbsoluteEuler.y - this.previousMagicWindowYaw;\n        magicWindowDeltaEuler.z = magicWindowAbsoluteEuler.z;\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n    }\n  },\n\n  /**\n   * Translate mouse drag into rotation.\n   *\n   * Dragging up and down rotates the camera around the X-axis (yaw).\n   * Dragging left and right rotates the camera around the Y-axis (pitch).\n   */\n  onMouseMove: function (evt) {\n    var direction;\n    var movementX;\n    var movementY;\n    var pitchObject = this.pitchObject;\n    var previousMouseEvent = this.previousMouseEvent;\n    var yawObject = this.yawObject;\n\n    // Not dragging or not enabled.\n    if (!this.data.enabled || (!this.mouseDown && !this.pointerLocked)) { return; }\n\n    // Calculate delta.\n    if (this.pointerLocked) {\n      movementX = evt.movementX || evt.mozMovementX || 0;\n      movementY = evt.movementY || evt.mozMovementY || 0;\n    } else {\n      movementX = evt.screenX - previousMouseEvent.screenX;\n      movementY = evt.screenY - previousMouseEvent.screenY;\n    }\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n\n    // Calculate rotation.\n    direction = this.data.reverseMouseDrag ? 1 : -1;\n    yawObject.rotation.y += movementX * 0.002 * direction;\n    pitchObject.rotation.x += movementY * 0.002 * direction;\n    pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\n  },\n\n  /**\n   * Register mouse down to detect mouse drag.\n   */\n  onMouseDown: function (evt) {\n    var sceneEl = this.el.sceneEl;\n    if (!this.data.enabled || !this.data.mouseEnabled || ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected())) { return; }\n    // Handle only primary button.\n    if (evt.button !== 0) { return; }\n\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    this.mouseDown = true;\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n    this.showGrabbingCursor();\n\n    if (this.data.pointerLockEnabled && !this.pointerLocked) {\n      if (canvasEl.requestPointerLock) {\n        canvasEl.requestPointerLock();\n      } else if (canvasEl.mozRequestPointerLock) {\n        canvasEl.mozRequestPointerLock();\n      }\n    }\n  },\n\n  /**\n   * Shows grabbing cursor on scene\n   */\n  showGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = 'grabbing';\n  },\n\n  /**\n   * Hides grabbing cursor on scene\n   */\n  hideGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = '';\n  },\n\n  /**\n   * Register mouse up to detect release of mouse drag.\n   */\n  onMouseUp: function () {\n    this.mouseDown = false;\n    this.hideGrabbingCursor();\n  },\n\n  /**\n   * Register touch down to detect touch drag.\n   */\n  onTouchStart: function (evt) {\n    if (evt.touches.length !== 1 ||\n        !this.data.touchEnabled ||\n        this.el.sceneEl.is('vr-mode') ||\n        this.el.sceneEl.is('ar-mode')) { return; }\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n    this.touchStarted = true;\n  },\n\n  /**\n   * Translate touch move to Y-axis rotation.\n   */\n  onTouchMove: function (evt) {\n    var direction;\n    var canvas = this.el.sceneEl.canvas;\n    var deltaY;\n    var yawObject = this.yawObject;\n\n    if (!this.touchStarted || !this.data.touchEnabled) { return; }\n\n    deltaY = 2 * Math.PI * (evt.touches[0].pageX - this.touchStart.x) / canvas.clientWidth;\n\n    direction = this.data.reverseTouchDrag ? 1 : -1;\n    // Limit touch orientation to to yaw (y axis).\n    yawObject.rotation.y -= deltaY * 0.5 * direction;\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n  },\n\n  /**\n   * Register touch end to detect release of touch drag.\n   */\n  onTouchEnd: function () {\n    this.touchStarted = false;\n  },\n\n  /**\n   * Save pose.\n   */\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    if (!sceneEl.checkHeadsetConnected()) { return; }\n    this.saveCameraPose();\n    this.el.object3D.position.set(0, 0, 0);\n    this.el.object3D.rotation.set(0, 0, 0);\n    if (sceneEl.hasWebXR) {\n      this.el.object3D.matrixAutoUpdate = false;\n      this.el.object3D.updateMatrix();\n    }\n  },\n\n  /**\n   * Restore the pose.\n   */\n  onExitVR: function () {\n    if (!this.el.sceneEl.checkHeadsetConnected()) { return; }\n    this.restoreCameraPose();\n    this.previousHMDPosition.set(0, 0, 0);\n    this.el.object3D.matrixAutoUpdate = true;\n  },\n\n  /**\n   * Update Pointer Lock state.\n   */\n  onPointerLockChange: function () {\n    this.pointerLocked = !!(document.pointerLockElement || document.mozPointerLockElement);\n  },\n\n  /**\n   * Recover from Pointer Lock error.\n   */\n  onPointerLockError: function () {\n    this.pointerLocked = false;\n  },\n\n  // Exits pointer-locked mode.\n  exitPointerLock: function () {\n    document.exitPointerLock();\n    this.pointerLocked = false;\n  },\n\n  /**\n   * Toggle the feature of showing/hiding the grab cursor.\n   */\n  updateGrabCursor: function (enabled) {\n    var sceneEl = this.el.sceneEl;\n\n    function enableGrabCursor () { sceneEl.canvas.classList.add('a-grab-cursor'); }\n    function disableGrabCursor () { sceneEl.canvas.classList.remove('a-grab-cursor'); }\n\n    if (!sceneEl.canvas) {\n      if (enabled) {\n        sceneEl.addEventListener('render-target-loaded', enableGrabCursor);\n      } else {\n        sceneEl.addEventListener('render-target-loaded', disableGrabCursor);\n      }\n      return;\n    }\n\n    if (enabled) {\n      enableGrabCursor();\n      return;\n    }\n    disableGrabCursor();\n  },\n\n  /**\n   * Save camera pose before entering VR to restore later if exiting.\n   */\n  saveCameraPose: function () {\n    var el = this.el;\n\n    this.savedPose.position.copy(el.object3D.position);\n    this.savedPose.rotation.copy(el.object3D.rotation);\n    this.hasSavedPose = true;\n  },\n\n  /**\n   * Reset camera pose to before entering VR.\n   */\n  restoreCameraPose: function () {\n    var el = this.el;\n    var savedPose = this.savedPose;\n\n    if (!this.hasSavedPose) { return; }\n\n    // Reset camera orientation.\n    el.object3D.position.copy(savedPose.position);\n    el.object3D.rotation.copy(savedPose.rotation);\n    this.hasSavedPose = false;\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID_PREFIX = 'magicleap';\nvar GAMEPAD_ID_SUFFIX = '-one';\nvar GAMEPAD_ID_COMPOSITE = GAMEPAD_ID_PREFIX + GAMEPAD_ID_SUFFIX;\nvar MAGICLEAP_CONTROLLER_MODEL_GLB_URL = AFRAME_CDN_ROOT + 'controllers/magicleap/magicleap-one-controller.glb';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 2 - touchpad\n * 3 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'menu']\n};\n\n/**\n * Magic Leap Controls\n * Interface with Magic Leap control and map Gamepad events to controller\n * buttons: trigger, grip, touchpad, and menu.\n * Load a controller model.\n */\nexport var Component = registerComponent('magicleap-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_COMPOSITE,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID_COMPOSITE,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', MAGICLEAP_CONTROLLER_MODEL_GLB_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    // our glb scale is too large.\n    controllerObject3D.scale.set(0.01, 0.01, 0.01);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {},\n\n  setButtonColor: function (buttonName, color) {}\n\n});\n","import THREE from '../lib/three.js';\nimport * as utils from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport { shaders, shaderNames } from '../core/shader.js';\n\nvar error = utils.debug('components:material:error');\n\n/**\n * Material component.\n *\n * @member {object} shader - Determines how material is shaded. Defaults to `standard`,\n *         three.js's implementation of PBR. Another standard shading model is `flat` which\n *         uses MeshBasicMaterial.\n */\nexport var Component = registerComponent('material', {\n  schema: {\n    alphaTest: {default: 0.0, min: 0.0, max: 1.0},\n    depthTest: {default: true},\n    depthWrite: {default: true},\n    flatShading: {default: false},\n    npot: {default: false},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    opacity: {default: 1.0, min: 0.0, max: 1.0},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    shader: {default: 'standard', oneOf: shaderNames, schemaChange: true},\n    side: {default: 'front', oneOf: ['front', 'back', 'double']},\n    transparent: {default: false},\n    vertexColorsEnabled: {default: false},\n    visible: {default: true},\n    blending: {default: 'normal', oneOf: ['none', 'normal', 'additive', 'subtractive', 'multiply']},\n    dithering: {default: true},\n    anisotropy: {default: 0, min: 0}\n  },\n\n  init: function () {\n    this.material = null;\n  },\n\n  /**\n   * Update or create material.\n   *\n   * @param {object|null} oldData\n   */\n  update: function (oldData) {\n    var data = this.data;\n    if (!this.shader || data.shader !== oldData.shader) {\n      this.updateShader(data.shader);\n    }\n    this.shader.update(this.data);\n    this.updateMaterial(oldData);\n  },\n\n  updateSchema: function (data) {\n    var currentShader;\n    var newShader;\n    var schema;\n    var shader;\n\n    newShader = data && data.shader;\n    currentShader = this.oldData && this.oldData.shader;\n    shader = newShader || currentShader;\n    schema = shaders[shader] && shaders[shader].schema;\n\n    if (!schema) { error('Unknown shader schema ' + shader); }\n    if (currentShader && newShader === currentShader) { return; }\n    this.extendSchema(schema);\n    this.updateBehavior();\n  },\n\n  updateBehavior: function () {\n    var key;\n    var sceneEl = this.el.sceneEl;\n    var schema = this.schema;\n    var self = this;\n    var tickProperties;\n\n    function tickTime (time, delta) {\n      var key;\n      for (key in tickProperties) {\n        tickProperties[key] = time;\n      }\n      self.shader.update(tickProperties);\n    }\n\n    this.tick = undefined;\n\n    tickProperties = {};\n    for (key in schema) {\n      if (schema[key].type === 'time') {\n        this.tick = tickTime;\n        tickProperties[key] = true;\n      }\n    }\n\n    if (!sceneEl) { return; }\n    if (this.tick) {\n      sceneEl.addBehavior(this);\n    } else {\n      sceneEl.removeBehavior(this);\n    }\n  },\n\n  updateShader: function (shaderName) {\n    var data = this.data;\n    var Shader = shaders[shaderName] && shaders[shaderName].Shader;\n    var shaderInstance;\n\n    if (!Shader) { throw new Error('Unknown shader ' + shaderName); }\n\n    // Get material from A-Frame shader.\n    shaderInstance = this.shader = new Shader();\n    shaderInstance.el = this.el;\n    shaderInstance.init(data);\n    this.setMaterial(shaderInstance.material);\n    this.updateSchema(data);\n  },\n\n  /**\n   * Set and update base material properties.\n   * Set `needsUpdate` when needed.\n   */\n  updateMaterial: function (oldData) {\n    var data = this.data;\n    var material = this.material;\n    var oldDataHasKeys;\n\n    // Base material properties.\n    material.alphaTest = data.alphaTest;\n    material.depthTest = data.depthTest !== false;\n    material.depthWrite = data.depthWrite !== false;\n    material.opacity = data.opacity;\n    material.flatShading = data.flatShading;\n    material.side = parseSide(data.side);\n    material.transparent = data.transparent !== false || data.opacity < 1.0;\n    material.vertexColors = data.vertexColorsEnabled;\n    material.visible = data.visible;\n    material.blending = parseBlending(data.blending);\n    material.dithering = data.dithering;\n\n    // Check if material needs update.\n    for (oldDataHasKeys in oldData) { break; }\n    if (oldDataHasKeys &&\n        (oldData.alphaTest !== data.alphaTest ||\n         oldData.side !== data.side ||\n         oldData.vertexColorsEnabled !== data.vertexColorsEnabled)) {\n      material.needsUpdate = true;\n    }\n  },\n\n  /**\n   * Remove material on remove (callback).\n   * Dispose of it from memory and unsubscribe from scene updates.\n   */\n  remove: function () {\n    var defaultMaterial = new THREE.MeshBasicMaterial();\n    var material = this.material;\n    var object3D = this.el.getObject3D('mesh');\n    if (object3D) { object3D.material = defaultMaterial; }\n    disposeMaterial(material, this.system);\n  },\n\n  /**\n   * (Re)create new material. Has side-effects of setting `this.material` and updating\n   * material registration in scene.\n   *\n   * @param {object} data - Material component data.\n   * @param {object} type - Material type to create.\n   * @returns {object} Material.\n   */\n  setMaterial: function (material) {\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    if (this.material) { disposeMaterial(this.material, system); }\n\n    this.material = material;\n    system.registerMaterial(material);\n\n    // Set on mesh. If mesh does not exist, wait for it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.material = material;\n    } else {\n      el.addEventListener('object3dset', function waitForMesh (evt) {\n        if (evt.detail.type !== 'mesh' || evt.target !== el) { return; }\n        el.getObject3D('mesh').material = material;\n        el.removeEventListener('object3dset', waitForMesh);\n      });\n    }\n  }\n});\n\n/**\n * Return a three.js constant determining which material face sides to render\n * based on the side parameter (passed as a component property).\n *\n * @param {string} [side=front] - `front`, `back`, or `double`.\n * @returns {number} THREE.FrontSide, THREE.BackSide, or THREE.DoubleSide.\n */\nfunction parseSide (side) {\n  switch (side) {\n    case 'back': {\n      return THREE.BackSide;\n    }\n    case 'double': {\n      return THREE.DoubleSide;\n    }\n    default: {\n      // Including case `front`.\n      return THREE.FrontSide;\n    }\n  }\n}\n\n/**\n * Return a three.js constant determining blending\n *\n * @param {string} [blending=normal]\n * - `none`, additive`, `subtractive`,`multiply` or `normal`.\n * @returns {number}\n */\nfunction parseBlending (blending) {\n  switch (blending) {\n    case 'none': {\n      return THREE.NoBlending;\n    }\n    case 'additive': {\n      return THREE.AdditiveBlending;\n    }\n    case 'subtractive': {\n      return THREE.SubtractiveBlending;\n    }\n    case 'multiply': {\n      return THREE.MultiplyBlending;\n    }\n    default: {\n      return THREE.NormalBlending;\n    }\n  }\n}\n\n/**\n * Dispose of material from memory and unsubscribe material from scene updates like fog.\n */\nfunction disposeMaterial (material, system) {\n  material.dispose();\n  system.unregisterMaterial(material);\n\n  // Dispose textures on this material\n  Object.keys(material)\n    .filter(function (propName) {\n      return material[propName] && material[propName].isTexture;\n    })\n    .forEach(function (mapName) {\n      material[mapName].dispose();\n    });\n}\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-touch';\n\n// First generation model URL.\nvar TOUCH_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/oculus/oculus-touch-controller-';\nvar META_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/meta/';\n\nvar OCULUS_TOUCH_CONFIG = {\n  left: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'left.gltf',\n    rayOrigin: {origin: {x: 0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(-0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  },\n  right: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'right.gltf',\n    rayOrigin: {origin: {x: -0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  }\n};\n\nvar CONTROLLER_DEFAULT = 'oculus-touch';\nvar CONTROLLER_PROPERTIES = {\n  'oculus-touch': OCULUS_TOUCH_CONFIG,\n  'oculus-touch-v2': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-left.gltf',\n      rayOrigin: {origin: {x: -0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-right.gltf',\n      rayOrigin: {origin: {x: 0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    }\n  },\n  'oculus-touch-v3': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-pro': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-plus': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  }\n};\n\nvar INPUT_MAPPING = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton', 'surface']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton', 'surface']\n  }\n};\n\n/**\n * Meta Touch controls (formerly Oculus Touch)\n * Interface with Meta Touch controllers and map Gamepad events to\n * controller buttons: thumbstick, trigger, grip, xbutton, ybutton, surface\n * Load a controller model and highlight the pressed buttons.\n */\nvar componentConfig = {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#999'},  // Off-white.\n    buttonTouchColor: {type: 'color', default: '#8AB'},\n    buttonHighlightColor: {type: 'color', default: '#2DF'},  // Light blue.\n    model: {default: true},\n    controllerType: {default: 'auto', oneOf: ['auto', 'oculus-touch', 'oculus-touch-v2', 'oculus-touch-v3']}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onThumbstickMoved = this.onThumbstickMoved.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n    this.triggerEuler = new THREE.Euler();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  loadModel: function (controller) {\n    var data = this.data;\n    var controllerId;\n    if (!data.model) { return; }\n\n    // If model has been already loaded\n    if (this.controllerObject3D) {\n      this.controllerObject3D.visible = true;\n      this.el.setObject3D('mesh', this.controllerObject3D);\n      return;\n    }\n\n    // Set the controller display model based on the data passed in.\n    this.displayModel = CONTROLLER_PROPERTIES[data.controllerType] || CONTROLLER_PROPERTIES[CONTROLLER_DEFAULT];\n    // If the developer is asking for auto-detection, use the retrieved displayName to identify the specific unit.\n    if (data.controllerType === 'auto') {\n      controllerId = CONTROLLER_DEFAULT;\n      var controllersPropertiesIds = Object.keys(CONTROLLER_PROPERTIES);\n      for (var i = 0; i < controller.profiles.length; i++) {\n        if (controllersPropertiesIds.indexOf(controller.profiles[i]) !== -1) {\n          controllerId = controller.profiles[i];\n          break;\n        }\n      }\n      this.displayModel = CONTROLLER_PROPERTIES[controllerId];\n    }\n    var modelUrl = this.displayModel[data.hand].modelUrl;\n    this.isTouchV3orPROorPlus =\n      this.displayModel === CONTROLLER_PROPERTIES['oculus-touch-v3'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-pro'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-plus'];\n    this.el.setAttribute('gltf-model', modelUrl);\n  },\n\n  injectTrackedControls: function (controller) {\n    var data = this.data;\n    var id = GAMEPAD_ID_PREFIX;\n    this.el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true\n    });\n    this.loadModel(controller);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    if (!button) { return; }\n    // move the button meshes\n    if (this.isTouchV3orPROorPlus) {\n      this.onButtonChangedV3orPROorPlus(evt);\n    } else {\n      var buttonMeshes = this.buttonMeshes;\n      var analogValue;\n\n      if (button === 'trigger' || button === 'grip') { analogValue = evt.detail.state.value; }\n\n      if (buttonMeshes) {\n        if (button === 'trigger' && buttonMeshes.trigger) {\n          buttonMeshes.trigger.rotation.x = this.originalXRotationTrigger - analogValue * (Math.PI / 26);\n        }\n        if (button === 'grip' && buttonMeshes.grip) {\n          analogValue *= this.data.hand === 'left' ? -1 : 1;\n          buttonMeshes.grip.position.x = this.originalXPositionGrip + analogValue * 0.004;\n        }\n      }\n    }\n    // Pass along changed event with button state, using the button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onButtonChangedV3orPROorPlus: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var buttonObjects = this.buttonObjects;\n    var analogValue;\n    if (!buttonObjects || !buttonObjects[button]) { return; }\n    analogValue = evt.detail.state.value;\n    buttonObjects[button].quaternion.slerpQuaternions(\n      this.buttonRanges[button].min.quaternion,\n      this.buttonRanges[button].max.quaternion,\n      analogValue\n    );\n\n    buttonObjects[button].position.lerpVectors(\n      this.buttonRanges[button].min.position,\n      this.buttonRanges[button].max.position,\n      analogValue\n    );\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.onTouchV3orPROorPlusModelLoaded(evt);\n    } else {\n      // All oculus headset controller models prior to the Quest 2 (i.e., Oculus Touch V3)\n      // used a consistent format that is handled here\n      var controllerObject3D = this.controllerObject3D = evt.detail.model;\n      var buttonMeshes;\n\n      buttonMeshes = this.buttonMeshes = {};\n\n      buttonMeshes.grip = controllerObject3D.getObjectByName('buttonHand');\n      this.originalXPositionGrip = buttonMeshes.grip && buttonMeshes.grip.position.x;\n      buttonMeshes.trigger = controllerObject3D.getObjectByName('buttonTrigger');\n      this.originalXRotationTrigger = buttonMeshes.trigger && buttonMeshes.trigger.rotation.x;\n      buttonMeshes.thumbstick = controllerObject3D.getObjectByName('stick');\n      buttonMeshes.xbutton = controllerObject3D.getObjectByName('buttonX');\n      buttonMeshes.abutton = controllerObject3D.getObjectByName('buttonA');\n      buttonMeshes.ybutton = controllerObject3D.getObjectByName('buttonY');\n      buttonMeshes.bbutton = controllerObject3D.getObjectByName('buttonB');\n    }\n\n    for (var button in this.buttonMeshes) {\n      if (this.buttonMeshes[button]) {\n        cloneMeshMaterial(this.buttonMeshes[button]);\n      }\n    }\n\n    this.applyOffset(evt.detail.model);\n\n    this.el.emit('controllermodelready', {\n      name: 'meta-touch-controls',\n      model: this.data.model,\n      rayOrigin: this.displayModel[this.data.hand].rayOrigin\n    });\n  },\n\n  applyOffset: function (model) {\n    model.position.copy(this.displayModel[this.data.hand].modelPivotOffset);\n    model.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation);\n  },\n\n  onTouchV3orPROorPlusModelLoaded: function (evt) {\n    var controllerObject3D = this.controllerObject3D = evt.detail.model;\n\n    var buttonObjects = this.buttonObjects = {};\n    var buttonMeshes = this.buttonMeshes = {};\n    var buttonRanges = this.buttonRanges = {};\n\n    buttonMeshes.grip = controllerObject3D.getObjectByName('squeeze');\n    buttonObjects.grip = controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_value');\n    buttonRanges.grip = {\n      min: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_max')\n    };\n    buttonObjects.grip.minX = buttonObjects.grip.position.x;\n\n    buttonMeshes.thumbstick = controllerObject3D.getObjectByName('thumbstick');\n    buttonObjects.thumbstick = controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_value');\n    buttonRanges.thumbstick = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_max')\n    };\n\n    buttonObjects.thumbstickXAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_value');\n    buttonRanges.thumbstickXAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_max')\n    };\n\n    buttonObjects.thumbstickYAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_value');\n    buttonRanges.thumbstickYAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_max')\n    };\n\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    buttonObjects.trigger = controllerObject3D.getObjectByName('xr_standard_trigger_pressed_value');\n    buttonRanges.trigger = {\n      min: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_max')\n    };\n    buttonRanges.trigger.diff = {\n      x: Math.abs(buttonRanges.trigger.max.rotation.x) - Math.abs(buttonRanges.trigger.min.rotation.x),\n      y: Math.abs(buttonRanges.trigger.max.rotation.y) - Math.abs(buttonRanges.trigger.min.rotation.y),\n      z: Math.abs(buttonRanges.trigger.max.rotation.z) - Math.abs(buttonRanges.trigger.min.rotation.z)\n    };\n\n    var button1 = this.data.hand === 'left' ? 'x' : 'a';\n    var button2 = this.data.hand === 'left' ? 'y' : 'b';\n    var button1id = button1 + 'button';\n    var button2id = button2 + 'button';\n\n    buttonMeshes[button1id] = controllerObject3D.getObjectByName(button1 + '_button');\n    buttonObjects[button1id] = controllerObject3D.getObjectByName(button1 + '_button_pressed_value');\n    buttonRanges[button1id] = {\n      min: controllerObject3D.getObjectByName(button1 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button1 + '_button_pressed_max')\n    };\n\n    buttonMeshes[button2id] = controllerObject3D.getObjectByName(button2 + '_button');\n    buttonObjects[button2id] = controllerObject3D.getObjectByName(button2 + '_button_pressed_value');\n    buttonRanges[button2id] = {\n      min: controllerObject3D.getObjectByName(button2 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button2 + '_button_pressed_max')\n    };\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  },\n\n  onThumbstickMoved: function (evt) {\n    if (!this.buttonMeshes || !this.buttonMeshes.thumbstick) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.updateThumbstickTouchV3orPROorPlus(evt);\n      return;\n    }\n    for (var axis in evt.detail) {\n      this.buttonObjects.thumbstick.rotation[this.axisMap[axis]] =\n        this.buttonRanges.thumbstick.originalRotation[this.axisMap[axis]] -\n        (Math.PI / 8) *\n        evt.detail[axis] *\n        (axis === 'y' || this.data.hand === 'right' ? -1 : 1);\n    }\n  },\n  axisMap: {\n    y: 'x',\n    x: 'z'\n  },\n\n  updateThumbstickTouchV3orPROorPlus: function (evt) {\n    var normalizedXAxis = (evt.detail.x + 1.0) / 2.0;\n    this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickXAxis.min.quaternion,\n      this.buttonRanges.thumbstickXAxis.max.quaternion,\n      normalizedXAxis\n    );\n\n    var normalizedYAxis = (evt.detail.y + 1.0) / 2.0;\n    this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickYAxis.min.quaternion,\n      this.buttonRanges.thumbstickYAxis.max.quaternion,\n      normalizedYAxis\n    );\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    // update the button mesh colors\n    var buttonMeshes = this.buttonMeshes;\n    var button;\n    var color;\n\n    if (!buttonMeshes) { return; }\n    if (buttonMeshes[buttonName]) {\n      color = (state === 'up' || state === 'touchend') ? buttonMeshes[buttonName].originalColor || this.data.buttonColor : state === 'touchstart' ? this.data.buttonTouchColor : this.data.buttonHighlightColor;\n      button = buttonMeshes[buttonName];\n      button.material.color.set(color);\n    }\n  }\n};\nregisterComponent('oculus-touch-controls', componentConfig);\nexport var Component = registerComponent('meta-touch-controls', componentConfig);\n\n/**\n * Some of the controller models share the same material for different parts (buttons, triggers...).\n * In order to change their color independently we have to create separate materials.\n */\nfunction cloneMeshMaterial (object3d) {\n  object3d.traverse(function (node) {\n    var newMaterial;\n    if (node.type !== 'Mesh') return;\n    newMaterial = node.material.clone();\n    object3d.originalColor = node.material.color;\n    node.material.dispose();\n    node.material = newMaterial;\n  });\n}\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\n\nregisterComponent('obb-collider', {\n  schema: {\n    size: {default: 0},\n    trackedObject3D: {default: ''},\n    minimumColliderDimension: {default: 0.02},\n    centerModel: {default: false}\n  },\n\n  init: function () {\n    this.previousScale = new THREE.Vector3().copy(this.el.object3D.scale);\n    this.auxEuler = new THREE.Euler();\n\n    this.boundingBox = new THREE.Box3();\n    this.boundingBoxSize = new THREE.Vector3();\n    this.updateCollider = this.updateCollider.bind(this);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.updateBoundingBox = this.updateBoundingBox.bind(this);\n\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    this.updateCollider();\n\n    this.system.addCollider(this.el);\n  },\n\n  remove: function () {\n    this.system.removeCollider(this.el);\n  },\n\n  update: function () {\n    if (this.data.trackedObject3D) {\n      this.trackedObject3DPath = this.data.trackedObject3D.split('.');\n    }\n  },\n\n  onModelLoaded: function () {\n    if (this.data.centerModel) { this.centerModel(); }\n    this.updateCollider();\n  },\n\n  centerModel: function () {\n    var el = this.el;\n    var model = el.components['gltf-model'] && el.components['gltf-model'].model;\n    var box;\n    var center;\n\n    if (!model) { return; }\n    this.el.removeObject3D('mesh');\n    box = new THREE.Box3().setFromObject(model);\n    center = box.getCenter(new THREE.Vector3());\n    model.position.x += (model.position.x - center.x);\n    model.position.y += (model.position.y - center.y);\n    model.position.z += (model.position.z - center.z);\n    this.el.setObject3D('mesh', model);\n  },\n\n  updateCollider: function () {\n    var el = this.el;\n    var boundingBoxSize = this.boundingBoxSize;\n    var aabb = this.aabb = this.aabb || new THREE.OBB();\n    this.obb = this.obb || new THREE.OBB();\n\n    // Defer if entity has not yet loaded.\n    if (!el.hasLoaded) {\n      el.addEventListener('loaded', this.updateCollider);\n      return;\n    }\n\n    this.updateBoundingBox();\n    aabb.halfSize.copy(boundingBoxSize).multiplyScalar(0.5);\n\n    if (this.el.sceneEl.systems['obb-collider'].data.showColliders) {\n      this.showCollider();\n    }\n  },\n\n  showCollider: function () {\n    this.updateColliderMesh();\n    this.renderColliderMesh.visible = true;\n  },\n\n  updateColliderMesh: function () {\n    var renderColliderMesh = this.renderColliderMesh;\n    var boundingBoxSize = this.boundingBoxSize;\n    if (!renderColliderMesh) {\n      this.initColliderMesh();\n      return;\n    }\n\n    // Destroy current geometry.\n    renderColliderMesh.geometry.dispose();\n    renderColliderMesh.geometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n  },\n\n  hideCollider: function () {\n    if (!this.renderColliderMesh) { return; }\n    this.renderColliderMesh.visible = false;\n  },\n\n  initColliderMesh: function () {\n    var boundingBoxSize;\n    var renderColliderGeometry;\n    var renderColliderMesh;\n\n    boundingBoxSize = this.boundingBoxSize;\n    renderColliderGeometry = this.renderColliderGeometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n    renderColliderMesh = this.renderColliderMesh = new THREE.Mesh(renderColliderGeometry, new THREE.MeshLambertMaterial({color: 0x00ff00, side: THREE.DoubleSide}));\n    renderColliderMesh.matrixAutoUpdate = false;\n    renderColliderMesh.matrixWorldAutoUpdate = false;\n    // THREE scene forces matrix world update even if matrixWorldAutoUpdate set to false.\n    renderColliderMesh.updateMatrixWorld = function () { /* no op */ };\n    this.el.sceneEl.object3D.add(renderColliderMesh);\n  },\n\n  updateBoundingBox: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var identityQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var auxEuler = this.auxEuler;\n      var boundingBox = this.boundingBox;\n      var size = this.data.size;\n      var trackedObject3D = this.trackedObject3D || this.el.object3D;\n      var boundingBoxSize = this.boundingBoxSize;\n      var minimumColliderDimension = this.data.minimumColliderDimension;\n\n      // user defined size takes precedence.\n      if (size) {\n        this.boundingBoxSize.x = size;\n        this.boundingBoxSize.y = size;\n        this.boundingBoxSize.z = size;\n        return;\n      }\n\n      // Bounding box is created axis-aligned AABB.\n      // If there's any rotation the box will have the wrong size.\n      // It undoes the local entity rotation and then restores so box has the expected size.\n      // We also undo the parent world rotation.\n      auxEuler.copy(trackedObject3D.rotation);\n      trackedObject3D.rotation.set(0, 0, 0);\n\n      trackedObject3D.parent.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n      auxMatrix.compose(auxPosition, identityQuaternion, auxScale);\n      trackedObject3D.parent.matrixWorld.copy(auxMatrix);\n\n      // Calculate bounding box size.\n      boundingBox.setFromObject(trackedObject3D, true);\n      boundingBox.getSize(boundingBoxSize);\n\n      // Enforce minimum dimensions.\n      boundingBoxSize.x = boundingBoxSize.x < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.x;\n      boundingBoxSize.y = boundingBoxSize.y < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.y;\n      boundingBoxSize.z = boundingBoxSize.z < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.z;\n\n      // Restore rotations.\n      trackedObject3D.parent.matrixWorld.compose(auxPosition, auxQuaternion, auxScale);\n      this.el.object3D.rotation.copy(auxEuler);\n    };\n  })(),\n\n  checkTrackedObject: function () {\n    var trackedObject3DPath = this.trackedObject3DPath;\n    var trackedObject3D;\n\n    if (trackedObject3DPath &&\n        trackedObject3DPath.length &&\n        !this.trackedObject3D) {\n      trackedObject3D = this.el;\n      for (var i = 0; i < trackedObject3DPath.length; i++) {\n        trackedObject3D = trackedObject3D[trackedObject3DPath[i]];\n        if (!trackedObject3D) { break; }\n      }\n      if (trackedObject3D) {\n        this.trackedObject3D = trackedObject3D;\n        this.updateCollider();\n      }\n    }\n    return this.trackedObject3D;\n  },\n\n  tick: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var obb = this.obb;\n      var renderColliderMesh = this.renderColliderMesh;\n      var trackedObject3D = this.checkTrackedObject() || this.el.object3D;\n\n      if (!trackedObject3D) { return; }\n\n      trackedObject3D.updateMatrix();\n      trackedObject3D.updateMatrixWorld(true);\n      trackedObject3D.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n\n      // Recalculate collider if scale has changed.\n      if ((Math.abs(auxScale.x - this.previousScale.x) > 0.0001)  ||\n          (Math.abs(auxScale.y - this.previousScale.y) > 0.0001) ||\n          (Math.abs(auxScale.z - this.previousScale.z) > 0.0001)) {\n        this.updateCollider();\n      }\n\n      this.previousScale.copy(auxScale);\n\n      // reset scale, keep position and rotation\n      auxScale.set(1, 1, 1);\n      auxMatrix.compose(auxPosition, auxQuaternion, auxScale);\n      // Update OBB visual representation.\n      if (renderColliderMesh) { renderColliderMesh.matrixWorld.copy(auxMatrix); }\n\n      // Reset OBB with AABB and apply entity matrix. applyMatrix4 changes OBB internal state.\n      obb.copy(this.aabb);\n      obb.applyMatrix4(auxMatrix);\n    };\n  })()\n});\n","import { debug } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport THREE from '../lib/three.js';\n\nvar warn = debug('components:obj-model:warn');\n\nexport var Component = registerComponent('obj-model', {\n  schema: {\n    mtl: {type: 'model'},\n    obj: {type: 'model'}\n  },\n\n  init: function () {\n    var self = this;\n\n    this.model = null;\n    this.objLoader = new THREE.OBJLoader();\n    this.mtlLoader = new THREE.MTLLoader(this.objLoader.manager);\n    // Allow cross-origin images to be loaded.\n    this.mtlLoader.crossOrigin = '';\n\n    this.el.addEventListener('componentinitialized', function (evt) {\n      if (!self.model) { return; }\n      if (evt.detail.name !== 'material') { return; }\n      self.applyMaterial();\n    });\n  },\n\n  update: function () {\n    var data = this.data;\n    if (!data.obj) { return; }\n    this.resetMesh();\n    this.loadObj(data.obj, data.mtl);\n  },\n\n  remove: function () {\n    this.resetMesh();\n  },\n\n  resetMesh: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  },\n\n  loadObj: function (objUrl, mtlUrl) {\n    var self = this;\n    var el = this.el;\n    var mtlLoader = this.mtlLoader;\n    var objLoader = this.objLoader;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n    var BASE_PATH = mtlUrl.substr(0, mtlUrl.lastIndexOf('/') + 1);\n\n    if (mtlUrl) {\n      // .OBJ with an .MTL.\n      if (el.hasAttribute('material')) {\n        warn('Material component properties are ignored when a .MTL is provided');\n      }\n      mtlLoader.setResourcePath(BASE_PATH);\n      mtlLoader.load(mtlUrl, function (materials) {\n        materials.preload();\n        objLoader.setMaterials(materials);\n        objLoader.load(objUrl, function (objModel) {\n          self.model = objModel;\n          self.model.traverse(function (object) {\n            if (object.isMesh) {\n              var material = object.material;\n              if (material.map) rendererSystem.applyColorCorrection(material.map);\n              if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n            }\n          });\n          el.setObject3D('mesh', objModel);\n          el.emit('model-loaded', {format: 'obj', model: objModel});\n        });\n      });\n      return;\n    }\n\n    // .OBJ only.\n    objLoader.load(objUrl, function loadObjOnly (objModel) {\n      self.model = objModel;\n      self.applyMaterial();\n      el.setObject3D('mesh', objModel);\n      el.emit('model-loaded', {format: 'obj', model: objModel});\n    });\n  },\n\n  /**\n   * Apply material from material component recursively.\n   */\n  applyMaterial: function () {\n    var material = this.el.components.material;\n    if (!material) { return; }\n    this.model.traverse(function (child) {\n      if (child instanceof THREE.Mesh) {\n        child.material = material.material;\n      }\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar OCULUS_GO_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus/go/oculus-go-controller.gltf';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-go';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - none\n * 2 - touchpad\n *\n * Axis:\n * 0 - touchpad x\n * 1 - touchpad y\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/oculus/oculus-go.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trigger, touchpad\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('oculus-go-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonColor: {type: 'color', default: '#FFFFFF'},\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                        this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', OCULUS_GO_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  // No need for onButtonChanged, since Oculus Go controller has no analog buttons.\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('oculus_go_button_trigger');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    if (!buttonMeshes || !buttonMeshes[buttonName]) { return; }\n    var color;\n    var button;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n      default:\n        color = this.data.buttonColor;\n    }\n    button = buttonMeshes[buttonName];\n    button.material.color.set(color);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport THREE from '../lib/three.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'pico-4';\nvar PICO_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/pico/pico4/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * Pico Controls\n */\nexport var Component = registerComponent('pico-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', PICO_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'pico-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  }\n});\n","/* global MutationObserver */\n\nimport THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('components:raycaster:warn');\n\n// Defines selectors that should be 'safe' for the MutationObserver used to\n// refresh the whitelist. Matches classnames, IDs, and presence of attributes.\n// Selectors for the value of an attribute, like [position=0 2 0], cannot be\n// reliably detected and are therefore disallowed.\nvar OBSERVER_SELECTOR_RE = /^[\\w\\s-.,[\\]#]*$/;\n\n// Configuration for the MutationObserver used to refresh the whitelist.\n// Listens for addition/removal of elements and attributes within the scene.\nvar OBSERVER_CONFIG = {\n  childList: true,\n  attributes: true,\n  subtree: true\n};\n\nvar EVENTS = {\n  INTERSECT: 'raycaster-intersected',\n  INTERSECTION: 'raycaster-intersection',\n  INTERSECT_CLEAR: 'raycaster-intersected-cleared',\n  INTERSECTION_CLEAR: 'raycaster-intersection-cleared',\n  INTERSECTION_CLOSEST_ENTITY_CHANGED: 'raycaster-closest-entity-changed'\n};\n\n/**\n * Raycaster component.\n *\n * Pass options to three.js Raycaster including which objects to test.\n * Poll for intersections.\n * Emit event on origin entity and on target entity on intersect.\n *\n * @member {array} intersectedEls - List of currently intersected entities.\n * @member {array} objects - Cached list of meshes to intersect.\n * @member {number} prevCheckTime - Previous time intersection was checked. To help interval.\n * @member {object} raycaster - three.js Raycaster.\n */\nexport var Component = registerComponent('raycaster', {\n  schema: {\n    autoRefresh: {default: true},\n    direction: {type: 'vec3', default: {x: 0, y: 0, z: -1}},\n    enabled: {default: true},\n    far: {default: 1000},\n    interval: {default: 0},\n    near: {default: 0},\n    objects: {default: ''},\n    origin: {type: 'vec3'},\n    showLine: {default: false},\n    lineColor: {default: 'white'},\n    lineOpacity: {default: 1},\n    useWorldCoordinates: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    this.clearedIntersectedEls = [];\n    this.unitLineEndVec3 = new THREE.Vector3();\n    this.intersectedEls = [];\n    this.intersections = [];\n    this.newIntersectedEls = [];\n    this.newIntersections = [];\n    this.objects = [];\n    this.prevCheckTime = undefined;\n    this.prevIntersectedEls = [];\n    this.rawIntersections = [];\n    this.raycaster = new THREE.Raycaster();\n    this.updateOriginDirection();\n    this.setDirty = this.setDirty.bind(this);\n    this.updateLine = this.updateLine.bind(this);\n    this.observer = new MutationObserver(this.setDirty);\n    this.dirty = true;\n    this.lineEndVec3 = new THREE.Vector3();\n    this.otherLineEndVec3 = new THREE.Vector3();\n    this.lineData = {end: this.lineEndVec3};\n\n    this.getIntersection = this.getIntersection.bind(this);\n    this.intersectedDetail = {el: this.el, getIntersection: this.getIntersection};\n    this.intersectedClearedDetail = {el: this.el};\n    this.intersectionClearedDetail = {clearedEls: this.clearedIntersectedEls};\n    this.intersectionDetail = {};\n  },\n\n  /**\n   * Create or update raycaster object.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var raycaster = this.raycaster;\n\n    // Set raycaster properties.\n    raycaster.far = data.far;\n    raycaster.near = data.near;\n\n    // Draw line.\n    if (data.showLine &&\n        (data.far !== oldData.far || data.origin !== oldData.origin ||\n         data.direction !== oldData.direction || !oldData.showLine)) {\n      // Calculate unit vector for line direction. Can be multiplied via scalar and added\n      // to origin to adjust line length.\n      this.unitLineEndVec3.copy(data.direction).normalize();\n      this.drawLine();\n    }\n\n    if (!data.showLine && oldData.showLine) {\n      el.removeAttribute('line');\n    }\n\n    if (data.objects !== oldData.objects && !OBSERVER_SELECTOR_RE.test(data.objects)) {\n      warn('[raycaster] Selector \"' + data.objects +\n           '\" may not update automatically with DOM changes.');\n    }\n\n    if (!data.objects) {\n      warn('[raycaster] For performance, please define raycaster.objects when using ' +\n           'raycaster or cursor components to whitelist which entities to intersect with. ' +\n           'e.g., raycaster=\"objects: [data-raycastable]\".');\n    }\n\n    if (data.autoRefresh !== oldData.autoRefresh && el.isPlaying) {\n      data.autoRefresh\n        ? this.addEventListeners()\n        : this.removeEventListeners();\n    }\n\n    if (oldData.enabled && !data.enabled) { this.clearAllIntersections(); }\n\n    if (data.objects !== oldData.objects) {\n      this.setDirty();\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    if (this.data.showLine) {\n      this.el.removeAttribute('line');\n    }\n    this.clearAllIntersections();\n  },\n\n  addEventListeners: function () {\n    if (!this.data.autoRefresh) { return; }\n    this.observer.observe(this.el.sceneEl, OBSERVER_CONFIG);\n    this.el.sceneEl.addEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.addEventListener('object3dremove', this.setDirty);\n  },\n\n  removeEventListeners: function () {\n    this.observer.disconnect();\n    this.el.sceneEl.removeEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.removeEventListener('object3dremove', this.setDirty);\n  },\n\n  /**\n   * Mark the object list as dirty, to be refreshed before next raycast.\n   */\n  setDirty: function () {\n    this.dirty = true;\n  },\n\n  /**\n   * Update list of objects to test for intersection.\n   */\n  refreshObjects: function () {\n    var data = this.data;\n    var els;\n\n    // If objects not defined, intersect with everything.\n    els = data.objects\n      ? this.el.sceneEl.querySelectorAll(data.objects)\n      : this.el.sceneEl.querySelectorAll('*');\n    this.objects = this.flattenObject3DMaps(els);\n    this.dirty = false;\n  },\n\n  /**\n   * Check for intersections and cleared intersections on an interval.\n   */\n  tock: function (time) {\n    var data = this.data;\n    var prevCheckTime = this.prevCheckTime;\n\n    if (!data.enabled) { return; }\n\n    // Only check for intersection if interval time has passed.\n    if (prevCheckTime && (time - prevCheckTime < data.interval)) { return; }\n\n    // Update check time.\n    this.prevCheckTime = time;\n    this.checkIntersections();\n  },\n\n  /**\n   * Raycast for intersections and emit events for current and cleared intersections.\n   */\n  checkIntersections: function () {\n    var clearedIntersectedEls = this.clearedIntersectedEls;\n    var el = this.el;\n    var data = this.data;\n    var i;\n    var intersectedEls = this.intersectedEls;\n    var intersection;\n    var intersections = this.intersections;\n    var newIntersectedEls = this.newIntersectedEls;\n    var newIntersections = this.newIntersections;\n    var prevIntersectedEls = this.prevIntersectedEls;\n    var rawIntersections = this.rawIntersections;\n\n    // Refresh the object whitelist if needed.\n    if (this.dirty) { this.refreshObjects(); }\n\n    // Store old previously intersected entities.\n    copyArray(this.prevIntersectedEls, this.intersectedEls);\n\n    // Raycast.\n    this.updateOriginDirection();\n    rawIntersections.length = 0;\n    this.raycaster.intersectObjects(this.objects, true, rawIntersections);\n\n    // Only keep intersections against objects that have a reference to an entity.\n    intersections.length = 0;\n    intersectedEls.length = 0;\n    for (i = 0; i < rawIntersections.length; i++) {\n      intersection = rawIntersections[i];\n      // Don't intersect with own line.\n      if (data.showLine && intersection.object === el.getObject3D('line')) {\n        continue;\n      }\n      if (intersection.object.el) {\n        intersections.push(intersection);\n        intersectedEls.push(intersection.object.el);\n      }\n    }\n\n    // Get newly intersected entities.\n    newIntersections.length = 0;\n    newIntersectedEls.length = 0;\n    for (i = 0; i < intersections.length; i++) {\n      if (prevIntersectedEls.indexOf(intersections[i].object.el) === -1) {\n        newIntersections.push(intersections[i]);\n        newIntersectedEls.push(intersections[i].object.el);\n      }\n    }\n\n    // Emit intersection cleared on both entities per formerly intersected entity.\n    clearedIntersectedEls.length = 0;\n    for (i = 0; i < prevIntersectedEls.length; i++) {\n      if (intersectedEls.indexOf(prevIntersectedEls[i]) !== -1) { continue; }\n      prevIntersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                 this.intersectedClearedDetail);\n      clearedIntersectedEls.push(prevIntersectedEls[i]);\n    }\n    if (clearedIntersectedEls.length) {\n      el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n    }\n\n    // Emit intersected on intersected entity per intersected entity.\n    for (i = 0; i < newIntersectedEls.length; i++) {\n      newIntersectedEls[i].emit(EVENTS.INTERSECT, this.intersectedDetail);\n    }\n\n    // Emit all intersections at once on raycasting entity.\n    if (newIntersections.length) {\n      this.intersectionDetail.els = newIntersectedEls;\n      this.intersectionDetail.intersections = newIntersections;\n      el.emit(EVENTS.INTERSECTION, this.intersectionDetail);\n    }\n\n    // Emit event when the closest intersected entity has changed.\n    if (prevIntersectedEls.length === 0 && intersections.length > 0 ||\n        prevIntersectedEls.length > 0 && intersections.length === 0 ||\n        (prevIntersectedEls.length && intersections.length &&\n        prevIntersectedEls[0] !== intersections[0].object.el)) {\n      this.intersectionDetail.els = this.intersectedEls;\n      this.intersectionDetail.intersections = intersections;\n      el.emit(EVENTS.INTERSECTION_CLOSEST_ENTITY_CHANGED, this.intersectionDetail);\n    }\n\n    // Update line length.\n    if (data.showLine) { setTimeout(this.updateLine); }\n  },\n\n  updateLine: function () {\n    var el = this.el;\n    var intersections = this.intersections;\n    var lineLength;\n\n    if (intersections.length) {\n      if (intersections[0].object.el === el && intersections[1]) {\n        lineLength = intersections[1].distance;\n      } else {\n        lineLength = intersections[0].distance;\n      }\n    }\n    this.drawLine(lineLength);\n  },\n\n  /**\n   * Return the most recent intersection details for a given entity, if any.\n   * @param {AEntity} el\n   * @return {Object}\n   */\n  getIntersection: function (el) {\n    var i;\n    var intersection;\n    for (i = 0; i < this.intersections.length; i++) {\n      intersection = this.intersections[i];\n      if (intersection.object.el === el) { return intersection; }\n    }\n    return null;\n  },\n\n  /**\n   * Update origin and direction of raycaster using entity transforms and supplied origin or\n   * direction offsets.\n   */\n  updateOriginDirection: (function () {\n    var direction = new THREE.Vector3();\n    var originVec3 = new THREE.Vector3();\n\n    // Closure to make quaternion/vector3 objects private.\n    return function updateOriginDirection () {\n      var el = this.el;\n      var data = this.data;\n\n      if (data.useWorldCoordinates) {\n        this.raycaster.set(data.origin, data.direction);\n        return;\n      }\n\n      el.object3D.updateMatrixWorld();\n      originVec3.setFromMatrixPosition(el.object3D.matrixWorld);\n\n      // If non-zero origin, translate the origin into world space.\n      if (data.origin.x !== 0 || data.origin.y !== 0 || data.origin.z !== 0) {\n        originVec3 = el.object3D.localToWorld(originVec3.copy(data.origin));\n      }\n\n      // three.js raycaster direction is relative to 0, 0, 0 NOT the origin / offset we\n      // provide. Apply the offset to the direction, then rotation from the object,\n      // and normalize.\n      direction.copy(data.direction).transformDirection(el.object3D.matrixWorld).normalize();\n\n      // Apply offset and direction, in world coordinates.\n      this.raycaster.set(originVec3, direction);\n    };\n  })(),\n\n  /**\n   * Create or update line to give raycaster visual representation.\n   * Customize the line through through line component.\n   * We draw the line in the raycaster component to customize the line to the\n   * raycaster's origin, direction, and far.\n   *\n   * Unlike the raycaster, we create the line as a child of the object. The line will\n   * be affected by the transforms of the objects, so we don't have to calculate transforms\n   * like we do with the raycaster.\n   *\n   * @param {number} length - Length of line. Pass in to shorten the line to the intersection\n   *   point. If not provided, length will default to the max length, `raycaster.far`.\n   */\n  drawLine: function (length) {\n    var data = this.data;\n    var el = this.el;\n    var endVec3;\n\n    // Switch each time vector so line update triggered and to avoid unnecessary vector clone.\n    endVec3 = this.lineData.end === this.lineEndVec3\n      ? this.otherLineEndVec3\n      : this.lineEndVec3;\n\n    // Treat Infinity as 1000m for the line.\n    if (length === undefined) {\n      length = data.far === Infinity ? 1000 : data.far;\n    }\n\n    // Update the length of the line if given. `unitLineEndVec3` is the direction\n    // given by data.direction, then we apply a scalar to give it a length and the\n    // origin point to offset it.\n    this.lineData.start = data.origin;\n    this.lineData.end = endVec3.copy(this.unitLineEndVec3).multiplyScalar(length).add(data.origin);\n    this.lineData.color = data.lineColor;\n    this.lineData.opacity = data.lineOpacity;\n    el.setAttribute('line', this.lineData);\n  },\n\n  /**\n   * Return A-Frame attachments of each element's object3D group (e.g., mesh).\n   * Children are flattened by one level, removing the THREE.Group wrapper,\n   * so that non-recursive raycasting remains useful.\n   *\n   * Only push children defined as component attachments (e.g., setObject3D),\n   * NOT actual children in the scene graph hierarchy.\n   *\n   * @param  {Array<Element>} els\n   * @return {Array<THREE.Object3D>}\n   */\n  flattenObject3DMaps: function (els) {\n    var key;\n    var i;\n    var objects = this.objects;\n    var scene = this.el.sceneEl.object3D;\n\n    function isAttachedToScene (object) {\n      if (object.parent) {\n        return isAttachedToScene(object.parent);\n      } else {\n        return (object === scene);\n      }\n    }\n\n    // Push meshes and other attachments onto list of objects to intersect.\n    objects.length = 0;\n    for (i = 0; i < els.length; i++) {\n      var el = els[i];\n      if (el.isEntity && el.object3D && isAttachedToScene(el.object3D)) {\n        for (key in el.object3DMap) {\n          objects.push(el.getObject3D(key));\n        }\n      }\n    }\n\n    return objects;\n  },\n\n  clearAllIntersections: function () {\n    var i;\n    for (i = 0; i < this.intersectedEls.length; i++) {\n      this.intersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                  this.intersectedClearedDetail);\n    }\n    copyArray(this.clearedIntersectedEls, this.intersectedEls);\n    this.intersectedEls.length = 0;\n    this.intersections.length = 0;\n    this.el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n  }\n});\n\n/**\n * Copy contents of one array to another without allocating new array.\n */\nfunction copyArray (a, b) {\n  var i;\n  a.length = b.length;\n  for (i = 0; i < b.length; i++) {\n    a[i] = b[i];\n  }\n}\n","import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('position', {\n  schema: {type: 'vec3'},\n\n  update: function () {\n    var object3D = this.el.object3D;\n    var data = this.data;\n    object3D.position.set(data.x, data.y, data.z);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.position.set(0, 0, 0);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\nvar degToRad = THREE.MathUtils.degToRad;\n\nexport var Component = registerComponent('rotation', {\n  schema: {type: 'vec3'},\n\n  /**\n   * Updates object3D rotation.\n   */\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.rotation.set(degToRad(data.x), degToRad(data.y), degToRad(data.z), 'YXZ');\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.rotation.set(0, 0, 0);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import THREE from '../lib/three.js';\nimport { KEYCODE_TO_CODE } from '../constants/keyboardevent.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar shouldCaptureKeyEvent = utils.shouldCaptureKeyEvent;\n\nvar CLAMP_VELOCITY = 0.00001;\nvar MAX_DELTA = 0.2;\nvar KEYS = [\n  'KeyW', 'KeyA', 'KeyS', 'KeyD',\n  'ArrowUp', 'ArrowLeft', 'ArrowRight', 'ArrowDown'\n];\n\n/**\n * WASD component to control entities using WASD keys.\n */\nexport var Component = registerComponent('wasd-controls', {\n  schema: {\n    acceleration: {default: 65},\n    adAxis: {default: 'x', oneOf: ['x', 'y', 'z']},\n    adEnabled: {default: true},\n    adInverted: {default: false},\n    enabled: {default: true},\n    fly: {default: false},\n    wsAxis: {default: 'z', oneOf: ['x', 'y', 'z']},\n    wsEnabled: {default: true},\n    wsInverted: {default: false}\n  },\n  after: ['look-controls'],\n\n  init: function () {\n    // To keep track of the pressed keys.\n    this.keys = {};\n    this.easing = 1.1;\n\n    this.velocity = new THREE.Vector3();\n\n    // Bind methods and add event listeners.\n    this.onBlur = this.onBlur.bind(this);\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.attachVisibilityEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var data = this.data;\n    var el = this.el;\n    var velocity = this.velocity;\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis] &&\n        isEmptyObject(this.keys)) { return; }\n\n    // Update velocity.\n    delta = delta / 1000;\n    this.updateVelocity(delta);\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) { return; }\n\n    // Get movement vector and translate position.\n    el.object3D.position.add(this.getMovementVector(delta));\n  },\n\n  update: function (oldData) {\n    // Reset velocity if axis have changed.\n    if (oldData.adAxis !== this.data.adAxis) { this.velocity[oldData.adAxis] = 0; }\n    if (oldData.wsAxis !== this.data.wsAxis) { this.velocity[oldData.wsAxis] = 0; }\n  },\n\n  remove: function () {\n    this.removeKeyEventListeners();\n    this.removeVisibilityEventListeners();\n  },\n\n  play: function () {\n    this.attachKeyEventListeners();\n  },\n\n  pause: function () {\n    this.keys = {};\n    this.removeKeyEventListeners();\n  },\n\n  updateVelocity: function (delta) {\n    var acceleration;\n    var adAxis;\n    var adSign;\n    var data = this.data;\n    var keys = this.keys;\n    var velocity = this.velocity;\n    var wsAxis;\n    var wsSign;\n\n    adAxis = data.adAxis;\n    wsAxis = data.wsAxis;\n\n    // If FPS too low, reset velocity.\n    if (delta > MAX_DELTA) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // https://gamedev.stackexchange.com/questions/151383/frame-rate-independant-movement-with-acceleration\n    var scaledEasing = Math.pow(1 / this.easing, delta * 60);\n    // Velocity Easing.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] = velocity[adAxis] * scaledEasing;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] = velocity[wsAxis] * scaledEasing;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) { velocity[adAxis] = 0; }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) { velocity[wsAxis] = 0; }\n\n    if (!data.enabled) { return; }\n\n    // Update velocity using keys pressed.\n    acceleration = data.acceleration;\n    if (data.adEnabled) {\n      adSign = data.adInverted ? -1 : 1;\n      if (keys.KeyA || keys.ArrowLeft) { velocity[adAxis] -= adSign * acceleration * delta; }\n      if (keys.KeyD || keys.ArrowRight) { velocity[adAxis] += adSign * acceleration * delta; }\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      if (keys.KeyW || keys.ArrowUp) { velocity[wsAxis] -= wsSign * acceleration * delta; }\n      if (keys.KeyS || keys.ArrowDown) { velocity[wsAxis] += wsSign * acceleration * delta; }\n    }\n  },\n\n  getMovementVector: (function () {\n    var directionVector = new THREE.Vector3(0, 0, 0);\n    var rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n\n    return function (delta) {\n      var rotation = this.el.getAttribute('rotation');\n      var velocity = this.velocity;\n      var xRotation;\n\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n\n      // Absolute.\n      if (!rotation) { return directionVector; }\n\n      xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(THREE.MathUtils.degToRad(xRotation), THREE.MathUtils.degToRad(rotation.y), 0);\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  })(),\n\n  attachVisibilityEventListeners: function () {\n    window.oncontextmenu = this.onContextMenu;\n    window.addEventListener('blur', this.onBlur);\n    window.addEventListener('focus', this.onFocus);\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  removeVisibilityEventListeners: function () {\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('focus', this.onFocus);\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  attachKeyEventListeners: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  },\n\n  removeKeyEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  },\n\n  onContextMenu: function () {\n    var keys = Object.keys(this.keys);\n    for (var i = 0; i < keys.length; i++) {\n      delete this.keys[keys[i]];\n    }\n  },\n\n  onBlur: function () {\n    this.pause();\n  },\n\n  onFocus: function () {\n    this.play();\n  },\n\n  onVisibilityChange: function () {\n    if (document.hidden) {\n      this.onBlur();\n    } else {\n      this.onFocus();\n    }\n  },\n\n  onKeyDown: function (event) {\n    var code;\n    if (!shouldCaptureKeyEvent(event)) { return; }\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    if (KEYS.indexOf(code) !== -1) { this.keys[code] = true; }\n  },\n\n  onKeyUp: function (event) {\n    var code;\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    delete this.keys[code];\n  }\n});\n\nfunction isEmptyObject (keys) {\n  var key;\n  for (key in keys) { return false; }\n  return true;\n}\n","import { registerComponent } from '../core/component.js';\nimport { debug } from '../utils/index.js';\nimport THREE from '../lib/three.js';\n\nvar warn = debug('components:sound:warn');\n\n/**\n * Sound component.\n */\nexport var Component = registerComponent('sound', {\n  schema: {\n    autoplay: {default: false},\n    distanceModel: {default: 'inverse', oneOf: ['linear', 'inverse', 'exponential']},\n    loop: {default: false},\n    loopStart: {default: 0},\n    loopEnd: {default: 0},\n    maxDistance: {default: 10000},\n    on: {default: ''},\n    poolSize: {default: 1},\n    positional: {default: true},\n    refDistance: {default: 1},\n    rolloffFactor: {default: 1},\n    src: {type: 'audio'},\n    volume: {default: 1}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.listener = null;\n    this.audioLoader = new THREE.AudioLoader();\n    this.pool = new THREE.Group();\n    this.loaded = false;\n    this.mustPlay = false;\n\n    // Don't pass evt because playSound takes a function as parameter.\n    this.playSoundBound = function () { self.playSound(); };\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var i;\n    var sound;\n    var srcChanged = data.src !== oldData.src;\n\n    // Create new sound if not yet created or changing `src`.\n    if (srcChanged) {\n      if (!data.src) { return; }\n      this.setupSound();\n    }\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (data.positional) {\n        sound.setDistanceModel(data.distanceModel);\n        sound.setMaxDistance(data.maxDistance);\n        sound.setRefDistance(data.refDistance);\n        sound.setRolloffFactor(data.rolloffFactor);\n      }\n      sound.setLoop(data.loop);\n      sound.setLoopStart(data.loopStart);\n\n      // With a loop start specified without a specified loop end, the end of the loop should be the end of the file\n      if (data.loopStart !== 0 && data.loopEnd === 0) {\n        sound.setLoopEnd(sound.buffer.duration);\n      } else {\n        sound.setLoopEnd(data.loopEnd);\n      }\n\n      sound.setVolume(data.volume);\n      sound.isPaused = false;\n    }\n\n    if (data.on !== oldData.on) {\n      this.updateEventListener(oldData.on);\n    }\n\n    // All sound values set. Load in `src`.\n    if (srcChanged) {\n      var self = this;\n\n      this.loaded = false;\n      this.audioLoader.load(data.src, function (buffer) {\n        for (i = 0; i < self.pool.children.length; i++) {\n          sound = self.pool.children[i];\n          sound.setBuffer(buffer);\n        }\n        self.loaded = true;\n\n        // Remove this key from cache, otherwise we can't play it again\n        THREE.Cache.remove(data.src);\n        if (self.data.autoplay || self.mustPlay) { self.playSound(self.processSound); }\n        self.el.emit('sound-loaded', self.evtDetail, false);\n      });\n    }\n  },\n\n  pause: function () {\n    this.stopSound();\n    this.removeEventListener();\n  },\n\n  play: function () {\n    if (this.data.autoplay) { this.playSound(); }\n    this.updateEventListener();\n  },\n\n  remove: function () {\n    var i;\n    var sound;\n\n    this.removeEventListener();\n\n    if (this.el.getObject3D(this.attrName)) {\n      this.el.removeObject3D(this.attrName);\n    }\n\n    try {\n      for (i = 0; i < this.pool.children.length; i++) {\n        sound = this.pool.children[i];\n        sound.disconnect();\n      }\n    } catch (e) {\n      // disconnect() will throw if it was never connected initially.\n      warn('Audio source not properly disconnected');\n    }\n  },\n\n  /**\n  *  Update listener attached to the user defined on event.\n  */\n  updateEventListener: function (oldEvt) {\n    var el = this.el;\n    if (oldEvt) { el.removeEventListener(oldEvt, this.playSoundBound); }\n    el.addEventListener(this.data.on, this.playSoundBound);\n  },\n\n  removeEventListener: function () {\n    this.el.removeEventListener(this.data.on, this.playSoundBound);\n  },\n\n  /**\n   * Removes current sound object, creates new sound object, adds to entity.\n   *\n   * @returns {object} sound\n   */\n  setupSound: function () {\n    var el = this.el;\n    var i;\n    var sceneEl = el.sceneEl;\n    var self = this;\n    var sound;\n\n    if (this.pool.children.length > 0) {\n      this.stopSound();\n      el.removeObject3D('sound');\n    }\n\n    // Only want one AudioListener. Cache it on the scene.\n    var listener = this.listener = sceneEl.audioListener || new THREE.AudioListener();\n    sceneEl.audioListener = listener;\n\n    if (sceneEl.camera) {\n      sceneEl.camera.add(listener);\n    }\n\n    // Wait for camera if necessary.\n    sceneEl.addEventListener('camera-set-active', function (evt) {\n      evt.detail.cameraEl.getObject3D('camera').add(listener);\n    });\n\n    // Create [poolSize] audio instances and attach them to pool\n    this.pool = new THREE.Group();\n    for (i = 0; i < this.data.poolSize; i++) {\n      sound = this.data.positional\n        ? new THREE.PositionalAudio(listener)\n        : new THREE.Audio(listener);\n      this.pool.add(sound);\n    }\n    el.setObject3D(this.attrName, this.pool);\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      sound.onEnded = function () {\n        this.isPlaying = false;\n        self.el.emit('sound-ended', self.evtDetail, false);\n      };\n    }\n  },\n\n  /**\n   * Pause all the sounds in the pool.\n   */\n  pauseSound: function () {\n    var i;\n    var sound;\n\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer || !sound.isPlaying || sound.isPaused) {\n        continue;\n      }\n      sound.isPaused = true;\n      sound.pause();\n    }\n  },\n\n  /**\n   * Look for an unused sound in the pool and play it if found.\n   */\n  playSound: function (processSound) {\n    var found;\n    var i;\n    var sound;\n\n    if (!this.loaded) {\n      warn('Sound not loaded yet. It will be played once it finished loading');\n      this.mustPlay = true;\n      this.processSound = processSound;\n      return;\n    }\n\n    found = false;\n    this.isPlaying = true;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.isPlaying && sound.buffer && !found) {\n        if (processSound) { processSound(sound); }\n        sound.play();\n        sound.isPaused = false;\n        found = true;\n        continue;\n      }\n    }\n\n    if (!found) {\n      warn('All the sounds are playing. If you need to play more sounds simultaneously ' +\n           'consider increasing the size of pool with the `poolSize` attribute.', this.el);\n      return;\n    }\n\n    this.mustPlay = false;\n    this.processSound = undefined;\n  },\n\n  /**\n   * Stop all the sounds in the pool.\n   */\n  stopSound: function () {\n    var i;\n    var sound;\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer) { return; }\n      sound.stop();\n    }\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('scale', {\n  schema: {\n    type: 'vec3',\n    default: {x: 1, y: 1, z: 1}\n  },\n\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.scale.set(data.x, data.y, data.z);\n    object3D.matrixNeedsUpdate = true;\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.scale.set(1, 1, 1);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Shadow component.\n *\n * When applied to an entity, that entity's geometry and any descendants will cast or receive\n * shadows as specified by the `cast` and `receive` properties.\n */\nexport var Component = registerComponent('shadow', {\n  schema: {\n    cast: {default: true},\n    receive: {default: true}\n  },\n\n  init: function () {\n    this.onMeshChanged = this.update.bind(this);\n    this.el.addEventListener('object3dset', this.onMeshChanged);\n    this.system.setShadowMapEnabled(true);\n  },\n\n  update: function () {\n    var data = this.data;\n    this.updateDescendants(data.cast, data.receive);\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeEventListener('object3dset', this.onMeshChanged);\n    this.updateDescendants(false, false);\n  },\n\n  updateDescendants: function (cast, receive) {\n    var sceneEl = this.el.sceneEl;\n    this.el.object3D.traverse(function (node) {\n      if (!(node instanceof THREE.Mesh)) { return; }\n\n      node.castShadow = cast;\n      node.receiveShadow = receive;\n\n      // If scene has already rendered, materials must be updated.\n      if (sceneEl.hasLoaded && node.material) {\n        var materials = Array.isArray(node.material) ? node.material : [node.material];\n        for (var i = 0; i < materials.length; i++) {\n          materials[i].needsUpdate = true;\n        }\n      }\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport * as controllerUtils from '../utils/tracked-controls.js';\n\nvar EVENTS = {\n  AXISMOVE: 'axismove',\n  BUTTONCHANGED: 'buttonchanged',\n  BUTTONDOWN: 'buttondown',\n  BUTTONUP: 'buttonup',\n  TOUCHSTART: 'touchstart',\n  TOUCHEND: 'touchend'\n};\n\n/**\n * Tracked controls.\n * Abstract controls to support 6DOF tracked input controllers.\n *\n * @property {string} id - String corresponding to the WebXR controller input profile ids.\n * @property {number} controller - Index of controller in array returned by Gamepad API.\n *  Only used if hand property is not set.\n * @property {boolean} autoHide - shows / hides the entity automatically when the controller is\n * connected or desconneted.\n * @property {number} hand - If multiple controllers found with id, choose the one with the\n *  given value for hand. If set, we ignore 'controller' property\n * @property {boolean} handTrackingEnabled - Assumes a controller exposed via the WebXR Hand Input Module.\n * @property {boolean} iterateControllerProfiles - Iterates over all of the WebXR controller input profiles.\n */\nexport var Component = registerComponent('tracked-controls', {\n  schema: {\n    id: {type: 'string', default: ''},\n    controller: {default: -1},\n    autoHide: {default: true},\n    hand: {type: 'string', default: ''},\n    handTrackingEnabled: {default: false},\n    iterateControllerProfiles: {default: false}\n  },\n\n  init: function () {\n    this.buttonEventDetails = {};\n    this.buttonStates = this.el.components['tracked-controls'].buttonStates = {};\n    this.axis = this.el.components['tracked-controls'].axis = [0, 0, 0];\n    this.changedAxes = [];\n    this.axisMoveEventDetail = {axis: this.axis, changed: this.changedAxes};\n\n    this.updateController = this.updateController.bind(this);\n  },\n\n  update: function () {\n    this.updateController();\n  },\n\n  play: function () {\n    var sceneEl = this.el.sceneEl;\n    this.updateController();\n    sceneEl.addEventListener('controllersupdated', this.updateController);\n  },\n\n  pause: function () {\n    var sceneEl = this.el.sceneEl;\n    sceneEl.removeEventListener('controllersupdated', this.updateController);\n  },\n\n  isControllerPresent: function (evt) {\n    if (!this.controller || this.controller.gamepad) { return false; }\n    if (evt.inputSource.handedness !== 'none' &&\n        evt.inputSource.handedness !== this.data.hand) {\n      return false;\n    }\n    return true;\n  },\n\n  /**\n   * Handle update controller match criteria (such as `id`, `idPrefix`, `hand`, `controller`)\n   */\n  updateController: function () {\n    this.controller = controllerUtils.findMatchingControllerWebXR(\n      this.system.controllers,\n      this.data.id,\n      this.data.hand,\n      this.data.controller,\n      this.data.iterateControllerProfiles,\n      this.data.handTrackingEnabled\n    );\n    // Legacy handle to the controller for old components.\n    this.el.components['tracked-controls'].controller = this.controller;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.controller;\n    var frame = sceneEl.frame;\n    if (this.data.autoHide) { this.el.object3D.visible = !!controller; }\n    if (!controller || !sceneEl.frame || !this.system.referenceSpace) { return; }\n    if (!controller.hand) {\n      this.pose = frame.getPose(controller.gripSpace, this.system.referenceSpace);\n      this.updatePose();\n      this.updateButtons();\n    }\n  },\n\n  updatePose: function () {\n    var object3D = this.el.object3D;\n    var pose = this.pose;\n    if (!pose) { return; }\n    object3D.matrix.elements = pose.transform.matrix;\n    object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n  },\n\n  /**\n   * Handle button changes including axes, presses, touches, values.\n   */\n  updateButtons: function () {\n    var buttonState;\n    var id;\n    var controller = this.controller;\n    var gamepad;\n    if (!controller || !controller.gamepad) { return; }\n\n    gamepad = controller.gamepad;\n    // Check every button.\n    for (id = 0; id < gamepad.buttons.length; ++id) {\n      // Initialize button state.\n      if (!this.buttonStates[id]) {\n        this.buttonStates[id] = {pressed: false, touched: false, value: 0};\n      }\n      if (!this.buttonEventDetails[id]) {\n        this.buttonEventDetails[id] = {id: id, state: this.buttonStates[id]};\n      }\n\n      buttonState = gamepad.buttons[id];\n      this.handleButton(id, buttonState);\n    }\n    // Check axes.\n    this.handleAxes();\n  },\n\n  /**\n   * Handle presses and touches for a single button.\n   *\n   * @param {number} id - Index of button in Gamepad button array.\n   * @param {number} buttonState - Value of button state from 0 to 1.\n   * @returns {boolean} Whether button has changed in any way.\n   */\n  handleButton: function (id, buttonState) {\n    var changed;\n    changed = this.handlePress(id, buttonState) |\n              this.handleTouch(id, buttonState) |\n              this.handleValue(id, buttonState);\n    if (!changed) { return false; }\n    this.el.emit(EVENTS.BUTTONCHANGED, this.buttonEventDetails[id], false);\n    return true;\n  },\n\n  /**\n   * An axis is an array of values from -1 (up, left) to 1 (down, right).\n   * Compare each component of the axis to the previous value to determine change.\n   *\n   * @returns {boolean} Whether axes changed.\n   */\n  handleAxes: function () {\n    var changed = false;\n    var controllerAxes = this.controller.gamepad.axes;\n    var i;\n    var previousAxis = this.axis;\n    var changedAxes = this.changedAxes;\n\n    // Check if axis changed.\n    this.changedAxes.splice(0, this.changedAxes.length);\n    for (i = 0; i < controllerAxes.length; ++i) {\n      changedAxes.push(previousAxis[i] !== controllerAxes[i]);\n      if (changedAxes[i]) { changed = true; }\n    }\n    if (!changed) { return false; }\n\n    this.axis.splice(0, this.axis.length);\n    for (i = 0; i < controllerAxes.length; i++) {\n      this.axis.push(controllerAxes[i]);\n    }\n    this.el.emit(EVENTS.AXISMOVE, this.axisMoveEventDetail, false);\n    return true;\n  },\n\n  /**\n   * Determine whether a button press has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button press state changed.\n   */\n  handlePress: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.pressed === previousButtonState.pressed) { return false; }\n\n    evtName = buttonState.pressed ? EVENTS.BUTTONDOWN : EVENTS.BUTTONUP;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.pressed = buttonState.pressed;\n    return true;\n  },\n\n  /**\n   * Determine whether a button touch has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button touch state changed.\n   */\n  handleTouch: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.touched === previousButtonState.touched) { return false; }\n\n    evtName = buttonState.touched ? EVENTS.TOUCHSTART : EVENTS.TOUCHEND;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.touched = buttonState.touched;\n    return true;\n  },\n\n  /**\n   * Determine whether a button value has changed.\n   *\n   * @param {string} id - Id of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button value changed.\n   */\n  handleValue: function (id, buttonState) {\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.value === previousButtonState.value) { return false; }\n\n    previousButtonState.value = buttonState.value;\n    return true;\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport THREE from '../lib/three.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar INDEX_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/valve/index/valve-index-';\nvar INDEX_CONTROLLER_MODEL_URL = {\n  left: INDEX_CONTROLLER_MODEL_BASE_URL + 'left.glb',\n  right: INDEX_CONTROLLER_MODEL_BASE_URL + 'right.glb'\n};\n\nvar GAMEPAD_ID_PREFIX = 'valve';\n\nvar INDEX_CONTROLLER_ROTATION_OFFSET = {\n  left: {x: 0, y: -0.05, z: 0.06},\n  right: {x: 0, y: -0.05, z: 0.06}\n};\n\nvar INDEX_CONTROLLER_POSITION_OFFSET = {\n  left: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'},\n  right: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'}\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * trackpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('valve-index-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: {\n    axes: {\n      trackpad: [0, 1],\n      thumbstick: [2, 3]\n    },\n    buttons: ['trigger', 'grip', 'trackpad', 'thumbstick', 'abutton']\n  },\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: controllerIndex, iterateControllerProfiles: true, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      // Hand IDs: 1 = right, 0 = left, 2 = anything else.\n      controller: data.hand === 'right' ? 1 : data.hand === 'left' ? 0 : 2,\n      hand: data.hand\n    });\n\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var data = this.data;\n    if (!data.model) { return; }\n    this.el.setAttribute('gltf-model', '' + INDEX_CONTROLLER_MODEL_URL[data.hand] + '');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = this.triggerOriginalRotationX - analogValue * (Math.PI / 40);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    this.triggerOriginalRotationX = buttonMeshes.trigger.rotation.x;\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.copy(INDEX_CONTROLLER_POSITION_OFFSET[this.data.hand]);\n    controllerObject3D.rotation.copy(INDEX_CONTROLLER_ROTATION_OFFSET[this.data.hand]);\n\n    this.el.emit('controllermodelready', {\n      name: 'valve-index-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n  setButtonColor: function (buttonName, color) {\n    // TODO: The meshes aren't set up correctly now, skipping for the moment\n    return;\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\n/**\n * Visibility component.\n */\nexport var Component = registerComponent('visible', {\n  schema: {default: true},\n\n  update: function () {\n    this.el.object3D.visible = this.data;\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_CONTROLLER_MODEL_OBJ_URL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.obj';\nvar VIVE_CONTROLLER_MODEL_OBJ_MTL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.mtl';\n\n// Prefix for HTC Vive controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - none (dispatch but better for menu options)\n * 4 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/htc/htc-vive.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'none']\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * touchpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('obj-model', {\n      obj: VIVE_CONTROLLER_MODEL_OBJ_URL,\n      mtl: VIVE_CONTROLLER_MODEL_OBJ_MTL\n    });\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = -analogValue * (Math.PI / 12);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.set(0, -0.015, 0.04);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n\n  setButtonColor: function (buttonName, color) {\n    var buttonMeshes = this.buttonMeshes;\n\n    if (!buttonMeshes) { return; }\n\n    // Need to do both left and right sides for grip.\n    if (buttonName === 'grip') {\n      buttonMeshes.grip.left.material.color.set(color);\n      buttonMeshes.grip.right.material.color.set(color);\n      return;\n    }\n    buttonMeshes[buttonName].material.color.set(color);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_FOCUS_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/vive/focus-controller/focus-controller.gltf';\n\n// Prefix for HTC Vive Focus Controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive-focus';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 2 - touchpad\n * 4 - menu\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad', 'none', 'menu']\n};\n\n/**\n * Vive Focus controls.\n * Interface with Vive Focus controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-focus-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n    this.addControllersUpdateListener();\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n    this.removeControllersUpdateListener();\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                        this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', VIVE_FOCUS_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('BumperKey');\n    buttonMeshes.triggerPressed = controllerObject3D.getObjectByName('BumperKey_Press');\n    if (buttonMeshes.triggerPressed) {\n      buttonMeshes.triggerPressed.visible = false;\n    }\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.touchpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.trackpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    if (buttonMeshes.trackpadPressed) {\n      buttonMeshes.trackpadPressed.visible = false;\n    }\n  },\n\n  // No analog buttons, only emits 0/1 values\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    var pressedName = buttonName + 'Pressed';\n    if (!buttonMeshes || !buttonMeshes[buttonName] || !buttonMeshes[pressedName]) {\n      return;\n    }\n    var color;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n    }\n    if (color) {\n      buttonMeshes[pressedName].material.color.set(color);\n    }\n    buttonMeshes[pressedName].visible = !!color;\n    buttonMeshes[buttonName].visible = !color;\n  }\n});\n","// Tiny KeyboardEvent.code polyfill.\nexport var KEYCODE_TO_CODE = {\n  '38': 'ArrowUp',\n  '37': 'ArrowLeft',\n  '40': 'ArrowDown',\n  '39': 'ArrowRight',\n  '87': 'KeyW',\n  '65': 'KeyA',\n  '83': 'KeyS',\n  '68': 'KeyD'\n};\n","/* global THREE */\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nimport { DEFAULT_HANDEDNESS, AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar debug = utils.debug('components:windows-motion-controls:debug');\nvar warn = utils.debug('components:windows-motion-controls:warn');\n\nvar MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/microsoft/';\nvar MODEL_FILENAMES = { left: 'left.glb', right: 'right.glb', default: 'universal.glb' };\n\nvar GAMEPAD_ID_PREFIX = 'windows-mixed-reality';\n\nvar INPUT_MAPPING = {\n  // A-Frame specific semantic axis names\n  axes: {'touchpad': [0, 1], 'thumbstick': [2, 3]},\n  // A-Frame specific semantic button names\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick', 'menu'],\n  // A mapping of the semantic name to node name in the glTF model file,\n  // that should be transformed by axis value.\n  // This array mirrors the browser Gamepad.axes array, such that\n  // the mesh corresponding to axis 0 is in this array index 0.\n  axisMeshNames: [\n    'TOUCHPAD_TOUCH_X',\n    'TOUCHPAD_TOUCH_X',\n    'THUMBSTICK_X',\n    'THUMBSTICK_Y'\n  ],\n  // A mapping of the semantic name to button node name in the glTF model file,\n  // that should be transformed by button value.\n  buttonMeshNames: {\n    'trigger': 'SELECT',\n    'menu': 'MENU',\n    'squeeze': 'GRASP',\n    'thumbstick': 'THUMBSTICK_PRESS',\n    'touchpad': 'TOUCHPAD_PRESS'\n  },\n  pointingPoseMeshName: 'POINTING_POSE'\n};\n\n/**\n * Windows Motion Controller controls.\n * Interface with Windows Motion Controller controllers and map Gamepad events to\n * controller buttons: trackpad, trigger, grip, menu, thumbstick\n * Load a controller model and transform the pressed buttons.\n */\nexport var Component = registerComponent('windows-motion-controls', {\n  schema: {\n    hand: {default: DEFAULT_HANDEDNESS},\n    // It is possible to have multiple pairs of controllers attached (a pair has both left and right).\n    // Set this to 1 to use a controller from the second pair, 2 from the third pair, etc.\n    pair: {default: 0},\n    // If true, loads the controller glTF asset.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelError = this.onModelError.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onControllerConnected = function () { self.setModelVisibility(true); };\n    this.onControllerDisconnected = function () { self.setModelVisibility(false); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n\n    // Cache for submeshes that we have looked up by name.\n    this.loadedMeshInfo = {\n      buttonMeshes: null,\n      axisMeshes: null\n    };\n\n    // Pointing poses\n    this.rayOrigin = {\n      origin: new THREE.Vector3(),\n      direction: new THREE.Vector3(0, 0, -1),\n      createdFromMesh: false\n    };\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-error', this.onModelError);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-error', this.onModelError);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      index: this.data.pair,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  updateControllerModel: function () {\n    // If we do not want to load a model, or, have already loaded the model, emit the controllermodelready event.\n    if (!this.data.model || this.rayOrigin.createdFromMesh) {\n      this.modelReady();\n      return;\n    }\n\n    var sourceUrl = this.createControllerModelUrl();\n    this.loadModel(sourceUrl);\n  },\n\n  /**\n   * Helper function that constructs a URL from the controller ID suffix, for future proofed\n   * art assets.\n   */\n  createControllerModelUrl: function (forceDefault) {\n    // Determine the device specific folder based on the ID suffix\n    var device = 'default';\n    var hand = this.data.hand;\n    var filename;\n\n    // Hand\n    filename = MODEL_FILENAMES[hand] || MODEL_FILENAMES.default;\n\n    // Final url\n    return MODEL_BASE_URL + device + '/' + filename;\n  },\n\n  injectTrackedControls: function () {\n    var data = this.data;\n    this.el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      controller: data.pair,\n      hand: data.hand\n    });\n\n    this.updateControllerModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelError: function (evt) {\n    var defaultUrl = this.createControllerModelUrl(true);\n    if (evt.detail.src !== defaultUrl) {\n      warn('Failed to load controller model for device, attempting to load default.');\n      this.loadModel(defaultUrl);\n    } else {\n      warn('Failed to load default controller model.');\n    }\n  },\n\n  loadModel: function (url) {\n    // The model is loaded by the gltf-model component when this attribute is initially set,\n    // removed and re-loaded if the given url changes.\n    this.el.setAttribute('gltf-model', 'url(' + url + ')');\n  },\n\n  onModelLoaded: function (evt) {\n    var rootNode = this.controllerModel = evt.detail.model;\n    var loadedMeshInfo = this.loadedMeshInfo;\n    var i;\n    var meshName;\n    var mesh;\n    var meshInfo;\n\n    if (evt.target !== this.el) { return; }\n\n    debug('Processing model');\n\n    // Reset the caches\n    loadedMeshInfo.buttonMeshes = {};\n    loadedMeshInfo.axisMeshes = {};\n\n    // Cache our meshes so we aren't traversing the hierarchy per frame\n    if (rootNode) {\n      // Button Meshes\n      for (i = 0; i < this.mapping.buttons.length; i++) {\n        meshName = this.mapping.buttonMeshNames[this.mapping.buttons[i]];\n        if (!meshName) {\n          debug('Skipping unknown button at index: ' + i + ' with mapped name: ' + this.mapping.buttons[i]);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing button mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          pressed: getImmediateChildByName(mesh, 'PRESSED'),\n          unpressed: getImmediateChildByName(mesh, 'UNPRESSED')\n        };\n        if (meshInfo.value && meshInfo.pressed && meshInfo.unpressed) {\n          loadedMeshInfo.buttonMeshes[this.mapping.buttons[i]] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this button won't have transforms applied as mapped button value changes.\n          warn('Missing button submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', PRESSED: ' + !!meshInfo.pressed +\n            ', UNPRESSED:' + !!meshInfo.unpressed +\n            ')');\n        }\n      }\n\n      // Axis Meshes\n      for (i = 0; i < this.mapping.axisMeshNames.length; i++) {\n        meshName = this.mapping.axisMeshNames[i];\n        if (!meshName) {\n          debug('Skipping unknown axis at index: ' + i);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing axis mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          min: getImmediateChildByName(mesh, 'MIN'),\n          max: getImmediateChildByName(mesh, 'MAX')\n        };\n        if (meshInfo.value && meshInfo.min && meshInfo.max) {\n          loadedMeshInfo.axisMeshes[i] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this axis won't have transforms applied as mapped axis values change.\n          warn('Missing axis submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', MIN: ' + !!meshInfo.min +\n            ', MAX:' + !!meshInfo.max +\n            ')');\n        }\n      }\n\n      this.calculateRayOriginFromMesh(rootNode);\n      // Determine if the model has to be visible or not.\n      this.setModelVisibility();\n    }\n\n    debug('Model load complete.');\n\n    // Look through only immediate children. This will return null if no mesh exists with the given name.\n    function getImmediateChildByName (object3d, value) {\n      for (var i = 0, l = object3d.children.length; i < l; i++) {\n        var obj = object3d.children[i];\n        if (obj && obj['name'] === value) {\n          return obj;\n        }\n      }\n      return undefined;\n    }\n  },\n\n  calculateRayOriginFromMesh: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (rootNode) {\n      var mesh;\n\n      // Calculate the pointer pose (used for rays), by applying the world transform of th POINTER_POSE node\n      // in the glTF (assumes that root node is at world origin)\n      this.rayOrigin.origin.set(0, 0, 0);\n      this.rayOrigin.direction.set(0, 0, -1);\n      this.rayOrigin.createdFromMesh = true;\n\n      // Try to read Pointing pose from the source model\n      mesh = rootNode.getObjectByName(this.mapping.pointingPoseMeshName);\n      if (mesh) {\n        var parent = rootNode.parent;\n\n        // We need to read pose transforms accumulated from the root of the glTF, not the scene.\n        if (parent) {\n          rootNode.parent = null;\n          rootNode.updateMatrixWorld(true);\n          rootNode.parent = parent;\n        }\n\n        mesh.getWorldPosition(this.rayOrigin.origin);\n        mesh.getWorldQuaternion(quaternion);\n        this.rayOrigin.direction.applyQuaternion(quaternion);\n\n        // Recalculate the world matrices now that the rootNode is re-attached to the parent.\n        if (parent) {\n          rootNode.updateMatrixWorld(true);\n        }\n      } else {\n        debug('Mesh does not contain pointing origin data, defaulting to none.');\n      }\n\n      // Emit event stating that our pointing ray is now accurate.\n      this.modelReady();\n    };\n  })(),\n\n  lerpAxisTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (axis, axisValue) {\n      var axisMeshInfo = this.loadedMeshInfo.axisMeshes[axis];\n      if (!axisMeshInfo) return;\n\n      var min = axisMeshInfo.min;\n      var max = axisMeshInfo.max;\n      var target = axisMeshInfo.value;\n\n      // Convert from gamepad value range (-1 to +1) to lerp range (0 to 1)\n      var lerpValue = axisValue * 0.5 + 0.5;\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, lerpValue));\n      target.position.lerpVectors(min.position, max.position, lerpValue);\n    };\n  })(),\n\n  lerpButtonTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (buttonName, buttonValue) {\n      var buttonMeshInfo = this.loadedMeshInfo.buttonMeshes[buttonName];\n      if (!buttonMeshInfo) return;\n\n      var min = buttonMeshInfo.unpressed;\n      var max = buttonMeshInfo.pressed;\n      var target = buttonMeshInfo.value;\n\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, buttonValue));\n      target.position.lerpVectors(min.position, max.position, buttonValue);\n    };\n  })(),\n\n  modelReady: function () {\n    this.el.emit('controllermodelready', {\n      name: 'windows-motion-controls',\n      model: this.data.model,\n      rayOrigin: this.rayOrigin\n    });\n  },\n\n  onButtonChanged: function (evt) {\n    var buttonName = this.mapping.buttons[evt.detail.id];\n\n    if (buttonName) {\n      // Update the button mesh transform\n      if (this.loadedMeshInfo && this.loadedMeshInfo.buttonMeshes) {\n        this.lerpButtonTransform(buttonName, evt.detail.state.value);\n      }\n\n      // Only emit events for buttons that we know how to map from index to name\n      this.el.emit(buttonName + 'changed', evt.detail.state);\n    }\n  },\n\n  onAxisMoved: function (evt) {\n    var numAxes = this.mapping.axisMeshNames.length;\n\n    // Only attempt to update meshes if we have valid data.\n    if (this.loadedMeshInfo && this.loadedMeshInfo.axisMeshes) {\n      for (var axis = 0; axis < numAxes; axis++) {\n        // Update the button mesh transform\n        this.lerpAxisTransform(axis, evt.detail.axis[axis] || 0.0);\n      }\n    }\n\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  setModelVisibility: function (visible) {\n    var model = this.el.getObject3D('mesh');\n    if (!this.controllerPresent) { return; }\n    visible = visible !== undefined ? visible : this.modelVisible;\n    this.modelVisible = visible;\n    if (!model) { return; }\n    model.visible = visible;\n  }\n});\n","/* global ImageData, Map, Set */\nimport THREE from '../../lib/three.js';\nimport { registerComponent as register } from '../../core/component.js';\nvar arrowURL = 'data:image/webp;base64,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';\nvar CAM_LAYER = 21;\n\nvar applyPose = (function () {\n  var tempQuaternion = new THREE.Quaternion();\n  var tempVec3 = new THREE.Vector3();\n  function applyPose (pose, object3D, offset) {\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n\n    tempVec3.copy(offset);\n    tempQuaternion.copy(pose.transform.orientation);\n    tempVec3.applyQuaternion(tempQuaternion);\n    object3D.position.sub(tempVec3);\n  }\n  return applyPose;\n}());\n\napplyPose.tempFakePose = {\n  transform: {\n    orientation: new THREE.Quaternion(),\n    position: new THREE.Vector3()\n  }\n};\n\n/**\n * Class to handle hit-test from a single source\n *\n * For a normal space provide it as a space option\n * new HitTest(renderer, {\n *   space: viewerSpace\n * });\n *\n * this is also useful for the targetRaySpace of an XRInputSource\n *\n * It can also describe a transient input source like so:\n *\n * var profileToSupport = 'generic-touchscreen';\n * var transientHitTest = new HitTest(renderer, {\n *   profile: profileToSupport\n * });\n *\n * Where the profile matches an item in a type of controller, profiles matching 'generic-touchscreen'\n * will always be a transient input and as of 08/2021 all transient inputs are 'generic-touchscreen'\n *\n * @param {WebGLRenderer} renderer THREE.JS Renderer\n * @param {} hitTestSourceDetails The source information either as the information for a transient hit-test or a regular hit-test\n */\nfunction HitTest (renderer, hitTestSourceDetails) {\n  this.renderer = renderer;\n  this.xrHitTestSource = null;\n\n  renderer.xr.addEventListener('sessionend', function () {\n    this.xrHitTestSource = null;\n  }.bind(this));\n  renderer.xr.addEventListener('sessionstart', function () {\n    this.sessionStart(hitTestSourceDetails);\n  }.bind(this));\n\n  if (this.renderer.xr.isPresenting) {\n    this.sessionStart(hitTestSourceDetails);\n  }\n}\n\nHitTest.prototype.previousFrameAnchors = new Set();\nHitTest.prototype.anchorToObject3D = new Map();\n\nfunction warnAboutHitTest (e) {\n  console.warn(e.message);\n  console.warn('Cannot requestHitTestSource Are you missing: webxr=\"optionalFeatures: hit-test;\" from <a-scene>?');\n}\n\nHitTest.prototype.sessionStart = function sessionStart (hitTestSourceDetails) {\n  this.session = this.renderer.xr.getSession();\n  if (!('requestHitTestSource' in this.session)) {\n    warnAboutHitTest({message: 'No requestHitTestSource on the session.'});\n    return;\n  }\n  if (hitTestSourceDetails.space) {\n    this.session.requestHitTestSource(hitTestSourceDetails)\n    .then(function (xrHitTestSource) {\n      this.xrHitTestSource = xrHitTestSource;\n    }.bind(this))\n    .catch(warnAboutHitTest);\n  } else if (hitTestSourceDetails.profile) {\n    this.session.requestHitTestSourceForTransientInput(hitTestSourceDetails)\n    .then(function (xrHitTestSource) {\n      this.xrHitTestSource = xrHitTestSource;\n      this.transient = true;\n    }.bind(this))\n    .catch(warnAboutHitTest);\n  }\n};\n\n/**\n * Turns the last hit test into an anchor, the provided Object3D will have its\n * position update to track the anchor.\n *\n * @param {Object3D} object3D object to track\n * @param {Vector3} offset offset of the object from the origin that gets subtracted\n * @returns\n */\nHitTest.prototype.anchorFromLastHitTestResult = function (object3D, offset) {\n  var hitTest = this.lastHitTest;\n\n  if (!hitTest) { return; }\n\n  var object3DOptions = {\n    object3D: object3D,\n    offset: offset\n  };\n\n  Array.from(this.anchorToObject3D.entries())\n  .forEach(function (entry) {\n    var entryObject = entry[1].object3D;\n    var anchor = entry[0];\n    if (entryObject === object3D) {\n      this.anchorToObject3D.delete(anchor);\n      anchor.delete();\n    }\n  }.bind(this));\n\n  if (hitTest.createAnchor) {\n    hitTest.createAnchor()\n    .then(function (anchor) {\n      this.anchorToObject3D.set(anchor, object3DOptions);\n    }.bind(this))\n    .catch(function (e) {\n      console.warn(e.message);\n      console.warn('Cannot create anchor, are you missing: webxr=\"optionalFeatures: anchors;\" from <a-scene>?');\n    });\n  }\n};\n\nHitTest.prototype.doHit = function doHit (frame) {\n  if (!this.renderer.xr.isPresenting) { return; }\n  var refSpace = this.renderer.xr.getReferenceSpace();\n  var xrViewerPose = frame.getViewerPose(refSpace);\n  var hitTestResults;\n  var results;\n\n  if (this.xrHitTestSource && xrViewerPose) {\n    if (this.transient) {\n      hitTestResults = frame.getHitTestResultsForTransientInput(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        results = hitTestResults[0].results;\n        if (results.length > 0) {\n          this.lastHitTest = results[0];\n          return results[0].getPose(refSpace);\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    } else {\n      hitTestResults = frame.getHitTestResults(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        this.lastHitTest = hitTestResults[0];\n        return hitTestResults[0].getPose(refSpace);\n      } else {\n        return false;\n      }\n    }\n  }\n};\n\n// static function\nHitTest.updateAnchorPoses = function (frame, refSpace) {\n  // If tracked anchors isn't defined because it's not supported then just use the empty set\n  var trackedAnchors = frame.trackedAnchors || HitTest.prototype.previousFrameAnchors;\n\n  HitTest.prototype.previousFrameAnchors.forEach(function (anchor) {\n    // Handle anchor tracking loss - `anchor` was present\n    // in the present frame but is no longer tracked.\n    if (!trackedAnchors.has(anchor)) {\n      HitTest.prototype.anchorToObject3D.delete(anchor);\n    }\n  });\n\n  trackedAnchors.forEach(function (anchor) {\n    var anchorPose;\n    var object3DOptions;\n    var offset;\n    var object3D;\n\n    try {\n      // Query most recent pose of the anchor relative to some reference space:\n      anchorPose = frame.getPose(anchor.anchorSpace, refSpace);\n      if (anchorPose) {\n        object3DOptions = HitTest.prototype.anchorToObject3D.get(anchor);\n        if (!object3DOptions) { return; }\n        offset = object3DOptions.offset;\n        object3D = object3DOptions.object3D;\n        applyPose(anchorPose, object3D, offset);\n      }\n    } catch (e) {\n      console.error('while updating anchor poses:', e);\n    }\n  });\n  HitTest.prototype.previousFrameAnchors = trackedAnchors;\n};\n\nvar hitTestCache;\nexport var Component = register('ar-hit-test', {\n  schema: {\n    target: { type: 'selector' },\n    enabled: { default: true },\n    src: {\n      default: arrowURL,\n      type: 'map'\n    },\n    type: {\n      default: 'footprint',\n      oneOf: ['footprint', 'map']\n    },\n    footprintDepth: {\n      default: 0.1\n    },\n    mapSize: {\n      type: 'vec2',\n      default: {\n        x: 0.5,\n        y: 0.5\n      }\n    }\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.hitTest = null;\n    this.imageDataArray = new Uint8ClampedArray(512 * 512 * 4);\n    this.imageData = new ImageData(this.imageDataArray, 512, 512);\n\n    this.textureCache = new Map();\n\n    this.orthoCam = new THREE.OrthographicCamera();\n    this.orthoCam.layers.set(CAM_LAYER);\n    this.textureTarget = new THREE.WebGLRenderTarget(512, 512, {});\n    this.basicMaterial = new THREE.MeshBasicMaterial({\n      color: 0x000000,\n      side: THREE.DoubleSide\n    });\n    this.canvas = document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.context.imageSmoothingEnabled = false;\n    this.canvas.width = 512;\n    this.canvas.height = 512;\n    this.canvasTexture = new THREE.CanvasTexture(this.canvas, {\n      alpha: true\n    });\n    this.canvasTexture.flipY = false;\n\n    // Update WebXR to support hit-test and anchors\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (\n      !optionalFeaturesArray.includes('hit-test') ||\n      !optionalFeaturesArray.includes('anchors')\n    ) {\n      optionalFeaturesArray.push('hit-test');\n      optionalFeaturesArray.push('anchors');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.sceneEl.renderer.xr.addEventListener('sessionend', function () {\n      this.hitTest = null;\n    }.bind(this));\n\n    this.el.sceneEl.renderer.xr.addEventListener('sessionstart', function () {\n      // Don't request Hit Test unless AR (breaks WebXR Emulator)\n      if (!this.el.is('ar-mode')) { return; }\n\n      var renderer = this.el.sceneEl.renderer;\n      var session = this.session = renderer.xr.getSession();\n      this.hasPosedOnce = false;\n      this.bboxMesh.visible = false;\n\n      if (!hitTestCache) { hitTestCache = new Map(); }\n\n      // Default to selecting through the face\n      session.requestReferenceSpace('viewer')\n      .then(function (viewerSpace) {\n        this.viewerHitTest = this.hitTest = new HitTest(renderer, {\n          space: viewerSpace\n        });\n\n        this.el.emit('ar-hit-test-start');\n      }.bind(this));\n\n      // If a tracked controller is available, selects via that instead of the headset\n      var arHitTestComp = this;\n      this.el.sceneEl.addEventListener('controllersupdated', function () {\n        var sceneEl = this;\n        var inputSources = sceneEl.xrSession && sceneEl.xrSession.inputSources;\n        if (!inputSources) { return; }\n        for (var i = 0; i < inputSources.length; ++i) {\n          if (inputSources[i].targetRayMode === 'tracked-pointer') {\n            arHitTestComp.hitTest = new HitTest(renderer, {\n              space: inputSources[i].targetRaySpace\n            });\n            hitTestCache.set(inputSources[i], arHitTestComp.hitTest);\n\n            if (arHitTestComp.viewerHitTest && typeof arHitTestComp.viewerHitTest.cancel === 'function') {\n              arHitTestComp.viewerHitTest.cancel();\n              arHitTestComp.viewerHitTest = null;\n            }\n\n            break;   // only uses first tracked controller\n          }\n        }\n      });\n\n      // These are transient inputs so need to be handled separately\n      var profileToSupport = 'generic-touchscreen';\n      var transientHitTest = new HitTest(renderer, {\n        profile: profileToSupport\n      });\n\n      session.addEventListener('selectstart', function (e) {\n        if (this.data.enabled !== true) { return; }\n\n        var inputSource = e.inputSource;\n\n        this.bboxMesh.visible = true;\n\n        if (this.hasPosedOnce === true) {\n          this.el.emit('ar-hit-test-select-start', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          if (inputSource.profiles[0] === profileToSupport) {\n            this.hitTest = transientHitTest;\n          } else {\n            this.hitTest = hitTestCache.get(inputSource) || new HitTest(renderer, {\n              space: inputSource.targetRaySpace\n            });\n            hitTestCache.set(inputSource, this.hitTest);\n          }\n        }\n      }.bind(this));\n\n      session.addEventListener('selectend', function (e) {\n        if (!this.hitTest || this.data.enabled !== true) {\n          this.hitTest = null;\n          return;\n        }\n\n        var inputSource = e.inputSource;\n        var object;\n\n        if (this.hasPosedOnce === true) {\n          this.bboxMesh.visible = false;\n\n          // if we have a target with a 3D object then automatically generate an anchor for it.\n          if (this.data.target) {\n            object = this.data.target.object3D;\n\n            if (object) {\n              applyPose.tempFakePose.transform.position.copy(this.bboxMesh.position);\n              applyPose.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion);\n              applyPose(applyPose.tempFakePose, object, this.bboxOffset);\n              object.visible = true;\n\n              // create an anchor attached to the object\n              this.hitTest.anchorFromLastHitTestResult(object, this.bboxOffset);\n            }\n          }\n\n          this.el.emit('ar-hit-test-select', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          this.hitTest = null;\n        }\n      }.bind(this));\n    }.bind(this));\n\n    this.bboxOffset = new THREE.Vector3();\n    this.update = this.update.bind(this);\n    this.makeBBox();\n  },\n\n  update: function () {\n    // If it is disabled it's cleaned up\n    if (this.data.enabled === false) {\n      this.hitTest = null;\n      this.bboxMesh.visible = false;\n    }\n    if (this.data.target) {\n      if (this.data.target.object3D) {\n        this.data.target.addEventListener('model-loaded', this.update);\n        this.data.target.object3D.layers.enable(CAM_LAYER);\n        this.data.target.object3D.traverse(function (child) {\n          child.layers.enable(CAM_LAYER);\n        });\n      } else {\n        this.data.target.addEventListener('loaded', this.update, {once: true});\n      }\n    }\n    this.bboxNeedsUpdate = true;\n  },\n\n  makeBBox: function () {\n    var geometry = new THREE.PlaneGeometry(1, 1);\n    var material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      color: 0xffffff\n    });\n    geometry.rotateX(-Math.PI / 2);\n    geometry.rotateY(-Math.PI / 2);\n    this.bbox = new THREE.Box3();\n    this.bboxMesh = new THREE.Mesh(geometry, material);\n    this.el.setObject3D('ar-hit-test', this.bboxMesh);\n    this.bboxMesh.visible = false;\n  },\n\n  updateFootprint: function () {\n    var tempImageData;\n    var renderer = this.el.sceneEl.renderer;\n    var oldRenderTarget, oldBackground;\n    var isXREnabled = renderer.xr.enabled;\n    this.bboxMesh.material.map = this.canvasTexture;\n    this.bboxMesh.material.needsUpdate = true;\n    this.orthoCam.rotation.set(-Math.PI / 2, 0, -Math.PI / 2);\n    this.orthoCam.position.copy(this.bboxMesh.position);\n    this.orthoCam.position.y -= this.bboxMesh.scale.y / 2;\n    this.orthoCam.near = 0.1;\n    this.orthoCam.far = this.orthoCam.near + (this.data.footprintDepth * this.bboxMesh.scale.y);\n    this.orthoCam.position.y += this.orthoCam.far;\n    this.orthoCam.right = this.bboxMesh.scale.z / 2;\n    this.orthoCam.left = -this.bboxMesh.scale.z / 2;\n    this.orthoCam.top = this.bboxMesh.scale.x / 2;\n    this.orthoCam.bottom = -this.bboxMesh.scale.x / 2;\n    this.orthoCam.updateProjectionMatrix();\n\n    oldRenderTarget = renderer.getRenderTarget();\n    renderer.setRenderTarget(this.textureTarget);\n    renderer.xr.enabled = false;\n    oldBackground = this.el.object3D.background;\n    this.el.object3D.overrideMaterial = this.basicMaterial;\n    this.el.object3D.background = null;\n    renderer.render(this.el.object3D, this.orthoCam);\n    this.el.object3D.background = oldBackground;\n    this.el.object3D.overrideMaterial = null;\n    renderer.xr.enabled = isXREnabled;\n    renderer.setRenderTarget(oldRenderTarget);\n    renderer.readRenderTargetPixels(this.textureTarget, 0, 0, 512, 512, this.imageDataArray);\n\n    this.context.putImageData(this.imageData, 0, 0);\n    this.context.shadowColor = 'white';\n    this.context.shadowBlur = 10;\n    this.context.drawImage(this.canvas, 0, 0);\n    tempImageData = this.context.getImageData(0, 0, 512, 512);\n    for (var i = 0; i < 512 * 512; i++) {\n      // if it's a little bit transparent but not opaque make it middle transparent\n      if (tempImageData.data[i * 4 + 3] !== 0 && tempImageData.data[i * 4 + 3] !== 255) {\n        tempImageData.data[i * 4 + 3] = 128;\n      }\n    }\n    this.context.putImageData(tempImageData, 0, 0);\n    this.canvasTexture.needsUpdate = true;\n  },\n  tick: function () {\n    var pose;\n    var frame = this.el.sceneEl.frame;\n    var renderer = this.el.sceneEl.renderer;\n\n    if (frame) {\n      // if we are in XR then update the positions of the objects attached to anchors\n      HitTest.updateAnchorPoses(frame, renderer.xr.getReferenceSpace());\n    }\n    if (this.bboxNeedsUpdate) {\n      this.bboxNeedsUpdate = false;\n\n      if (!this.data.target || this.data.type === 'map') {\n        var texture;\n        if (this.textureCache.has(this.data.src)) {\n          texture = this.textureCache.get(this.data.src);\n        } else {\n          texture = new THREE.TextureLoader().load(this.data.src);\n          this.textureCache.set(this.data.src, texture);\n        }\n        this.bboxMesh.material.map = texture;\n        this.bboxMesh.material.needsUpdate = true;\n      }\n\n      if (this.data.target && this.data.target.object3D) {\n        this.bbox.setFromObject(this.data.target.object3D);\n        this.bbox.getCenter(this.bboxMesh.position);\n        this.bbox.getSize(this.bboxMesh.scale);\n\n        if (this.data.type === 'footprint') {\n          // Add a little buffer for the footprint border\n          this.bboxMesh.scale.x *= 1.04;\n          this.bboxMesh.scale.z *= 1.04;\n          this.updateFootprint();\n        }\n\n        this.bboxMesh.position.y -= this.bboxMesh.scale.y / 2;\n        this.bboxOffset.copy(this.bboxMesh.position);\n        this.bboxOffset.sub(this.data.target.object3D.position);\n      } else {\n        this.bboxMesh.scale.set(this.data.mapSize.x, 1, this.data.mapSize.y);\n      }\n    }\n\n    if (this.hitTest) {\n      pose = this.hitTest.doHit(frame);\n      if (pose) {\n        if (this.hasPosedOnce !== true) {\n          this.hasPosedOnce = true;\n          this.el.emit('ar-hit-test-achieved');\n        }\n        this.bboxMesh.visible = true;\n        this.bboxMesh.position.copy(pose.transform.position);\n        this.bboxMesh.quaternion.copy(pose.transform.orientation);\n      }\n    }\n  }\n});\n","/* global THREE */\nimport { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('background', {\n  schema: {\n    color: { type: 'color', default: 'black' },\n    transparent: { default: false }\n  },\n  sceneOnly: true,\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n\n    if (data.transparent) {\n      object3D.background = null;\n    } else {\n      object3D.background = new THREE.Color(data.color);\n    }\n  },\n\n  remove: function () {\n    var object3D = this.el.object3D;\n    object3D.background = null;\n  }\n});\n","import { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('debug', {\n  schema: {default: true},\n  sceneOnly: true\n});\n","/* global DeviceOrientationEvent */\nimport { registerComponent } from '../../core/component.js';\nimport { AFRAME_INJECTED } from '../../constants/index.js';\n\nvar MODAL_CLASS = 'a-modal';\nvar DIALOG_CLASS = 'a-dialog';\nvar DIALOG_TEXT_CLASS = 'a-dialog-text';\nvar DIALOG_TEXT_CONTAINER_CLASS = 'a-dialog-text-container';\nvar DIALOG_BUTTONS_CONTAINER_CLASS = 'a-dialog-buttons-container';\nvar DIALOG_BUTTON_CLASS = 'a-dialog-button';\nvar DIALOG_ALLOW_BUTTON_CLASS = 'a-dialog-allow-button';\nvar DIALOG_DENY_BUTTON_CLASS = 'a-dialog-deny-button';\nvar DIALOG_OK_BUTTON_CLASS = 'a-dialog-ok-button';\n\n/**\n * UI for enabling device motion permission\n */\nexport var Component = registerComponent('device-orientation-permission-ui', {\n  schema: {\n    enabled: {default: true},\n    deviceMotionMessage: {\n      default: 'This immersive website requires access to your device motion sensors.'\n    },\n    httpsMessage: {\n      default: 'Access this site over HTTPS to enter VR mode and grant access to the device sensors.'\n    },\n    denyButtonText: {default: 'Deny'},\n    allowButtonText: {default: 'Allow'},\n    cancelButtonText: {default: 'Cancel'}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n\n    if (!this.data.enabled) { return; }\n\n    if (!window.isSecureContext) {\n      this.showHTTPAlert();\n    }\n\n    // Browser doesn't support or doesn't require permission to DeviceOrientationEvent API.\n    if (typeof DeviceOrientationEvent === 'undefined' || !DeviceOrientationEvent.requestPermission) {\n      this.permissionGranted = true;\n      return;\n    }\n\n    this.onDeviceMotionDialogAllowClicked = this.onDeviceMotionDialogAllowClicked.bind(this);\n    this.onDeviceMotionDialogDenyClicked = this.onDeviceMotionDialogDenyClicked.bind(this);\n    // Show dialog only if permission has not yet been granted.\n    DeviceOrientationEvent.requestPermission().then(function () {\n      self.el.emit('deviceorientationpermissiongranted');\n      self.permissionGranted = true;\n    }).catch(function () {\n      self.devicePermissionDialogEl = createPermissionDialog(\n        self.data.denyButtonText,\n        self.data.allowButtonText,\n        self.data.deviceMotionMessage,\n        self.onDeviceMotionDialogAllowClicked,\n        self.onDeviceMotionDialogDenyClicked);\n      self.el.appendChild(self.devicePermissionDialogEl);\n    });\n  },\n\n  remove: function () {\n    // This removes the modal screen\n    if (this.devicePermissionDialogEl) { this.el.removeChild(this.devicePermissionDialogEl); }\n  },\n\n  onDeviceMotionDialogDenyClicked: function () {\n    this.remove();\n  },\n\n  showHTTPAlert: function () {\n    var self = this;\n    var httpAlertEl = createAlertDialog(\n      self.data.cancelButtonText,\n      self.data.httpsMessage,\n      function () { self.el.removeChild(httpAlertEl); });\n    this.el.appendChild(httpAlertEl);\n  },\n\n  /**\n   * Enable device motion permission when clicked.\n   */\n  onDeviceMotionDialogAllowClicked: function () {\n    var self = this;\n    this.el.emit('deviceorientationpermissionrequested');\n    DeviceOrientationEvent.requestPermission().then(function (response) {\n      if (response === 'granted') {\n        self.el.emit('deviceorientationpermissiongranted');\n        self.permissionGranted = true;\n      } else {\n        self.el.emit('deviceorientationpermissionrejected');\n      }\n      self.remove();\n    }).catch(console.error);\n  }\n});\n\n/**\n * Create a modal dialog that request users permission to access the Device Motion API.\n *\n * @param {function} onAllowClicked - click event handler\n * @param {function} onDenyClicked - click event handler\n *\n * @returns {Element} Wrapper <div>.\n */\nfunction createPermissionDialog (\n  denyText, allowText, dialogText, onAllowClicked, onDenyClicked) {\n  var buttonsContainer;\n  var denyButton;\n  var acceptButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  denyButton = document.createElement('button');\n  denyButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_DENY_BUTTON_CLASS);\n  denyButton.setAttribute(AFRAME_INJECTED, '');\n  denyButton.innerHTML = denyText;\n  buttonsContainer.appendChild(denyButton);\n\n  acceptButton = document.createElement('button');\n  acceptButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_ALLOW_BUTTON_CLASS);\n  acceptButton.setAttribute(AFRAME_INJECTED, '');\n  acceptButton.innerHTML = allowText;\n  buttonsContainer.appendChild(acceptButton);\n\n  // Ask for sensor events to be used\n  acceptButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onAllowClicked();\n  });\n\n  denyButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onDenyClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createAlertDialog (closeText, dialogText, onOkClicked) {\n  var buttonsContainer;\n  var okButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  okButton = document.createElement('button');\n  okButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_OK_BUTTON_CLASS);\n  okButton.setAttribute(AFRAME_INJECTED, '');\n  okButton.innerHTML = closeText;\n  buttonsContainer.appendChild(okButton);\n\n  // Ask for sensor events to be used\n  okButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onOkClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createDialog (text, buttonsContainerEl) {\n  var modalContainer;\n  var dialog;\n  var dialogTextContainer;\n  var dialogText;\n\n  modalContainer = document.createElement('div');\n  modalContainer.classList.add(MODAL_CLASS);\n  modalContainer.setAttribute(AFRAME_INJECTED, '');\n\n  dialog = document.createElement('div');\n  dialog.className = DIALOG_CLASS;\n  dialog.setAttribute(AFRAME_INJECTED, '');\n  modalContainer.appendChild(dialog);\n\n  dialogTextContainer = document.createElement('div');\n  dialogTextContainer.classList.add(DIALOG_TEXT_CONTAINER_CLASS);\n  dialog.appendChild(dialogTextContainer);\n\n  dialogText = document.createElement('div');\n  dialogText.classList.add(DIALOG_TEXT_CLASS);\n  dialogText.innerHTML = text;\n  dialogTextContainer.appendChild(dialogText);\n\n  dialog.appendChild(buttonsContainerEl);\n\n  return modalContainer;\n}\n","import { registerComponent } from '../../core/component.js';\n\n/**\n * Component to embed an a-frame scene within the layout of a 2D page.\n */\nexport var Component = registerComponent('embedded', {\n  dependencies: ['xr-mode-ui'],\n\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  update: function () {\n    var sceneEl = this.el;\n    var enterVREl = sceneEl.querySelector('.a-enter-vr');\n    if (this.data === true) {\n      if (enterVREl) { enterVREl.classList.add('embedded'); }\n      sceneEl.removeFullScreenStyles();\n    } else {\n      if (enterVREl) { enterVREl.classList.remove('embedded'); }\n      sceneEl.addFullScreenStyles();\n    }\n  }\n\n});\n","/* global AFRAME, INSPECTOR_VERSION */\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport { registerComponent } from '../../core/component.js';\nimport pkg from '../../../package.json';\nimport * as utils from '../../utils/index.js';\n\n/**\n * 0.4.2 to 0.4.x\n * Will need to update this when A-Frame goes to 1.x.x.\n */\nfunction getFuzzyPatchVersion (version) {\n  var split = version.split('.');\n  split[2] = 'x';\n  return split.join('.');\n}\n\nvar INSPECTOR_DEV_URL = 'https://aframe.io/aframe-inspector/dist/aframe-inspector.js';\nvar INSPECTOR_RELEASE_URL = 'https://unpkg.com/aframe-inspector@' + getFuzzyPatchVersion(pkg.version) + '/dist/aframe-inspector.min.js';\nvar INSPECTOR_URL = typeof INSPECTOR_VERSION !== 'undefined' && INSPECTOR_VERSION === 'dev' ? INSPECTOR_DEV_URL : INSPECTOR_RELEASE_URL;\nvar LOADING_MESSAGE = 'Loading Inspector';\nvar LOADING_ERROR_MESSAGE = 'Error loading Inspector';\n\nexport var Component = registerComponent('inspector', {\n  schema: {\n    url: {default: INSPECTOR_URL}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.firstPlay = true;\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n    this.initOverlay();\n    window.addEventListener('keydown', this.onKeydown);\n    window.addEventListener('message', this.onMessage);\n  },\n\n  play: function () {\n    var urlParam;\n    if (!this.firstPlay) { return; }\n    urlParam = utils.getUrlParameter('inspector');\n    if (urlParam !== 'false' && !!urlParam) {\n      this.openInspector();\n      this.firstPlay = false;\n    }\n  },\n\n  initOverlay: function () {\n    var dotsHTML = '<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>';\n    this.loadingMessageEl = document.createElement('div');\n    this.loadingMessageEl.classList.add('a-inspector-loader');\n    this.loadingMessageEl.innerHTML = LOADING_MESSAGE + dotsHTML;\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n  },\n\n  /**\n   * <ctrl> + <alt> + i keyboard shortcut.\n   */\n  onKeydown: function (evt) {\n    var shortcutPressed = evt.keyCode === 73 && (evt.ctrlKey && evt.altKey || evt.getModifierState('AltGraph'));\n    if (!shortcutPressed) { return; }\n    this.openInspector();\n  },\n\n  showLoader: function () {\n    document.body.appendChild(this.loadingMessageEl);\n  },\n\n  hideLoader: function () {\n    document.body.removeChild(this.loadingMessageEl);\n  },\n\n  /**\n   * postMessage. aframe.io uses this to create a button on examples to open Inspector.\n   */\n  onMessage: function (evt) {\n    if (evt.data === 'INJECT_AFRAME_INSPECTOR') { this.openInspector(); }\n  },\n\n  openInspector: function (focusEl) {\n    var self = this;\n    var script;\n\n    // Already injected. Open.\n    if (AFRAME.INSPECTOR || AFRAME.inspectorInjected) {\n      AFRAME.INSPECTOR.open(focusEl);\n      return;\n    }\n\n    this.showLoader();\n\n    // Inject.\n    script = document.createElement('script');\n    script.src = this.data.url;\n    script.setAttribute('data-name', 'aframe-inspector');\n    script.setAttribute(AFRAME_INJECTED, '');\n    script.onload = function () {\n      AFRAME.INSPECTOR.open(focusEl);\n      self.hideLoader();\n      self.removeEventListeners();\n    };\n    script.onerror = function () {\n      self.loadingMessageEl.innerHTML = LOADING_ERROR_MESSAGE;\n    };\n    document.head.appendChild(script);\n    AFRAME.inspectorInjected = true;\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeydown);\n    window.removeEventListener('message', this.onMessage);\n  }\n});\n","import { registerComponent as register } from '../../core/component.js';\nimport THREE from '../../lib/three.js';\n\n/**\n * Fog component.\n * Applies only to the scene entity.\n */\nexport var Component = register('fog', {\n  schema: {\n    color: {type: 'color', default: '#000'},\n    density: {default: 0.00025},\n    far: {default: 1000, min: 0},\n    near: {default: 1, min: 0},\n    type: {default: 'linear', oneOf: ['linear', 'exponential']}\n  },\n\n  sceneOnly: true,\n\n  update: function () {\n    var data = this.data;\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n\n    // (Re)create fog if fog doesn't exist or fog type changed.\n    if (!fog || data.type !== fog.name) {\n      el.object3D.fog = getFog(data);\n      return;\n    }\n\n    // Fog data changed. Update fog.\n    Object.keys(this.schema).forEach(function (key) {\n      var value = data[key];\n      if (key === 'color') { value = new THREE.Color(value); }\n      fog[key] = value;\n    });\n  },\n\n  /**\n   * Remove fog on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n    if (!fog) { return; }\n\n    el.object3D.fog = null;\n  }\n});\n\n/**\n * Creates a fog object. Sets fog.name to be able to detect fog type changes.\n *\n * @param {object} data - Fog data.\n * @returns {object} fog\n */\nfunction getFog (data) {\n  var fog;\n  if (data.type === 'exponential') {\n    fog = new THREE.FogExp2(data.color, data.density);\n  } else {\n    fog = new THREE.Fog(data.color, data.near, data.far);\n  }\n  fog.name = data.type;\n  return fog;\n}\n","import { registerComponent } from '../../core/component.js';\nimport { shouldCaptureKeyEvent } from '../../utils/index.js';\n\nexport var Component = registerComponent('keyboard-shortcuts', {\n  schema: {\n    enterVR: {default: true},\n    exitVR: {default: true}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.onKeyup = this.onKeyup.bind(this);\n  },\n\n  play: function () {\n    window.addEventListener('keyup', this.onKeyup, false);\n  },\n\n  pause: function () {\n    window.removeEventListener('keyup', this.onKeyup);\n  },\n\n  onKeyup: function (evt) {\n    var scene = this.el;\n    if (!shouldCaptureKeyEvent(evt)) { return; }\n    if (this.data.enterVR && evt.keyCode === 70) {  // f.\n      scene.enterVR();\n    }\n    if (this.data.exitVR && evt.keyCode === 27) {   // escape.\n      scene.exitVR();\n    }\n  }\n});\n","import { debug } from '../../utils/index.js';\nimport { registerComponent } from '../../core/component.js';\n\nvar warn = debug('components:pool:warn');\n\n/**\n * Pool component to reuse entities.\n * Avoids creating and destroying the same kind of entities.\n * Helps reduce GC pauses. For example in a game to reuse enemies entities.\n *\n * @member {array} availableEls - Available entities in the pool.\n * @member {array} usedEls - Entities of the pool in use.\n */\nexport var Component = registerComponent('pool', {\n  schema: {\n    container: {default: ''},\n    mixin: {default: ''},\n    size: {default: 0},\n    dynamic: {default: false}\n  },\n\n  sceneOnly: true,\n\n  multiple: true,\n\n  initPool: function () {\n    var i;\n\n    this.availableEls = [];\n    this.usedEls = [];\n\n    if (!this.data.mixin) {\n      warn('No mixin provided for pool component.');\n    }\n\n    if (this.data.container) {\n      this.container = document.querySelector(this.data.container);\n      if (!this.container) {\n        warn('Container ' + this.data.container + ' not found.');\n      }\n    }\n    this.container = this.container || this.el;\n\n    for (i = 0; i < this.data.size; ++i) {\n      this.createEntity();\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    if (oldData.mixin !== data.mixin || oldData.size !== data.size) {\n      this.initPool();\n    }\n  },\n\n  /**\n   * Add a new entity to the list of available entities.\n   */\n  createEntity: function () {\n    var el;\n    el = document.createElement('a-entity');\n    el.play = this.wrapPlay(el.play);\n    el.setAttribute('mixin', this.data.mixin);\n    el.object3D.visible = false;\n    el.pause();\n    this.container.appendChild(el);\n    this.availableEls.push(el);\n\n    var usedEls = this.usedEls;\n    el.addEventListener('loaded', function () {\n      if (usedEls.indexOf(el) !== -1) { return; }\n      el.object3DParent = el.object3D.parent;\n      el.object3D.parent.remove(el.object3D);\n    });\n  },\n\n  /**\n   * Play wrapper for pooled entities. When pausing and playing a scene, don't want to play\n   * entities that are not in use.\n   */\n  wrapPlay: function (playMethod) {\n    var usedEls = this.usedEls;\n    return function () {\n      if (usedEls.indexOf(this) === -1) { return; }\n      playMethod.call(this);\n    };\n  },\n\n  /**\n   * Used to request one of the available entities of the pool.\n   */\n  requestEntity: function () {\n    var el;\n    if (this.availableEls.length === 0) {\n      if (this.data.dynamic === false) {\n        warn('Requested entity from empty pool: ' + this.attrName);\n        return;\n      } else {\n        warn('Requested entity from empty pool. This pool is dynamic and will resize ' +\n             'automatically. You might want to increase its initial size: ' + this.attrName);\n      }\n      this.createEntity();\n    }\n    el = this.availableEls.shift();\n    this.usedEls.push(el);\n    if (el.object3DParent) {\n      el.object3DParent.add(el.object3D);\n      this.updateRaycasters();\n    }\n    el.object3D.visible = true;\n    return el;\n  },\n\n  /**\n   * Used to return a used entity to the pool.\n   */\n  returnEntity: function (el) {\n    var index = this.usedEls.indexOf(el);\n    if (index === -1) {\n      warn('The returned entity was not previously pooled from ' + this.attrName);\n      return;\n    }\n    this.usedEls.splice(index, 1);\n    this.availableEls.push(el);\n    el.object3DParent = el.object3D.parent;\n    el.object3D.parent.remove(el.object3D);\n    this.updateRaycasters();\n    el.object3D.visible = false;\n    el.pause();\n    return el;\n  },\n\n  updateRaycasters: function () {\n    var raycasterEls = document.querySelectorAll('[raycaster]');\n\n    raycasterEls.forEach(function (el) {\n      el.components['raycaster'].setDirty();\n    });\n  }\n});\n","/* global XRPlane */\nimport THREE from '../../lib/three.js';\nimport { registerComponent as register } from '../../core/component.js';\n\n/**\n * Real World Meshing.\n *\n * Create entities with meshes corresponding to 3D surfaces detected in user's environment.\n * It requires a browser with support for the WebXR Mesh and Plane detection modules.\n *\n */\nexport var Component = register('real-world-meshing', {\n  schema: {\n    filterLabels: {type: 'array'},\n    meshesEnabled: {default: true},\n    meshMixin: {default: true},\n    planesEnabled: {default: true},\n    planeMixin: {default: ''}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var webxrData = this.el.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    if (requiredFeaturesArray.indexOf('mesh-detection') === -1) {\n      requiredFeaturesArray.push('mesh-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    if (requiredFeaturesArray.indexOf('plane-detection') === -1) {\n      requiredFeaturesArray.push('plane-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    this.meshEntities = [];\n    this.initWorldMeshEntity = this.initWorldMeshEntity.bind(this);\n  },\n\n  tick: function () {\n    if (!this.el.is('ar-mode')) { return; }\n    this.detectMeshes();\n    this.updateMeshes();\n  },\n\n  detectMeshes: function () {\n    var data = this.data;\n    var detectedMeshes;\n    var detectedPlanes;\n    var sceneEl = this.el;\n    var frame;\n    var meshEntities = this.meshEntities;\n    var present = false;\n    var newMeshes = [];\n    var filterLabels = this.data.filterLabels;\n\n    frame = sceneEl.frame;\n    detectedMeshes = frame.detectedMeshes;\n    detectedPlanes = frame.detectedPlanes;\n\n    for (var i = 0; i < meshEntities.length; i++) {\n      meshEntities[i].present = false;\n    }\n\n    if (data.meshesEnabled) {\n      for (var mesh of detectedMeshes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    if (data.planesEnabled) {\n      for (mesh of detectedPlanes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    this.deleteMeshes();\n    this.createNewMeshes(newMeshes);\n  },\n\n  updateMeshes: (function () {\n    var auxMatrix = new THREE.Matrix4();\n    return function () {\n      var meshPose;\n      var sceneEl = this.el;\n      var meshEl;\n      var frame = sceneEl.frame;\n      var meshEntities = this.meshEntities;\n      var referenceSpace = sceneEl.renderer.xr.getReferenceSpace();\n      var meshSpace;\n      for (var i = 0; i < meshEntities.length; i++) {\n        meshSpace = meshEntities[i].mesh.meshSpace || meshEntities[i].mesh.planeSpace;\n        meshPose = frame.getPose(meshSpace, referenceSpace);\n        meshEl = meshEntities[i].el;\n        if (!meshEl.hasLoaded) { continue; }\n        auxMatrix.fromArray(meshPose.transform.matrix);\n        auxMatrix.decompose(meshEl.object3D.position, meshEl.object3D.quaternion, meshEl.object3D.scale);\n      }\n    };\n  })(),\n\n  deleteMeshes: function () {\n    var meshEntities = this.meshEntities;\n    var newMeshEntities = [];\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (!meshEntities[i].present) {\n        this.el.removeChild(meshEntities[i]);\n      } else {\n        newMeshEntities.push(meshEntities[i]);\n      }\n    }\n    this.meshEntities = newMeshEntities;\n  },\n\n  createNewMeshes: function (newMeshes) {\n    var meshEl;\n    for (var i = 0; i < newMeshes.length; i++) {\n      meshEl = document.createElement('a-entity');\n      this.meshEntities.push({\n        mesh: newMeshes[i],\n        el: meshEl\n      });\n      meshEl.addEventListener('loaded', this.initWorldMeshEntity);\n      this.el.appendChild(meshEl);\n    }\n  },\n\n  initMeshGeometry: function (mesh) {\n    var geometry;\n    var shape;\n    var polygon;\n\n    if (mesh instanceof XRPlane) {\n      shape = new THREE.Shape();\n      polygon = mesh.polygon;\n      for (var i = 0; i < polygon.length; ++i) {\n        if (i === 0) {\n          shape.moveTo(polygon[i].x, polygon[i].z);\n        } else {\n          shape.lineTo(polygon[i].x, polygon[i].z);\n        }\n      }\n      geometry = new THREE.ShapeGeometry(shape);\n      geometry.rotateX(Math.PI / 2);\n      return geometry;\n    }\n\n    geometry = new THREE.BufferGeometry();\n    geometry.setAttribute(\n      'position',\n      new THREE.BufferAttribute(mesh.vertices, 3)\n    );\n    geometry.setIndex(new THREE.BufferAttribute(mesh.indices, 1));\n    return geometry;\n  },\n\n  initWorldMeshEntity: function (evt) {\n    var el = evt.target;\n    var geometry;\n    var mesh;\n    var meshEntity;\n    var meshEntities = this.meshEntities;\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (meshEntities[i].el === el) {\n        meshEntity = meshEntities[i];\n        break;\n      }\n    }\n    geometry = this.initMeshGeometry(meshEntity.mesh);\n    mesh = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({color: Math.random() * 0xFFFFFF, side: THREE.DoubleSide}));\n    el.setObject3D('mesh', mesh);\n    if (meshEntity.mesh instanceof XRPlane && this.data.planeMixin) {\n      el.setAttribute('mixin', this.data.planeMixin);\n    } else {\n      if (this.data.meshMixin) {\n        el.setAttribute('mixin', this.data.meshMixin);\n      }\n    }\n    el.setAttribute('data-world-mesh', meshEntity.mesh.semanticLabel);\n  },\n\n  updateMeshGeometry: function (entityEl, mesh) {\n    var entityMesh = entityEl.getObject3D('mesh');\n    entityMesh.geometry.dispose();\n    entityMesh.geometry = this.initMeshGeometry(mesh);\n  }\n});\n","/* global THREE, XRWebGLBinding */\nimport { registerComponent as register } from '../../core/component.js';\n\n// source: view-source:https://storage.googleapis.com/chromium-webxr-test/r886480/proposals/lighting-estimation.html\nfunction updateLights (estimate, probeLight, directionalLight, directionalLightPosition) {\n  var intensityScalar =\n    Math.max(estimate.primaryLightIntensity.x,\n      Math.max(estimate.primaryLightIntensity.y,\n        estimate.primaryLightIntensity.z));\n\n  probeLight.sh.fromArray(estimate.sphericalHarmonicsCoefficients);\n  probeLight.intensity = 3.14;\n\n  if (directionalLight) {\n    directionalLight.color.setRGB(\n      estimate.primaryLightIntensity.x / intensityScalar,\n      estimate.primaryLightIntensity.y / intensityScalar,\n      estimate.primaryLightIntensity.z / intensityScalar);\n\n    directionalLight.intensity = intensityScalar;\n    directionalLightPosition.copy(estimate.primaryLightDirection);\n  }\n}\n\nexport var Component = register('reflection', {\n  schema: {\n    directionalLight: { type: 'selector' }\n  },\n  sceneOnly: true,\n  init: function () {\n    var self = this;\n    this.cubeRenderTarget = new THREE.WebGLCubeRenderTarget(16);\n    this.cubeCamera = new THREE.CubeCamera(0.1, 1000, this.cubeRenderTarget);\n    this.lightingEstimationTexture = (new THREE.WebGLCubeRenderTarget(16)).texture;\n    this.needsVREnvironmentUpdate = true;\n\n    // Update WebXR to support light-estimation\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (!optionalFeaturesArray.includes('light-estimation')) {\n      optionalFeaturesArray.push('light-estimation');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.addEventListener('enter-vr', function () {\n      if (!self.el.is('ar-mode')) { return; }\n      var renderer = self.el.renderer;\n      var session = renderer.xr.getSession();\n      if (session.requestLightProbe) {\n        self.startLightProbe();\n      }\n    });\n\n    this.el.addEventListener('exit-vr', function () {\n      if (self.xrLightProbe) { self.stopLightProbe(); }\n    });\n\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  stopLightProbe: function () {\n    this.xrLightProbe = null;\n    if (this.probeLight) {\n      this.probeLight.components.light.light.intensity = 0;\n    }\n    this.needsVREnvironmentUpdate = true;\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  startLightProbe: function () {\n    this.needsLightProbeUpdate = true;\n  },\n  setupLightProbe: function () {\n    var renderer = this.el.renderer;\n    var xrSession = renderer.xr.getSession();\n    var self = this;\n    var gl = renderer.getContext();\n\n    if (!this.probeLight) {\n      var probeLight = document.createElement('a-light');\n      probeLight.setAttribute('type', 'probe');\n      probeLight.setAttribute('intensity', 0);\n      this.el.appendChild(probeLight);\n      this.probeLight = probeLight;\n    }\n\n    // Ensure that we have any extensions needed to use the preferred cube map format.\n    switch (xrSession.preferredReflectionFormat) {\n      case 'srgba8':\n        gl.getExtension('EXT_sRGB');\n        break;\n\n      case 'rgba16f':\n        gl.getExtension('OES_texture_half_float');\n        break;\n    }\n\n    this.glBinding = new XRWebGLBinding(xrSession, gl);\n    gl.getExtension('EXT_sRGB');\n    gl.getExtension('OES_texture_half_float');\n\n    xrSession.requestLightProbe()\n      .then(function (lightProbe) {\n        self.xrLightProbe = lightProbe;\n        lightProbe.addEventListener('reflectionchange', self.updateXRCubeMap.bind(self));\n      })\n      .catch(function (err) {\n        console.warn('Lighting estimation not supported: ' + err.message);\n        console.warn('Are you missing: webxr=\"optionalFeatures: light-estimation;\" from <a-scene>?');\n      });\n  },\n  updateXRCubeMap: function () {\n    // Update Cube Map, cubeMap maybe some unavailable on some hardware\n    var renderer = this.el.renderer;\n    var cubeMap = this.glBinding.getReflectionCubeMap(this.xrLightProbe);\n    if (cubeMap) {\n      var rendererProps = renderer.properties.get(this.lightingEstimationTexture);\n      rendererProps.__webglTexture = cubeMap;\n      this.lightingEstimationTexture.needsPMREMUpdate = true;\n      this.el.object3D.environment = this.lightingEstimationTexture;\n    }\n  },\n  tick: function () {\n    var scene = this.el.object3D;\n    var renderer = this.el.renderer;\n    var frame = this.el.frame;\n\n    if (frame && this.xrLightProbe) {\n      // light estimate may not yet be available, it takes a few frames to start working\n      var estimate = frame.getLightEstimate(this.xrLightProbe);\n\n      if (estimate) {\n        updateLights(\n          estimate,\n          this.probeLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.object3D.position\n        );\n      }\n    }\n\n    if (this.needsVREnvironmentUpdate) {\n      scene.environment = null;\n      this.needsVREnvironmentUpdate = false;\n      this.cubeCamera.position.set(0, 1.6, 0);\n      this.cubeCamera.update(renderer, scene);\n      scene.environment = this.cubeRenderTarget.texture;\n    }\n\n    if (this.needsLightProbeUpdate && frame) {\n      // wait until the XR Session has started before trying to make\n      // the light probe\n      this.setupLightProbe();\n      this.needsLightProbeUpdate = false;\n    }\n  },\n\n  remove: function () {\n    this.el.object3D.environment = null;\n    if (this.probeLight) {\n      this.el.removeChild(this.probeLight);\n    }\n  }\n});\n","/* global ImageData, URL */\nimport { registerComponent } from '../../core/component.js';\nimport THREE from '../../lib/three.js';\n\nvar VERTEX_SHADER = [\n  'attribute vec3 position;',\n  'attribute vec2 uv;',\n  'uniform mat4 projectionMatrix;',\n  'uniform mat4 modelViewMatrix;',\n  'varying vec2 vUv;',\n  'void main()  {',\n  '  vUv = vec2( 1.- uv.x, uv.y );',\n  '  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  'precision mediump float;',\n  'uniform samplerCube map;',\n  'varying vec2 vUv;',\n  '#define M_PI 3.141592653589793238462643383279',\n  'void main() {',\n  '  vec2 uv = vUv;',\n  '  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;',\n  '  float latitude = uv.y * M_PI;',\n  '  vec3 dir = vec3(',\n  '    - sin( longitude ) * sin( latitude ),',\n  '    cos( latitude ),',\n  '    - cos( longitude ) * sin( latitude )',\n  '  );',\n  '  normalize( dir );',\n  '  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );',\n  '}'\n].join('\\n');\n\n/**\n * Component to take screenshots of the scene using a keyboard shortcut (alt+s).\n * It can be configured to either take 360&deg; captures (`equirectangular`)\n * or regular screenshots (`projection`)\n *\n * This is based on https://github.com/spite/THREE.CubemapToEquirectangular\n * To capture an equirectangular projection of the scene a THREE.CubeCamera is used\n * The cube map produced by the CubeCamera is projected on a quad and then rendered to\n * WebGLRenderTarget with an orthographic camera.\n */\nexport var Component = registerComponent('screenshot', {\n  schema: {\n    width: {default: 4096},\n    height: {default: 2048},\n    camera: {type: 'selector'}\n  },\n\n  sceneOnly: true,\n\n  setup: function () {\n    var el = this.el;\n    if (this.canvas) { return; }\n    var gl = el.renderer.getContext();\n    if (!gl) { return; }\n    this.cubeMapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    this.material = new THREE.RawShaderMaterial({\n      uniforms: {map: {type: 't', value: null}},\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      side: THREE.DoubleSide\n    });\n    this.quad = new THREE.Mesh(\n      new THREE.PlaneGeometry(1, 1),\n      this.material\n    );\n    this.quad.visible = false;\n    this.camera = new THREE.OrthographicCamera(-1 / 2, 1 / 2, 1 / 2, -1 / 2, -10000, 10000);\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    el.object3D.add(this.quad);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  },\n\n  getRenderTarget: function (width, height) {\n    return new THREE.WebGLRenderTarget(width, height, {\n      colorSpace: this.el.sceneEl.renderer.outputColorSpace,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.LinearFilter,\n      wrapS: THREE.ClampToEdgeWrapping,\n      wrapT: THREE.ClampToEdgeWrapping,\n      format: THREE.RGBAFormat,\n      type: THREE.UnsignedByteType\n    });\n  },\n\n  resize: function (width, height) {\n    // Resize quad.\n    this.quad.scale.set(width, height, 1);\n\n    // Resize camera.\n    this.camera.left = -1 * width / 2;\n    this.camera.right = width / 2;\n    this.camera.top = height / 2;\n    this.camera.bottom = -1 * height / 2;\n    this.camera.updateProjectionMatrix();\n\n    // Resize canvas.\n    this.canvas.width = width;\n    this.canvas.height = height;\n  },\n\n  play: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n  },\n\n  /**\n   * <ctrl> + <alt> + s = Regular screenshot.\n   * <ctrl> + <alt> + <shift> + s = Equirectangular screenshot.\n  */\n  onKeyDown: function (evt) {\n    var shortcutPressed = evt.keyCode === 83 && evt.ctrlKey && evt.altKey;\n    if (!this.data || !shortcutPressed) { return; }\n    var projection = evt.shiftKey ? 'equirectangular' : 'perspective';\n    this.capture(projection);\n  },\n\n  /**\n   * Capture a screenshot of the scene.\n   *\n   * @param {string} projection - Screenshot projection (equirectangular or perspective).\n   */\n  setCapture: function (projection) {\n    var el = this.el;\n    var size;\n    var camera;\n    var cubeCamera;\n    var cubeRenderTarget;\n    // Configure camera.\n    if (projection === 'perspective') {\n      // Quad is only used in equirectangular mode. Hide it in this case.\n      this.quad.visible = false;\n      // Use scene camera.\n      camera = (this.data.camera && this.data.camera.components.camera.camera) || el.camera;\n      size = {width: this.data.width, height: this.data.height};\n    } else {\n      // Use ortho camera.\n      camera = this.camera;\n      cubeRenderTarget = new THREE.WebGLCubeRenderTarget(\n        Math.min(this.cubeMapSize, 2048),\n        {\n          format: THREE.RGBFormat,\n          generateMipmaps: true,\n          minFilter: THREE.LinearMipmapLinearFilter,\n          colorSpace: THREE.SRGBColorSpace\n        });\n      // Create cube camera and copy position from scene camera.\n      cubeCamera = new THREE.CubeCamera(el.camera.near, el.camera.far, cubeRenderTarget);\n      // Copy camera position into cube camera;\n      el.camera.getWorldPosition(cubeCamera.position);\n      el.camera.getWorldQuaternion(cubeCamera.quaternion);\n      // Render scene with cube camera.\n      cubeCamera.update(el.renderer, el.object3D);\n      this.quad.material.uniforms.map.value = cubeCamera.renderTarget.texture;\n      size = {width: this.data.width, height: this.data.height};\n      // Use quad to project image taken by the cube camera.\n      this.quad.visible = true;\n    }\n    return {\n      camera: camera,\n      size: size,\n      projection: projection\n    };\n  },\n\n  /**\n   * Maintained for backwards compatibility.\n   */\n  capture: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    var params;\n    this.setup();\n    // Disable VR.\n    renderer.xr.enabled = false;\n    params = this.setCapture(projection);\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Trigger file download.\n    this.saveCapture();\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n  },\n\n  /**\n   * Return canvas instead of triggering download (e.g., for uploading blob to server).\n   */\n  getCanvas: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    this.setup();\n    // Disable VR.\n    var params = this.setCapture(projection);\n    renderer.xr.enabled = false;\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n    return this.canvas;\n  },\n\n  renderCapture: function (camera, size, projection) {\n    var autoClear = this.el.renderer.autoClear;\n    var el = this.el;\n    var imageData;\n    var output;\n    var pixels;\n    var renderer = el.renderer;\n    // Create rendering target and buffer to store the read pixels.\n    output = this.getRenderTarget(size.width, size.height);\n    pixels = new Uint8Array(4 * size.width * size.height);\n    // Resize quad, camera, and canvas.\n    this.resize(size.width, size.height);\n    // Render scene to render target.\n    renderer.autoClear = true;\n    renderer.clear();\n    renderer.setRenderTarget(output);\n    renderer.render(el.object3D, camera);\n    renderer.autoClear = autoClear;\n    // Read image pixels back.\n    renderer.readRenderTargetPixels(output, 0, 0, size.width, size.height, pixels);\n    renderer.setRenderTarget(null);\n    if (projection === 'perspective') {\n      pixels = this.flipPixelsVertically(pixels, size.width, size.height);\n    }\n    imageData = new ImageData(new Uint8ClampedArray(pixels), size.width, size.height);\n    // Hide quad after projecting the image.\n    this.quad.visible = false;\n    // Copy pixels into canvas.\n    this.ctx.putImageData(imageData, 0, 0);\n  },\n\n  flipPixelsVertically: function (pixels, width, height) {\n    var flippedPixels = pixels.slice(0);\n    for (var x = 0; x < width; ++x) {\n      for (var y = 0; y < height; ++y) {\n        flippedPixels[x * 4 + y * width * 4] = pixels[x * 4 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 1 + y * width * 4] = pixels[x * 4 + 1 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 2 + y * width * 4] = pixels[x * 4 + 2 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 3 + y * width * 4] = pixels[x * 4 + 3 + (height - y) * width * 4];\n      }\n    }\n    return flippedPixels;\n  },\n\n  /**\n   * Download capture to file.\n   */\n  saveCapture: function () {\n    this.canvas.toBlob(function (blob) {\n      var fileName = 'screenshot-' + document.title.toLowerCase() + '-' + Date.now() + '.png';\n      var linkEl = document.createElement('a');\n      var url = URL.createObjectURL(blob);\n      linkEl.href = url;\n      linkEl.setAttribute('download', fileName);\n      linkEl.innerHTML = 'downloading...';\n      linkEl.style.display = 'none';\n      document.body.appendChild(linkEl);\n      setTimeout(function () {\n        linkEl.click();\n        document.body.removeChild(linkEl);\n      }, 1);\n    }, 'image/png');\n  }\n});\n","import { registerComponent } from '../../core/component.js';\nimport RStats from '../../../vendor/rStats.js';\nimport * as utils from '../../utils/index.js';\nimport '../../../vendor/rStats.extras.js';\nimport '../../lib/rStatsAframe.js';\n\nvar AFrameStats = window.aframeStats;\nvar HIDDEN_CLASS = 'a-hidden';\nvar ThreeStats = window.threeStats;\n\n/**\n * Stats appended to document.body by RStats.\n */\nexport var Component = registerComponent('stats', {\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  init: function () {\n    var scene = this.el;\n\n    if (utils.getUrlParameter('stats') === 'false') { return; }\n\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector('.rs-base');\n\n    this.hideBound = this.hide.bind(this);\n    this.showBound = this.show.bind(this);\n\n    scene.addEventListener('enter-vr', this.hideBound);\n    scene.addEventListener('exit-vr', this.showBound);\n  },\n\n  update: function () {\n    if (!this.stats) { return; }\n    return (!this.data) ? this.hide() : this.show();\n  },\n\n  remove: function () {\n    this.el.removeEventListener('enter-vr', this.hideBound);\n    this.el.removeEventListener('exit-vr', this.showBound);\n    if (!this.statsEl) { return; }  // Scene detached.\n    this.statsEl.parentNode.removeChild(this.statsEl);\n  },\n\n  tick: function () {\n    var stats = this.stats;\n\n    if (!stats) { return; }\n\n    stats('rAF').tick();\n    stats('FPS').frame();\n    stats().update();\n  },\n\n  hide: function () {\n    this.statsEl.classList.add(HIDDEN_CLASS);\n  },\n\n  show: function () {\n    this.statsEl.classList.remove(HIDDEN_CLASS);\n  }\n});\n\nfunction createStats (scene) {\n  var threeStats = new ThreeStats(scene.renderer);\n  var aframeStats = new AFrameStats(scene);\n  var plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new RStats({\n    css: [],  // Our stylesheet is injected from `src/index.js`.\n    values: {\n      fps: {caption: 'fps', below: 30}\n    },\n    groups: [\n      {caption: 'Framerate', values: ['fps', 'raf']}\n    ],\n    plugins: plugins\n  });\n}\n","import { registerComponent } from '../../core/component.js';\nimport * as constants from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\n\nvar ENTER_VR_CLASS = 'a-enter-vr';\nvar ENTER_AR_CLASS = 'a-enter-ar';\n\nvar ENTER_VR_BTN_CLASS = 'a-enter-vr-button';\nvar ENTER_AR_BTN_CLASS = 'a-enter-ar-button';\nvar HIDDEN_CLASS = 'a-hidden';\nvar ORIENTATION_MODAL_CLASS = 'a-orientation-modal';\n\n/**\n * UI for entering VR mode.\n */\nexport var Component = registerComponent('xr-mode-ui', {\n  dependencies: ['canvas'],\n\n  schema: {\n    enabled: {default: true},\n    enterVRButton: {default: ''},\n    enterVREnabled: {default: true},\n    enterARButton: {default: ''},\n    enterAREnabled: {default: true},\n    XRMode: {default: 'vr', oneOf: ['vr', 'ar', 'xr']}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n    var sceneEl = this.el;\n\n    if (utils.getUrlParameter('ui') === 'false') { return; }\n\n    this.insideLoader = false;\n    this.enterVREl = null;\n    this.enterAREl = null;\n\n    this.orientationModalEl = null;\n    this.bindMethods();\n\n    // Hide/show VR UI when entering/exiting VR mode.\n    sceneEl.addEventListener('enter-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('exit-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('update-vr-devices', this.updateEnterInterfaces);\n\n    window.addEventListener('message', function (event) {\n      if (event.data.type === 'loaderReady') {\n        self.insideLoader = true;\n        self.remove();\n      }\n    });\n\n    // Modal that tells the user to change orientation if in portrait.\n    window.addEventListener('orientationchange', this.toggleOrientationModalIfNeeded);\n  },\n\n  bindMethods: function () {\n    this.onEnterVRButtonClick = this.onEnterVRButtonClick.bind(this);\n    this.onEnterARButtonClick = this.onEnterARButtonClick.bind(this);\n    this.onModalClick = this.onModalClick.bind(this);\n    this.toggleOrientationModalIfNeeded = this.toggleOrientationModalIfNeeded.bind(this);\n    this.updateEnterInterfaces = this.updateEnterInterfaces.bind(this);\n  },\n\n  /**\n   * Exit VR when modal clicked.\n   */\n  onModalClick: function () {\n    this.el.exitVR();\n  },\n\n  /**\n   * Enter VR when clicked.\n   */\n  onEnterVRButtonClick: function () {\n    this.el.enterVR();\n  },\n\n  /**\n   * Enter AR when clicked.\n   */\n  onEnterARButtonClick: function () {\n    this.el.enterAR();\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n\n    if (!data.enabled || this.insideLoader || utils.getUrlParameter('ui') === 'false') {\n      return this.remove();\n    }\n\n    if (this.enterVREl || this.enterAREl || this.orientationModalEl) { return; }\n\n    // Add UI if enabled and not already present.\n    if (!this.enterVREl && data.enterVREnabled && (data.XRMode === 'xr' || data.XRMode === 'vr')) {\n      if (data.enterVRButton) {\n        // Custom button.\n        this.enterVREl = document.querySelector(data.enterVRButton);\n        this.enterVREl.addEventListener('click', this.onEnterVRButtonClick);\n      } else {\n        this.enterVREl = createEnterVRButton(this.onEnterVRButtonClick);\n        sceneEl.appendChild(this.enterVREl);\n      }\n    }\n\n    if (!this.enterAREl && data.enterAREnabled && (data.XRMode === 'xr' || data.XRMode === 'ar')) {\n      if (data.enterARButton) {\n        // Custom button.\n        this.enterAREl = document.querySelector(data.enterARButton);\n        this.enterAREl.addEventListener('click', this.onEnterARButtonClick);\n      } else {\n        this.enterAREl = createEnterARButton(this.onEnterARButtonClick, data.XRMode === 'xr');\n        sceneEl.appendChild(this.enterAREl);\n      }\n    }\n\n    this.orientationModalEl = createOrientationModal(this.onModalClick);\n    sceneEl.appendChild(this.orientationModalEl);\n\n    this.updateEnterInterfaces();\n  },\n\n  remove: function () {\n    [this.enterVREl, this.enterAREl, this.orientationModalEl].forEach(function (uiElement) {\n      if (uiElement && uiElement.parentNode) {\n        uiElement.parentNode.removeChild(uiElement);\n      }\n    });\n    this.enterVREl = undefined;\n    this.enterAREl = undefined;\n    this.orientationModalEl = undefined;\n  },\n\n  updateEnterInterfaces: function () {\n    this.toggleEnterVRButtonIfNeeded();\n    this.toggleEnterARButtonIfNeeded();\n    this.toggleOrientationModalIfNeeded();\n  },\n\n  toggleEnterVRButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterVREl) { return; }\n    if (sceneEl.is('vr-mode') ||\n       ((sceneEl.isMobile || utils.device.isMobileDeviceRequestingDesktopSite()) && !utils.device.checkVRSupport())) {\n      this.enterVREl.classList.add(HIDDEN_CLASS);\n    } else {\n      if (!utils.device.checkVRSupport()) { this.enterVREl.classList.add('fullscreen'); }\n      this.enterVREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(false, true);\n    }\n  },\n\n  toggleEnterARButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterAREl) { return; }\n    // Hide the button while in a session, or if AR is not supported.\n    if (sceneEl.is('vr-mode') || !utils.device.checkARSupport()) {\n      this.enterAREl.classList.add(HIDDEN_CLASS);\n    } else {\n      this.enterAREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(true, true);\n    }\n  },\n\n  toggleOrientationModalIfNeeded: function () {\n    var sceneEl = this.el;\n    var orientationModalEl = this.orientationModalEl;\n    if (!orientationModalEl || !sceneEl.isMobile) { return; }\n    if (!utils.device.isLandscape() && sceneEl.is('vr-mode')) {\n      // Show if in VR mode on portrait.\n      orientationModalEl.classList.remove(HIDDEN_CLASS);\n    } else {\n      orientationModalEl.classList.add(HIDDEN_CLASS);\n    }\n  }\n});\n\n/**\n * Create a button that when clicked will enter into stereo-rendering mode for VR.\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterVRButton (onClick) {\n  var vrButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_VR_CLASS);\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  vrButton = document.createElement('button');\n  vrButton.className = ENTER_VR_BTN_CLASS;\n  vrButton.setAttribute('title',\n    'Enter VR mode with a headset or fullscreen without');\n  vrButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(vrButton); }\n  // Insert elements.\n  wrapper.appendChild(vrButton);\n  vrButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Create a button that when clicked will enter into AR mode\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterARButton (onClick, xrMode) {\n  var arButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_AR_CLASS);\n  if (xrMode) { wrapper.classList.add('xr'); }\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  arButton = document.createElement('button');\n  arButton.className = ENTER_AR_BTN_CLASS;\n  arButton.setAttribute('title',\n    'Enter AR mode with a headset or handheld device.');\n  arButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(arButton); }\n  // Insert elements.\n  wrapper.appendChild(arButton);\n  arButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Creates a modal dialog to request the user to switch to landscape orientation.\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createOrientationModal (onClick) {\n  var modal = document.createElement('div');\n  modal.className = ORIENTATION_MODAL_CLASS;\n  modal.classList.add(HIDDEN_CLASS);\n  modal.setAttribute(constants.AFRAME_INJECTED, '');\n\n  var exit = document.createElement('button');\n  exit.setAttribute(constants.AFRAME_INJECTED, '');\n  exit.innerHTML = 'Exit VR';\n\n  // Exit VR on close.\n  exit.addEventListener('click', onClick);\n\n  modal.appendChild(exit);\n\n  return modal;\n}\n\n/**\n * CSS hover state is sticky in iOS (as in 12/18/2019)\n * They are not removed on mouseleave and this function applies a class\n * to resets the style.\n *\n * @param {function} buttonEl - Button element\n */\nfunction applyStickyHoverFix (buttonEl) {\n  buttonEl.addEventListener('touchstart', function () {\n    buttonEl.classList.remove('resethover');\n  }, {passive: true});\n  buttonEl.addEventListener('touchend', function () {\n    buttonEl.classList.add('resethover');\n  }, {passive: true});\n}\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('box', {\n  schema: {\n    depth: {default: 1, min: 0},\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsDepth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.BoxGeometry(\n      data.width, data.height, data.depth,\n      data.segmentsWidth, data.segmentsHeight, data.segmentsDepth);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('circle', {\n  schema: {\n    radius: {default: 1, min: 0},\n    segments: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CircleGeometry(\n      data.radius, data.segments, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cone', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radiusBottom: {default: 1, min: 0},\n    radiusTop: {default: 0.01, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n        data.radiusTop, data.radiusBottom, data.height, data.segmentsRadial,\n        data.segmentsHeight, data.openEnded, degToRad(data.thetaStart),\n        degToRad(data.thetaLength));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cylinder', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radius: {default: 1, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n        data.radius, data.radius, data.height, data.segmentsRadial, data.segmentsHeight,\n        data.openEnded, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('dodecahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.DodecahedronGeometry(data.radius, data.detail);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('icosahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.IcosahedronGeometry(data.radius, data.detail);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('octahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.OctahedronGeometry(data.radius, data.detail);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('plane', {\n  schema: {\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.PlaneGeometry(data.width, data.height, data.segmentsWidth, data.segmentsHeight);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('ring', {\n  schema: {\n    radiusInner: {default: 0.8, min: 0},\n    radiusOuter: {default: 1.2, min: 0},\n    segmentsPhi: {default: 10, min: 1, type: 'int'},\n    segmentsTheta: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.RingGeometry(\n        data.radiusInner, data.radiusOuter, data.segmentsTheta, data.segmentsPhi,\n        degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('sphere', {\n  schema: {\n    radius: {default: 1, min: 0},\n    phiLength: {default: 360},\n    phiStart: {default: 0, min: 0},\n    thetaLength: {default: 180, min: 0},\n    thetaStart: {default: 0},\n    segmentsHeight: {default: 18, min: 2, type: 'int'},\n    segmentsWidth: {default: 36, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.SphereGeometry(\n      data.radius, data.segmentsWidth, data.segmentsHeight, degToRad(data.phiStart),\n      degToRad(data.phiLength), degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('tetrahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TetrahedronGeometry(data.radius, data.detail);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('torus', {\n  schema: {\n    arc: {default: 360},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 36, min: 2, type: 'int'},\n    segmentsTubular: {default: 32, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsRadial, data.segmentsTubular,\n      degToRad(data.arc));\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('torusKnot', {\n  schema: {\n    p: {default: 2, min: 1},\n    q: {default: 3, min: 1},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 8, min: 3, type: 'int'},\n    segmentsTubular: {default: 100, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusKnotGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsTubular, data.segmentsRadial,\n      data.p, data.q);\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar quaternion = new THREE.Quaternion();\nvar rotateVector = new THREE.Vector3(0, 0, 1);\nvar uvMinVector = new THREE.Vector2();\nvar uvMaxVector = new THREE.Vector2();\nvar uvScaleVector = new THREE.Vector2();\n\nregisterGeometry('triangle', {\n  schema: {\n    vertexA: {type: 'vec3', default: {x: 0, y: 0.5, z: 0}},\n    vertexB: {type: 'vec3', default: {x: -0.5, y: -0.5, z: 0}},\n    vertexC: {type: 'vec3', default: {x: 0.5, y: -0.5, z: 0}}\n  },\n\n  init: function (data) {\n    var geometry;\n    var normal;\n    var triangle;\n    var uvA;\n    var uvB;\n    var uvC;\n\n    var vertices;\n    var normals;\n    var uvs;\n\n    triangle = new THREE.Triangle();\n    triangle.a.set(data.vertexA.x, data.vertexA.y, data.vertexA.z);\n    triangle.b.set(data.vertexB.x, data.vertexB.y, data.vertexB.z);\n    triangle.c.set(data.vertexC.x, data.vertexC.y, data.vertexC.z);\n    normal = triangle.getNormal(new THREE.Vector3());\n\n    // Rotate the 3D triangle to be parallel to XY plane.\n    quaternion.setFromUnitVectors(normal, rotateVector);\n    uvA = triangle.a.clone().applyQuaternion(quaternion);\n    uvB = triangle.b.clone().applyQuaternion(quaternion);\n    uvC = triangle.c.clone().applyQuaternion(quaternion);\n\n    // Compute UVs.\n    // Normalize x/y values of UV so they are within 0 to 1.\n    uvMinVector.set(Math.min(uvA.x, uvB.x, uvC.x), Math.min(uvA.y, uvB.y, uvC.y));\n    uvMaxVector.set(Math.max(uvA.x, uvB.x, uvC.x), Math.max(uvA.y, uvB.y, uvC.y));\n    uvScaleVector.set(0, 0).subVectors(uvMaxVector, uvMinVector);\n    uvA = new THREE.Vector2().subVectors(uvA, uvMinVector).divide(uvScaleVector);\n    uvB = new THREE.Vector2().subVectors(uvB, uvMinVector).divide(uvScaleVector);\n    uvC = new THREE.Vector2().subVectors(uvC, uvMinVector).divide(uvScaleVector);\n\n    geometry = this.geometry = new THREE.BufferGeometry();\n    vertices = [\n      triangle.a.x, triangle.a.y, triangle.a.z,\n      triangle.b.x, triangle.b.y, triangle.b.z,\n      triangle.c.x, triangle.c.y, triangle.c.z\n    ];\n    normals = [\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z\n    ];\n    uvs = [\n      uvA.x, uvA.y,\n      uvB.x, uvB.y,\n      uvC.x, uvC.y\n    ];\n\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));\n    geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n  }\n});\n","import { registerShader } from '../core/shader.js';\nimport THREE from '../lib/three.js';\nimport * as utils from '../utils/index.js';\n\n/**\n * Flat shader using THREE.MeshBasicMaterial.\n */\nexport var Shader = registerShader('flat', {\n  schema: {\n    color: {type: 'color'},\n    fog: {default: true},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2},\n    toneMapped: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshBasicMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to reuse.\n * @returns {object} Updated material data.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.fog = data.fog;\n  materialData.wireframe = data.wireframe;\n  materialData.toneMapped = data.toneMapped;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  return materialData;\n}\n","import THREE from '../lib/three.js';\nimport { registerShader } from '../core/shader.js';\nimport * as utils from '../utils/index.js';\n\n/**\n * Standard (physically-based) shader using THREE.MeshStandardMaterial.\n */\nexport var Shader = registerShader('standard', {\n  schema: {\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n    ambientOcclusionTextureOffset: {type: 'vec2'},\n    ambientOcclusionTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    color: {type: 'color'},\n\n    displacementMap: {type: 'map'},\n    displacementScale: {default: 1},\n    displacementBias: {default: 0.5},\n    displacementTextureOffset: {type: 'vec2'},\n    displacementTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    emissive: {type: 'color', default: '#000'},\n    emissiveIntensity: {default: 1},\n\n    envMap: {default: ''},\n\n    fog: {default: true},\n\n    metalness: {default: 0.0, min: 0.0, max: 1.0},\n    metalnessMap: {type: 'map'},\n    metalnessTextureOffset: {type: 'vec2'},\n    metalnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    normalMap: {type: 'map'},\n    normalScale: {type: 'vec2', default: {x: 1, y: 1}},\n    normalTextureOffset: {type: 'vec2'},\n    normalTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    roughness: {default: 0.5, min: 0.0, max: 1.0},\n    roughnessMap: {type: 'map'},\n    roughnessTextureOffset: {type: 'vec2'},\n    roughnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    sphericalEnvMap: {type: 'map'},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color(), emissive: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshStandardMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('metalness', this, data);\n    utils.material.updateDistortionMap('roughness', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   * @returns {object} Material.\n   */\n  updateMaterial: function (data) {\n    var key;\n    var material = this.material;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.metalness = data.metalness;\n  materialData.roughness = data.roughness;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n\n  if (data.normalMap) { materialData.normalScale = data.normalScale; }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n","import { registerShader } from '../core/shader.js';\nimport THREE from '../lib/three.js';\nimport * as utils from '../utils/index.js';\n\n/**\n * Phong shader using THREE.MeshPhongMaterial.\n */\nexport var Shader = registerShader('phong', {\n  schema: {\n    color: { type: 'color' },\n    emissive: { type: 'color', default: 'black' },\n    emissiveIntensity: { default: 1 },\n    specular: { type: 'color', default: '#111111' },\n    transparent: { default: false },\n    fog: { default: true },\n    offset: { type: 'vec2', default: { x: 0, y: 0 } },\n    repeat: { type: 'vec2', default: { x: 1, y: 1 } },\n    src: { type: 'map' },\n    envMap: { default: '' },\n    sphericalEnvMap: { type: 'map' },\n    shininess: { default: 30 },\n    flatShading: { default: false },\n    wireframe: { default: false },\n    wireframeLinewidth: { default: 2 },\n    combine: { oneOF: ['multiply', 'mix', 'add'], default: 'mix' },\n    reflectivity: { default: 0.9 },\n    refractionRatio: { default: 0.98 },\n    refract: { default: false },\n\n    normalMap: { type: 'map' },\n    normalScale: { type: 'vec2', default: { x: 1, y: 1 } },\n    normalTextureOffset: { type: 'vec2' },\n    normalTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n\n    displacementMap: { type: 'map' },\n    displacementScale: { default: 1 },\n    displacementBias: { default: 0.5 },\n    displacementTextureOffset: { type: 'vec2' },\n    displacementTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    bumpMap: { type: 'map' },\n    bumpMapScale: { default: 1 },\n    bumpTextureOffset: { type: 'vec2' },\n    bumpTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } }\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = { color: new THREE.Color(), specular: new THREE.Color(), emissive: new THREE.Color() };\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshPhongMaterial(this.materialData);\n    var sceneEl = this.el.sceneEl;\n    // Fallback to scene environment when no envMap is defined (matching behaviour of standard material)\n    Object.defineProperty(this.material, 'envMap', {\n      get: function () {\n        return this._envMap || sceneEl.object3D.environment;\n      },\n      set: function (value) {\n        this._envMap = value;\n      }\n    });\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('bump', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.specular.set(data.specular);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.transparent = data.transparent;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.shininess = data.shininess;\n  materialData.flatShading = data.flatShading;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.reflectivity = data.reflectivity;\n  materialData.refractionRatio = data.refractionRatio;\n\n  switch (data.combine) {\n    case 'mix':\n      materialData.combine = THREE.MixOperation;\n      break;\n    case 'multiply':\n      materialData.combine = THREE.MultiplyOperation;\n      break;\n    case 'add':\n      materialData.combine = THREE.AddOperation;\n      break;\n  }\n\n  if (data.normalMap) {\n    materialData.normalScale = data.normalScale;\n  }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.bumpMap) {\n    materialData.bumpScale = data.bumpMapScale;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n","import { registerShader } from '../core/shader.js';\nimport THREE from '../lib/three.js';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float contour(float width, float value) {',\n  '  return smoothstep(0.5 - value, 0.5 + value, width);',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec2 uv = vUV;',\n  '  vec4 texColor = texture(map, uv);',\n  '  float dist = texColor.a;',\n  '  float width = fwidth(dist);',\n  '  float alpha = contour(dist, width);',\n  '  float dscale = 0.353505;',\n\n  '  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n     // When texel is too small, blend raw alpha value rather than supersampling.\n     // FIXME: experimentally determined constant\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * dist;',\n  '  }',\n\n     // Otherwise do weighted supersampling.\n     // FIXME: why this weighting?\n  '  if (isBigEnough <= BIG_ENOUGH) {',\n  '    vec4 box = vec4 (uv - duv, uv + duv);',\n  '    alpha = (alpha + 0.5 * (',\n  '      contour(texture(map, box.xy).a, width)',\n  '      + contour(texture(map, box.zw).a, width)',\n  '      + contour(texture(map, box.xw).a, width)',\n  '      + contour(texture(map, box.zy).a, width)',\n  '    )) / 3.0;',\n  '  }',\n\n       // Do modified alpha test.\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n\n  '  gl_FragColor = vec4(color, opacity * alpha);',\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('sdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n     this.uniforms = THREE.UniformsUtils.merge([\n       THREE.UniformsLib.fog,\n       this.initUniforms()\n     ]);\n     this.material = new THREE.ShaderMaterial({\n       uniforms: this.uniforms,\n       vertexShader: this.vertexShader,\n       fragmentShader: this.fragmentShader,\n       fog: true\n     });\n     return this.material;\n   }\n});\n","import { registerShader } from '../core/shader.js';\nimport THREE from '../lib/three.js';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform bool negate;',\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float median(float r, float g, float b) {',\n  '  return max(min(r, g), min(max(r, g), b));',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec3 sampleColor = texture(map, vUV).rgb;',\n  '  if (negate) { sampleColor = 1.0 - sampleColor; }',\n\n  '  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;',\n  '  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);',\n  '  float dscale = 0.353505;',\n  '  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n  // When texel is too small, blend raw alpha value rather than supersampling.\n  // FIXME: Experimentally determined constant.\n  '  // Do modified alpha test.',\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);',\n  '  }',\n\n  '  // Do modified alpha test.',\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n  '  gl_FragColor = vec4(color.xyz, alpha * opacity);',\n\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Multi-channel signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('msdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    negate: {type: 'boolean', is: 'uniform', default: true},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n    this.uniforms = THREE.UniformsUtils.merge([\n      THREE.UniformsLib.fog,\n      this.initUniforms()\n    ]);\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      fog: true\n    });\n    return this.material;\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerShader } from '../core/shader.js';\n\n/**\n * Flat shader using THREE.ShadowMaterial.\n */\nexport var Shader = registerShader('shadow', {\n  schema: {\n    opacity: {default: 0.5},\n    transparent: {default: true},\n    alphaToCoverage: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.material = new THREE.ShadowMaterial();\n  },\n\n  update: function (data) {\n    this.material.opacity = data.opacity;\n    this.material.alphaToCoverage = data.alphaToCoverage;\n    this.material.transparent = data.transparent;\n  }\n});\n","import * as constants from '../constants/index.js';\nimport { registerSystem } from '../core/system.js';\n\nvar DEFAULT_CAMERA_ATTR = 'data-aframe-default-camera';\n\n/**\n * Camera system. Manages which camera is active among multiple cameras in scene.\n *\n * @member {object} activeCameraEl - Active camera entity.\n */\nexport var System = registerSystem('camera', {\n  init: function () {\n    this.activeCameraEl = null;\n\n    this.render = this.render.bind(this);\n    this.unwrapRender = this.unwrapRender.bind(this);\n    this.wrapRender = this.wrapRender.bind(this);\n\n    this.initialCameraFound = false;\n    this.numUserCameras = 0;\n    this.numUserCamerasChecked = 0;\n    this.setupInitialCamera();\n  },\n\n  /**\n   * Setup initial camera, either searching for camera or\n   * creating a default camera if user has not added one during the initial scene traversal.\n   * We want sceneEl.camera to be ready, set, and initialized before the rest of the scene\n   * loads.\n   *\n   * Default camera offset height is at average eye level (~1.6m).\n   */\n  setupInitialCamera: function () {\n    var cameraEls;\n    var i;\n    var sceneEl = this.sceneEl;\n    var self = this;\n\n    // Camera already defined or the one defined it is an spectator one.\n    if (sceneEl.camera && !sceneEl.camera.el.getAttribute('camera').spectator) {\n      sceneEl.emit('cameraready', {cameraEl: sceneEl.camera.el});\n      return;\n    }\n\n    // Search for initial user-defined camera.\n    cameraEls = sceneEl.querySelectorAll('a-camera, :not(a-mixin)[camera]');\n\n    // No user cameras, create default one.\n    if (!cameraEls.length) {\n      this.createDefaultCamera();\n      return;\n    }\n\n    this.numUserCameras = cameraEls.length;\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEls[i].addEventListener('object3dset', function (evt) {\n        if (evt.detail.type !== 'camera') { return; }\n        self.checkUserCamera(this);\n      });\n\n      // Load camera and wait for camera to initialize.\n      if (cameraEls[i].isNode) {\n        cameraEls[i].load();\n      } else {\n        cameraEls[i].addEventListener('nodeready', function () {\n          this.load();\n        });\n      }\n    }\n  },\n\n  /**\n   * Check if a user-defined camera entity is appropriate to be initial camera.\n   * (active + non-spectator).\n   *\n   * Keep track of the number of cameras we checked and whether we found one.\n   */\n  checkUserCamera: function (cameraEl) {\n    var cameraData;\n    var sceneEl = this.el.sceneEl;\n    this.numUserCamerasChecked++;\n\n    // Already found one.\n    if (this.initialCameraFound) { return; }\n\n    // Check if camera is appropriate for being the initial camera.\n    cameraData = cameraEl.getAttribute('camera');\n    if (!cameraData.active || cameraData.spectator) {\n      // No user cameras eligible, create default camera.\n      if (this.numUserCamerasChecked === this.numUserCameras) {\n        this.createDefaultCamera();\n      }\n      return;\n    }\n\n    this.initialCameraFound = true;\n    sceneEl.camera = cameraEl.getObject3D('camera');\n    sceneEl.emit('cameraready', {cameraEl: cameraEl});\n  },\n\n  createDefaultCamera: function () {\n    var defaultCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Set up default camera.\n    defaultCameraEl = document.createElement('a-entity');\n    defaultCameraEl.setAttribute('camera', {active: true});\n    defaultCameraEl.setAttribute('position', {\n      x: 0,\n      y: constants.DEFAULT_CAMERA_HEIGHT,\n      z: 0\n    });\n    defaultCameraEl.setAttribute('wasd-controls', '');\n    defaultCameraEl.setAttribute('look-controls', '');\n    defaultCameraEl.setAttribute(constants.AFRAME_INJECTED, '');\n\n    defaultCameraEl.addEventListener('object3dset', function (evt) {\n      if (evt.detail.type !== 'camera') { return; }\n      sceneEl.camera = evt.detail.object;\n      sceneEl.emit('cameraready', {cameraEl: defaultCameraEl});\n    });\n\n    sceneEl.appendChild(defaultCameraEl);\n  },\n\n  /**\n   * Set a different active camera.\n   * When we choose a (sort of) random scene camera as the replacement, set its `active` to\n   * true. The camera component will call `setActiveCamera` and handle passing the torch to\n   * the new camera.\n   */\n  disableActiveCamera: function () {\n    var cameraEls;\n    var newActiveCameraEl;\n    cameraEls = this.sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    newActiveCameraEl = cameraEls[cameraEls.length - 1];\n    newActiveCameraEl.setAttribute('camera', 'active', true);\n  },\n\n  /**\n   * Set active camera to be used by renderer.\n   * Removes the default camera (if present).\n   * Disables all other cameras in the scene.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setActiveCamera: function (newCameraEl) {\n    var cameraEl;\n    var cameraEls;\n    var i;\n    var newCamera;\n    var previousCamera = this.activeCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.activeCameraEl) { return; }\n\n    // Grab the default camera.\n    var defaultCameraWrapper = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n    var defaultCameraEl = defaultCameraWrapper &&\n                          defaultCameraWrapper.querySelector(':not(a-mixin)[camera]');\n\n    // Remove default camera if new camera is not the default camera.\n    if (newCameraEl !== defaultCameraEl) { removeDefaultCamera(sceneEl); }\n\n    // Make new camera active.\n    this.activeCameraEl = newCameraEl;\n    this.activeCameraEl.play();\n    sceneEl.camera = newCamera;\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'active', false);\n    }\n\n    // Disable other cameras in the scene\n    cameraEls = sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEl = cameraEls[i];\n      if (!cameraEl.isEntity || newCameraEl === cameraEl) { continue; }\n      cameraEl.setAttribute('camera', 'active', false);\n      cameraEl.pause();\n    }\n    sceneEl.emit('camera-set-active', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Set spectator camera to render the scene on a 2D display.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setSpectatorCamera: function (newCameraEl) {\n    var newCamera;\n    var previousCamera = this.spectatorCameraEl;\n    var sceneEl = this.sceneEl;\n    var spectatorCameraEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.spectatorCameraEl) { return; }\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'spectator', false);\n    }\n\n    spectatorCameraEl = this.spectatorCameraEl = newCameraEl;\n\n    sceneEl.addEventListener('enter-vr', this.wrapRender);\n    sceneEl.addEventListener('exit-vr', this.unwrapRender);\n\n    spectatorCameraEl.setAttribute('camera', 'active', false);\n    spectatorCameraEl.play();\n\n    sceneEl.emit('camera-set-spectator', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Disables current spectator camera.\n   */\n  disableSpectatorCamera: function () {\n    this.spectatorCameraEl = undefined;\n  },\n\n  /**\n   * Wrap the render method of the renderer to render\n   * the spectator camera.\n   */\n  wrapRender: function () {\n    if (!this.spectatorCameraEl || this.originalRender) { return; }\n    this.originalRender = this.sceneEl.renderer.render;\n    this.sceneEl.renderer.render = this.render;\n  },\n\n  unwrapRender: function () {\n    if (!this.originalRender) { return; }\n    this.sceneEl.renderer.render = this.originalRender;\n    this.originalRender = undefined;\n  },\n\n  render: function (scene, camera) {\n    var isVREnabled;\n    var sceneEl = this.sceneEl;\n    var spectatorCamera;\n\n    isVREnabled = sceneEl.renderer.xr.enabled;\n    this.originalRender.call(sceneEl.renderer, scene, camera);\n    if (!this.spectatorCameraEl || sceneEl.isMobile || !isVREnabled) { return; }\n    spectatorCamera = this.spectatorCameraEl.components.camera.camera;\n    sceneEl.renderer.xr.enabled = false;\n    this.originalRender.call(sceneEl.renderer, scene, spectatorCamera);\n    sceneEl.renderer.xr.enabled = isVREnabled;\n  }\n});\n\n/**\n * Remove injected default camera from scene, if present.\n *\n * @param {Element} sceneEl\n */\nfunction removeDefaultCamera (sceneEl) {\n  var defaultCamera;\n  var camera = sceneEl.camera;\n  if (!camera) { return; }\n\n  // Remove default camera if present.\n  defaultCamera = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n  if (!defaultCamera) { return; }\n  sceneEl.removeChild(defaultCamera);\n}\n","import { geometries } from '../core/geometry.js';\nimport { registerSystem } from '../core/system.js';\n\n/**\n * System for geometry component.\n * Handle geometry caching.\n *\n * @member {object} cache - Mapping of stringified component data to THREE.BufferGeometry objects.\n * @member {object} cacheCount - Keep track of number of entities using a geometry to\n *         know whether to dispose on removal.\n */\nexport var System = registerSystem('geometry', {\n  init: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Reset cache. Mainly for testing.\n   */\n  clearCache: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Attempt to retrieve from cache.\n   *\n   * @returns {Object|null} A geometry if it exists, else null.\n   */\n  getOrCreateGeometry: function (data) {\n    var cache = this.cache;\n    var cachedGeometry;\n    var hash;\n\n    // Skip all caching logic.\n    if (data.skipCache) { return createGeometry(data); }\n\n    // Try to retrieve from cache first.\n    hash = this.hash(data);\n    cachedGeometry = cache[hash];\n    incrementCacheCount(this.cacheCount, hash);\n\n    if (cachedGeometry) { return cachedGeometry; }\n\n    // Create geometry.\n    cachedGeometry = createGeometry(data);\n\n    // Cache and return geometry.\n    cache[hash] = cachedGeometry;\n    return cachedGeometry;\n  },\n\n  /**\n   * Let system know that an entity is no longer using a geometry.\n   */\n  unuseGeometry: function (data) {\n    var cache = this.cache;\n    var cacheCount = this.cacheCount;\n    var geometry;\n    var hash;\n\n    if (data.skipCache) { return; }\n\n    hash = this.hash(data);\n\n    if (!cache[hash]) { return; }\n\n    decrementCacheCount(cacheCount, hash);\n\n    // Another entity is still using this geometry. No need to do anything.\n    if (cacheCount[hash] > 0) { return; }\n\n    // No more entities are using this geometry. Dispose.\n    geometry = cache[hash];\n    geometry.dispose();\n    delete cache[hash];\n    delete cacheCount[hash];\n  },\n\n  /**\n   * Use JSON.stringify to turn component data into hash.\n   * Should be deterministic within a single browser engine.\n   * If not, then look into json-stable-stringify.\n   */\n  hash: function (data) {\n    return JSON.stringify(data);\n  }\n});\n\n/**\n * Create geometry using component data.\n *\n * @param {object} data - Component data.\n * @returns {object} Geometry.\n */\nfunction createGeometry (data) {\n  var geometryType = data.primitive;\n  var GeometryClass = geometries[geometryType] && geometries[geometryType].Geometry;\n  var geometryInstance = new GeometryClass();\n\n  if (!GeometryClass) { throw new Error('Unknown geometry `' + geometryType + '`'); }\n\n  geometryInstance.init(data);\n  return geometryInstance.geometry;\n}\n\n/**\n * Decrease count of entity using a geometry.\n */\nfunction decrementCacheCount (cacheCount, hash) {\n  cacheCount[hash]--;\n}\n\n/**\n * Increase count of entity using a geometry.\n */\nfunction incrementCacheCount (cacheCount, hash) {\n  cacheCount[hash] = cacheCount[hash] === undefined ? 1 : cacheCount[hash] + 1;\n}\n","import THREE from '../lib/three.js';\nimport { registerSystem } from '../core/system.js';\n\nfunction fetchScript (src) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = src;\n  });\n}\n\n/**\n * glTF model system.\n *\n * Configures glTF loading options. Models using glTF compression require that a Draco decoder be\n * provided externally.\n *\n * @param {string} dracoDecoderPath - Base path from which to load Draco decoder library.\n * @param {string} basisTranscoderPath - Base path from which to load Basis transcoder library.\n * @param {string} meshoptDecoderPath - Full path from which to load Meshopt decoder.\n */\nexport var System = registerSystem('gltf-model', {\n  schema: {\n    dracoDecoderPath: {default: 'https://www.gstatic.com/draco/versioned/decoders/1.5.7/'},\n    basisTranscoderPath: {default: ''},\n    meshoptDecoderPath: {default: ''}\n  },\n\n  init: function () {\n    this.update();\n  },\n\n  update: function () {\n    var dracoDecoderPath = this.data.dracoDecoderPath;\n    var basisTranscoderPath = this.data.basisTranscoderPath;\n    var meshoptDecoderPath = this.data.meshoptDecoderPath;\n    if (!this.dracoLoader && dracoDecoderPath) {\n      this.dracoLoader = new THREE.DRACOLoader();\n      this.dracoLoader.setDecoderPath(dracoDecoderPath);\n    }\n    if (!this.ktx2Loader && basisTranscoderPath) {\n      this.ktx2Loader = new THREE.KTX2Loader();\n      this.ktx2Loader.setTranscoderPath(basisTranscoderPath).detectSupport(this.el.renderer);\n    }\n    if (!this.meshoptDecoder && meshoptDecoderPath) {\n      this.meshoptDecoder = fetchScript(meshoptDecoderPath)\n        .then(function () { return window.MeshoptDecoder.ready; })\n        .then(function () { return window.MeshoptDecoder; });\n    }\n  },\n\n  getDRACOLoader: function () {\n    return this.dracoLoader;\n  },\n\n  getKTX2Loader: function () {\n    return this.ktx2Loader;\n  },\n\n  getMeshoptDecoder: function () {\n    return this.meshoptDecoder;\n  }\n});\n","import { registerSystem } from '../core/system.js';\nimport * as constants from '../constants/index.js';\n\nvar DEFAULT_LIGHT_ATTR = 'data-aframe-default-light';\n\n/**\n * Light system.\n *\n * Prescribes default lighting if not specified (one ambient, one directional).\n * Removes default lighting from the scene when a new light is added.\n *\n * @param {bool} defaultLights - Whether default lighting are defined.\n * @param {bool} userDefinedLights - Whether user lighting is defined.\n */\nexport var System = registerSystem('light', {\n  schema: {\n    defaultLightsEnabled: {default: true}\n  },\n\n  init: function () {\n    this.defaultLights = false;\n    this.userDefinedLights = false;\n    // Wait for all entities to fully load before checking for existence of lights.\n    // Since entities wait for <a-assets> to load, any lights attaching to the scene\n    // will do so asynchronously.\n    this.sceneEl.addEventListener('loaded', this.setupDefaultLights.bind(this));\n  },\n\n  /**\n   * Notify scene that light has been added and to remove the default.\n   *\n   * @param {object} el - element holding the light component.\n   */\n  registerLight: function (el) {\n    if (!el.hasAttribute(DEFAULT_LIGHT_ATTR)) {\n      // User added a light, remove default lights through DOM.\n      this.removeDefaultLights();\n      this.userDefinedLights = true;\n    }\n  },\n\n  removeDefaultLights: function () {\n    var defaultLights;\n    var sceneEl = this.sceneEl;\n\n    if (!this.defaultLights) { return; }\n    defaultLights = document.querySelectorAll('[' + DEFAULT_LIGHT_ATTR + ']');\n    for (var i = 0; i < defaultLights.length; i++) {\n      sceneEl.removeChild(defaultLights[i]);\n    }\n    this.defaultLights = false;\n  },\n\n  /**\n   * Prescribe default lights to the scene.\n   * Does so by injecting markup such that this state is not invisible.\n   * These lights are removed if the user adds any lights.\n   */\n  setupDefaultLights: function () {\n    var sceneEl = this.sceneEl;\n    var ambientLight;\n    var directionalLight;\n\n    if (this.userDefinedLights || this.defaultLights || !this.data.defaultLightsEnabled) {\n      return;\n    }\n\n    ambientLight = document.createElement('a-entity');\n    ambientLight.setAttribute('light', {color: '#BBB', type: 'ambient'});\n    ambientLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    ambientLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(ambientLight);\n\n    directionalLight = document.createElement('a-entity');\n    directionalLight.setAttribute('light', {color: '#FFF', intensity: 1.884, castShadow: true});\n    directionalLight.setAttribute('position', {x: -0.5, y: 1, z: 1});\n    directionalLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    directionalLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(directionalLight);\n\n    this.defaultLights = true;\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\nimport { setTextureProperties, createCompatibleTexture } from '../utils/material.js';\n\nvar debug = utils.debug;\nvar error = debug('components:texture:error');\nvar warn = debug('components:texture:warn');\nvar ImageLoader = new THREE.ImageLoader();\n\n/**\n * System for material component.\n * Handle material registration, updates (for fog), and texture caching.\n *\n * @member {object} materials - Registered materials.\n * @member {object} sourceCache - Texture source cache for, Image, Video and Canvas sources\n */\nexport var System = registerSystem('material', {\n  init: function () {\n    this.materials = {};\n    this.sourceCache = {};\n  },\n\n  clearTextureSourceCache: function () {\n    this.sourceCache = {};\n  },\n\n  /**\n   * Loads and creates a texture for a given `src`.\n   *\n   * @param {string, or element} src - URL or element\n   * @param {object} data - Relevant texture properties\n   * @param {function} cb - Callback to pass texture to\n   */\n  loadTexture: function (src, data, cb) {\n    this.loadTextureSource(src, function sourceLoaded (source) {\n      var texture = createCompatibleTexture(source);\n      setTextureProperties(texture, data);\n      cb(texture);\n    });\n  },\n\n  /**\n   * Determine whether `src` is an image or video. Then try to load the asset, then call back.\n   *\n   * @param {string, or element} src - URL or element.\n   * @param {function} cb - Callback to pass texture source to.\n   */\n  loadTextureSource: function (src, cb) {\n    var self = this;\n    var sourceCache = this.sourceCache;\n\n    var hash = this.hash(src);\n    if (sourceCache[hash]) {\n      sourceCache[hash].then(cb);\n      return;\n    }\n\n    // Canvas.\n    if (src.tagName === 'CANVAS') {\n      sourceLoaded(new THREE.Source(src));\n      return;\n    }\n\n    sourceLoaded(new Promise(doSourceLoad));\n    function doSourceLoad (resolve, reject) {\n      utils.srcLoader.validateSrc(src, loadImageCb, loadVideoCb);\n      function loadImageCb (src) { self.loadImage(src, resolve); }\n      function loadVideoCb (src) { self.loadVideo(src, resolve); }\n    }\n\n    function sourceLoaded (sourcePromise) {\n      sourceCache[hash] = Promise.resolve(sourcePromise);\n      sourceCache[hash].then(cb);\n    }\n  },\n\n  /**\n   * Load the six individual sides and construct a cube texture, then call back.\n   *\n   * @param {Array} srcs - Array of six texture URLs or elements.\n   * @param {function} cb - Callback to pass cube texture to.\n   */\n  loadCubeMapTexture: function (srcs, cb) {\n    var self = this;\n    var loaded = 0;\n    var cube = new THREE.CubeTexture();\n    cube.colorSpace = THREE.SRGBColorSpace;\n\n    function loadSide (index) {\n      self.loadTextureSource(srcs[index], function (source) {\n        cube.images[index] = source.data;\n        loaded++;\n        if (loaded === 6) {\n          cube.needsUpdate = true;\n          cb(cube);\n        }\n      });\n    }\n\n    if (srcs.length !== 6) {\n      warn('Cube map texture requires exactly 6 sources, got only %s sources', srcs.length);\n      return;\n    }\n\n    for (var i = 0; i < srcs.length; i++) {\n      loadSide(i);\n    }\n  },\n\n  /**\n   * High-level function for loading image textures (THREE.Texture).\n   *\n   * @param {Element|string} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadImage: function (src, cb) {\n    // Image element provided\n    if (typeof src !== 'string') {\n      cb(new THREE.Source(src));\n      return;\n    }\n\n    cb(loadImageUrl(src));\n  },\n\n  /**\n   * Load video texture (THREE.VideoTexture).\n   * Which is just an image texture that RAFs + needsUpdate.\n   * Note that creating a video texture is synchronous unlike loading an image texture.\n   * Made asynchronous to be consistent with image textures.\n   *\n   * @param {Element|string} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadVideo: function (src, cb) {\n    var videoEl;\n\n    // Video element provided.\n    if (typeof src !== 'string') {\n      // Check cache before creating texture.\n      videoEl = src;\n\n      // Fix up the attributes then start to create the texture.\n      fixVideoAttributes(videoEl);\n    }\n\n    // Only URL provided. Use video element to create texture.\n    videoEl = videoEl || createVideoEl(src);\n\n    cb(new THREE.Source(videoEl));\n  },\n\n  /**\n   * Create a hash for a given source.\n   */\n  hash: function (src) {\n    if (src.tagName) {\n      // Prefer element's ID or source, otherwise fallback to the element itself\n      return src.id || src.src || src;\n    }\n    return src;\n  },\n\n  /**\n   * Keep track of material in case an update trigger is needed (e.g., fog).\n   *\n   * @param {object} material\n   */\n  registerMaterial: function (material) {\n    this.materials[material.uuid] = material;\n  },\n\n  /**\n   * Stop tracking material, and dispose of any textures not being used by\n   * another material component.\n   *\n   * @param {object} material\n   */\n  unregisterMaterial: function (material) {\n    delete this.materials[material.uuid];\n  }\n});\n\n/**\n * Load image from a given URL.\n *\n * @private\n * @param {string} src - An url to an image file.\n * @returns {Promise} Resolves once texture is loaded.\n */\nfunction loadImageUrl (src) {\n  return new Promise(doLoadImageUrl);\n\n  function doLoadImageUrl (resolve, reject) {\n    // Request and load texture from src string. THREE will create underlying element.\n    ImageLoader.load(\n      src,\n      resolveSource,\n      function () { /* no-op */ },\n      function (xhr) {\n        error('`$s` could not be fetched (Error code: %s; Response: %s)', xhr.status,\n              xhr.statusText);\n      }\n    );\n\n    function resolveSource (data) {\n      resolve(new THREE.Source(data));\n    }\n  }\n}\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nfunction createVideoEl (src) {\n  var videoEl = document.createElement('video');\n  // Support inline videos for iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  videoEl.autoplay = true;\n  videoEl.loop = true;\n  videoEl.crossOrigin = 'anonymous';\n  videoEl.addEventListener('error', function () {\n    warn('`%s` is not a valid video', src);\n  }, true);\n  videoEl.src = src;\n  return videoEl;\n}\n\n/**\n * Fixes a video element's attributes to prevent developers from accidentally passing the\n * wrong attribute values to commonly misused video attributes.\n *\n * <video> does not treat `autoplay`, `controls`, `crossorigin`, `loop`, and `preload` as\n * as booleans. Existence of those attributes will mean truthy.\n *\n * For example, translates <video loop=\"false\"> to <video>.\n *\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/video#Attributes\n * @param {Element} videoEl - Video element.\n * @returns {Element} Video element with the correct properties updated.\n */\nfunction fixVideoAttributes (videoEl) {\n  videoEl.autoplay = videoEl.hasAttribute('autoplay') && videoEl.getAttribute('autoplay') !== 'false';\n  videoEl.controls = videoEl.hasAttribute('controls') && videoEl.getAttribute('controls') !== 'false';\n  if (videoEl.getAttribute('loop') === 'false') {\n    videoEl.removeAttribute('loop');\n  }\n  if (videoEl.getAttribute('preload') === 'false') {\n    videoEl.preload = 'none';\n  }\n  videoEl.crossOrigin = videoEl.crossOrigin || 'anonymous';\n  // To support inline videos in iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  return videoEl;\n}\n","import { registerSystem } from '../core/system.js';\n\nregisterSystem('obb-collider', {\n  schema: {\n    showColliders: {default: false}\n  },\n\n  init: function () {\n    this.collisions = [];\n    this.colliderEls = [];\n  },\n\n  addCollider: function (colliderEl) {\n    this.colliderEls.push(colliderEl);\n    if (this.data.showColliders) {\n      colliderEl.components['obb-collider'].showCollider();\n    } else {\n      colliderEl.components['obb-collider'].hideCollider();\n    }\n    this.tick = this.detectCollisions;\n  },\n\n  removeCollider: function (colliderEl) {\n    var colliderEls = this.colliderEls;\n    var elIndex = colliderEls.indexOf(colliderEl);\n    colliderEl.components['obb-collider'].hideCollider();\n    if (elIndex > -1) { colliderEls.splice(elIndex, 1); }\n    if (colliderEls.length === 0) { this.tick = undefined; }\n  },\n\n  registerCollision: function (componentA, componentB) {\n    var collisions = this.collisions;\n    var existingCollision = false;\n    var boundingBoxA = componentA.obb;\n    var boundingBoxB = componentB.obb;\n    var collisionMeshA = componentA.renderColliderMesh;\n    var collisionMeshB = componentB.renderColliderMesh;\n    if (collisionMeshA) { collisionMeshA.material.color.set(0xff0000); }\n    if (collisionMeshB) { collisionMeshB.material.color.set(0xff0000); }\n    for (var i = 0; i < collisions.length; i++) {\n      if (collisions[i].componentA.obb === boundingBoxA && collisions[i].componentB.obb === boundingBoxB ||\n          collisions[i].componentA.obb === boundingBoxB && collisions[i].componentB.obb === boundingBoxA) {\n        existingCollision = true;\n        collisions[i].detected = true;\n        break;\n      }\n    }\n    if (!existingCollision) {\n      collisions.push({\n        componentA: componentA,\n        componentB: componentB,\n        detected: true\n      });\n      componentA.el.emit('obbcollisionstarted', {trackedObject3D: componentA.trackedObject3D, withEl: componentB.el});\n      componentB.el.emit('obbcollisionstarted', {trackedObject3D: componentB.trackedObject3D, withEl: componentA.el});\n    }\n  },\n\n  resetCollisions: function () {\n    var collisions = this.collisions;\n    for (var i = 0; i < collisions.length; i++) {\n      collisions[i].detected = false;\n    }\n  },\n\n  clearCollisions: function () {\n    var collisions = this.collisions;\n    var detectedCollisions = [];\n    var componentA;\n    var componentB;\n    var collisionMeshA;\n    var collisionMeshB;\n    for (var i = 0; i < collisions.length; i++) {\n      if (!collisions[i].detected) {\n        componentA = collisions[i].componentA;\n        componentB = collisions[i].componentB;\n        collisionMeshA = componentA.renderColliderMesh;\n        collisionMeshB = componentB.renderColliderMesh;\n\n        if (collisionMeshA) { collisionMeshA.material.color.set(0x00ff00); }\n        componentA.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentB.el});\n\n        if (collisionMeshB) { collisionMeshB.material.color.set(0x00ff00); }\n        componentB.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentA.el});\n      } else {\n        detectedCollisions.push(collisions[i]);\n      }\n    }\n    this.collisions = detectedCollisions;\n  },\n\n  detectCollisions: function () {\n    var boxA;\n    var boxB;\n    var componentA;\n    var componentB;\n    var colliderEls = this.colliderEls;\n    if (colliderEls.length < 2) { return; }\n    this.resetCollisions();\n    for (var i = 0; i < colliderEls.length; i++) {\n      componentA = colliderEls[i].components['obb-collider'];\n      boxA = colliderEls[i].components['obb-collider'].obb;\n      // ignore bounding box with 0 volume.\n      if (boxA.halfSize.x === 0 || boxA.halfSize.y === 0 || boxA.halfSize.z === 0) {\n        continue;\n      }\n      for (var j = i + 1; j < colliderEls.length; j++) {\n        componentB = colliderEls[j].components['obb-collider'];\n        boxB = componentB.obb;\n        // ignore bounding box with 0 volume.\n        if (boxB.halfSize.x === 0 || boxB.halfSize.y === 0 || boxB.halfSize.z === 0) {\n          continue;\n        }\n        if (boxA.intersectsOBB(boxB)) {\n          this.registerCollision(componentA, componentB);\n        }\n      }\n    }\n    this.clearCollisions();\n  }\n});\n","import THREE from '../lib/three.js';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug;\nvar warn = debug('components:renderer:warn');\n\n/**\n * Determines state of various renderer properties.\n */\nexport var System = registerSystem('renderer', {\n  schema: {\n    antialias: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    highRefreshRate: {default: utils.device.isOculusBrowser()},\n    logarithmicDepthBuffer: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    maxCanvasWidth: {default: -1},\n    maxCanvasHeight: {default: -1},\n    multiviewStereo: {default: false},\n    exposure: {default: 1, if: {toneMapping: ['ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']}},\n    toneMapping: {default: 'no', oneOf: ['no', 'ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']},\n    precision: {default: 'high', oneOf: ['high', 'medium', 'low']},\n    anisotropy: {default: 1},\n    sortTransparentObjects: {default: false},\n    colorManagement: {default: true},\n    alpha: {default: true},\n    stencil: {default: false},\n    foveationLevel: {default: 1}\n  },\n\n  init: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    // This is the rendering engine, such as THREE.js so copy over any persistent properties from the rendering system.\n    var renderer = sceneEl.renderer;\n\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    THREE.Texture.DEFAULT_ANISOTROPY = data.anisotropy;\n\n    THREE.ColorManagement.enabled = data.colorManagement;\n    renderer.outputColorSpace = data.colorManagement ? THREE.SRGBColorSpace : THREE.LinearSRGBColorSpace;\n\n    if (sceneEl.hasAttribute('antialias')) {\n      warn('Component `antialias` is deprecated. Use `renderer=\"antialias: true\"` instead.');\n    }\n\n    if (sceneEl.hasAttribute('logarithmicDepthBuffer')) {\n      warn('Component `logarithmicDepthBuffer` is deprecated. Use `renderer=\"logarithmicDepthBuffer: true\"` instead.');\n    }\n\n    // These properties are always the same, regardless of rendered configuration\n    renderer.sortObjects = true;\n    renderer.setOpaqueSort(sortFrontToBack);\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var renderer = sceneEl.renderer;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    renderer.toneMappingExposure = data.exposure;\n    renderer.xr.setFoveation(data.foveationLevel);\n\n    if (data.sortObjects) {\n      warn('`sortObjects` property is deprecated. Use `renderer=\"sortTransparentObjects: true\"` instead.');\n    }\n    if (data.sortTransparentObjects) {\n      renderer.setTransparentSort(sortBackToFront);\n    } else {\n      renderer.setTransparentSort(sortRenderOrderOnly);\n    }\n  },\n\n  applyColorCorrection: function (texture) {\n    if (!this.data.colorManagement || !texture) {\n      return;\n    }\n\n    if (texture.isTexture && texture.colorSpace !== THREE.SRGBColorSpace) {\n      texture.colorSpace = THREE.SRGBColorSpace;\n      texture.needsUpdate = true;\n    }\n  },\n\n  setWebXRFrameRate: function (xrSession) {\n    var data = this.data;\n    var rates = xrSession.supportedFrameRates;\n    if (rates && xrSession.updateTargetFrameRate) {\n      var targetRate;\n      if (rates.includes(90)) {\n        targetRate = data.highRefreshRate ? 90 : 72;\n      } else {\n        targetRate = data.highRefreshRate ? 72 : 60;\n      }\n      xrSession.updateTargetFrameRate(targetRate).catch(function (error) {\n        console.warn('failed to set target frame rate of ' + targetRate + '. Error info: ' + error);\n      });\n    }\n  }\n});\n\n// Custom A-Frame sort functions.\n// Variations of Three.js default sort orders here:\n// https://github.com/mrdoob/three.js/blob/ebbaecf9acacf259ea9abdcba7b6fb25cfcea2ab/src/renderers/webgl/WebGLRenderLists.js#L1\n// See: https://github.com/aframevr/aframe/issues/5332\n\n// Default sort for opaque objects:\n// - respect groupOrder & renderOrder settings\n// - sort front-to-back by z-depth from camera (this should minimize overdraw)\n// - otherwise leave objects in default order (object tree order)\n\nexport function sortFrontToBack (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return a.z - b.z;\n}\n\n// Default sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - otherwise leave objects in default order (object tree order)\nexport function sortRenderOrderOnly (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  return a.renderOrder - b.renderOrder;\n}\n\n// Spatial sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - sort back-to-front by z-depth from camera\n// - otherwise leave objects in default order (object tree order)\nexport function sortBackToFront (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return b.z - a.z;\n}\n","import THREE from '../lib/three.js';\nimport { registerSystem } from '../core/system.js';\n\nvar SHADOW_MAP_TYPE_MAP = {\n  basic: THREE.BasicShadowMap,\n  pcf: THREE.PCFShadowMap,\n  pcfsoft: THREE.PCFSoftShadowMap\n};\n\n/**\n * Shadow system.\n *\n * Enabled automatically when one or more shadow components are added to the scene, the system sets\n * options on the WebGLRenderer for configuring shadow appearance.\n */\nexport var System = registerSystem('shadow', {\n  schema: {\n    enabled: {default: true},\n    autoUpdate: {default: true},\n    type: {default: 'pcf', oneOf: ['basic', 'pcf', 'pcfsoft']}\n  },\n\n  init: function () {\n    var sceneEl = this.sceneEl;\n    var data = this.data;\n\n    this.shadowMapEnabled = false;\n\n    sceneEl.renderer.shadowMap.type = SHADOW_MAP_TYPE_MAP[data.type];\n    sceneEl.renderer.shadowMap.autoUpdate = data.autoUpdate;\n  },\n\n  update: function (prevData) {\n    if (prevData.enabled !== this.data.enabled) {\n      this.setShadowMapEnabled(this.shadowMapEnabled);\n    }\n  },\n\n  /**\n   * Enables/disables the renderer shadow map.\n   * @param {boolean} enabled\n   */\n  setShadowMapEnabled: function (enabled) {\n    var sceneEl = this.sceneEl;\n    var renderer = this.sceneEl.renderer;\n\n    this.shadowMapEnabled = enabled;\n    var newEnabledState = this.data.enabled && this.shadowMapEnabled;\n    if (renderer && newEnabledState !== renderer.shadowMap.enabled) {\n      renderer.shadowMap.enabled = newEnabledState;\n\n      // Materials must be updated for the change to take effect.\n      updateAllMaterials(sceneEl);\n    }\n  }\n});\n\nfunction updateAllMaterials (sceneEl) {\n  if (!sceneEl.hasLoaded) { return; }\n\n  sceneEl.object3D.traverse(function (node) {\n    if (node.material) {\n      var materials = Array.isArray(node.material) ? node.material : [node.material];\n      for (var i = 0; i < materials.length; i++) {\n        materials[i].needsUpdate = true;\n      }\n    }\n  });\n}\n","import { registerSystem } from '../core/system.js';\n\n/**\n * Tracked controls system.\n * Maintain list with available tracked controllers.\n */\nexport var System = registerSystem('tracked-controls', {\n  init: function () {\n    this.controllers = [];\n    this.onInputSourcesChange = this.onInputSourcesChange.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.addEventListener('enter-vr', this.onEnterVR);\n\n    this.onExitVR = this.onExitVR.bind(this);\n    this.el.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  onEnterVR: function () {\n    var xrSession = this.el.xrSession;\n    if (!xrSession) { return; }\n    this.el.xrSession.addEventListener('inputsourceschange', this.onInputSourcesChange);\n  },\n\n  onExitVR: function () {\n    this.referenceSpace = undefined;\n    this.controllers = [];\n    this.el.emit('controllersupdated', undefined, false);\n  },\n\n  onInputSourcesChange: function () {\n    var self = this;\n    var xrSession = this.el.xrSession;\n    var refspace = this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(refspace).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (err) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(\n          refspace,\n          'tracked-controls uses reference space \"' + refspace + '\".');\n      throw err;\n    });\n\n    this.controllers = xrSession.inputSources;\n    this.el.emit('controllersupdated', undefined, false);\n  }\n});\n","import { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('systems:webxr:warn');\n\n/**\n * WebXR session initialization and XR module support.\n */\nexport var System = registerSystem('webxr', {\n  schema: {\n    referenceSpaceType: {type: 'string', default: 'local-floor'},\n    requiredFeatures: {type: 'array', default: ['local-floor']},\n    optionalFeatures: {type: 'array', default: ['bounded-floor']},\n    overlayElement: {type: 'selector'}\n  },\n\n  update: function () {\n    var data = this.data;\n    this.sessionConfiguration = {\n      requiredFeatures: data.requiredFeatures,\n      optionalFeatures: data.optionalFeatures\n    };\n    this.sessionReferenceSpaceType = data.referenceSpaceType;\n\n    if (data.overlayElement) {\n      // Update WebXR to support light-estimation\n      data.overlayElement.classList.remove('a-dom-overlay');\n      if (!data.optionalFeatures.includes('dom-overlay')) {\n        data.optionalFeatures.push('dom-overlay');\n        this.el.setAttribute('webxr', data);\n      }\n      this.warnIfFeatureNotRequested('dom-overlay');\n      this.sessionConfiguration.domOverlay = {root: data.overlayElement};\n      data.overlayElement.classList.add('a-dom-overlay');\n    }\n  },\n\n  wasFeatureRequested: function (feature) {\n    // Features available by default for immersive sessions don't need to\n    // be requested explicitly.\n    if (feature === 'viewer' || feature === 'local') { return true; }\n\n    if (this.sessionConfiguration.requiredFeatures.includes(feature) ||\n        this.sessionConfiguration.optionalFeatures.includes(feature)) {\n      return true;\n    }\n\n    return false;\n  },\n\n  warnIfFeatureNotRequested: function (feature, optIntro) {\n    if (!this.wasFeatureRequested(feature)) {\n      var msg = 'Please add the feature \"' + feature + '\" to a-scene\\'s ' +\n          'webxr system options in requiredFeatures/optionalFeatures.';\n      warn((optIntro ? optIntro + ' ' : '') + msg);\n    }\n  }\n});\n","/**\n * Common mesh defaults, mappings, and transforms.\n */\nimport { components } from '../../core/component.js';\nimport { shaders } from '../../core/shader.js';\nimport * as utils from '../../utils/index.js';\n\nvar materialMappings = {};\nObject.keys(components.material.schema).forEach(addMapping);\nObject.keys(shaders.standard.schema).forEach(addMapping);\n\nfunction addMapping (prop) {\n  // To hyphenated.\n  var htmlAttrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  if (prop === 'fog') { htmlAttrName = 'material-fog'; }\n  if (prop === 'visible') { htmlAttrName = 'material-visible'; }\n  materialMappings[htmlAttrName] = 'material.' + prop;\n}\n\nexport default function getMeshMixin () {\n  return {\n    defaultComponents: {material: {}},\n    mappings: utils.extend({}, materialMappings)\n  };\n}\n","import THREE from '../../lib/three.js';\nimport { registerComponent } from '../../core/component.js';\n\nvar originalPosition = new THREE.Vector3();\nvar originalRotation = new THREE.Vector3();\n\n/**\n * Wrap el.object3D within an outer group. Apply pivot to el.object3D as position.\n */\nregisterComponent('pivot', {\n  dependencies: ['position'],\n\n  schema: {type: 'vec3'},\n\n  init: function () {\n    var data = this.data;\n    var el = this.el;\n    var originalParent = el.object3D.parent;\n    var originalGroup = el.object3D;\n    var outerGroup = new THREE.Group();\n\n    originalPosition.copy(originalGroup.position);\n    originalRotation.copy(originalGroup.rotation);\n\n    // Detach current group from parent.\n    originalParent.remove(originalGroup);\n    outerGroup.add(originalGroup);\n\n    // Set new group as the outer group.\n    originalParent.add(outerGroup);\n\n    // Set outer group as new object3D.\n    el.object3D = outerGroup;\n\n    // Apply pivot to original group.\n    originalGroup.position.set(-1 * data.x, -1 * data.y, -1 * data.z);\n\n    // Offset the pivot so that world position not affected.\n    // And restore position onto outer group.\n    outerGroup.position.set(data.x + originalPosition.x, data.y + originalPosition.y,\n                            data.z + originalPosition.z);\n\n    // Transfer rotation to outer group.\n    outerGroup.rotation.copy(originalGroup.rotation);\n    originalGroup.rotation.set(0, 0, 0);\n  }\n});\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-camera', {\n  defaultComponents: {\n    'camera': {},\n    'look-controls': {},\n    'wasd-controls': {},\n    'position': {x: 0, y: 1.6, z: 0}\n  },\n\n  mappings: {\n    active: 'camera.active',\n    far: 'camera.far',\n    fov: 'camera.fov',\n    'look-controls-enabled': 'look-controls.enabled',\n    near: 'camera.near',\n    'pointer-lock-enabled': 'look-controls.pointerLockEnabled',\n    'wasd-controls-enabled': 'wasd-controls.enabled',\n    'reverse-mouse-drag': 'look-controls.reverseMouseDrag',\n    zoom: 'camera.zoom'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-cursor', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    cursor: {},\n    geometry: {\n      primitive: 'ring',\n      radiusOuter: 0.016,\n      radiusInner: 0.01,\n      segmentsTheta: 32\n    },\n    material: {\n      color: '#000',\n      shader: 'flat',\n      opacity: 0.8\n    },\n    position: {\n      x: 0,\n      y: 0,\n      z: -1\n    }\n  },\n\n  mappings: {\n    far: 'raycaster.far',\n    fuse: 'cursor.fuse',\n    'fuse-timeout': 'cursor.fuseTimeout',\n    interval: 'raycaster.interval',\n    objects: 'raycaster.objects'\n  }\n}));\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-curvedimage', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      height: 1,\n      primitive: 'cylinder',\n      radius: 2,\n      segmentsRadial: 48,\n      thetaLength: 270,\n      openEnded: true,\n      thetaStart: 0\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true,\n      repeat: '-1 1'\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    'open-ended': 'geometry.openEnded',\n    radius: 'geometry.radius',\n    segments: 'geometry.segmentsRadial',\n    start: 'geometry.thetaStart',\n    'theta-length': 'geometry.thetaLength',\n    'theta-start': 'geometry.thetaStart',\n    'width': 'geometry.thetaLength'\n  }\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-gltf-model', {\n  mappings: {\n    src: 'gltf-model'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-image', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-light', {\n  defaultComponents: {\n    light: {}\n  },\n\n  mappings: {\n    angle: 'light.angle',\n    color: 'light.color',\n    'ground-color': 'light.groundColor',\n    decay: 'light.decay',\n    distance: 'light.distance',\n    intensity: 'light.intensity',\n    penumbra: 'light.penumbra',\n    type: 'light.type',\n    target: 'light.target',\n    envmap: 'light.envMap',\n    'shadow-camera-automatic': 'light.shadowCameraAutomatic'\n  }\n});\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-link', {\n  defaultComponents: {\n    link: {\n      visualAspectEnabled: true\n    }\n  },\n\n  mappings: {\n    href: 'link.href',\n    image: 'link.image',\n    title: 'link.title'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-obj-model', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    'obj-model': {}\n  },\n\n  mappings: {\n    src: 'obj-model.obj',\n    mtl: 'obj-model.mtl'\n  }\n}));\n","/**\n * Automated mesh primitive registration.\n */\nimport getMeshMixin from '../getMeshMixin.js';\nimport { geometries, geometryNames } from '../../../core/geometry.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\n// For testing.\nconst meshPrimitives = {};\nexport default meshPrimitives;\n\n// Generate primitive for each geometry type.\ngeometryNames.forEach(function registerMeshPrimitive (geometryName) {\n  var geometry = geometries[geometryName];\n  var geometryHyphened = unCamelCase(geometryName);\n\n  // Generate mappings.\n  var mappings = {};\n  Object.keys(geometry.schema).forEach(function createMapping (property) {\n    mappings[unCamelCase(property)] = 'geometry.' + property;\n  });\n\n  // Register.\n  var tagName = 'a-' + geometryHyphened;\n  var primitive = registerPrimitive(tagName, utils.extendDeep({}, getMeshMixin(), {\n    defaultComponents: {geometry: {primitive: geometryName}},\n    mappings: mappings\n  }));\n  meshPrimitives[tagName] = primitive;\n});\n\n/**\n * camelCase to hyphened-string.\n */\nfunction unCamelCase (str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\nimport meshPrimitives from './meshPrimitives.js';\n\nregisterPrimitive('a-sky', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      side: 'back',\n      shader: 'flat',\n      npot: true\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: utils.extendDeep({}, meshPrimitives['a-sphere'].mappings)\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-sound', {\n  defaultComponents: {\n    sound: {}\n  },\n\n  mappings: {\n    src: 'sound.src',\n    on: 'sound.on',\n    autoplay: 'sound.autoplay',\n    loop: 'sound.loop',\n    volume: 'sound.volume'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-video', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-videosphere', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'back',\n      npot: true\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: {\n    radius: 'geometry.radius',\n    'segments-height': 'geometry.segmentsHeight',\n    'segments-width': 'geometry.segmentsWidth'\n  }\n}));\n","import ANIME from 'super-animejs';\nimport THREE from './lib/three.js';\n\nimport { AScene } from './core/scene/a-scene.js';\nimport scenes from './core/scene/scenes.js';\nimport { ANode } from './core/a-node.js';\nimport { AEntity } from './core/a-entity.js'; // Depends on ANode and core components.\nimport { registerComponent, components, Component } from './core/component.js';\nimport { registerGeometry, geometries } from './core/geometry.js';\nimport { registerPrimitive, primitives } from './extras/primitives/primitives.js';\nimport { registerShader, shaders } from './core/shader.js';\nimport { registerSystem, systems } from './core/system.js';\nimport * as schema from './core/schema.js';\nimport * as readyState from './core/readyState.js';\n\nimport './core/a-assets.js';\nimport './core/a-cubemap.js';\nimport './core/a-mixin.js';\n\nimport * as utils from './utils/index.js';\nimport pkg from '../package.json';\n\nimport './components/index.js'; // Register standard components.\nimport './geometries/index.js'; // Register standard geometries.\nimport './shaders/index.js'; // Register standard shaders.\nimport './systems/index.js'; // Register standard systems.\n\n// Depends on material component and standard shader\nimport getMeshMixin from './extras/primitives/getMeshMixin.js';\n\n// Extras.\nimport './extras/components/index.js';\nimport './extras/primitives/index.js';\n\nvar debug = utils.debug;\nvar error = debug('A-Frame:error');\nvar warn = debug('A-Frame:warn');\n\n// WebVR polyfill\n// Check before the polyfill runs.\nwindow.hasNativeWebVRImplementation = !!window.navigator.getVRDisplays ||\n                                      !!window.navigator.getVRDevices;\n\nif (window.document.currentScript && window.document.currentScript.parentNode !==\n    window.document.head && !window.debug) {\n  warn('Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ' +\n       'ensure everything for A-Frame is properly registered before they are used from ' +\n       'HTML.');\n}\n\n// Error if not using a server.\nif (!window.cordova && window.location.protocol === 'file:') {\n  error(\n    'This HTML file is currently being served via the file:// protocol. ' +\n    'Assets, textures, and models WILL NOT WORK due to cross-origin policy! ' +\n    'Please use a local or hosted server: ' +\n    'https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server.');\n}\n\n// CSS.\nif (utils.device.isBrowserEnvironment) {\n  window.logs = debug;\n  require('./style/aframe.css');\n  require('./style/rStats.css');\n}\n\nconsole.log('A-Frame Version: 1.6.0 (Date 2025-02-11, Commit #b9e4838d)');\nconsole.log('THREE Version (https://github.com/supermedium/three.js):',\n            THREE.REVISION);\n\n// Wait for ready state, unless user asynchronously initializes A-Frame.\nif (!window.AFRAME_ASYNC) {\n  readyState.waitForDocumentReadyState();\n}\n\nvar AFRAME = globalThis.AFRAME = {\n  AComponent: Component,\n  AEntity: AEntity,\n  ANode: ANode,\n  ANIME: ANIME,\n  AScene: AScene,\n  components: components,\n  coreComponents: Object.keys(components),\n  geometries: geometries,\n  registerComponent: registerComponent,\n  registerGeometry: registerGeometry,\n  registerPrimitive: registerPrimitive,\n  registerShader: registerShader,\n  registerSystem: registerSystem,\n  primitives: {\n    getMeshMixin: getMeshMixin,\n    primitives: primitives\n  },\n  scenes: scenes,\n  schema: schema,\n  shaders: shaders,\n  systems: systems,\n  emitReady: readyState.emitReady,\n  THREE: THREE,\n  utils: utils,\n  version: pkg.version\n};\nexport default AFRAME;\n"],"names":["exports","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","Array","code","Error","indexOf","start","end","num","output","base64","require","ieee754","customInspectSymbol","Symbol","Buffer","K_MAX_LENGTH","createBuffer","RangeError","buf","Object","setPrototypeOf","prototype","arg","encodingOrOffset","TypeError","allocUnsafe","from","value","string","encoding","isEncoding","actual","write","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","checked","undefined","numberIsNaN","type","isArray","data","fromObject","toPrimitive","assertSize","size","array","toString","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","Math","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","console","error","defineProperty","enumerable","get","poolSize","alloc","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","concat","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","writable","configurable","name","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","input","msg","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","split","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","module","cssWithMappingToString","map","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","k","id","_k","url","options","__esModule","default","test","hash","needQuotes","cssMapping","btoa","unescape","encodeURIComponent","JSON","stringify","sourceMapping","formatArgs","args","useColors","namespace","humanize","diff","color","splice","index","lastC","match","save","namespaces","storage","setItem","removeItem","load","r","getItem","process","env","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","v","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","selectColor","extend","init","delimiter","newDebug","matchesTemplate","search","template","searchIndex","templateIndex","starIndex","matchIndex","disable","names","skips","enable","filter","Boolean","ns","skip","keys","forEach","key","isObj","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","assignKey","to","assign","getOwnPropertySymbols","symbols","toObject","s","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","rt","isNaN","LN2","h","w","plural","msAbs","isPlural","round","exec","parseFloat","parse","long","fmtShort","aframeStats","scene","_rS","_scene","update","elements","querySelectorAll","el","isEntity","performance","getEntriesByName","startTime","toFixed","attach","values","te","caption","lt","groups","fractions","glStats","_totalDrawArraysCalls","_totalDrawElementsCalls","_totalUseProgramCalls","_totalFaces","_totalVertices","_totalPoints","_totalBindTexures","_h","f","WebGLRenderingContext","drawArrays","POINTS","drawElements","useProgram","bindTexture","allcalls","over","drawelements","drawarrays","base","steps","threeStats","renderer","info","memory","geometries","programs","textures","render","calls","triangles","points","BrowserStats","_usedJSHeapSize","_totalJSHeapSize","usedJSHeapSize","totalJSHeapSize","log1024","_size","average","avgMs","total","nowOffset","now","timing","navigationStart","mark","measure","rStats","settings","iterateKeys","callback","l","_settings","_colours","colours","_cssRStats","CSSPath","css","uri","element","createElement","href","rel","getElementsByTagName","appendChild","_base","_div","_elHeight","_perfCounters","Graph","_dom","_id","_defArg","_def","_canvas","_ctx","getContext","_max","_current","_dotCanvas","_dotCtx","width","height","fillStyle","fillRect","globalAlpha","_alarmCanvas","_alarmCtx","className","draw","alarm","drawImage","StackGraph","_num","th","PerfCounter","group","_time","_value","_total","_averageValue","_accumValue","_accumStart","_accumSamples","_spanId","_spanValue","_spanValueText","createTextNode","_graph","_started","_average","t","_start","userTimingAPI","_end","textContent","div","tick","frame","interpolate","nodeValue","below","_perf","idArg","g","p","_update","plugins","graph","body","h1","addEventListener","classList","toggle","preventDefault","bind","legend","_init","Util","mimeType","check","vendor","opera","top","results","RegExp","location","decodeURIComponent","orientation","timer","request","setInterval","setTimeout","stop","release","clearInterval","video","play","paused","pause","___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","count","indexByIdentifier","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","attributes","styleElement","nonce","setAttribute","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","__defProp","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__hasOwnProp","__toCommonJS","cache","module2","temp","copyDefault","desc","__reExport","WeakMap","src_exports","all","__export","Changed","DESERIALIZE_MODE","Not","Types","addComponent","addEntity","commitRemovals","createWorld","defineComponent","defineDeserializer","defineQuery","defineSerializer","defineSystem","deleteWorld","enableManualEntityRecycling","enterQuery","entityExists","exitQuery","flushRemovedEntities","getAllEntities","getEntityComponents","getWorldComponents","hasComponent","parentArray","pipe","registerComponent","registerComponents","removeComponent","removeEntity","removeQuery","resetChangedQuery","resetGlobals","resetWorld","setDefaultSize","setRemovedRecycleThreshold","TYPES_ENUM","i8","ui8","ui8c","ui16","i32","ui32","f32","f64","eid","TYPES_NAMES","TYPES","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","roundToMultiple4","ceil","$storeRef","$storeSize","$storeMaps","$storeFlattened","$storeBase","$storeType","$storeArrayElementCounts","$storeSubarrays","$subarrayCursors","$subarray","$parentArray","$tagStore","$indexType","$indexBytes","$isEidType","stores","resize","ta","newBuffer","BYTES_PER_ELEMENT","newTa","createShadow","store","shadowStore","_","resetStoreFor","isArrayType","SparseSet","dense","sparse","sort","comparator","has","add","swapped","pop","reset","REPLACE","APPEND","MAP","resized","not","storeFlattened","isFullComponent","isProperty","isModifier","$modifier","isNotModifier","isChangedModifier","isWorld","$componentMap","fromModifierToComponent","canonicalize","Map","fullComponentProps","reduce","changedComponentProps","props","changedProps","prop","$","maxBytes","worldSerializer","componentProps","view","DataView","entityComponentCache","ents","world","component","$entityArray","eidToWorld","where","pid","$diff","shadow","setUint8","countWhere","writeCount","componentCache","Set","newlyAddedComponent","delete","rewindWhere","setUint32","indexType","indexBytes","countWhere2","arrayWriteCount","i2","changed","newEntities","isWorld2","deserializedEntities","packet","mode","clear","localEntities","$localEntities","localEntityLookup","$localEntityLookup","getUint8","entityCount","getUint32","newEid","$entitySparseSet","localEid","$entityMasks","$entityComponents","defaultSize","globalEntityCursor","globalSize","getGlobalSize","removed","recycled","removedReuseThreshold","newSize","resizeWorlds","newThreshold","$manualEntityRecycling","shift","$size","$notQueries","q","queryCheckEntity","queryAddEntity","$queries","queryRemoveEntity","modifier","mod","inner","$queryAny","$queryAll","$queryNone","$queryMap","$dirtyQueries","$queryComponents","empty","freeze","query","registerQuery","entered","exited","components2","notComponents","changedComponents","comp","mapComponents","allComponents","sparseSet","toRemove","generations","generationId","reduceBitflags","bitflag","masks","notMasks","hasMasks","flatProps","archetypes","components","shadows","queries","generateShadow","flatten","aggregateComponentsFor","comps","clearDiff","dirty","any","none","qMask","qNotMask","eMask","queryCommitRemovals","schema","$store","arrayElementCounts","collectArrayElementCounts","metadata","recursiveTransform","totalBytes","createTypeStore","storeSize","cursors","arrayElementCount","start2","end2","createArrayStore","createStore","notQueries","changedQueries","$bitflag","incrementBitflag","registeredComponent","$resizeThreshold","$archetypes","worlds","fns","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","o","toStringTag","nc","defaultInstanceSettings","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","delay","endDelay","easing","validTransforms","CSS","springs","minMax","stringContains","text","applyArguments","func","hexRegex","rgbPrefixRegex","hslRegex","is","pth","svg","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","hex","rgb","hsl","col","easingFunctionRegex","parseEasingParameters","spring","params","mass","stiffness","damping","velocity","w0","sqrt","zeta","wd","solver","progress","exp","cos","sin","cached","elapsed","rest","elastic","amplitude","period","PI","asin","bezier","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","getTForX","penner","curves","In","Out","InOut","eases","linear","coords","parseEasings","ease","selectString","auxArrayFilter","filterArray","thisArg","flattenArray","toArray","NodeList","HTMLCollection","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbRegex","hexToRgbaHexRegex","hexToRgbaRgbRegex","hslToRgbaHsl1Regex","hslToRgbaHsl2Regex","unitRegex","getUnit","getFunctionValue","animatable","getAttribute","convertPxToUnit","unit","tempEl","tagName","parentEl","position","factor","offsetWidth","convertedUnit","getCSSValue","uppercasePropName","getComputedStyle","getPropertyValue","getAnimationType","transformRegex","getElementTransforms","transform","transforms","getOriginalTargetValue","propName","defaultVal","getTransformUnit","getTransformValue","operatorRegex","getRelativeValue","operator","u","whitespaceRegex","validateValue","rgbValue","hexValue","hexToRgba","hslValue","hue2rgb","hslToRgba","colorToRgb","originalUnit","unitLess","getDistance","p1","p2","getPolylineLength","previousPos","totalLength","numberOfItems","currentPos","getTotalLength","getCircleLength","getRectLength","getLineLength","getPolygonLength","getParentSvg","pathEl","svgData","parentSvgEl","getParentSvgEl","rect","getBoundingClientRect","viewBoxAttr","viewBox","getPathProgress","path","point","getPointAtLength","p0","property","atan2","valueRegex","decomposeValue","original","numbers","strings","parseTargets","targets","getAnimatables","springRegex","normalizePropertyTweens","tweenSettings","propArray","setProgressValue","attribute","object","manual","setTargetsValue","properties","animatables","valueUnit","originalValue","animType","getAnimations","tweens","previousTween","tween","normalizeTweenValues","tweenValue","toUnit","previousValue","fromUnit","isPath","isColor","normalizeTweens","lastTween","createAnimation","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","raf","instanceID","activeInstances","pausedInstances","engine","requestAnimationFrame","step","activeInstancesLength","activeInstance","instanceIndex","cancelAnimationFrame","anime","children","lastTime","childrenLength","resolve","makePromise","Promise","_resolve","promise","instance","instanceSettings","keyframes","propertyNames","newKey","flattenKeyframes","getProperties","createNewInstance","toggleInstanceDirection","reversed","adjustTime","time","resetTime","currentTime","speed","seekCild","child","seek","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","cb","passThrough","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","reversePlayback","i$1","syncInstanceChildren","began","changeBegan","changeCompleted","completed","reverse","restart","finished","removeTargetsFromAnimations","targetsArray","hidden","len$1","version","running","childAnimations","convertPx","percent","setDashoffset","pathLength","stagger","grid","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","maxValue","fromX","fromY","distanceX","distanceY","timeline","tl","instanceParams","tlIndex","ins","insParams","tlDuration","random","__WEBPACK_EXTERNAL_MODULE_three__","_taskCache","DRACOLoader","Loader","manager","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","normal","uv","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","onLoad","onProgress","onError","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","decodeDracoFile","SRGBColorSpace","catch","attributeIDs","attributeTypes","vertexColorSpace","LinearSRGBColorSpace","taskConfig","useUniqueIDs","decodeGeometry","then","taskKey","cachedTask","worker","taskID","taskCost","geometryPending","_getWorker","_worker","reject","_callbacks","postMessage","_createGeometry","geometry","_releaseTask","geometryData","BufferGeometry","setIndex","BufferAttribute","itemSize","_assignVertexColorSpace","normalized","inputColorSpace","_color","Color","il","fromBufferAttribute","ColorManagement","toWorkingColorSpace","setXYZ","_loadLibrary","responseType","preload","_initDecoder","useJS","WebAssembly","librariesPending","libraries","jsContent","wasmBinary","DRACOWorker","substring","createObjectURL","Blob","Worker","_taskCosts","_taskLoad","onmessage","dispose","terminate","revokeObjectURL","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","Decoder","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeArrayToMesh","POINT_CLOUD","PointCloud","DecodeArrayToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","attributeResult","numIndices","num_faces","GetTrianglesUInt32Array","decodeIndex","buffers","attr","computeMikkTSpaceTangents","MikkTSpace","negateSign","isReady","hasAttribute","getAttributeArray","isInterleavedBufferAttribute","dstArray","getX","getY","getZ","_geometry","toNonIndexed","tangents","generateTangents","mergeGeometries","useGroups","isIndexed","attributesUsed","morphAttributesUsed","morphAttributes","morphTargetsRelative","mergedGeometry","attributesCount","addGroup","indexOffset","mergedIndex","mergedAttribute","mergeAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","gpuType","arrayLength","tupleOffset","getComponent","setComponent","deepCloneAttribute","isInstancedInterleavedBufferAttribute","deinterleaveAttribute","isInstancedBufferAttribute","InstancedBufferAttribute","interleaveAttributes","stride","interleavedBuffer","InterleavedBuffer","getters","setters","iba","InterleavedBufferAttribute","cons","newAttribute","meshPerAttribute","setX","setY","setZ","setW","getW","deinterleaveGeometry","morphTargets","attrMap","estimateBytesUsed","mem","indices","getIndex","mergeVertices","tolerance","EPSILON","hashToIndex","positions","vertexCount","nextIndex","attributeNames","tmpAttributes","tmpMorphAttributes","newIndices","morphAttr","halfTolerance","exponent","log10","hashMultiplier","hashAdditive","newArray","newMorphArrays","getterFunc","setterFunc","ml","tmpAttribute","tmpMorphAttribute","toTrianglesDrawMode","drawMode","TrianglesDrawMode","TriangleFanDrawMode","TriangleStripDrawMode","numberOfTriangles","newGeometry","clearGroups","computeMorphedAttributes","_vA","Vector3","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_calculateMorphedAttributeData","morphAttribute","modifiedAttributeArray","morphInfluences","morphTargetInfluences","influence","morph","addScaledVector","isSkinnedMesh","applyBoneTransform","z","material","positionAttribute","morphPosition","normalAttribute","morphNormal","drawRange","jl","modifiedPosition","modifiedNormal","morphedPositionAttribute","Float32BufferAttribute","morphedNormalAttribute","mergeGroups","materialIndex","groupStart","groupLength","currentGroup","toCreasedNormals","creaseAngle","creaseDot","verts","tempVec1","tempVec2","tempNorm","tempNorm2","hashVertex","resultGeometry","posAttr","vertexMap","i3","subVectors","crossVectors","normalize","normalArray","normAttr","otherNormals","lk","otherNorm","dot","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFMaterialsDispersionExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsBumpExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","scope","resourcePath","relativeUrl","LoaderUtils","extractUrlBase","resolveURL","itemStart","_onError","itemError","itemEnd","gltf","setDRACOLoader","setKTX2Loader","setMeshoptDecoder","unregister","json","extensions","textDecoder","TextDecoder","decode","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_DISPERSION","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_MATERIALS_BUMP","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDef","lights","lightNode","setRGB","DirectionalLight","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","angle","penumbra","assignExtrasToUserData","intensity","createUniqueName","getDependency","createNodeAttachment","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","extendMaterialParams","materials","emissiveStrength","emissiveIntensity","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","dispersion","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","colorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","bumpScale","bumpFactor","bumpTexture","anisotropyStrength","anisotropy","anisotropyRotation","anisotropyTexture","loadTexture","textureIndex","textureDef","loadTextureImage","source","isSupported","images","textureLoader","handler","getHandler","detectSupport","image","Image","onload","onerror","loadBufferView","bufferView","bufferViews","extensionDef","supported","byteStride","decodeGltfBufferAsync","ready","decodeGltfBuffer","createNodeMesh","mesh","meshDef","meshes","primitive","primitives","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","accessor","nodeObject","isGroup","instancedMeshes","Matrix4","Quaternion","instancedMesh","InstancedMesh","TRANSLATION","ROTATION","SCALE","setMatrixAt","compose","instanceColor","Object3D","assignFinalMaterial","headerView","header","magic","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","extendTexture","texture","texCoord","channel","rotation","fromArray","repeat","needsUpdate","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleSize","resultBuffer","copySampleValue_","valueSize","interpolate_","i1","t0","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","m0","m1","_q","GLTFCubicSplineQuaternionInterpolant","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","createDefaultMaterial","MeshStandardMaterial","emissive","metalness","roughness","transparent","depthTest","side","FrontSide","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","gltfDef","extras","updateMorphTargets","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","attributesKey","getNormalizedComponentScale","_identityMatrix","associations","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","safariVersion","isFirefox","firefoxVersion","safariMatch","createImageBitmap","TextureLoader","ImageBitmapLoader","setCrossOrigin","_invokeAll","beforeRoot","getDependencies","dependencies","scenes","cameras","afterRoot","updateMatrixWorld","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","camera","ref","updateMappings","mappings","entries","_invokeOne","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","pendingBufferViews","elementBytes","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","sourceIndex","sourceDef","sampler","loadImageSource","flipY","startsWith","samplers","magFilter","minFilter","wrapS","wrapT","generateMipmaps","isCompressedTexture","webkitURL","sourceURI","isObjectURL","blob","isImageBitmapLoader","imageBitmap","Texture","mapName","mapDef","colorSpace","gltfReference","useDerivativeTangents","tangent","useVertexColors","useFlatShading","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","normalScale","materialType","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissiveTexture","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","loadGeometries","createDracoPrimitive","addPrimitiveAttributes","geometryPromise","meshIndex","SkinnedMesh","normalizeSkinWeights","LineSegments","Line","LineLoop","Points","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","node","parameters","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","createdTracks","_createAnimationTracks","AnimationClip","traverse","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","nodeName","meshPromise","Bone","matrix","applyMatrix4","quaternion","sceneIndex","sceneDef","nodeIds","reducedAssociations","reduceAssociations","targetName","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","interpolation","outputArray","_getArrayFromAccessor","track","_createCubicSplineTrackInterpolant","scaled","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","assignAttributeAccessor","gltfAttributeName","workingColorSpace","box","Box3","boxScale","multiplyScalar","maxDisplacement","vector","expandByVector","boundingBox","sphere","Sphere","getCenter","center","radius","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","morphNormals","morphColors","addMorphTargets","WorkerPool","pool","queue","workers","workersResolve","workerStatus","_initWorker","workerId","workerCreator","_onMessage","_getIdleWorker","transfer","setWorkerCreator","ct","yt","xt","wt","Ft","Ct","ae","ge","ue","we","Ae","Sn","pi","Ii","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","levels","dataFormatDescriptor","vendorId","descriptorType","descriptorBlockSize","versionNumber","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","samples","keyValue","globalData","Si","_dataView","_littleEndian","_offset","_nextUint8","_nextUint16","getUint16","_nextUint32","_nextUint64","_nextInt32","getInt32","_nextUint8Array","_skip","_scan","Oi","Ti","I","emscripten_notify_memory_growth","Q","fetch","arrayBuffer","instantiate","malloc","ZSTD_findDecompressedSize","ZSTD_decompress","D","free","SRGBTransfer","LinearTransfer","_zstd","_activeLoaders","KTX2Loader","transcoderPath","transcoderBinary","transcoderPending","workerConfig","MSC_TRANSCODER","setTranscoderPath","detectSupportAsync","astcSupported","hasFeatureAsync","astcHDRSupported","etc1Supported","etc2Supported","dxtSupported","bptcSupported","pvrtcSupported","isWebGPURenderer","hasFeature","getSupportedProfiles","jsLoader","loadAsync","binaryLoader","binaryContent","BasisWorker","EngineFormat","EngineType","TranscoderFormat","BasisFormat","_createTexture","_createTextureFrom","transcodeResult","container","messageType","faces","dfdFlags","CompressedCubeTexture","mipmaps","CompressedArrayTexture","CompressedTexture","parseColorSpace","premultiplyAlpha","U","levelData","uncompressedByteLength","bitOffset","bitLength","channelType","samplePosition","sampleLower","sampleUpper","imageFlags","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","L","V","S","F","endpointCount","selectorCount","imageDescs","endpointsData","selectorsData","tablesData","extendedData","isBasisHDR","VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT","async","FORMAT_MAP","zstd","ZSTDDecoder","levelIndex","levelWidth","levelHeight","levelDepth","level","TYPE_MAP","FloatType","HalfFloatType","depth","UNCOMPRESSED_FORMATS","DataTexture","Data3DTexture","createRawTexture","texturePending","ETC1S","UASTC","UASTC_HDR","ETC1","ETC2","BC1","BC3","BC4","BC5","BC7_M6_OPAQUE_ONLY","BC7_M5","PVRTC1_4_RGB","PVRTC1_4_RGBA","ASTC_4x4","ATC_RGB","ATC_RGBA_INTERPOLATED_ALPHA","RGBA32","RGB565","BGR565","RGBA4444","BC6H","RGB_HALF","RGBA_HALF","RGBAFormat","RGBA_ASTC_4x4_Format","RGB_BPTC_UNSIGNED_Format","RGBA_BPTC_Format","RGBA_ETC2_EAC_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT5_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGB_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT1_Format","UnsignedByteType","BasisModule","_EngineFormat","_EngineType","_TranscoderFormat","_BasisFormat","onRuntimeInitialized","BASIS","initializeBasis","KTX2File","hasAlpha","ktx2File","cleanup","close","isValid","basisFormat","isUASTC","isETC1S","isHDR","getWidth","getHeight","getLayers","levelCount","getLevels","getFaces","getHasAlpha","getDFDFlags","transcoderFormat","engineFormat","engineType","OPTIONS","opt","if","needsPowerOfTwo","isPowerOfTwo","getTranscoderFormat","startTranscoding","face","mip","layerMips","mipWidth","mipHeight","levelInfo","getImageLevelInfo","origWidth","origHeight","getImageTranscodedSizeInBytes","status","transcodeImage","mipData","transcode","FORMAT_OPTIONS","priorityETC1S","priorityUASTC","priorityHDR","arrays","totalByteLength","RGFormat","RedFormat","VK_FORMAT_R32G32B32A32_SFLOAT","VK_FORMAT_R16G16B16A16_SFLOAT","VK_FORMAT_R8G8B8A8_UNORM","VK_FORMAT_R8G8B8A8_SRGB","VK_FORMAT_R32G32_SFLOAT","VK_FORMAT_R16G16_SFLOAT","VK_FORMAT_R8G8_UNORM","VK_FORMAT_R8G8_SRGB","VK_FORMAT_R32_SFLOAT","VK_FORMAT_R16_SFLOAT","VK_FORMAT_R8_SRGB","VK_FORMAT_R8_UNORM","VK_FORMAT_ASTC_6x6_SRGB_BLOCK","RGBA_ASTC_6x6_Format","VK_FORMAT_ASTC_6x6_UNORM_BLOCK","dfd","NoColorSpace","R","AbsR","xAxis","yAxis","zAxis","v1","closestPoint","rotationMatrix","Matrix3","aabb","inverse","localRay","Ray","OBB","halfSize","obb","getSize","clampPoint","extractBasis","clamp","containsPoint","intersectsBox3","box3","intersectsOBB","fromBox3","intersectsSphere","distanceToSquared","epsilon","ra","rb","intersectsPlane","plane","constant","intersectRay","ray","setFromCenterAndSize","setFromMatrix3","setPosition","invert","intersectBox","intersectsRay","identity","sx","sy","sz","determinant","setFromMatrix4","invSX","invSY","invSZ","multiply","setFromMatrixPosition","_object_pattern","_material_library_pattern","_material_use_pattern","_map_use_pattern","_face_vertex_data_separator_pattern","_ab","_cb","ParserState","state","vertices","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","hasUVIndices","smooth","startMaterial","previous","inherited","groupCount","mtllib","groupEnd","cloned","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","parseNormalIndex","parseUVIndex","addVertex","addVertexPoint","addVertexLine","addNormal","addFaceNormal","cross","addColor","addUV","addDefaultUV","addUVLine","addFace","ua","ub","uc","na","nb","vLen","ia","ic","nLen","uvLen","addPointGeometry","vi","addLineGeometry","uvi","OBJLoader","setMaterials","lines","line","trimStart","lineFirstChar","charAt","vertexData","faceVertices","vertex","vertexParts","v2","v3","lineParts","lineVertices","lineUVs","li","llen","pointData","hasVertexColors","buffergeometry","createdMaterials","miLen","sourceMaterial","materialHash","create","materialPoints","materialLine","MeshPhongMaterial","MTLLoader","setMaterialOptions","materialOptions","delimiter_pattern","materialsInfo","ss","materialCreator","MaterialCreator","setManager","baseUrl","materialsArray","nameLookup","wrap","convert","converted","mn","covmat","lprop","normalizeRGB","ignoreZeroRGBs","materialName","getAsArray","createMaterial_","setMapForType","mapType","texParams","getTextureParams","specular","shininess","invertTrProperty","matParams","items","mapping","DefaultLoadingManager","convertColorToLinear","convertSRGBToLinear","THREE","globalThis","SUPER_THREE","BufferGeometryUtils","LightProbeGenerator","fromCubeTexture","cubeTexture","totalWeight","coord","shBasis","sh","SphericalHarmonics3","shCoefficients","coefficients","faceIndex","canvas","context","imageData","getImageData","imageWidth","pixelSize","pixelIndex","row","lengthSq","weight","getBasisAt","norm","LightProbe","fromCubeRenderTarget","cubeRenderTarget","flip","coordinateSystem","WebGLCoordinateSystem","isWebGLRenderer","readRenderTargetPixelsAsync","DataUtils","fromHalfFloat","DeviceOrientationControls","reorder","deviceOrientation","screenOrientation","alphaOffset","zee","euler","q0","q1","onDeviceOrientationChangeEvent","event","onScreenOrientationChangeEvent","setObjectQuaternion","Euler","alpha","beta","gamma","orient","setFromEuler","setFromAxisAngle","connect","disconnect","removeEventListener","device","degToRad","Cache","AFRAME_CDN_ROOT","AFRAME_INJECTED","chunks","getDebugNamespaceType","ls","logs","supportsVRSession","supportsARSession","isWebXRAvailable","xr","updateEnterInterfaces","sceneEl","hasLoaded","errorHandler","err","isSessionSupported","supportsSession","checkHeadsetConnected","checkARSupport","checkVRSupport","_isMobile","isMobile","isIOS","isTablet","isR7","isMobileVR","mockUserAgent","isIpad","mockDevicePlatform","mockDeviceTouchPoints","platform","maxTouchPoints","MSStream","isAppleVisionPro","isMacintosh","hasFiveTouchPoints","isMobileDeviceRequestingDesktopSite","isOculusBrowser","isFirefoxReality","isLandscape","isBrowserEnvironment","isNodeEnvironment","EMPTY_SLOT","defaultObjectFactory","createPool","objectFactory","objPool","nextFreeSlot","grow","currentLength","recycle","use","objToUse","clearObject","removeUnusedKeys","COORDINATE_KEYS","regex","defaultVec","coordinate","vec","parseIfString","isCoordinates","isCoordinate","toVector3","vec3","splitCache","getComponentPropertyPath","getComponentProperty","splitName","setComponentProperty","forceCanvasResizeSafariMobile","canvasEl","validateSrc","isImageCb","isVideoCb","onResult","XMLHttpRequest","open","contentType","getResponseHeader","checkIsImageFallback","abort","send","checkIsImage","isImage","validateEnvMapSrc","isCubemapCb","isEquirectCb","urls","cubemapSrcRegex","validatedUrls","parseUrl","selector","validateAndGetQuerySelector","srcs","validateCubemapSrc","parsedSrc","tester","COLOR_MAPS","setTextureProperties","npot","DEFAULT_ANISOTROPY","updateMapMaterialFromData","dataName","shader","rendererSystem","systems","materialSrcs","setMap","handleTextureEvents","loadTextureSource","isCompatibleTexture","createCompatibleTexture","applyColorCorrection","updateMap","updateDistortionMap","longType","shortType","envMapPromises","updateEnvMap","envMap","sphericalEnvMap","refract","checkSetMap","srcLoader","loadCubeMapTexture","CubeRefractionMapping","CubeReflectionMapping","EquirectangularRefractionMapping","EquirectangularReflectionMapping","emitVideoTextureLoadedDataAll","emit","emitVideoTextureEndedAll","HTMLCanvasElement","isCanvasTexture","HTMLVideoElement","isVideoTexture","isTexture","CanvasTexture","VideoTexture","HLS_MIMETYPES","isHLS","DASH_REGEX","parsedData","getKeyValueChunks","toCamelCase","styleParse","keyCount","styleStringify","upperCase","hasUnclosedUrl","raw","nextSplit","chunk","toUpperCase","AXIS_LABELS","checkControllerPresentAndSetup","idPrefix","queryObject","controller","isPresent","isControllerPresentWebXR","controllerPresent","addEventListeners","injectTrackedControls","removeEventListeners","controllers","trackedControlsSystem","findMatchingControllerWebXR","hand","iterateControllerProfiles","handTracking","handedness","iterateProfiles","profiles","controllerMatch","emitIfAxesChanged","axesMapping","evt","axes","buttonType","detail","onButtonEvent","evtName","buttonName","buttons","updateModel","throttle","functionToThrottle","minimumInterval","optionalContext","throttleLeadingAndTrailing","deferTimer","timerExpired","sinceLastTime","clearTimeout","throttleTick","delta","debounce","wait","immediate","timeout","callNow","extendDeep","deepAssign","arrayPool","deepEqual","objectPool","keysA","keysB","valA","valB","targetObject","aVal","bVal","bKey","isComparingObjects","shouldCaptureKeyEvent","metaKey","activeElement","splitString","getElData","defaults","getUrlParameter","isIframed","findAllScenes","matchingElements","allElements","isScene","attrs","MOBILE_HEAD_TAGS","Meta","MOBILE_IOS_HEAD_TAGS","exists","titleEl","getSceneCanvasSize","styleParser","utils","ATTR_NAME","embedded","maxCanvasSize","aspect","updateProjectionMatrix","setSize","propertyTypes","nonCharRegex","urlRegex","registerPropertyType","defaultValue","cacheable","defaultParse","defaultStringify","defaultEquals","isCacheable","arrayEquals","assetParse","parsedUrl","getElementById","assetStringify","intParse","vecParse","coordinates","isValidDefaultCoordinate","possibleCoordinates","dimensions","isValidDefaultValue","PropertyTypes","isSingleProperty","componentName","processPropertyDefinition","propDefinition","isCustomType","propType","typeName","propNames","parseProperties","propData","getPartialData","silent","propValue","parseProperty","stringifyProperties","stringifiedData","stringifyProperty","processSchema","isSingleProp","aframeScript","currentScript","upperCaseRegExp","objectPools","emptyInitialOldData","encounteredUnknownProperties","attrValueProxyHandler","getComputedPropertyValue","newValue","recomputeProperty","handleUnknownProperty","Component","attrValue","sceneOnly","multiple","attrName","evtDetail","initialized","events","eventName","eventsBind","isObjectBased","oldData","attrValueProxy","Proxy","deferUnknownPropertyWarnings","updateSchema","throttledEmitComponentChanged","updateProperties","prevData","tock","flushToDOM","isDefault","HTMLElement","clobber","updateData","isLoading","callUpdateHandler","initComponent","initialOldData","initializingComponents","dataChanged","storeOldData","isPlaying","recomputeData","schemaChangeRequired","updateSchemaIfNeeded","isPositionRotationScale","oldDataInUse","handleMixinUpdate","resetProperty","propertyName","extendSchema","schemaAddon","extendedSchema","mixinEls","mixinData","propertySchema","newAttrValue","oldComputedValue","targetValue","newComputedValue","schemaChange","silenceUnknownPropertyWarnings","eventsAttach","eventsDetach","registrationOrderWarnings","NewComponent","schemaIsSingleProp","playMethod","pauseMethod","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","system","shouldPlay","hasBehavior","addBehavior","removeBehavior","isObject","before","after","canInitializeElements","emitReady","dispatchEvent","CustomEvent","System","buildData","registerSystem","NewSystem","initSystem","rawData","knownTags","isNode","ANode","computedMixinStr","connectedCallback","readyState","doConnectedCallback","mixins","closestScene","isMixin","updateMixins","attributeChangedCallback","oldVal","newVal","parentElement","closest","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","disconnectedCallback","childFilter","childrenLoaded","getChildren","allSettled","reason","setupMutationObserver","MutationObserver","mutationList","oldValue","observe","attributeOldValue","newMixins","oldMixins","newMixinIds","oldMixinIds","newMixinIdArray","oldMixinIdArray","mixinIds","unregisterMixin","registerMixin","removeAttribute","mixinId","compositedMixinIds","mixin","mixinEl","bubbles","extraData","evtData","customElements","define","MULTIPLE_COMPONENT_DELIMITER","OBJECT3D_COMPONENTS","ONCE","once","AEntity","componentsToUpdate","object3D","order","object3DMap","rotationObj","states","justInitialized","setEntityAttribute","assetsEl","APP","nameToComponent","eid2obj","addObject3DComponent","addToParent","removeFromParent","getObject3D","setObject3D","oldObj","removeObject3D","getOrCreateObject3D","Constructor","attachedToParent","updateComponents","getChildEntities","childEntities","isDependency","componentId","componentInfo","COMPONENTS","checkComponentDefined","initComponentDependencies","tryRemoveLater","extraComponents","isComponent","getExtraComponents","updateComponent","getDOMAttribute","mixinUpdate","entities","deferred","componentsUpdated","arg1","arg2","delimiterIndex","singlePropUpdate","recursive","visible","addState","removeState","stateIndex","inspector","openInspector","inMixin","isComponentMixedIn","postMessageAPIHandler","enterVR","exitVR","scrollTo","AScene","clock","Clock","hasWebXR","isAR","Scene","onAfterRender","systemNames","usedOfferSession","componentOrder","behaviors","originalHTML","innerHTML","addFullScreenStyles","removeFullScreenStyles","onFullScreenChange","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","blur","focus","dataset","aframeCanvas","passive","setupCanvas","setupRenderer","getCanvasSize","loaderScene","sphereGeometry","sphereMaterial","sphereMesh1","sphereMesh2","sphereMesh3","loaderAttribute","dotsColor","backgroundColor","SphereGeometry","innerWidth","innerHeight","getElapsedTime","background","title","display","setAnimationLoop","loadingScreen","tag","headEl","headScriptEl","headTags","createAndInjectTag","tagObj","meta","constants","createTag","insertBefore","initMetaTags","wakelock","Wakelock","initWakelock","enterVRBound","exitVRBound","attachedCallbackPostCamera","initSystems","determineComponentBehaviorOrder","behavior","behaviorSet","behaviorType","inUse","markedForRemoval","getPointerLockElement","pointerLockElement","enterAR","errorMessage","useAR","useOfferSession","xrInit","vrManager","offerSession","forceWebVR","xrSession","refspace","webxr","sessionReferenceSpaceType","setReferenceSpaceType","xrMode","sessionConfiguration","requestSession","layersEnabled","requiredFeatures","setSession","setFoveation","foveationLevel","setWebXRFrameRate","enterVRSuccess","cause","screen","lock","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","navigationUI","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","unlock","setPixelRatio","devicePixelRatio","componentPropValue","isVRPresenting","isPresenting","rendererAttr","rendererConfig","antialias","logarithmicDepthBuffer","powerPreference","preuploadVideos","precision","stencil","multiviewStereo","maxCanvasWidth","maxCanvasHeight","WebGLRenderer","renderStarted","timeDelta","callComponentBehaviors","getDelta","elapsedTime","savedBackground","visited","done","beforeName","visit","afterName","constrainSizeTo","maxSize","pixelRatio","isVR","offsetHeight","getMaxSize","geometryNames","Geometry","registerGeometry","NewGeometry","registerPrimitive","defaultAttributes","primitiveClass","defaultComponentsFromPrimitive","defaultComponents","deprecated","deprecatedMappings","resolveMappingCollisions","rawAttributeCache","mixinComponents","applyMapping","isUndefined","isPureObject","shaders","shaderNames","propertyToThreeMapping","int","number","vec2","vec4","Shader","registerShader","NewShader","vertexShader","fragmentShader","uniforms","initUniforms","RawShaderMaterial","ShaderMaterial","glslVersion","glsl3","GLSL3","varType","variables","materialKey","parseValue","setMapOnTextureLoad","Vector4","isAssets","isAssetItem","fileName","filePath","getFileNameFromURL","dotLastIndex","inferResponseType","response","xhr","loadedBytes","loaded","ACubeMap","onReadyStateChange","validate","cacheAttributes","updateEntities","cacheAttribute","parseComponentAttrValue","parsedValue","entity","colorHelperFrom","colorHelperTo","TYPE_COLOR","PROP_ROTATION","STRING_COMPONENTS","toRadians","eventNames","getRawProperty","splitDot","setRawProperty","isRawProperty","dur","elasticity","startEvents","pauseEvents","resumeEvents","eventDetail","animation","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","updateConfigForDefault","updateConfigForRawColor","createAndStartAnimation","dt","pausedWasPlaying","updateConfig","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","isBoolean","aframeProperty","updateConfigForVector","getPropertyType","persistent","webxrData","optionalFeaturesArray","optionalFeatures","auxQuaternion","onEnterVR","anchor","requestPersistentAnchorPending","requestAnchorPending","refSpace","pose","xrManager","restorePersistentAnchor","createAnchor","getReferenceSpace","getPose","anchorSpace","referenceSpace","anchorPose","session","getSession","anchorsSupported","deleteAnchor","XRRigidTransform","persistentHandle","requestPersistentHandle","storedPersistentHandle","persistentAnchors","deletePersistentAnchor","active","far","fov","near","spectator","zoom","updateActiveCamera","updateSpectatorCamera","activeCameraEl","setActiveCamera","disableActiveCamera","spectatorCameraEl","setSpectatorCamera","disableSpectatorCamera","mouse","origin","rayCasterConfig","EVENTS","STATES","CANVAS_EVENTS","DOWN","UP","WEBXR_EVENTS","CANVAS_HOVER_CLASS","dummyGeometry","downEvents","fuse","fuseTimeout","mouseCursorStylesEnabled","upEvents","rayOrigin","oneOf","cursorDownEl","intersectedEl","canvasBounds","isCursorDown","activeXRInput","updateCanvasBounds","intersectedEventDetail","cursorEl","onCursorDown","onCursorUp","onIntersection","onIntersectionCleared","onMouseMove","resetRaycaster","updateMouseEventListeners","addWebXREventListeners","removeWebXREventListeners","inputSource","addCanvasListeners","downEvent","upEvent","cameraElParent","left","bounds","parent","touches","clientX","clientY","isPerspectiveCamera","matrixWorld","unproject","isOrthographicCamera","transformDirection","targetRaySpace","applyQuaternion","localToWorld","raycaster","checkIntersections","intersectedEls","reenableARHitTest","twoWayEmit","intersection","currentIntersection","els","intersections","getIntersection","clearCurrentIntersection","setIntersection","clearedEls","ignoreRemaining","originalEvent","addOriginalEvent","MouseEvent","mouseEvent","TouchEvent","touchEvent","GAMEPAD_ID_PREFIX","skipCache","previousData","unuseGeometry","getOrCreateGeometry","currentGeometryType","newGeometryType","defaultModel","defaultModelColor","disabled","touchpad","thumbstick","bindMethods","onControllersUpdate","checkIfControllerPresent","removeControllersUpdateListener","onAxisMoved","onButtonChanged","onButtonDown","onButtonUp","onButtonTouchStart","onButtonTouchEnd","wasControllerConnected","controllerEventsActive","addControllersUpdateListener","initDefaultModel","button","modelEl","model","getDRACOLoader","getMeshoptDecoder","ktxLoader","getKTX2Loader","gltfModel","jointPose","LEFT_HAND_MODEL_URL","RIGHT_HAND_MODEL_URL","JOINTS","modelStyle","modelColor","modelOpacity","onModelLoaded","jointEls","wristObject3D","onChildAttached","isPinched","pinchEventDetail","wristRotation","indexTipPosition","hasPoses","jointPoses","jointRadii","updateReferenceSpace","addChildEntity","updateModelMaterial","skinnedMesh","referenceSpaceType","requestReferenceSpace","warnIfFeatureNotRequested","trackedControlsWebXR","fillPoses","fillJointRadii","updateHandModel","detectGesture","updateWristObject","WRIST_INDEX","setFromRotationMatrix","updateHandDotsModel","updateHandMeshModel","getBone","inputjoint","bone","jointName","jointEl","decompose","detectPinch","thumbTipPosition","THUMB_TIP_INDEX","INDEX_TIP_INDEX","handTrackingEnabled","XRHand","initDotsModel","initMeshHandModel","modelURL","getObjectByProperty","frustumCulled","setupChildrenEntities","childrenEls","childEl","hoverColor","hoverEnabled","trackedObject3DVariable","trackedObject3D","auxMatrix","onCollisionStarted","onCollisionEnded","onPinchStarted","onPinchEnded","transferEntityOwnership","grabbingElComponent","grabbingEls","grabbedEl","releaseGrabbedEntity","withEl","collidedEl","grabbingObject3D","grab","newParent","originalParent","MODEL_URLS","toonLeft","toonRight","lowPolyLeft","lowPolyRight","highPolyLeft","highPolyRight","ANIMATIONS","getGestureEventName","gesture","handModelStyle","pressedButtons","touchedButtons","onGripDown","handleButton","onGripUp","onTrackpadDown","onTrackpadUp","onTrackpadTouchStart","onTrackpadTouchEnd","onTriggerDown","onTriggerUp","onTriggerTouchStart","onTriggerTouchEnd","onGripTouchStart","onGripTouchEnd","onThumbstickDown","onThumbstickUp","onAorXTouchStart","onAorXTouchEnd","onBorYTouchStart","onBorYTouchEnd","onSurfaceTouchStart","onSurfaceTouchEnd","onControllerConnected","onControllerDisconnected","mixer","handModelOrientationZ","handModelOrientationX","previousHand","controlConfiguration","handColor","handmodelUrl","AnimationMixer","clips","lastGesture","isPressed","isTouched","determineGesture","animateGesture","emitGestureEvents","trackedControls","isGripActive","grip","isSurfaceActive","surface","isTrackpadActive","trackpad","isTriggerActive","trigger","isABXYActive","AorX","BorY","getClip","clip","playAnimation","toAction","clipAction","timeScale","clampWhenFinished","LoopOnce","repetitions","stopAllAction","crossFadeTo","GAMEPAD_ID","HP_MIXED_REALITY_MODEL_GLB_BASE_URL","HP_MIXED_REALITY_POSITION_OFFSET","HP_MIXED_REALITY_ROTATION_OFFSET","_x","_y","_z","_order","right","previousButtonValues","controllerIndex","analogValue","controllerObject3D","distanceOfPointFromPlane","positionOnPlane","planeNormal","pointToTest","rotateCubemap","gl","needsRedraw","frameBuffer","createFramebuffer","requiredFeaturesArray","onExitVR","onRequestedReferenceSpace","updateSrc","loadCubeMapImages","loadQuadImage","glayer","xrGLFactory","visibilityChanged","pendingCubeMapUpdate","getSubImage","loadCubeMapImage","colorTexture","initTexture","textureIsVideo","updateQuadPanel","preGenerateCubeMapTextures","generateCubeMapTextures","faceOffset","imgTmp0","imgTmp2","cubeFaceSize","textureSourceCubeFaceSize","cubefaceTextures","tempCanvas","tempCanvasContext","translate","rotate","restore","layerColorTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","TEXTURE_CUBE_MAP","loadingScreenImages","errorCode","texSubImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGBA","getError","initLayer","updateTransform","onvisibilitychange","visibilityState","initCubeMapLayer","initQuadLayer","XRWebGLBinding","createQuadLayer","space","viewPixelHeight","viewPixelWidth","initLoadingScreenImages","addLayer","glSizeLimit","getParameter","MAX_CUBE_MAP_TEXTURE_SIZE","createCubeLayer","layout","isStatic","font","fillText","destroyLayer","removeLayer","toggleCompositorLayer","enableCompositorLayer","layerEnabled","quadPanelEl","__webglTexture","previousFrameBuffer","FRAMEBUFFER_BINDING","viewport","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","TEXTURE_2D","subImage","textureEl","xrReadFramebuffer","x1offset","y1offset","x2offset","y2offset","RGB","READ_FRAMEBUFFER","readBuffer","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","deleteFramebuffer","blitTexture","controlsConfiguration","createRay","controllerConfig","raycasterConfig","showLine","modelReady","cursor","bbox","cameraWorldPosition","tempMat","tempVector","mat4","cameraPosition","portalNormal","portalPosition","CubeLoader","CubeTextureLoader","probeCache","isEqualVec3","groundColor","decay","castShadow","shadowBias","shadowCameraFar","shadowCameraFov","shadowCameraNear","shadowCameraTop","shadowCameraRight","shadowCameraBottom","shadowCameraLeft","shadowCameraVisible","shadowCameraAutomatic","shadowMapHeight","shadowMapWidth","shadowRadius","defaultTarget","registerLight","diffData","setLight","updateShadow","shadowsLoaded","onSetTarget","updateProbeMap","shadowCameraAutomaticEls","getWorldDirection","getWorldPosition","bottom","setFromObject","getBoundingSphere","resultPoint","distanceToPlane","mathUtils","pointInXYPlane","newLight","getLight","translateY","cameraHelper","CameraHelper","bias","mapSize","getHex","AmbientLight","HemisphereLight","cube","tempLightProbe","targetEl","geoNeedsUpdate","positionArray","computeBoundingSphere","setStyle","borderColor","highlighted","highlightedColor","on","peekMode","titleColor","visualAspectEnabled","navigate","previousQuaternion","quaternionClone","hiddenEls","strokeColor","elScale","previewDistance","initVisualAspect","updateEventListener","updatePeekMode","sphereEl","hideAll","showAll","semiSphereEl","textEl","visualAspectInitialized","segments","pano","align","phiStart","segmentsWidth","segmentsHeight","phiLength","thetaStart","thetaLength","borderEnabled","elWorldPosition","cameraPortalOrientation","lookAt","calculateCameraPortalOrientation","peekCameraPortalOrientation","cameraEl","extractRotation","sign","LOGITECH_MX_INK_MODEL_GLB_BASE_URL","PI_2","orientationOffset","loadModel","GAMEPAD_ID_COMPOSITE","magicWindowTrackingEnabled","pointerLockEnabled","reverseMouseDrag","reverseTouchDrag","touchEnabled","mouseEnabled","deltaYaw","previousHMDPosition","hmdQuaternion","magicWindowAbsoluteEuler","magicWindowDeltaEuler","magicWindowObject","deltaRotation","savedPose","pointerLocked","setupMouseControls","previousMouseEvent","setupMagicWindowControls","magicWindowControls","DeviceOrientationEvent","requestPermission","permissionGranted","updateGrabCursor","exitPointerLock","updateOrientation","onMouseDown","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onPointerLockChange","onPointerLockError","mouseDown","pitchObject","yawObject","updateMagicWindowOrientation","setFromQuaternion","previousMagicWindowYaw","movementX","movementY","mozMovementX","mozMovementY","screenX","screenY","showGrabbingCursor","requestPointerLock","mozRequestPointerLock","hideGrabbingCursor","touchStart","pageX","pageY","touchStarted","deltaY","clientWidth","saveCameraPose","matrixAutoUpdate","restoreCameraPose","mozPointerLockElement","enableGrabCursor","disableGrabCursor","hasSavedPose","MAGICLEAP_CONTROLLER_MODEL_GLB_URL","setButtonColor","disposeMaterial","unregisterMaterial","vertexColorsEnabled","blending","dithering","updateShader","updateMaterial","currentShader","newShader","updateBehavior","tickProperties","tickTime","shaderName","shaderInstance","setMaterial","oldDataHasKeys","BackSide","parseSide","NoBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","NormalBlending","parseBlending","defaultMaterial","registerMaterial","waitForMesh","auxPosition","auxScale","identityQuaternion","TOUCH_CONTROLLER_MODEL_BASE_URL","META_CONTROLLER_MODEL_BASE_URL","OCULUS_TOUCH_CONFIG","modelUrl","modelPivotOffset","modelPivotRotation","CONTROLLER_DEFAULT","CONTROLLER_PROPERTIES","componentConfig","buttonColor","buttonTouchColor","buttonHighlightColor","controllerType","onThumbstickMoved","triggerEuler","controllerId","displayModel","controllersPropertiesIds","isTouchV3orPROorPlus","onButtonChangedV3orPROorPlus","buttonMeshes","originalXRotationTrigger","originalXPositionGrip","buttonObjects","slerpQuaternions","buttonRanges","lerpVectors","onTouchV3orPROorPlusModelLoaded","getObjectByName","xbutton","abutton","ybutton","bbutton","cloneMeshMaterial","applyOffset","minX","thumbstickXAxis","thumbstickYAxis","button1","button2","button1id","button2id","updateThumbstickTouchV3orPROorPlus","axisMap","originalRotation","normalizedXAxis","normalizedYAxis","updateButtonModel","originalColor","object3d","newMaterial","minimumColliderDimension","centerModel","previousScale","auxEuler","boundingBoxSize","updateCollider","updateBoundingBox","addCollider","removeCollider","trackedObject3DPath","showColliders","showCollider","updateColliderMesh","renderColliderMesh","BoxGeometry","initColliderMesh","hideCollider","renderColliderGeometry","MeshLambertMaterial","matrixWorldAutoUpdate","checkTrackedObject","OCULUS_GO_CONTROLLER_MODEL_URL","mtl","objLoader","mtlLoader","applyMaterial","resetMesh","loadObj","objUrl","mtlUrl","BASE_PATH","setResourcePath","objModel","emissiveMap","buttonTouchedColor","PICO_MODEL_GLB_BASE_URL","matrixNeedsUpdate","OBSERVER_SELECTOR_RE","OBSERVER_CONFIG","childList","subtree","copyArray","autoRefresh","interval","lineColor","lineOpacity","useWorldCoordinates","clearedIntersectedEls","unitLineEndVec3","newIntersectedEls","newIntersections","prevCheckTime","prevIntersectedEls","rawIntersections","Raycaster","updateOriginDirection","setDirty","updateLine","observer","lineEndVec3","otherLineEndVec3","lineData","intersectedDetail","intersectedClearedDetail","intersectionClearedDetail","intersectionDetail","drawLine","clearAllIntersections","refreshObjects","flattenObject3DMaps","intersectObjects","lineLength","originVec3","endVec3","isAttachedToScene","directionVector","rotationEuler","cast","receive","onMeshChanged","setShadowMapEnabled","updateDescendants","receiveShadow","distanceModel","loopStart","loopEnd","maxDistance","positional","refDistance","rolloffFactor","volume","listener","audioLoader","AudioLoader","mustPlay","playSoundBound","playSound","sound","srcChanged","setupSound","setDistanceModel","setMaxDistance","setRefDistance","setRolloffFactor","setLoop","setLoopStart","setLoopEnd","setVolume","isPaused","setBuffer","processSound","stopSound","oldEvt","audioListener","AudioListener","PositionalAudio","Audio","onEnded","pauseSound","INDEX_CONTROLLER_MODEL_BASE_URL","autoHide","buttonEventDetails","buttonStates","changedAxes","axisMoveEventDetail","updateController","isControllerPresent","gamepad","controllerUtils","gripSpace","updatePose","updateButtons","buttonState","pressed","touched","handleAxes","handlePress","handleTouch","handleValue","controllerAxes","previousAxis","previousButtonState","INDEX_CONTROLLER_MODEL_URL","INDEX_CONTROLLER_ROTATION_OFFSET","INDEX_CONTROLLER_POSITION_OFFSET","VIVE_CONTROLLER_MODEL_OBJ_URL","triggerOriginalRotationX","menu","VIVE_CONTROLLER_MODEL_OBJ_MTL","VIVE_FOCUS_CONTROLLER_MODEL_URL","KEYCODE_TO_CODE","triggerPressed","touchpadPressed","trackpadPressed","pressedName","CLAMP_VELOCITY","KEYS","acceleration","adAxis","adEnabled","adInverted","fly","wsAxis","wsEnabled","wsInverted","onBlur","onContextMenu","onFocus","onKeyDown","onKeyUp","onVisibilityChange","attachVisibilityEventListeners","isEmptyObject","updateVelocity","getMovementVector","removeKeyEventListeners","removeVisibilityEventListeners","attachKeyEventListeners","adSign","wsSign","scaledEasing","KeyA","ArrowLeft","KeyD","ArrowRight","KeyW","ArrowUp","KeyS","ArrowDown","xRotation","applyEuler","oncontextmenu","keyCode","tempQuaternion","tempVec3","hitTestCache","MODEL_BASE_URL","MODEL_FILENAMES","applyPose","pair","axisMeshNames","buttonMeshNames","pointingPoseMeshName","onModelError","setModelVisibility","loadedMeshInfo","axisMeshes","createdFromMesh","updateControllerModel","sourceUrl","createControllerModelUrl","forceDefault","defaultUrl","meshName","meshInfo","rootNode","controllerModel","getImmediateChildByName","unpressed","calculateRayOriginFromMesh","getWorldQuaternion","lerpAxisTransform","axisValue","axisMeshInfo","lerpValue","setRotationFromQuaternion","slerp","lerpButtonTransform","buttonValue","buttonMeshInfo","numAxes","modelVisible","HitTest","hitTestSourceDetails","xrHitTestSource","sessionStart","warnAboutHitTest","tempFakePose","previousFrameAnchors","anchorToObject3D","requestHitTestSource","profile","requestHitTestSourceForTransientInput","transient","anchorFromLastHitTestResult","hitTest","lastHitTest","object3DOptions","entry","entryObject","doHit","hitTestResults","xrViewerPose","getViewerPose","getHitTestResultsForTransientInput","getHitTestResults","updateAnchorPoses","trackedAnchors","footprintDepth","imageDataArray","ImageData","orthoCam","layers","textureTarget","WebGLRenderTarget","basicMaterial","imageSmoothingEnabled","canvasTexture","hasPosedOnce","bboxMesh","viewerSpace","viewerHitTest","arHitTestComp","inputSources","targetRayMode","cancel","profileToSupport","transientHitTest","bboxOffset","makeBBox","bboxNeedsUpdate","PlaneGeometry","rotateX","rotateY","updateFootprint","tempImageData","oldRenderTarget","oldBackground","isXREnabled","getRenderTarget","setRenderTarget","overrideMaterial","readRenderTargetPixels","putImageData","shadowColor","shadowBlur","DIALOG_BUTTONS_CONTAINER_CLASS","DIALOG_BUTTON_CLASS","createDialog","buttonsContainerEl","modalContainer","dialog","dialogTextContainer","dialogText","deviceMotionMessage","httpsMessage","denyButtonText","allowButtonText","cancelButtonText","isSecureContext","showHTTPAlert","onDeviceMotionDialogAllowClicked","onDeviceMotionDialogDenyClicked","denyText","allowText","onAllowClicked","onDenyClicked","buttonsContainer","denyButton","acceptButton","devicePermissionDialogEl","stopPropagation","closeText","onOkClicked","okButton","httpAlertEl","enterVREl","INSPECTOR_RELEASE_URL","pkg","getFuzzyPatchVersion","firstPlay","onKeydown","onMessage","initOverlay","urlParam","loadingMessageEl","LOADING_MESSAGE","ctrlKey","altKey","getModifierState","showLoader","hideLoader","focusEl","script","AFRAME","INSPECTOR","inspectorInjected","density","fog","FogExp2","Fog","getFog","onKeyup","dynamic","initPool","availableEls","usedEls","createEntity","wrapPlay","object3DParent","requestEntity","updateRaycasters","returnEntity","filterLabels","meshesEnabled","meshMixin","planesEnabled","planeMixin","meshEntities","initWorldMeshEntity","detectMeshes","updateMeshes","detectedMeshes","detectedPlanes","present","newMeshes","semanticLabel","lastChangedTime","updateMeshGeometry","deleteMeshes","createNewMeshes","meshPose","meshEl","meshSpace","planeSpace","newMeshEntities","initMeshGeometry","shape","polygon","XRPlane","Shape","moveTo","lineTo","ShapeGeometry","meshEntity","entityEl","entityMesh","directionalLight","WebGLCubeRenderTarget","cubeCamera","CubeCamera","lightingEstimationTexture","needsVREnvironmentUpdate","requestLightProbe","startLightProbe","xrLightProbe","stopLightProbe","environment","probeLight","needsLightProbeUpdate","setupLightProbe","preferredReflectionFormat","getExtension","glBinding","lightProbe","updateXRCubeMap","cubeMap","getReflectionCubeMap","needsPMREMUpdate","estimate","getLightEstimate","directionalLightPosition","intensityScalar","primaryLightIntensity","sphericalHarmonicsCoefficients","primaryLightDirection","updateLights","VERTEX_SHADER","FRAGMENT_SHADER","setup","cubeMapSize","quad","ctx","outputColorSpace","shortcutPressed","projection","shiftKey","capture","setCapture","RGBFormat","renderTarget","isVREnabled","renderCapture","saveCapture","getCanvas","pixels","autoClear","flipPixelsVertically","flippedPixels","toBlob","linkEl","click","AFrameStats","HIDDEN_CLASS","ThreeStats","stats","RStats","fps","createStats","statsEl","hideBound","hide","showBound","show","applyStickyHoverFix","buttonEl","enterVRButton","enterVREnabled","enterARButton","enterAREnabled","XRMode","insideLoader","enterAREl","orientationModalEl","toggleOrientationModalIfNeeded","onEnterVRButtonClick","onEnterARButtonClick","onModalClick","onClick","vrButton","wrapper","arButton","createEnterARButton","modal","exit","createOrientationModal","uiElement","toggleEnterVRButtonIfNeeded","toggleEnterARButtonIfNeeded","segmentsDepth","CircleGeometry","openEnded","radiusBottom","radiusTop","segmentsRadial","CylinderGeometry","DodecahedronGeometry","IcosahedronGeometry","OctahedronGeometry","radiusInner","radiusOuter","segmentsPhi","segmentsTheta","RingGeometry","TetrahedronGeometry","arc","radiusTubular","segmentsTubular","TorusGeometry","TorusKnotGeometry","rotateVector","uvMinVector","uvMaxVector","uvScaleVector","getMaterialData","materialData","wireframe","toneMapped","wireframeLinewidth","normalMap","ambientOcclusionMap","ambientOcclusionMapIntensity","displacementMap","displacementScale","displacementBias","reflectivity","refractionRatio","combine","MixOperation","MultiplyOperation","AddOperation","bumpMap","bumpMapScale","vertexA","vertexB","vertexC","triangle","uvA","uvB","uvC","Triangle","getNormal","setFromUnitVectors","divide","ambientOcclusionTextureOffset","ambientOcclusionTextureRepeat","displacementTextureOffset","displacementTextureRepeat","metalnessMap","metalnessTextureOffset","metalnessTextureRepeat","normalTextureOffset","normalTextureRepeat","roughnessMap","roughnessTextureOffset","roughnessTextureRepeat","oneOF","bumpTextureOffset","bumpTextureRepeat","_envMap","UniformsUtils","merge","UniformsLib","negate","alphaToCoverage","ShadowMaterial","DEFAULT_CAMERA_ATTR","createGeometry","GeometryClass","geometryInstance","unwrapRender","wrapRender","initialCameraFound","numUserCameras","numUserCamerasChecked","setupInitialCamera","cameraEls","checkUserCamera","createDefaultCamera","cameraData","defaultCameraEl","newCameraEl","newCamera","previousCamera","defaultCameraWrapper","defaultCamera","removeDefaultCamera","originalRender","spectatorCamera","cacheCount","clearCache","cachedGeometry","incrementCacheCount","decrementCacheCount","dracoDecoderPath","basisTranscoderPath","meshoptDecoderPath","fetchScript","MeshoptDecoder","DEFAULT_LIGHT_ATTR","defaultLightsEnabled","defaultLights","userDefinedLights","setupDefaultLights","removeDefaultLights","ambientLight","ImageLoader","clearTextureSourceCache","sourceLoaded","sourcePromise","loadImage","loadVideo","Source","CubeTexture","loadSide","statusText","loadImageUrl","videoEl","controls","fixVideoAttributes","createVideoEl","collisions","colliderEls","colliderEl","detectCollisions","elIndex","registerCollision","componentA","componentB","existingCollision","boundingBoxA","boundingBoxB","collisionMeshA","collisionMeshB","detected","resetCollisions","clearCollisions","detectedCollisions","boxA","boxB","sortFrontToBack","groupOrder","renderOrder","sortRenderOrderOnly","sortBackToFront","highRefreshRate","exposure","toneMapping","sortTransparentObjects","colorManagement","toneMappingName","sortObjects","setOpaqueSort","toneMappingExposure","setTransparentSort","targetRate","rates","supportedFrameRates","updateTargetFrameRate","SHADOW_MAP_TYPE_MAP","basic","BasicShadowMap","pcf","PCFShadowMap","pcfsoft","PCFSoftShadowMap","autoUpdate","shadowMapEnabled","shadowMap","newEnabledState","updateAllMaterials","onInputSourcesChange","materialMappings","overlayElement","domOverlay","root","wasFeatureRequested","feature","optIntro","addMapping","htmlAttrName","getMeshMixin","standard","originalPosition","originalGroup","outerGroup","envmap","link","meshPrimitives","unCamelCase","geometryName","geometryHyphened","hasNativeWebVRImplementation","getVRDisplays","getVRDevices","cordova","protocol","REVISION","AFRAME_ASYNC","AComponent","ANIME","coreComponents"],"sourceRoot":""}