{"version":3,"file":"aframe-master.module.min.js","mappings":"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","sources":["webpack://aframe/./node_modules/an-array/index.js","webpack://aframe/./node_modules/as-number/index.js","webpack://aframe/./node_modules/base64-js/index.js","webpack://aframe/./node_modules/buffer-equal/index.js","webpack://aframe/./node_modules/buffer/index.js","webpack://aframe/./node_modules/css-loader/dist/runtime/api.js","webpack://aframe/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://aframe/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://aframe/./node_modules/debug/src/browser.js","webpack://aframe/./node_modules/debug/src/common.js","webpack://aframe/./node_modules/deep-assign/index.js","webpack://aframe/./node_modules/dtype/index.js","webpack://aframe/./node_modules/global/window.js","webpack://aframe/./node_modules/ieee754/index.js","webpack://aframe/./node_modules/is-buffer/index.js","webpack://aframe/./node_modules/is-function/index.js","webpack://aframe/./node_modules/is-obj/index.js","webpack://aframe/./node_modules/layout-bmfont-text/index.js","webpack://aframe/./node_modules/load-bmfont/browser.js","webpack://aframe/./node_modules/load-bmfont/lib/is-binary.js","webpack://aframe/./node_modules/ms/index.js","webpack://aframe/./node_modules/parse-bmfont-ascii/index.js","webpack://aframe/./node_modules/parse-bmfont-binary/index.js","webpack://aframe/./node_modules/parse-bmfont-xml/lib/browser.js","webpack://aframe/./node_modules/parse-bmfont-xml/lib/parse-attribs.js","webpack://aframe/./node_modules/parse-headers/parse-headers.js","webpack://aframe/./node_modules/quad-indices/index.js","webpack://aframe/./node_modules/three-bmfont-text/index.js","webpack://aframe/./node_modules/three-bmfont-text/lib/utils.js","webpack://aframe/./node_modules/three-bmfont-text/lib/vertices.js","webpack://aframe/./node_modules/word-wrapper/index.js","webpack://aframe/./node_modules/xhr/index.js","webpack://aframe/./node_modules/xml-parse-from-string/index.js","webpack://aframe/./node_modules/xtend/immutable.js","webpack://aframe/./vendor/wakelock/util.js","webpack://aframe/./vendor/wakelock/wakelock.js","webpack://aframe/./src/style/aframe.css","webpack://aframe/./src/style/aframe.css?ccfc","webpack://aframe/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://aframe/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://aframe/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://aframe/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://aframe/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://aframe/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://aframe/webpack/bootstrap","webpack://aframe/webpack/runtime/compat get default export","webpack://aframe/webpack/runtime/define property getters","webpack://aframe/webpack/runtime/global","webpack://aframe/webpack/runtime/hasOwnProperty shorthand","webpack://aframe/webpack/runtime/make namespace object","webpack://aframe/webpack/runtime/jsonp chunk loading","webpack://aframe/webpack/runtime/nonce","webpack://aframe/./node_modules/super-animejs/lib/anime.es.js","webpack://aframe/external module \"three\"","webpack://aframe/./node_modules/three/examples/jsm/loaders/DRACOLoader.js","webpack://aframe/./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://aframe/./node_modules/three/examples/jsm/utils/WorkerPool.js","webpack://aframe/./node_modules/three/examples/jsm/libs/ktx-parse.module.js","webpack://aframe/./node_modules/three/examples/jsm/libs/zstddec.module.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/KTX2Loader.js","webpack://aframe/./node_modules/three/examples/jsm/math/ColorSpaces.js","webpack://aframe/./node_modules/three/examples/jsm/math/OBB.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/OBJLoader.js","webpack://aframe/./node_modules/three/examples/jsm/loaders/MTLLoader.js","webpack://aframe/./node_modules/three/examples/jsm/lights/LightProbeGenerator.js","webpack://aframe/./vendor/DeviceOrientationControls.js","webpack://aframe/./src/lib/three.js","webpack://aframe/./src/constants/index.js","webpack://aframe/./src/utils/debug.js","webpack://aframe/./src/utils/device.js","webpack://aframe/./src/utils/object-pool.js","webpack://aframe/./src/utils/coordinates.js","webpack://aframe/./src/utils/split.js","webpack://aframe/./src/utils/entity.js","webpack://aframe/./src/utils/forceCanvasResizeSafariMobile.js","webpack://aframe/./src/utils/src-loader.js","webpack://aframe/./src/utils/material.js","webpack://aframe/./src/utils/styleParser.js","webpack://aframe/./src/utils/tracked-controls.js","webpack://aframe/./src/utils/index.js","webpack://aframe/./src/core/scene/metaTags.js","webpack://aframe/./src/core/scene/loadingScreen.js","webpack://aframe/./src/core/scene/scenes.js","webpack://aframe/./src/core/propertyTypes.js","webpack://aframe/./src/core/schema.js","webpack://aframe/./src/core/component.js","webpack://aframe/./src/core/readyState.js","webpack://aframe/./src/core/system.js","webpack://aframe/./src/core/a-node.js","webpack://aframe/./src/core/a-entity.js","webpack://aframe/./src/core/scene/postMessage.js","webpack://aframe/./src/utils/ios-orientationchange-blank-bug.js","webpack://aframe/./src/core/scene/a-scene.js","webpack://aframe/./src/core/scene/wakelock.js","webpack://aframe/./src/core/geometry.js","webpack://aframe/./src/extras/primitives/primitives.js","webpack://aframe/./src/core/shader.js","webpack://aframe/./src/core/a-assets.js","webpack://aframe/./src/core/a-cubemap.js","webpack://aframe/./src/core/a-mixin.js","webpack://aframe/./src/components/animation.js","webpack://aframe/./src/components/anchored.js","webpack://aframe/./src/components/camera.js","webpack://aframe/./src/components/cursor.js","webpack://aframe/./src/components/geometry.js","webpack://aframe/./src/components/generic-tracked-controller-controls.js","webpack://aframe/./src/components/gltf-model.js","webpack://aframe/./src/components/grabbable.js","webpack://aframe/./src/components/hand-tracking-controls.js","webpack://aframe/./src/components/hand-tracking-grab-controls.js","webpack://aframe/./src/components/hand-controls.js","webpack://aframe/./src/components/hide-on-enter-ar.js","webpack://aframe/./src/components/hide-on-enter-vr.js","webpack://aframe/./src/components/hp-mixed-reality-controls.js","webpack://aframe/./src/components/layer.js","webpack://aframe/./src/utils/math.js","webpack://aframe/./src/components/laser-controls.js","webpack://aframe/./src/components/light.js","webpack://aframe/./src/components/link.js","webpack://aframe/./src/components/line.js","webpack://aframe/./src/components/logitech-mx-ink-controls.js","webpack://aframe/./src/components/look-controls.js","webpack://aframe/./src/components/magicleap-controls.js","webpack://aframe/./src/components/material.js","webpack://aframe/./src/components/meta-touch-controls.js","webpack://aframe/./src/components/obb-collider.js","webpack://aframe/./src/components/obj-model.js","webpack://aframe/./src/components/oculus-go-controls.js","webpack://aframe/./src/components/pico-controls.js","webpack://aframe/./src/components/raycaster.js","webpack://aframe/./src/components/position.js","webpack://aframe/./src/components/rotation.js","webpack://aframe/./src/components/text.js","webpack://aframe/./src/components/sound.js","webpack://aframe/./src/components/scale.js","webpack://aframe/./src/components/shadow.js","webpack://aframe/./src/components/tracked-controls.js","webpack://aframe/./src/components/wasd-controls.js","webpack://aframe/./src/components/valve-index-controls.js","webpack://aframe/./src/components/visible.js","webpack://aframe/./src/components/vive-controls.js","webpack://aframe/./src/components/vive-focus-controls.js","webpack://aframe/./src/constants/keyboardevent.js","webpack://aframe/./src/components/windows-motion-controls.js","webpack://aframe/./src/components/scene/ar-hit-test.js","webpack://aframe/./src/components/scene/background.js","webpack://aframe/./src/components/scene/debug.js","webpack://aframe/./src/components/scene/device-orientation-permission-ui.js","webpack://aframe/./src/components/scene/embedded.js","webpack://aframe/./src/components/scene/inspector.js","webpack://aframe/./src/components/scene/fog.js","webpack://aframe/./src/components/scene/keyboard-shortcuts.js","webpack://aframe/./src/components/scene/pool.js","webpack://aframe/./src/components/scene/real-world-meshing.js","webpack://aframe/./src/components/scene/reflection.js","webpack://aframe/./src/components/scene/screenshot.js","webpack://aframe/../lib/panel.ts","webpack://aframe/../lib/panelVsync.ts","webpack://aframe/../lib/main.ts","webpack://aframe/./src/components/scene/stats.js","webpack://aframe/./src/components/scene/xr-mode-ui.js","webpack://aframe/./src/geometries/box.js","webpack://aframe/./src/geometries/circle.js","webpack://aframe/./src/geometries/cone.js","webpack://aframe/./src/geometries/cylinder.js","webpack://aframe/./src/geometries/dodecahedron.js","webpack://aframe/./src/geometries/icosahedron.js","webpack://aframe/./src/geometries/octahedron.js","webpack://aframe/./src/geometries/plane.js","webpack://aframe/./src/geometries/ring.js","webpack://aframe/./src/geometries/sphere.js","webpack://aframe/./src/geometries/tetrahedron.js","webpack://aframe/./src/geometries/torus.js","webpack://aframe/./src/geometries/torusKnot.js","webpack://aframe/./src/geometries/triangle.js","webpack://aframe/./src/shaders/flat.js","webpack://aframe/./src/shaders/standard.js","webpack://aframe/./src/shaders/phong.js","webpack://aframe/./src/shaders/sdf.js","webpack://aframe/./src/shaders/msdf.js","webpack://aframe/./src/shaders/shadow.js","webpack://aframe/./src/systems/camera.js","webpack://aframe/./src/systems/geometry.js","webpack://aframe/./src/systems/gltf-model.js","webpack://aframe/./src/systems/light.js","webpack://aframe/./src/systems/material.js","webpack://aframe/./src/systems/obb-collider.js","webpack://aframe/./src/systems/renderer.js","webpack://aframe/./src/systems/shadow.js","webpack://aframe/./src/systems/tracked-controls.js","webpack://aframe/./src/systems/webxr.js","webpack://aframe/./src/extras/primitives/getMeshMixin.js","webpack://aframe/./src/extras/components/pivot.js","webpack://aframe/./src/extras/primitives/primitives/a-camera.js","webpack://aframe/./src/extras/primitives/primitives/a-cursor.js","webpack://aframe/./src/extras/primitives/primitives/a-curvedimage.js","webpack://aframe/./src/extras/primitives/primitives/a-gltf-model.js","webpack://aframe/./src/extras/primitives/primitives/a-image.js","webpack://aframe/./src/extras/primitives/primitives/a-light.js","webpack://aframe/./src/extras/primitives/primitives/a-link.js","webpack://aframe/./src/extras/primitives/primitives/a-obj-model.js","webpack://aframe/./src/extras/primitives/primitives/meshPrimitives.js","webpack://aframe/./src/extras/primitives/primitives/a-sky.js","webpack://aframe/./src/extras/primitives/primitives/a-sound.js","webpack://aframe/./src/extras/primitives/primitives/a-text.js","webpack://aframe/./src/extras/primitives/primitives/a-video.js","webpack://aframe/./src/extras/primitives/primitives/a-videosphere.js","webpack://aframe/./src/index.js"],"sourcesContent":["var str = Object.prototype.toString\n\nmodule.exports = anArray\n\nfunction anArray(arr) {\n  return (\n       arr.BYTES_PER_ELEMENT\n    && str.call(arr.buffer) === '[object ArrayBuffer]'\n    || Array.isArray(arr)\n  )\n}\n","module.exports = function numtype(num, def) {\n\treturn typeof num === 'number'\n\t\t? num \n\t\t: (typeof def === 'number' ? def : 0)\n}","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","var Buffer = require('buffer').Buffer; // for use with browserify\n\nmodule.exports = function (a, b) {\n    if (!Buffer.isBuffer(a)) return undefined;\n    if (!Buffer.isBuffer(b)) return undefined;\n    if (typeof a.equals === 'function') return a.equals(b);\n    if (a.length !== b.length) return false;\n    \n    for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n    }\n    \n    return true;\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(' ', ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\nvar isObj = require('is-obj');\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Sources cannot be null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction assignKey(to, from, key) {\n\tvar val = from[key];\n\n\tif (val === undefined || val === null) {\n\t\treturn;\n\t}\n\n\tif (hasOwnProperty.call(to, key)) {\n\t\tif (to[key] === undefined || to[key] === null) {\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object (' + key + ')');\n\t\t}\n\t}\n\n\tif (!hasOwnProperty.call(to, key) || !isObj(val)) {\n\t\tto[key] = val;\n\t} else {\n\t\tto[key] = assign(Object(to[key]), from[key]);\n\t}\n}\n\nfunction assign(to, from) {\n\tif (to === from) {\n\t\treturn to;\n\t}\n\n\tfrom = Object(from);\n\n\tfor (var key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tassignKey(to, from, key);\n\t\t}\n\t}\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tvar symbols = Object.getOwnPropertySymbols(from);\n\n\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\tassignKey(to, from, symbols[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n}\n\nmodule.exports = function deepAssign(target) {\n\ttarget = toObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tassign(target, arguments[s]);\n\t}\n\n\treturn target;\n};\n","module.exports = function(dtype) {\n  switch (dtype) {\n    case 'int8':\n      return Int8Array\n    case 'int16':\n      return Int16Array\n    case 'int32':\n      return Int32Array\n    case 'uint8':\n      return Uint8Array\n    case 'uint16':\n      return Uint16Array\n    case 'uint32':\n      return Uint32Array\n    case 'float32':\n      return Float32Array\n    case 'float64':\n      return Float64Array\n    case 'array':\n      return Array\n    case 'uint8_clamped':\n      return Uint8ClampedArray\n  }\n}\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","var wordWrap = require('word-wrapper')\nvar xtend = require('xtend')\nvar number = require('as-number')\n\nvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\nvar M_WIDTHS = ['m', 'w']\nvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n\nvar TAB_ID = '\\t'.charCodeAt(0)\nvar SPACE_ID = ' '.charCodeAt(0)\nvar ALIGN_LEFT = 0, \n    ALIGN_CENTER = 1, \n    ALIGN_RIGHT = 2\n\nmodule.exports = function createLayout(opt) {\n  return new TextLayout(opt)\n}\n\nfunction TextLayout(opt) {\n  this.glyphs = []\n  this._measure = this.computeMetrics.bind(this)\n  this.update(opt)\n}\n\nTextLayout.prototype.update = function(opt) {\n  opt = xtend({\n    measure: this._measure\n  }, opt)\n  this._opt = opt\n  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n  if (!opt.font)\n    throw new Error('must provide a valid bitmap font')\n\n  var glyphs = this.glyphs\n  var text = opt.text||'' \n  var font = opt.font\n  this._setupSpaceGlyphs(font)\n  \n  var lines = wordWrap.lines(text, opt)\n  var minWidth = opt.width || 0\n\n  //clear glyphs\n  glyphs.length = 0\n\n  //get max line width\n  var maxLineWidth = lines.reduce(function(prev, line) {\n    return Math.max(prev, line.width, minWidth)\n  }, 0)\n\n  //the pen position\n  var x = 0\n  var y = 0\n  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n  var baseline = font.common.base\n  var descender = lineHeight-baseline\n  var letterSpacing = opt.letterSpacing || 0\n  var height = lineHeight * lines.length - descender\n  var align = getAlignType(this._opt.align)\n\n  //draw text along baseline\n  y -= height\n  \n  //the metrics for this text layout\n  this._width = maxLineWidth\n  this._height = height\n  this._descender = lineHeight - baseline\n  this._baseline = baseline\n  this._xHeight = getXHeight(font)\n  this._capHeight = getCapHeight(font)\n  this._lineHeight = lineHeight\n  this._ascender = lineHeight - descender - this._xHeight\n    \n  //layout each glyph\n  var self = this\n  lines.forEach(function(line, lineIndex) {\n    var start = line.start\n    var end = line.end\n    var lineWidth = line.width\n    var lastGlyph\n    \n    //for each glyph in that line...\n    for (var i=start; i<end; i++) {\n      var id = text.charCodeAt(i)\n      var glyph = self.getGlyph(font, id)\n      if (glyph) {\n        if (lastGlyph) \n          x += getKerning(font, lastGlyph.id, glyph.id)\n\n        var tx = x\n        if (align === ALIGN_CENTER) \n          tx += (maxLineWidth-lineWidth)/2\n        else if (align === ALIGN_RIGHT)\n          tx += (maxLineWidth-lineWidth)\n\n        glyphs.push({\n          position: [tx, y],\n          data: glyph,\n          index: i,\n          line: lineIndex\n        })  \n\n        //move pen forward\n        x += glyph.xadvance + letterSpacing\n        lastGlyph = glyph\n      }\n    }\n\n    //next line down\n    y += lineHeight\n    x = 0\n  })\n  this._linesTotal = lines.length;\n}\n\nTextLayout.prototype._setupSpaceGlyphs = function(font) {\n  //These are fallbacks, when the font doesn't include\n  //' ' or '\\t' glyphs\n  this._fallbackSpaceGlyph = null\n  this._fallbackTabGlyph = null\n\n  if (!font.chars || font.chars.length === 0)\n    return\n\n  //try to get space glyph\n  //then fall back to the 'm' or 'w' glyphs\n  //then fall back to the first glyph available\n  var space = getGlyphById(font, SPACE_ID) \n          || getMGlyph(font) \n          || font.chars[0]\n\n  //and create a fallback for tab\n  var tabWidth = this._opt.tabSize * space.xadvance\n  this._fallbackSpaceGlyph = space\n  this._fallbackTabGlyph = xtend(space, {\n    x: 0, y: 0, xadvance: tabWidth, id: TAB_ID, \n    xoffset: 0, yoffset: 0, width: 0, height: 0\n  })\n}\n\nTextLayout.prototype.getGlyph = function(font, id) {\n  var glyph = getGlyphById(font, id)\n  if (glyph)\n    return glyph\n  else if (id === TAB_ID) \n    return this._fallbackTabGlyph\n  else if (id === SPACE_ID) \n    return this._fallbackSpaceGlyph\n  return null\n}\n\nTextLayout.prototype.computeMetrics = function(text, start, end, width) {\n  var letterSpacing = this._opt.letterSpacing || 0\n  var font = this._opt.font\n  var curPen = 0\n  var curWidth = 0\n  var count = 0\n  var glyph\n  var lastGlyph\n\n  if (!font.chars || font.chars.length === 0) {\n    return {\n      start: start,\n      end: start,\n      width: 0\n    }\n  }\n\n  end = Math.min(text.length, end)\n  for (var i=start; i < end; i++) {\n    var id = text.charCodeAt(i)\n    var glyph = this.getGlyph(font, id)\n\n    if (glyph) {\n      //move pen forward\n      var xoff = glyph.xoffset\n      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n      curPen += kern\n\n      var nextPen = curPen + glyph.xadvance + letterSpacing\n      var nextWidth = curPen + glyph.width\n\n      //we've hit our limit; we can't move onto the next glyph\n      if (nextWidth >= width || nextPen >= width)\n        break\n\n      //otherwise continue along our line\n      curPen = nextPen\n      curWidth = nextWidth\n      lastGlyph = glyph\n    }\n    count++\n  }\n  \n  //make sure rightmost edge lines up with rendered glyphs\n  if (lastGlyph)\n    curWidth += lastGlyph.xoffset\n\n  return {\n    start: start,\n    end: start + count,\n    width: curWidth\n  }\n}\n\n//getters for the private vars\n;['width', 'height', \n  'descender', 'ascender',\n  'xHeight', 'baseline',\n  'capHeight',\n  'lineHeight' ].forEach(addGetter)\n\nfunction addGetter(name) {\n  Object.defineProperty(TextLayout.prototype, name, {\n    get: wrapper(name),\n    configurable: true\n  })\n}\n\n//create lookups for private vars\nfunction wrapper(name) {\n  return (new Function([\n    'return function '+name+'() {',\n    '  return this._'+name,\n    '}'\n  ].join('\\n')))()\n}\n\nfunction getGlyphById(font, id) {\n  if (!font.chars || font.chars.length === 0)\n    return null\n\n  var glyphIdx = findChar(font.chars, id)\n  if (glyphIdx >= 0)\n    return font.chars[glyphIdx]\n  return null\n}\n\nfunction getXHeight(font) {\n  for (var i=0; i<X_HEIGHTS.length; i++) {\n    var id = X_HEIGHTS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx].height\n  }\n  return 0\n}\n\nfunction getMGlyph(font) {\n  for (var i=0; i<M_WIDTHS.length; i++) {\n    var id = M_WIDTHS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx]\n  }\n  return 0\n}\n\nfunction getCapHeight(font) {\n  for (var i=0; i<CAP_HEIGHTS.length; i++) {\n    var id = CAP_HEIGHTS[i].charCodeAt(0)\n    var idx = findChar(font.chars, id)\n    if (idx >= 0) \n      return font.chars[idx].height\n  }\n  return 0\n}\n\nfunction getKerning(font, left, right) {\n  if (!font.kernings || font.kernings.length === 0)\n    return 0\n\n  var table = font.kernings\n  for (var i=0; i<table.length; i++) {\n    var kern = table[i]\n    if (kern.first === left && kern.second === right)\n      return kern.amount\n  }\n  return 0\n}\n\nfunction getAlignType(align) {\n  if (align === 'center')\n    return ALIGN_CENTER\n  else if (align === 'right')\n    return ALIGN_RIGHT\n  return ALIGN_LEFT\n}\n\nfunction findChar (array, value, start) {\n  start = start || 0\n  for (var i = start; i < array.length; i++) {\n    if (array[i].id === value) {\n      return i\n    }\n  }\n  return -1\n}","var xhr = require('xhr')\nvar noop = function(){}\nvar parseASCII = require('parse-bmfont-ascii')\nvar parseXML = require('parse-bmfont-xml')\nvar readBinary = require('parse-bmfont-binary')\nvar isBinaryFormat = require('./lib/is-binary')\nvar xtend = require('xtend')\n\nvar xml2 = (function hasXML2() {\n  return self.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest\n})()\n\nmodule.exports = function(opt, cb) {\n  cb = typeof cb === 'function' ? cb : noop\n\n  if (typeof opt === 'string')\n    opt = { uri: opt }\n  else if (!opt)\n    opt = {}\n\n  var expectBinary = opt.binary\n  if (expectBinary)\n    opt = getBinaryOpts(opt)\n\n  xhr(opt, function(err, res, body) {\n    if (err)\n      return cb(err)\n    if (!/^2/.test(res.statusCode))\n      return cb(new Error('http status code: '+res.statusCode))\n    if (!body)\n      return cb(new Error('no body result'))\n\n    var binary = false \n\n    //if the response type is an array buffer,\n    //we need to convert it into a regular Buffer object\n    if (isArrayBuffer(body)) {\n      var array = new Uint8Array(body)\n      body = Buffer.from(array, 'binary')\n    }\n\n    //now check the string/Buffer response\n    //and see if it has a binary BMF header\n    if (isBinaryFormat(body)) {\n      binary = true\n      //if we have a string, turn it into a Buffer\n      if (typeof body === 'string') \n        body = Buffer.from(body, 'binary')\n    } \n\n    //we are not parsing a binary format, just ASCII/XML/etc\n    if (!binary) {\n      //might still be a buffer if responseType is 'arraybuffer'\n      if (Buffer.isBuffer(body))\n        body = body.toString(opt.encoding)\n      body = body.trim()\n    }\n\n    var result\n    try {\n      var type = res.headers['content-type']\n      if (binary)\n        result = readBinary(body)\n      else if (/json/.test(type) || body.charAt(0) === '{')\n        result = JSON.parse(body)\n      else if (/xml/.test(type)  || body.charAt(0) === '<')\n        result = parseXML(body)\n      else\n        result = parseASCII(body)\n    } catch (e) {\n      cb(new Error('error parsing font '+e.message))\n      cb = noop\n    }\n    cb(null, result)\n  })\n}\n\nfunction isArrayBuffer(arr) {\n  var str = Object.prototype.toString\n  return str.call(arr) === '[object ArrayBuffer]'\n}\n\nfunction getBinaryOpts(opt) {\n  //IE10+ and other modern browsers support array buffers\n  if (xml2)\n    return xtend(opt, { responseType: 'arraybuffer' })\n  \n  if (typeof self.XMLHttpRequest === 'undefined')\n    throw new Error('your browser does not support XHR loading')\n\n  //IE9 and XML1 browsers could still use an override\n  var req = new self.XMLHttpRequest()\n  req.overrideMimeType('text/plain; charset=x-user-defined')\n  return xtend({\n    xhr: req\n  }, opt)\n}\n","var equal = require('buffer-equal')\nvar HEADER = Buffer.from([66, 77, 70, 3])\n\nmodule.exports = function(buf) {\n  if (typeof buf === 'string')\n    return buf.substring(0, 3) === 'BMF'\n  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n}","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","module.exports = function parseBMFontAscii(data) {\n  if (!data)\n    throw new Error('no data provided')\n  data = data.toString().trim()\n\n  var output = {\n    pages: [],\n    chars: [],\n    kernings: []\n  }\n\n  var lines = data.split(/\\r\\n?|\\n/g)\n\n  if (lines.length === 0)\n    throw new Error('no data in BMFont file')\n\n  for (var i = 0; i < lines.length; i++) {\n    var lineData = splitLine(lines[i], i)\n    if (!lineData) //skip empty lines\n      continue\n\n    if (lineData.key === 'page') {\n      if (typeof lineData.data.id !== 'number')\n        throw new Error('malformed file at line ' + i + ' -- needs page id=N')\n      if (typeof lineData.data.file !== 'string')\n        throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"')\n      output.pages[lineData.data.id] = lineData.data.file\n    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n      //... do nothing for these two ...\n    } else if (lineData.key === 'char') {\n      output.chars.push(lineData.data)\n    } else if (lineData.key === 'kerning') {\n      output.kernings.push(lineData.data)\n    } else {\n      output[lineData.key] = lineData.data\n    }\n  }\n\n  return output\n}\n\nfunction splitLine(line, idx) {\n  line = line.replace(/\\t+/g, ' ').trim()\n  if (!line)\n    return null\n\n  var space = line.indexOf(' ')\n  if (space === -1) \n    throw new Error(\"no named row at line \" + idx)\n\n  var key = line.substring(0, space)\n\n  line = line.substring(space + 1)\n  //clear \"letter\" field as it is non-standard and\n  //requires additional complexity to parse \" / = symbols\n  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')  \n  line = line.split(\"=\")\n  line = line.map(function(str) {\n    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n  })\n\n  var data = []\n  for (var i = 0; i < line.length; i++) {\n    var dt = line[i]\n    if (i === 0) {\n      data.push({\n        key: dt[0],\n        data: \"\"\n      })\n    } else if (i === line.length - 1) {\n      data[data.length - 1].data = parseData(dt[0])\n    } else {\n      data[data.length - 1].data = parseData(dt[0])\n      data.push({\n        key: dt[1],\n        data: \"\"\n      })\n    }\n  }\n\n  var out = {\n    key: key,\n    data: {}\n  }\n\n  data.forEach(function(v) {\n    out.data[v.key] = v.data;\n  })\n\n  return out\n}\n\nfunction parseData(data) {\n  if (!data || data.length === 0)\n    return \"\"\n\n  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0)\n    return data.substring(1, data.length - 1)\n  if (data.indexOf(',') !== -1)\n    return parseIntList(data)\n  return parseInt(data, 10)\n}\n\nfunction parseIntList(data) {\n  return data.split(',').map(function(val) {\n    return parseInt(val, 10)\n  })\n}","var HEADER = [66, 77, 70]\n\nmodule.exports = function readBMFontBinary(buf) {\n  if (buf.length < 6)\n    throw new Error('invalid buffer length for BMFont')\n\n  var header = HEADER.every(function(byte, i) {\n    return buf.readUInt8(i) === byte\n  })\n\n  if (!header)\n    throw new Error('BMFont missing BMF byte header')\n\n  var i = 3\n  var vers = buf.readUInt8(i++)\n  if (vers > 3)\n    throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)')\n  \n  var target = { kernings: [], chars: [] }\n  for (var b=0; b<5; b++)\n    i += readBlock(target, buf, i)\n  return target\n}\n\nfunction readBlock(target, buf, i) {\n  if (i > buf.length-1)\n    return 0\n\n  var blockID = buf.readUInt8(i++)\n  var blockSize = buf.readInt32LE(i)\n  i += 4\n\n  switch(blockID) {\n    case 1: \n      target.info = readInfo(buf, i)\n      break\n    case 2:\n      target.common = readCommon(buf, i)\n      break\n    case 3:\n      target.pages = readPages(buf, i, blockSize)\n      break\n    case 4:\n      target.chars = readChars(buf, i, blockSize)\n      break\n    case 5:\n      target.kernings = readKernings(buf, i, blockSize)\n      break\n  }\n  return 5 + blockSize\n}\n\nfunction readInfo(buf, i) {\n  var info = {}\n  info.size = buf.readInt16LE(i)\n\n  var bitField = buf.readUInt8(i+2)\n  info.smooth = (bitField >> 7) & 1\n  info.unicode = (bitField >> 6) & 1\n  info.italic = (bitField >> 5) & 1\n  info.bold = (bitField >> 4) & 1\n  \n  //fixedHeight is only mentioned in binary spec \n  if ((bitField >> 3) & 1)\n    info.fixedHeight = 1\n  \n  info.charset = buf.readUInt8(i+3) || ''\n  info.stretchH = buf.readUInt16LE(i+4)\n  info.aa = buf.readUInt8(i+6)\n  info.padding = [\n    buf.readInt8(i+7),\n    buf.readInt8(i+8),\n    buf.readInt8(i+9),\n    buf.readInt8(i+10)\n  ]\n  info.spacing = [\n    buf.readInt8(i+11),\n    buf.readInt8(i+12)\n  ]\n  info.outline = buf.readUInt8(i+13)\n  info.face = readStringNT(buf, i+14)\n  return info\n}\n\nfunction readCommon(buf, i) {\n  var common = {}\n  common.lineHeight = buf.readUInt16LE(i)\n  common.base = buf.readUInt16LE(i+2)\n  common.scaleW = buf.readUInt16LE(i+4)\n  common.scaleH = buf.readUInt16LE(i+6)\n  common.pages = buf.readUInt16LE(i+8)\n  var bitField = buf.readUInt8(i+10)\n  common.packed = 0\n  common.alphaChnl = buf.readUInt8(i+11)\n  common.redChnl = buf.readUInt8(i+12)\n  common.greenChnl = buf.readUInt8(i+13)\n  common.blueChnl = buf.readUInt8(i+14)\n  return common\n}\n\nfunction readPages(buf, i, size) {\n  var pages = []\n  var text = readNameNT(buf, i)\n  var len = text.length+1\n  var count = size / len\n  for (var c=0; c<count; c++) {\n    pages[c] = buf.slice(i, i+text.length).toString('utf8')\n    i += len\n  }\n  return pages\n}\n\nfunction readChars(buf, i, blockSize) {\n  var chars = []\n\n  var count = blockSize / 20\n  for (var c=0; c<count; c++) {\n    var char = {}\n    var off = c*20\n    char.id = buf.readUInt32LE(i + 0 + off)\n    char.x = buf.readUInt16LE(i + 4 + off)\n    char.y = buf.readUInt16LE(i + 6 + off)\n    char.width = buf.readUInt16LE(i + 8 + off)\n    char.height = buf.readUInt16LE(i + 10 + off)\n    char.xoffset = buf.readInt16LE(i + 12 + off)\n    char.yoffset = buf.readInt16LE(i + 14 + off)\n    char.xadvance = buf.readInt16LE(i + 16 + off)\n    char.page = buf.readUInt8(i + 18 + off)\n    char.chnl = buf.readUInt8(i + 19 + off)\n    chars[c] = char\n  }\n  return chars\n}\n\nfunction readKernings(buf, i, blockSize) {\n  var kernings = []\n  var count = blockSize / 10\n  for (var c=0; c<count; c++) {\n    var kern = {}\n    var off = c*10\n    kern.first = buf.readUInt32LE(i + 0 + off)\n    kern.second = buf.readUInt32LE(i + 4 + off)\n    kern.amount = buf.readInt16LE(i + 8 + off)\n    kernings[c] = kern\n  }\n  return kernings\n}\n\nfunction readNameNT(buf, offset) {\n  var pos=offset\n  for (; pos<buf.length; pos++) {\n    if (buf[pos] === 0x00) \n      break\n  }\n  return buf.slice(offset, pos)\n}\n\nfunction readStringNT(buf, offset) {\n  return readNameNT(buf, offset).toString('utf8')\n}","var parseAttributes = require('./parse-attribs')\nvar parseFromString = require('xml-parse-from-string')\n\n//In some cases element.attribute.nodeName can return\n//all lowercase values.. so we need to map them to the correct \n//case\nvar NAME_MAP = {\n  scaleh: 'scaleH',\n  scalew: 'scaleW',\n  stretchh: 'stretchH',\n  lineheight: 'lineHeight',\n  alphachnl: 'alphaChnl',\n  redchnl: 'redChnl',\n  greenchnl: 'greenChnl',\n  bluechnl: 'blueChnl'\n}\n\nmodule.exports = function parse(data) {\n  data = data.toString()\n  \n  var xmlRoot = parseFromString(data)\n  var output = {\n    pages: [],\n    chars: [],\n    kernings: []\n  }\n\n  //get config settings\n  ;['info', 'common'].forEach(function(key) {\n    var element = xmlRoot.getElementsByTagName(key)[0]\n    if (element)\n      output[key] = parseAttributes(getAttribs(element))\n  })\n\n  //get page info\n  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n  if (!pageRoot)\n    throw new Error('malformed file -- no <pages> element')\n  var pages = pageRoot.getElementsByTagName('page')\n  for (var i=0; i<pages.length; i++) {\n    var p = pages[i]\n    var id = parseInt(p.getAttribute('id'), 10)\n    var file = p.getAttribute('file')\n    if (isNaN(id))\n      throw new Error('malformed file -- page \"id\" attribute is NaN')\n    if (!file)\n      throw new Error('malformed file -- needs page \"file\" attribute')\n    output.pages[parseInt(id, 10)] = file\n  }\n\n  //get kernings / chars\n  ;['chars', 'kernings'].forEach(function(key) {\n    var element = xmlRoot.getElementsByTagName(key)[0]\n    if (!element)\n      return\n    var childTag = key.substring(0, key.length-1)\n    var children = element.getElementsByTagName(childTag)\n    for (var i=0; i<children.length; i++) {      \n      var child = children[i]\n      output[key].push(parseAttributes(getAttribs(child)))\n    }\n  })\n  return output\n}\n\nfunction getAttribs(element) {\n  var attribs = getAttribList(element)\n  return attribs.reduce(function(dict, attrib) {\n    var key = mapName(attrib.nodeName)\n    dict[key] = attrib.nodeValue\n    return dict\n  }, {})\n}\n\nfunction getAttribList(element) {\n  //IE8+ and modern browsers\n  var attribs = []\n  for (var i=0; i<element.attributes.length; i++)\n    attribs.push(element.attributes[i])\n  return attribs\n}\n\nfunction mapName(nodeName) {\n  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n}","//Some versions of GlyphDesigner have a typo\n//that causes some bugs with parsing. \n//Need to confirm with recent version of the software\n//to see whether this is still an issue or not.\nvar GLYPH_DESIGNER_ERROR = 'chasrset'\n\nmodule.exports = function parseAttributes(obj) {\n  obj = Object.assign({}, obj)\n  if (GLYPH_DESIGNER_ERROR in obj) {\n    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n    delete obj[GLYPH_DESIGNER_ERROR]\n  }\n\n  for (var k in obj) {\n    if (k === 'face' || k === 'charset') \n      continue\n    else if (k === 'padding' || k === 'spacing')\n      obj[k] = parseIntList(obj[k])\n    else\n      obj[k] = parseInt(obj[k], 10) \n  }\n  return obj\n}\n\nfunction parseIntList(data) {\n  return data.split(',').map(function(val) {\n    return parseInt(val, 10)\n  })\n}","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","var dtype = require('dtype')\nvar anArray = require('an-array')\nvar isBuffer = require('is-buffer')\n\nvar CW = [0, 2, 3]\nvar CCW = [2, 1, 3]\n\nmodule.exports = function createQuadElements(array, opt) {\n    //if user didn't specify an output array\n    if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {}\n        array = null\n    }\n\n    if (typeof opt === 'number') //backwards-compatible\n        opt = { count: opt }\n    else\n        opt = opt || {}\n\n    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n    var count = typeof opt.count === 'number' ? opt.count : 1\n    var start = (opt.start || 0) \n\n    var dir = opt.clockwise !== false ? CW : CCW,\n        a = dir[0], \n        b = dir[1],\n        c = dir[2]\n\n    var numIndices = count * 6\n\n    var indices = array || new (dtype(type))(numIndices)\n    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start\n        indices[x + 0] = j + 0\n        indices[x + 1] = j + 1\n        indices[x + 2] = j + 2\n        indices[x + 3] = j + a\n        indices[x + 4] = j + b\n        indices[x + 5] = j + c\n    }\n    return indices\n}","var createLayout = require('layout-bmfont-text')\nvar createIndices = require('quad-indices')\n\nvar vertices = require('./lib/vertices')\nvar utils = require('./lib/utils')\n\n\nmodule.exports = function createTextGeometry (opt) {\n  return new TextGeometry(opt)\n}\n\nclass TextGeometry extends THREE.BufferGeometry {\n  constructor (opt) {\n    super()\n\n    if (typeof opt === 'string') {\n      opt = { text: opt }\n    }\n\n    // use these as default values for any subsequent\n    // calls to update()\n    this._opt = Object.assign({}, opt)\n\n    // also do an initial setup...\n    if (opt) this.update(opt)\n  }\n\n  update(opt) {\n    if (typeof opt === 'string') {\n      opt = { text: opt }\n    }\n\n    // use constructor defaults\n    opt = Object.assign({}, this._opt, opt)\n\n    if (!opt.font) {\n      throw new TypeError('must specify a { font } in options')\n    }\n\n    this.layout = createLayout(opt)\n\n    // get vec2 texcoords\n    var flipY = opt.flipY !== false\n\n    // the desired BMFont data\n    var font = opt.font\n\n    // determine texture size from font file\n    var texWidth = font.common.scaleW\n    var texHeight = font.common.scaleH\n\n    // get visible glyphs\n    var glyphs = this.layout.glyphs.filter(function (glyph) {\n      var bitmap = glyph.data\n      return bitmap.width * bitmap.height > 0\n    })\n\n    // provide visible glyphs for convenience\n    this.visibleGlyphs = glyphs\n\n    // get common vertex data\n    var positions = vertices.positions(glyphs)\n    var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n    var indices = createIndices([], {\n      clockwise: true,\n      type: 'uint16',\n      count: glyphs.length\n    })\n\n    // update vertex data\n    this.setIndex(indices)\n    this.setAttribute('position', new THREE.BufferAttribute(positions, 2))\n    this.setAttribute('uv', new THREE.BufferAttribute(uvs, 2))\n\n    // update multipage data\n    if (!opt.multipage && 'page' in this.attributes) {\n      // disable multipage rendering\n      this.removeAttribute('page')\n    } else if (opt.multipage) {\n      // enable multipage rendering\n      var pages = vertices.pages(glyphs)\n      this.setAttribute('page', new THREE.BufferAttribute(pages, 1))\n    }\n\n    // recompute bounding box and sphere, if present\n    if (this.boundingBox !== null) {\n      this.computeBoundingBox();\n    }\n    if (this.boundingSphere !== null) {\n      this.computeBoundingSphere();\n    }\n  }\n\n  computeBoundingSphere() {\n    if (this.boundingSphere === null) {\n      this.boundingSphere = new THREE.Sphere()\n    }\n\n    var positions = this.attributes.position.array\n    var itemSize = this.attributes.position.itemSize\n    if (!positions || !itemSize || positions.length < 2) {\n      this.boundingSphere.radius = 0\n      this.boundingSphere.center.set(0, 0, 0)\n      return\n    }\n    utils.computeSphere(positions, this.boundingSphere)\n    if (isNaN(this.boundingSphere.radius)) {\n      console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n        'Computed radius is NaN. The ' +\n        '\"position\" attribute is likely to have NaN values.')\n    }\n  }\n\n  computeBoundingBox() {\n    if (this.boundingBox === null) {\n      this.boundingBox = new THREE.Box3()\n    }\n\n    var bbox = this.boundingBox\n    var positions = this.attributes.position.array\n    var itemSize = this.attributes.position.itemSize\n    if (!positions || !itemSize || positions.length < 2) {\n      bbox.makeEmpty()\n      return\n    }\n    utils.computeBox(positions, bbox)\n  }\n\n}\n","var itemSize = 2\nvar box = { min: [0, 0], max: [0, 0] }\n\nfunction bounds (positions) {\n  var count = positions.length / itemSize\n  box.min[0] = positions[0]\n  box.min[1] = positions[1]\n  box.max[0] = positions[0]\n  box.max[1] = positions[1]\n\n  for (var i = 0; i < count; i++) {\n    var x = positions[i * itemSize + 0]\n    var y = positions[i * itemSize + 1]\n    box.min[0] = Math.min(x, box.min[0])\n    box.min[1] = Math.min(y, box.min[1])\n    box.max[0] = Math.max(x, box.max[0])\n    box.max[1] = Math.max(y, box.max[1])\n  }\n}\n\nmodule.exports.computeBox = function (positions, output) {\n  bounds(positions)\n  output.min.set(box.min[0], box.min[1], 0)\n  output.max.set(box.max[0], box.max[1], 0)\n}\n\nmodule.exports.computeSphere = function (positions, output) {\n  bounds(positions)\n  var minX = box.min[0]\n  var minY = box.min[1]\n  var maxX = box.max[0]\n  var maxY = box.max[1]\n  var width = maxX - minX\n  var height = maxY - minY\n  var length = Math.sqrt(width * width + height * height)\n  output.center.set(minX + width / 2, minY + height / 2, 0)\n  output.radius = length / 2\n}\n","module.exports.pages = function pages (glyphs) {\n  var pages = new Float32Array(glyphs.length * 4 * 1)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var id = glyph.data.page || 0\n    pages[i++] = id\n    pages[i++] = id\n    pages[i++] = id\n    pages[i++] = id\n  })\n  return pages\n}\n\nmodule.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n  var uvs = new Float32Array(glyphs.length * 4 * 2)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var bitmap = glyph.data\n    var bw = (bitmap.x + bitmap.width)\n    var bh = (bitmap.y + bitmap.height)\n\n    // top left position\n    var u0 = bitmap.x / texWidth\n    var v1 = bitmap.y / texHeight\n    var u1 = bw / texWidth\n    var v0 = bh / texHeight\n\n    if (flipY) {\n      v1 = (texHeight - bitmap.y) / texHeight\n      v0 = (texHeight - bh) / texHeight\n    }\n\n    // BL\n    uvs[i++] = u0\n    uvs[i++] = v1\n    // TL\n    uvs[i++] = u0\n    uvs[i++] = v0\n    // TR\n    uvs[i++] = u1\n    uvs[i++] = v0\n    // BR\n    uvs[i++] = u1\n    uvs[i++] = v1\n  })\n  return uvs\n}\n\nmodule.exports.positions = function positions (glyphs) {\n  var positions = new Float32Array(glyphs.length * 4 * 2)\n  var i = 0\n  glyphs.forEach(function (glyph) {\n    var bitmap = glyph.data\n\n    // bottom left position\n    var x = glyph.position[0] + bitmap.xoffset\n    var y = glyph.position[1] + bitmap.yoffset\n\n    // quad size\n    var w = bitmap.width\n    var h = bitmap.height\n\n    // BL\n    positions[i++] = x\n    positions[i++] = y\n    // TL\n    positions[i++] = x\n    positions[i++] = y + h\n    // TR\n    positions[i++] = x + w\n    positions[i++] = y + h\n    // BR\n    positions[i++] = x + w\n    positions[i++] = y\n  })\n  return positions\n}\n","var newline = /\\n/\nvar newlineChar = '\\n'\nvar whitespace = /\\s/\n\nmodule.exports = function(text, opt) {\n    var lines = module.exports.lines(text, opt)\n    return lines.map(function(line) {\n        return text.substring(line.start, line.end)\n    }).join('\\n')\n}\n\nmodule.exports.lines = function wordwrap(text, opt) {\n    opt = opt||{}\n\n    //zero width results in nothing visible\n    if (opt.width === 0 && opt.mode !== 'nowrap') \n        return []\n\n    text = text||''\n    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n    var start = Math.max(0, opt.start||0)\n    var end = typeof opt.end === 'number' ? opt.end : text.length\n    var mode = opt.mode\n\n    var measure = opt.measure || monospace\n    if (mode === 'pre')\n        return pre(measure, text, start, end, width)\n    else\n        return greedy(measure, text, start, end, width, mode)\n}\n\nfunction idxOf(text, chr, start, end) {\n    var idx = text.indexOf(chr, start)\n    if (idx === -1 || idx > end)\n        return end\n    return idx\n}\n\nfunction isWhitespace(chr) {\n    return whitespace.test(chr)\n}\n\nfunction pre(measure, text, start, end, width) {\n    var lines = []\n    var lineStart = start\n    for (var i=start; i<end && i<text.length; i++) {\n        var chr = text.charAt(i)\n        var isNewline = newline.test(chr)\n\n        //If we've reached a newline, then step down a line\n        //Or if we've reached the EOF\n        if (isNewline || i===end-1) {\n            var lineEnd = isNewline ? i : i+1\n            var measured = measure(text, lineStart, lineEnd, width)\n            lines.push(measured)\n            \n            lineStart = i+1\n        }\n    }\n    return lines\n}\n\nfunction greedy(measure, text, start, end, width, mode) {\n    //A greedy word wrapper based on LibGDX algorithm\n    //https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n    var lines = []\n\n    var testWidth = width\n    //if 'nowrap' is specified, we only wrap on newline chars\n    if (mode === 'nowrap')\n        testWidth = Number.MAX_VALUE\n\n    while (start < end && start < text.length) {\n        //get next newline position\n        var newLine = idxOf(text, newlineChar, start, end)\n\n        //eat whitespace at start of line\n        while (start < newLine) {\n            if (!isWhitespace( text.charAt(start) ))\n                break\n            start++\n        }\n\n        //determine visible # of glyphs for the available width\n        var measured = measure(text, start, newLine, testWidth)\n\n        var lineEnd = start + (measured.end-measured.start)\n        var nextStart = lineEnd + newlineChar.length\n\n        //if we had to cut the line before the next newline...\n        if (lineEnd < newLine) {\n            //find char to break on\n            while (lineEnd > start) {\n                if (isWhitespace(text.charAt(lineEnd)))\n                    break\n                lineEnd--\n            }\n            if (lineEnd === start) {\n                if (nextStart > start + newlineChar.length) nextStart--\n                lineEnd = nextStart // If no characters to break, show all.\n            } else {\n                nextStart = lineEnd\n                //eat whitespace at end of line\n                while (lineEnd > start) {\n                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length)))\n                        break\n                    lineEnd--\n                }\n            }\n        }\n        if (lineEnd >= start) {\n            var result = measure(text, start, lineEnd, testWidth)\n            lines.push(result)\n        }\n        start = nextStart\n    }\n    return lines\n}\n\n//determines the visible number of glyphs within a given width\nfunction monospace(text, start, end, width) {\n    var glyphs = Math.min(width, end-start)\n    return {\n        start: start,\n        end: start+glyphs\n    }\n}","\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n","module.exports = (function xmlparser() {\n  //common browsers\n  if (typeof self.DOMParser !== 'undefined') {\n    return function(str) {\n      var parser = new self.DOMParser()\n      return parser.parseFromString(str, 'application/xml')\n    }\n  } \n\n  //IE8 fallback\n  if (typeof self.ActiveXObject !== 'undefined'\n      && new self.ActiveXObject('Microsoft.XMLDOM')) {\n    return function(str) {\n      var xmlDoc = new self.ActiveXObject(\"Microsoft.XMLDOM\")\n      xmlDoc.async = \"false\"\n      xmlDoc.loadXML(str)\n      return xmlDoc\n    }\n  }\n\n  //last resort fallback\n  return function(str) {\n    var div = document.createElement('div')\n    div.innerHTML = str\n    return div\n  }\n})()\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = {};\n\nUtil.base64 = function(mimeType, base64) {\n  return 'data:' + mimeType + ';base64,' + base64;\n};\n\nUtil.isMobile = function() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\nUtil.isIOS = function() {\n  return /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n};\n\nUtil.isIFrame = function() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n};\n\nUtil.appendQueryParameter = function(url, key, value) {\n  // Determine delimiter based on if the URL already GET parameters in it.\n  var delimiter = (url.indexOf('?') < 0 ? '?' : '&');\n  url += delimiter + key + '=' + value;\n  return url;\n};\n\n// From http://goo.gl/4WX3tg\nUtil.getQueryParameter = function(name) {\n  name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n};\n\nUtil.isLandscapeMode = function() {\n  return (window.orientation == 90 || window.orientation == -90);\n};\n\n\nmodule.exports = Util;\n","/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = require('./util.js');\n\n/**\n * Android and iOS compatible wakelock implementation.\n *\n * Refactored thanks to dkovalev@.\n */\nfunction AndroidWakeLock() {\n  var video = document.createElement('video');\n\n  video.addEventListener('ended', function() {\n    video.play();\n  });\n\n  this.request = function() {\n    if (video.paused) {\n      // Base64 version of videos_src/no-sleep-60s.webm.\n      video.src = Util.base64('video/webm', 'GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw==');\n      video.play();\n    }\n  };\n\n  this.release = function() {\n    video.pause();\n    video.src = '';\n  };\n}\n\nfunction iOSWakeLock() {\n  var timer = null;\n\n  this.request = function() {\n    if (!timer) {\n      timer = setInterval(function() {\n        window.location.href = '/';\n        setTimeout(window.stop, 0);\n      }, 15000);\n    }\n  }\n\n  this.release = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n}\n\n\nfunction getWakeLock() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {\n    return iOSWakeLock;\n  } else {\n    return AndroidWakeLock;\n  }\n}\n\nmodule.exports = getWakeLock();\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(${___CSS_LOADER_URL_REPLACEMENT_0___}) 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(${___CSS_LOADER_URL_REPLACEMENT_1___}) 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(${___CSS_LOADER_URL_REPLACEMENT_2___});\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(${___CSS_LOADER_URL_REPLACEMENT_3___}) center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: \"Insert phone into Cardboard holder.\";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(${___CSS_LOADER_URL_REPLACEMENT_4___}) no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/aframe.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/* .a-fullscreen means not embedded. */\\nhtml.a-fullscreen {\\n  bottom: 0;\\n  left: 0;\\n  position: fixed;\\n  right: 0;\\n  top: 0;\\n}\\n\\nhtml.a-fullscreen body {\\n  height: 100%;\\n  margin: 0;\\n  overflow: hidden;\\n  padding: 0;\\n  width: 100%;\\n}\\n\\n/* Class is removed when doing <a-scene embedded>. */\\nhtml.a-fullscreen .a-canvas {\\n  width: 100% !important;\\n  height: 100% !important;\\n  top: 0 !important;\\n  left: 0 !important;\\n  right: 0 !important;\\n  bottom: 0 !important;\\n  position: fixed !important;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-vr,\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 5px;\\n  bottom: 5px;\\n}\\n\\nhtml:not(.a-fullscreen) .a-enter-ar {\\n  right: 60px;\\n}\\n\\n/* In chrome mobile the user agent stylesheet set it to white  */\\n:-webkit-full-screen {\\n  background-color: transparent;\\n}\\n\\n.a-hidden {\\n  display: none !important;\\n}\\n\\n.a-canvas {\\n  height: 100%;\\n  left: 0;\\n  position: absolute;\\n  top: 0;\\n  width: 100%;\\n}\\n\\n.a-canvas.a-grab-cursor:hover {\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\\n  cursor: pointer;\\n}\\n\\n.a-inspector-loader {\\n  background-color: #ed3160;\\n  position: fixed;\\n  left: 3px;\\n  top: 3px;\\n  padding: 6px 10px;\\n  color: #fff;\\n  text-decoration: none;\\n  font-size: 12px;\\n  font-family: Roboto,sans-serif;\\n  text-align: center;\\n  z-index: 99999;\\n  width: 204px;\\n}\\n\\n/* Inspector loader animation */\\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\\n\\n.a-inspector-loader .dots span {\\n  animation: dots-1 2s infinite steps(1);\\n  -webkit-animation: dots-1 2s infinite steps(1);\\n}\\n\\n.a-inspector-loader .dots span:first-child + span {\\n  animation-name: dots-2;\\n  -webkit-animation-name: dots-2;\\n}\\n\\n.a-inspector-loader .dots span:first-child + span + span {\\n  animation-name: dots-3;\\n  -webkit-animation-name: dots-3;\\n}\\n\\na-scene {\\n  display: block;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\na-assets,\\na-scene video,\\na-scene img,\\na-scene audio {\\n  display: none;\\n}\\n\\n.a-enter-vr-modal,\\n.a-orientation-modal {\\n  font-family: Consolas, Andale Mono, Courier New, monospace;\\n}\\n\\n.a-enter-vr-modal a {\\n  border-bottom: 1px solid #fff;\\n  padding: 2px 0;\\n  text-decoration: none;\\n  transition: .1s color ease-in;\\n}\\n\\n.a-enter-vr-modal a:hover {\\n  background-color: #fff;\\n  color: #111;\\n  padding: 2px 4px;\\n  position: relative;\\n  left: -4px;\\n}\\n\\n.a-enter-vr,\\n.a-enter-ar {\\n  font-family: sans-serif, monospace;\\n  font-size: 13px;\\n  width: 100%;\\n  font-weight: 200;\\n  line-height: 16px;\\n  position: absolute;\\n  right: 20px;\\n  bottom: 20px;\\n}\\n\\n.a-enter-ar.xr {\\n  right: 90px;\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-vr-modal,\\n.a-enter-vr-modal a {\\n  color: #fff;\\n  user-select: none;\\n  outline: none;\\n}\\n\\n.a-enter-vr-button {\\n  background: rgba(0, 0, 0, 0.35) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-ar-button {\\n  background: rgba(0, 0, 0, 0.20) url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\\\") 50% 50% no-repeat;\\n}\\n\\n.a-enter-vr.fullscreen .a-enter-vr-button {\\n  background-image: url(\\\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E\\\");\\n}\\n\\n.a-enter-vr-button,\\n.a-enter-ar-button {\\n  background-size: 90% 90%;\\n  border: 0;\\n  bottom: 0;\\n  cursor: pointer;\\n  min-width: 58px;\\n  min-height: 34px;\\n  /* 1.74418604651 */\\n  /*\\n    In order to keep the aspect ratio when resizing\\n    padding-top percentages are relative to the containing block's width.\\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\\n  */\\n  padding-right: 0;\\n  padding-top: 0;\\n  position: absolute;\\n  right: 0;\\n  transition: background-color .05s ease;\\n  -webkit-transition: background-color .05s ease;\\n  z-index: 9999;\\n  border-radius: 8px;\\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\\n}\\n\\n.a-enter-ar-button {\\n  background-size: 100% 90%;\\n  border-radius: 7px;\\n}\\n\\n.a-enter-ar-button:active,\\n.a-enter-ar-button:hover,\\n.a-enter-vr-button:active,\\n.a-enter-vr-button:hover {\\n  background-color: #ef2d5e;\\n}\\n\\n.a-enter-vr-button.resethover {\\n  background-color: rgba(0, 0, 0, 0.35);\\n}\\n\\n.a-enter-vr-modal {\\n  background-color: #666;\\n  border-radius: 0;\\n  display: none;\\n  min-height: 32px;\\n  margin-right: 70px;\\n  padding: 9px;\\n  width: 280px;\\n  right: 2%;\\n  position: absolute;\\n}\\n\\n.a-enter-vr-modal:after {\\n  border-bottom: 10px solid transparent;\\n  border-left: 10px solid #666;\\n  border-top: 10px solid transparent;\\n  display: inline-block;\\n  content: '';\\n  position: absolute;\\n  right: -5px;\\n  top: 5px;\\n  width: 0;\\n  height: 0;\\n}\\n\\n.a-enter-vr-modal p,\\n.a-enter-vr-modal a {\\n  display: inline;\\n}\\n\\n.a-enter-vr-modal p {\\n  margin: 0;\\n}\\n\\n.a-enter-vr-modal p:after {\\n  content: ' ';\\n}\\n\\n.a-orientation-modal {\\n  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-orientation-modal:after {\\n  color: #666;\\n  content: \\\"Insert phone into Cardboard holder.\\\";\\n  display: block;\\n  position: absolute;\\n  text-align: center;\\n  top: 70%;\\n  transform: translateY(-70%);\\n  width: 100%;\\n}\\n\\n.a-orientation-modal button {\\n  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;\\n  border: none;\\n  height: 50px;\\n  text-indent: -9999px;\\n  width: 50px;\\n}\\n\\n.a-loader-title {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  font-family: sans-serif, monospace;\\n  text-align: center;\\n  font-size: 20px;\\n  height: 50px;\\n  font-weight: 300;\\n  line-height: 50px;\\n  position: absolute;\\n  right: 0px;\\n  left: 0px;\\n  top: 0px;\\n  color: white;\\n}\\n\\n.a-modal {\\n  position: absolute;\\n  background: rgba(0, 0, 0, 0.60);\\n  background-size: 50% 50%;\\n  bottom: 0;\\n  font-size: 14px;\\n  font-weight: 600;\\n  left: 0;\\n  line-height: 20px;\\n  right: 0;\\n  position: fixed;\\n  top: 0;\\n  z-index: 9999999;\\n}\\n\\n.a-dialog {\\n  position: relative;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  z-index: 199995;\\n  width: 300px;\\n  height: 200px;\\n  background-size: contain;\\n  background-color: white;\\n  font-family: sans-serif, monospace;\\n  font-size: 20px;\\n  border-radius: 3px;\\n  padding: 6px;\\n}\\n\\n.a-dialog-text-container {\\n  width: 100%;\\n  height: 70%;\\n  align-self: flex-start;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  flex-direction: column;\\n}\\n\\n.a-dialog-text {\\n  display: inline-block;\\n  font-weight: normal;\\n  font-size: 14pt;\\n  margin: 8px;\\n}\\n\\n.a-dialog-buttons-container {\\n  display: inline-flex;\\n  align-self: flex-end;\\n  width: 100%;\\n  height: 30%;\\n}\\n\\n.a-dialog-button {\\n  cursor: pointer;\\n  align-self: center;\\n  opacity: 0.9;\\n  height: 80%;\\n  width: 50%;\\n  font-size: 12pt;\\n  margin: 4px;\\n  border-radius: 2px;\\n  text-align:center;\\n  border: none;\\n  display: inline-block;\\n  -webkit-transition: all 0.25s ease-in-out;\\n  transition: all 0.25s ease-in-out;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\\n  user-select: none;\\n}\\n\\n.a-dialog-permission-button:hover {\\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\\n}\\n\\n.a-dialog-allow-button {\\n  background-color: #00ceff;\\n}\\n\\n.a-dialog-deny-button {\\n  background-color: #ff005b;\\n}\\n\\n.a-dialog-ok-button {\\n  background-color: #00ceff;\\n  width: 100%;\\n}\\n\\n.a-dom-overlay:not(.a-no-style) {\\n  overflow: hidden;\\n  position: absolute;\\n  pointer-events: none;\\n  box-sizing: border-box;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  padding: 1em;\\n}\\n\\n.a-dom-overlay:not(.a-no-style)>* {\\n  pointer-events: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!./aframe.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","/*\n * anime.js v3.0.0\n * (c) 2019 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar hexRegex = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\nvar rgbPrefixRegex = /^rgb/;\nvar hslRegex = /^hsl/;\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return hexRegex.test(a); },\n  rgb: function (a) { return rgbPrefixRegex.test(a); },\n  hsl: function (a) { return hslRegex.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nvar easingFunctionRegex = /\\(([^)]+)\\)/;\n\nfunction parseEasingParameters(string) {\n  var match = easingFunctionRegex.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t :\n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = {\n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  for (var coords in curves) {\n    for (var i = 0, len = curves[coords].length; i < len; i++) {\n      eases['ease'+coords+names[i]] = curves[coords][i];\n    }\n  }\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nvar auxArrayFilter = [];\n\nfunction filterArray(arr, callback) {\n  var result = auxArrayFilter;\n\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n\n  // arr turns into the auxArray and we return the previously aux array.\n  auxArrayFilter = arr;\n  auxArrayFilter.length = 0;\n  return result;\n}\n\nfunction flattenArray (arr, result) {\n  if (!result) { result = []; }\n  for (var i = 0, length = arr.length; i < length; i++) {\n    var value = arr[i];\n    if (Array.isArray(value)) {\n      flattenArray(value, result);\n    } else {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nvar rgbRegex = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g;\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = rgbRegex.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nvar hexToRgbaHexRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nvar hexToRgbaRgbRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\nfunction hexToRgba(hexValue) {\n  var hex = hexValue.replace(hexToRgbaHexRegex, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = hexToRgbaRgbRegex.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nvar hslToRgbaHsl1Regex = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\nvar hslToRgbaHsl2Regex = /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g;\n\nfunction hslToRgba(hslValue) {\n  var hsl = hslToRgbaHsl1Regex.exec(hslValue) || hslToRgbaHsl2Regex.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nvar unitRegex = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;\n\nfunction getUnit(val) {\n  var split = unitRegex.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nvar transformRegex = /(\\w+)\\(([^)]*)\\)/g;\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var transforms = new Map();\n  var m; while (m = transformRegex.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nvar operatorRegex = /^(\\*=|\\+=|-=)/;\n\nfunction getRelativeValue(to, from) {\n  var operator = operatorRegex.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nvar whitespaceRegex = /\\s/g;\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !whitespaceRegex.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')},\n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nvar valueRegex = /-?\\d*\\.?\\d+/g;\n\nfunction decomposeValue(val, unit) {\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(valueRegex) ? value.match(valueRegex).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(valueRegex) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nvar springRegex = /^spring/;\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (springRegex.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n\n  for (var i = 0, len = animatables.length; i < len; i++) {\n    var animatable = animatables[i];\n\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  }\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() {\n    raf = requestAnimationFrame(step);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(t);\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = cancelAnimationFrame(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    for (var i = 0, len = activeInstances.length; i < len; i++) {\n      activeInstance[i].pause();\n    }\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    for (var i$1 = 0, len$1 = pausedInstances.length; i$1 < len$1; i$1++) {\n      pausedInstances[i$1].play();\n    }\n  }\n}\n\ndocument.addEventListener('visibilitychange', handleVisibilityChange);\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise() {\n    return window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n  }\n\n  var promise = makePromise();\n\n  var instance = createNewInstance(params);\n\n  function toggleInstanceDirection() {\n    instance.reversed = !instance.reversed;\n    for (var i = 0, len = children.length; i < len; i++) {\n      children[i].reversed = instance.reversed;\n    }\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if ('Promise' in window) {\n            resolve();\n            promise = makePromise();\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.finished = promise;\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.0';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_three__;","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tColorManagement,\n\tFileLoader,\n\tLoader,\n\tLinearSRGBColorSpace,\n\tSRGBColorSpace\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\n/**\n * A loader for the Draco format.\n *\n * [Draco]{@link https://google.github.io/draco/} is an open source library for compressing\n * and decompressing 3D meshes and point clouds. Compressed geometry can be significantly smaller,\n * at the cost of additional decoding time on the client device.\n *\n * Standalone Draco files have a `.drc` extension, and contain vertex positions, normals, colors,\n * and other attributes. Draco files do not contain materials, textures, animation, or node hierarchies \n * to use these features, embed Draco geometry inside of a glTF file. A normal glTF file can be converted\n * to a Draco-compressed glTF file using [glTF-Pipeline]{@link https://github.com/CesiumGS/gltf-pipeline}.\n * When using Draco with glTF, an instance of `DRACOLoader` will be used internally by {@link GLTFLoader}.\n *\n * It is recommended to create one DRACOLoader instance and reuse it to avoid loading and creating\n * multiple decoder instances.\n *\n * `DRACOLoader` will automatically use either the JS or the WASM decoding library, based on\n * browser capabilities.\n *\n * ```js\n * const loader = new DRACOLoader();\n * loader.setDecoderPath( '/examples/jsm/libs/draco/' );\n *\n * const geometry = await dracoLoader.loadAsync( 'models/draco/bunny.drc' );\n * geometry.computeVertexNormals(); // optional\n *\n * dracoLoader.dispose();\n * ```\n *\n * @augments Loader\n * @three_import import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\n */\nclass DRACOLoader extends Loader {\n\n\t/**\n\t * Constructs a new Draco loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\t/**\n\t * Provides configuration for the decoder libraries. Configuration cannot be changed after decoding begins.\n\t *\n\t * @param {string} path - The decoder path.\n\t * @return {DRACOLoader} A reference to this loader.\n\t */\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Provides configuration for the decoder libraries. Configuration cannot be changed after decoding begins.\n\t *\n\t * @param {{type:('js'|'wasm')}} config - The decoder config.\n\t * @return {DRACOLoader} A reference to this loader.\n\t */\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the maximum number of Web Workers to be used during decoding.\n\t * A lower limit may be preferable if workers are also for other tasks in the application.\n\t *\n\t * @param {number} workerLimit - The worker limit.\n\t * @return {DRACOLoader} A reference to this loader.\n\t */\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded Draco asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(BufferGeometry)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Parses the given Draco data.\n\t *\n\t * @param {ArrayBuffer} buffer - The raw Draco data as an array buffer.\n\t * @param {function(BufferGeometry)} onLoad - Executed when the loading/parsing process has been finished.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tparse( buffer, onLoad, onError = ()=>{} ) {\n\n\t\tthis.decodeDracoFile( buffer, onLoad, null, null, SRGBColorSpace, onError ).catch( onError );\n\n\t}\n\n\t//\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes, vertexColorSpace = LinearSRGBColorSpace, onError = () => {} ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs,\n\t\t\tvertexColorSpace: vertexColorSpace,\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback ).catch( onError );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst result = geometryData.attributes[ i ];\n\t\t\tconst name = result.name;\n\t\t\tconst array = result.array;\n\t\t\tconst itemSize = result.itemSize;\n\n\t\t\tconst attribute = new BufferAttribute( array, itemSize );\n\n\t\t\tif ( name === 'color' ) {\n\n\t\t\t\tthis._assignVertexColorSpace( attribute, result.vertexColorSpace );\n\n\t\t\t\tattribute.normalized = ( array instanceof Float32Array ) === false;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( name, attribute );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_assignVertexColorSpace( attribute, inputColorSpace ) {\n\n\t\t// While .drc files do not specify colorspace, the only 'official' tooling\n\t\t// is PLY and OBJ converters, which use sRGB. We'll assume sRGB when a .drc\n\t\t// file is passed into .load() or .parse(). GLTFLoader uses internal APIs\n\t\t// to decode geometry, and vertex colors are already Linear-sRGB in there.\n\n\t\tif ( inputColorSpace !== SRGBColorSpace ) return;\n\n\t\tconst _color = new Color();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t_color.fromBufferAttribute( attribute, i );\n\t\t\tColorManagement.colorSpaceToWorking( _color, SRGBColorSpace );\n\t\t\tattribute.setXYZ( i, _color.r, _color.g, _color.b );\n\n\t\t}\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\tif ( this.workerSourceURL !== '' ) {\n\n\t\t\tURL.revokeObjectURL( this.workerSourceURL );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, new Int8Array( buffer ), taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, array, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( array );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeArrayToMesh( array, array.byteLength, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeArrayToPointCloud( array, array.byteLength, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tconst attributeResult = decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute );\n\n\t\t\tif ( attributeName === 'color' ) {\n\n\t\t\t\tattributeResult.vertexColorSpace = taskConfig.vertexColorSpace;\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( attributeResult );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tInstancedBufferAttribute,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tTrianglesDrawMode,\n\tVector3,\n} from 'three';\n\n/**\n * @module BufferGeometryUtils\n * @three_import import * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\n */\n\n/**\n * Computes vertex tangents using the MikkTSpace algorithm. MikkTSpace generates the same tangents consistently,\n * and is used in most modelling tools and normal map bakers. Use MikkTSpace for materials with normal maps,\n * because inconsistent tangents may lead to subtle visual issues in the normal map, particularly around mirrored\n * UV seams.\n *\n * In comparison to this method, {@link BufferGeometry#computeTangents} (a custom algorithm) generates tangents that\n * probably will not match the tangents in other software. The custom algorithm is sufficient for general use with a\n * custom material, and may be faster than MikkTSpace.\n *\n * Returns the original BufferGeometry. Indexed geometries will be de-indexed. Requires position, normal, and uv attributes.\n *\n * @param {BufferGeometry} geometry - The geometry to compute tangents for.\n * @param {Object} MikkTSpace - Instance of `examples/jsm/libs/mikktspace.module.js`, or `mikktspace` npm package.\n * Await `MikkTSpace.ready` before use.\n * @param {boolean} [negateSign=true] - Whether to negate the sign component (.w) of each tangent.\n * Required for normal map conventions in some formats, including glTF.\n * @return {BufferGeometry} The updated geometry.\n */\nfunction computeMikkTSpaceTangents( geometry, MikkTSpace, negateSign = true ) {\n\n\tif ( ! MikkTSpace || ! MikkTSpace.isReady ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Initialized MikkTSpace library required.' );\n\n\t}\n\n\tif ( ! geometry.hasAttribute( 'position' ) || ! geometry.hasAttribute( 'normal' ) || ! geometry.hasAttribute( 'uv' ) ) {\n\n\t\tthrow new Error( 'BufferGeometryUtils: Tangents require \"position\", \"normal\", and \"uv\" attributes.' );\n\n\t}\n\n\tfunction getAttributeArray( attribute ) {\n\n\t\tif ( attribute.normalized || attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst dstArray = new Float32Array( attribute.count * attribute.itemSize );\n\n\t\t\tfor ( let i = 0, j = 0; i < attribute.count; i ++ ) {\n\n\t\t\t\tdstArray[ j ++ ] = attribute.getX( i );\n\t\t\t\tdstArray[ j ++ ] = attribute.getY( i );\n\n\t\t\t\tif ( attribute.itemSize > 2 ) {\n\n\t\t\t\t\tdstArray[ j ++ ] = attribute.getZ( i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn dstArray;\n\n\t\t}\n\n\t\tif ( attribute.array instanceof Float32Array ) {\n\n\t\t\treturn attribute.array;\n\n\t\t}\n\n\t\treturn new Float32Array( attribute.array );\n\n\t}\n\n\t// MikkTSpace algorithm requires non-indexed input.\n\n\tconst _geometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\n\t// Compute vertex tangents.\n\n\tconst tangents = MikkTSpace.generateTangents(\n\n\t\tgetAttributeArray( _geometry.attributes.position ),\n\t\tgetAttributeArray( _geometry.attributes.normal ),\n\t\tgetAttributeArray( _geometry.attributes.uv )\n\n\t);\n\n\t// Texture coordinate convention of glTF differs from the apparent\n\t// default of the MikkTSpace library; .w component must be flipped.\n\n\tif ( negateSign ) {\n\n\t\tfor ( let i = 3; i < tangents.length; i += 4 ) {\n\n\t\t\ttangents[ i ] *= - 1;\n\n\t\t}\n\n\t}\n\n\t//\n\n\t_geometry.setAttribute( 'tangent', new BufferAttribute( tangents, 4 ) );\n\n\tif ( geometry !== _geometry ) {\n\n\t\tgeometry.copy( _geometry );\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * Merges a set of geometries into a single instance. All geometries must have compatible attributes.\n *\n * @param {Array<BufferGeometry>} geometries - The geometries to merge.\n * @param {boolean} [useGroups=false] - Whether to use groups or not.\n * @return {?BufferGeometry} The merged geometry. Returns `null` if the merge does not succeed.\n */\nfunction mergeGeometries( geometries, useGroups = false ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst morphAttributesUsed = new Set( Object.keys( geometries[ 0 ].morphAttributes ) );\n\n\tconst attributes = {};\n\tconst morphAttributes = {};\n\n\tconst morphTargetsRelative = geometries[ 0 ].morphTargetsRelative;\n\n\tconst mergedGeometry = new BufferGeometry();\n\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) attributes[ name ] = [];\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. Make sure all geometries have the same number of attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// gather morph attributes, exit early if they're different\n\n\t\tif ( morphTargetsRelative !== geometry.morphTargetsRelative ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. .morphTargetsRelative must be consistent throughout all geometries.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tif ( ! morphAttributesUsed.has( name ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '.  .morphAttributes must be consistent throughout all geometries.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( morphAttributes[ name ] === undefined ) morphAttributes[ name ] = [];\n\n\t\t\tmorphAttributes[ name ].push( geometry.morphAttributes[ name ] );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index ' + i + '. The geometry must have either an index or a position attribute' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.addGroup( offset, count, i );\n\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\n\tif ( isIndexed ) {\n\n\t\tlet indexOffset = 0;\n\t\tconst mergedIndex = [];\n\n\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\tconst index = geometries[ i ].index;\n\n\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\tmergedIndex.push( index.getX( j ) + indexOffset );\n\n\t\t\t}\n\n\t\t\tindexOffset += geometries[ i ].attributes.position.count;\n\n\t\t}\n\n\t\tmergedGeometry.setIndex( mergedIndex );\n\n\t}\n\n\t// merge attributes\n\n\tfor ( const name in attributes ) {\n\n\t\tconst mergedAttribute = mergeAttributes( attributes[ name ] );\n\n\t\tif ( ! mergedAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' attribute.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tmergedGeometry.setAttribute( name, mergedAttribute );\n\n\t}\n\n\t// merge morph attributes\n\n\tfor ( const name in morphAttributes ) {\n\n\t\tconst numMorphTargets = morphAttributes[ name ][ 0 ].length;\n\n\t\tif ( numMorphTargets === 0 ) break;\n\n\t\tmergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n\t\tmergedGeometry.morphAttributes[ name ] = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; ++ i ) {\n\n\t\t\tconst morphAttributesToMerge = [];\n\n\t\t\tfor ( let j = 0; j < morphAttributes[ name ].length; ++ j ) {\n\n\t\t\t\tmorphAttributesToMerge.push( morphAttributes[ name ][ j ][ i ] );\n\n\t\t\t}\n\n\t\t\tconst mergedMorphAttribute = mergeAttributes( morphAttributesToMerge );\n\n\t\t\tif ( ! mergedMorphAttribute ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the ' + name + ' morphAttribute.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tmergedGeometry.morphAttributes[ name ].push( mergedMorphAttribute );\n\n\t\t}\n\n\t}\n\n\treturn mergedGeometry;\n\n}\n\n/**\n * Merges a set of attributes into a single instance. All attributes must have compatible properties and types.\n * Instances of {@link InterleavedBufferAttribute} are not supported.\n *\n * @param {Array<BufferAttribute>} attributes - The attributes to merge.\n * @return {?BufferAttribute} The merged attribute. Returns `null` if the merge does not succeed.\n */\nfunction mergeAttributes( attributes ) {\n\n\tlet TypedArray;\n\tlet itemSize;\n\tlet normalized;\n\tlet gpuType = - 1;\n\tlet arrayLength = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( itemSize === undefined ) itemSize = attribute.itemSize;\n\t\tif ( itemSize !== attribute.itemSize ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( normalized === undefined ) normalized = attribute.normalized;\n\t\tif ( normalized !== attribute.normalized ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( gpuType === - 1 ) gpuType = attribute.gpuType;\n\t\tif ( gpuType !== attribute.gpuType ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.count * itemSize;\n\n\t}\n\n\tconst array = new TypedArray( arrayLength );\n\tconst result = new BufferAttribute( array, itemSize, normalized );\n\tlet offset = 0;\n\n\tfor ( let i = 0; i < attributes.length; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\tconst tupleOffset = offset / itemSize;\n\t\t\tfor ( let j = 0, l = attribute.count; j < l; j ++ ) {\n\n\t\t\t\tfor ( let c = 0; c < itemSize; c ++ ) {\n\n\t\t\t\t\tconst value = attribute.getComponent( j, c );\n\t\t\t\t\tresult.setComponent( j + tupleOffset, c, value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tarray.set( attribute.array, offset );\n\n\t\t}\n\n\t\toffset += attribute.count * itemSize;\n\n\t}\n\n\tif ( gpuType !== undefined ) {\n\n\t\tresult.gpuType = gpuType;\n\n\t}\n\n\treturn result;\n\n}\n\n/**\n * Performs a deep clone of the given buffer attribute.\n *\n * @param {BufferAttribute} attribute - The attribute to clone.\n * @return {BufferAttribute} The cloned attribute.\n */\nfunction deepCloneAttribute( attribute ) {\n\n\tif ( attribute.isInstancedInterleavedBufferAttribute || attribute.isInterleavedBufferAttribute ) {\n\n\t\treturn deinterleaveAttribute( attribute );\n\n\t}\n\n\tif ( attribute.isInstancedBufferAttribute ) {\n\n\t\treturn new InstancedBufferAttribute().copy( attribute );\n\n\t}\n\n\treturn new BufferAttribute().copy( attribute );\n\n}\n\n/**\n * Interleaves a set of attributes and returns a new array of corresponding attributes that share a\n * single {@link InterleavedBuffer} instance. All attributes must have compatible types.\n *\n * @param {Array<BufferAttribute>} attributes - The attributes to interleave.\n * @return {Array<InterleavedBufferAttribute>} An array of interleaved attributes. If interleave does not succeed, the method returns `null`.\n */\nfunction interleaveAttributes( attributes ) {\n\n\t// Interleaves the provided attributes into an InterleavedBuffer and returns\n\t// a set of InterleavedBufferAttributes for each attribute\n\tlet TypedArray;\n\tlet arrayLength = 0;\n\tlet stride = 0;\n\n\t// calculate the length and type of the interleavedBuffer\n\tfor ( let i = 0, l = attributes.length; i < l; ++ i ) {\n\n\t\tconst attribute = attributes[ i ];\n\n\t\tif ( TypedArray === undefined ) TypedArray = attribute.array.constructor;\n\t\tif ( TypedArray !== attribute.array.constructor ) {\n\n\t\t\tconsole.error( 'AttributeBuffers of different types cannot be interleaved' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tarrayLength += attribute.array.length;\n\t\tstride += attribute.itemSize;\n\n\t}\n\n\t// Create the set of buffer attributes\n\tconst interleavedBuffer = new InterleavedBuffer( new TypedArray( arrayLength ), stride );\n\tlet offset = 0;\n\tconst res = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\tfor ( let j = 0, l = attributes.length; j < l; j ++ ) {\n\n\t\tconst attribute = attributes[ j ];\n\t\tconst itemSize = attribute.itemSize;\n\t\tconst count = attribute.count;\n\t\tconst iba = new InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, attribute.normalized );\n\t\tres.push( iba );\n\n\t\toffset += itemSize;\n\n\t\t// Move the data for each attribute into the new interleavedBuffer\n\t\t// at the appropriate offset\n\t\tfor ( let c = 0; c < count; c ++ ) {\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\tiba[ setters[ k ] ]( c, attribute[ getters[ k ] ]( c ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n/**\n * Returns a new, non-interleaved version of the given attribute.\n *\n * @param {InterleavedBufferAttribute} attribute - The interleaved attribute.\n * @return {BufferAttribute} The non-interleaved attribute.\n */\nfunction deinterleaveAttribute( attribute ) {\n\n\tconst cons = attribute.data.array.constructor;\n\tconst count = attribute.count;\n\tconst itemSize = attribute.itemSize;\n\tconst normalized = attribute.normalized;\n\n\tconst array = new cons( count * itemSize );\n\tlet newAttribute;\n\tif ( attribute.isInstancedInterleavedBufferAttribute ) {\n\n\t\tnewAttribute = new InstancedBufferAttribute( array, itemSize, normalized, attribute.meshPerAttribute );\n\n\t} else {\n\n\t\tnewAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t}\n\n\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\tnewAttribute.setX( i, attribute.getX( i ) );\n\n\t\tif ( itemSize >= 2 ) {\n\n\t\t\tnewAttribute.setY( i, attribute.getY( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 3 ) {\n\n\t\t\tnewAttribute.setZ( i, attribute.getZ( i ) );\n\n\t\t}\n\n\t\tif ( itemSize >= 4 ) {\n\n\t\t\tnewAttribute.setW( i, attribute.getW( i ) );\n\n\t\t}\n\n\t}\n\n\treturn newAttribute;\n\n}\n\n/**\n * Deinterleaves all attributes on the given geometry.\n *\n * @param {BufferGeometry} geometry - The geometry to deinterleave.\n */\nfunction deinterleaveGeometry( geometry ) {\n\n\tconst attributes = geometry.attributes;\n\tconst morphTargets = geometry.morphTargets;\n\tconst attrMap = new Map();\n\n\tfor ( const key in attributes ) {\n\n\t\tconst attr = attributes[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tattributes[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n\tfor ( const key in morphTargets ) {\n\n\t\tconst attr = morphTargets[ key ];\n\t\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\t\tif ( ! attrMap.has( attr ) ) {\n\n\t\t\t\tattrMap.set( attr, deinterleaveAttribute( attr ) );\n\n\t\t\t}\n\n\t\t\tmorphTargets[ key ] = attrMap.get( attr );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Returns the amount of bytes used by all attributes to represent the geometry.\n *\n * @param {BufferGeometry} geometry - The geometry.\n * @return {number} The estimate bytes used.\n */\nfunction estimateBytesUsed( geometry ) {\n\n\t// Return the estimated memory used by this geometry in bytes\n\t// Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n\t// for InterleavedBufferAttributes.\n\tlet mem = 0;\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst attr = geometry.getAttribute( name );\n\t\tmem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n\n\t}\n\n\tconst indices = geometry.getIndex();\n\tmem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n\treturn mem;\n\n}\n\n/**\n * Returns a new geometry with vertices for which all similar vertex attributes (within tolerance) are merged.\n *\n * @param {BufferGeometry} geometry - The geometry to merge vertices for.\n * @param {number} [tolerance=1e-4] - The tolerance value.\n * @return {BufferGeometry} - The new geometry with merged vertices.\n */\nfunction mergeVertices( geometry, tolerance = 1e-4 ) {\n\n\ttolerance = Math.max( tolerance, Number.EPSILON );\n\n\t// Generate an index buffer if the geometry doesn't have one, or optimize it\n\t// if it's already available.\n\tconst hashToIndex = {};\n\tconst indices = geometry.getIndex();\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst vertexCount = indices ? indices.count : positions.count;\n\n\t// next value for triangle indices\n\tlet nextIndex = 0;\n\n\t// attributes and new attribute arrays\n\tconst attributeNames = Object.keys( geometry.attributes );\n\tconst tmpAttributes = {};\n\tconst tmpMorphAttributes = {};\n\tconst newIndices = [];\n\tconst getters = [ 'getX', 'getY', 'getZ', 'getW' ];\n\tconst setters = [ 'setX', 'setY', 'setZ', 'setW' ];\n\n\t// Initialize the arrays, allocating space conservatively. Extra\n\t// space will be trimmed in the last step.\n\tfor ( let i = 0, l = attributeNames.length; i < l; i ++ ) {\n\n\t\tconst name = attributeNames[ i ];\n\t\tconst attr = geometry.attributes[ name ];\n\n\t\ttmpAttributes[ name ] = new attr.constructor(\n\t\t\tnew attr.array.constructor( attr.count * attr.itemSize ),\n\t\t\tattr.itemSize,\n\t\t\tattr.normalized\n\t\t);\n\n\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\tif ( morphAttributes ) {\n\n\t\t\tif ( ! tmpMorphAttributes[ name ] ) tmpMorphAttributes[ name ] = [];\n\t\t\tmorphAttributes.forEach( ( morphAttr, i ) => {\n\n\t\t\t\tconst array = new morphAttr.array.constructor( morphAttr.count * morphAttr.itemSize );\n\t\t\t\ttmpMorphAttributes[ name ][ i ] = new morphAttr.constructor( array, morphAttr.itemSize, morphAttr.normalized );\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t// convert the error tolerance to an amount of decimal places to truncate to\n\tconst halfTolerance = tolerance * 0.5;\n\tconst exponent = Math.log10( 1 / tolerance );\n\tconst hashMultiplier = Math.pow( 10, exponent );\n\tconst hashAdditive = halfTolerance * hashMultiplier;\n\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\tconst index = indices ? indices.getX( i ) : i;\n\n\t\t// Generate a hash for the vertex attributes at the current index 'i'\n\t\tlet hash = '';\n\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\tconst name = attributeNames[ j ];\n\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t// double tilde truncates the decimal value\n\t\t\t\thash += `${ ~ ~ ( attribute[ getters[ k ] ]( index ) * hashMultiplier + hashAdditive ) },`;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add another reference to the vertex if it's already\n\t\t// used by another index\n\t\tif ( hash in hashToIndex ) {\n\n\t\t\tnewIndices.push( hashToIndex[ hash ] );\n\n\t\t} else {\n\n\t\t\t// copy data to the new index in the temporary attributes\n\t\t\tfor ( let j = 0, l = attributeNames.length; j < l; j ++ ) {\n\n\t\t\t\tconst name = attributeNames[ j ];\n\t\t\t\tconst attribute = geometry.getAttribute( name );\n\t\t\t\tconst morphAttributes = geometry.morphAttributes[ name ];\n\t\t\t\tconst itemSize = attribute.itemSize;\n\t\t\t\tconst newArray = tmpAttributes[ name ];\n\t\t\t\tconst newMorphArrays = tmpMorphAttributes[ name ];\n\n\t\t\t\tfor ( let k = 0; k < itemSize; k ++ ) {\n\n\t\t\t\t\tconst getterFunc = getters[ k ];\n\t\t\t\t\tconst setterFunc = setters[ k ];\n\t\t\t\t\tnewArray[ setterFunc ]( nextIndex, attribute[ getterFunc ]( index ) );\n\n\t\t\t\t\tif ( morphAttributes ) {\n\n\t\t\t\t\t\tfor ( let m = 0, ml = morphAttributes.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\t\tnewMorphArrays[ m ][ setterFunc ]( nextIndex, morphAttributes[ m ][ getterFunc ]( index ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\thashToIndex[ hash ] = nextIndex;\n\t\t\tnewIndices.push( nextIndex );\n\t\t\tnextIndex ++;\n\n\t\t}\n\n\t}\n\n\t// generate result BufferGeometry\n\tconst result = geometry.clone();\n\tfor ( const name in geometry.attributes ) {\n\n\t\tconst tmpAttribute = tmpAttributes[ name ];\n\n\t\tresult.setAttribute( name, new tmpAttribute.constructor(\n\t\t\ttmpAttribute.array.slice( 0, nextIndex * tmpAttribute.itemSize ),\n\t\t\ttmpAttribute.itemSize,\n\t\t\ttmpAttribute.normalized,\n\t\t) );\n\n\t\tif ( ! ( name in tmpMorphAttributes ) ) continue;\n\n\t\tfor ( let j = 0; j < tmpMorphAttributes[ name ].length; j ++ ) {\n\n\t\t\tconst tmpMorphAttribute = tmpMorphAttributes[ name ][ j ];\n\n\t\t\tresult.morphAttributes[ name ][ j ] = new tmpMorphAttribute.constructor(\n\t\t\t\ttmpMorphAttribute.array.slice( 0, nextIndex * tmpMorphAttribute.itemSize ),\n\t\t\t\ttmpMorphAttribute.itemSize,\n\t\t\t\ttmpMorphAttribute.normalized,\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tresult.setIndex( newIndices );\n\n\treturn result;\n\n}\n\n/**\n * Returns a new indexed geometry based on `TrianglesDrawMode` draw mode.\n * This mode corresponds to the `gl.TRIANGLES` primitive in WebGL.\n *\n * @param {BufferGeometry} geometry - The geometry to convert.\n * @param {number} drawMode - The current draw mode.\n * @return {BufferGeometry} The new geometry using `TrianglesDrawMode`.\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tif ( drawMode === TrianglesDrawMode ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.' );\n\t\treturn geometry;\n\n\t}\n\n\tif ( drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode ) {\n\n\t\tlet index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tconst indices = [];\n\n\t\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst numberOfTriangles = index.count - 2;\n\t\tconst newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tconst newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\t\tnewGeometry.clearGroups();\n\n\t\treturn newGeometry;\n\n\t} else {\n\n\t\tconsole.error( 'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode );\n\t\treturn geometry;\n\n\t}\n\n}\n\n/**\n * Calculates the morphed attributes of a morphed/skinned BufferGeometry.\n *\n * Helpful for Raytracing or Decals (i.e. a `DecalGeometry` applied to a morphed Object with a `BufferGeometry`\n * will use the original `BufferGeometry`, not the morphed/skinned one, generating an incorrect result.\n * Using this function to create a shadow `Object3`D the `DecalGeometry` can be correctly generated).\n *\n * @param {Mesh|Line|Points} object - The 3D object to compute morph attributes for.\n * @return {Object} An object with original position/normal attributes and morphed ones.\n */\nfunction computeMorphedAttributes( object ) {\n\n\tconst _vA = new Vector3();\n\tconst _vB = new Vector3();\n\tconst _vC = new Vector3();\n\n\tconst _tempA = new Vector3();\n\tconst _tempB = new Vector3();\n\tconst _tempC = new Vector3();\n\n\tconst _morphA = new Vector3();\n\tconst _morphB = new Vector3();\n\tconst _morphC = new Vector3();\n\n\tfunction _calculateMorphedAttributeData(\n\t\tobject,\n\t\tattribute,\n\t\tmorphAttribute,\n\t\tmorphTargetsRelative,\n\t\ta,\n\t\tb,\n\t\tc,\n\t\tmodifiedAttributeArray\n\t) {\n\n\t\t_vA.fromBufferAttribute( attribute, a );\n\t\t_vB.fromBufferAttribute( attribute, b );\n\t\t_vC.fromBufferAttribute( attribute, c );\n\n\t\tconst morphInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphAttribute && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\t\t\t_morphB.set( 0, 0, 0 );\n\t\t\t_morphC.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morph = morphAttribute[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morph, a );\n\t\t\t\t_tempB.fromBufferAttribute( morph, b );\n\t\t\t\t_tempC.fromBufferAttribute( morph, c );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_vA.add( _morphA );\n\t\t\t_vB.add( _morphB );\n\t\t\t_vC.add( _morphC );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tobject.applyBoneTransform( a, _vA );\n\t\t\tobject.applyBoneTransform( b, _vB );\n\t\t\tobject.applyBoneTransform( c, _vC );\n\n\t\t}\n\n\t\tmodifiedAttributeArray[ a * 3 + 0 ] = _vA.x;\n\t\tmodifiedAttributeArray[ a * 3 + 1 ] = _vA.y;\n\t\tmodifiedAttributeArray[ a * 3 + 2 ] = _vA.z;\n\t\tmodifiedAttributeArray[ b * 3 + 0 ] = _vB.x;\n\t\tmodifiedAttributeArray[ b * 3 + 1 ] = _vB.y;\n\t\tmodifiedAttributeArray[ b * 3 + 2 ] = _vB.z;\n\t\tmodifiedAttributeArray[ c * 3 + 0 ] = _vC.x;\n\t\tmodifiedAttributeArray[ c * 3 + 1 ] = _vC.y;\n\t\tmodifiedAttributeArray[ c * 3 + 2 ] = _vC.z;\n\n\t}\n\n\tconst geometry = object.geometry;\n\tconst material = object.material;\n\n\tlet a, b, c;\n\tconst index = geometry.index;\n\tconst positionAttribute = geometry.attributes.position;\n\tconst morphPosition = geometry.morphAttributes.position;\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\tconst normalAttribute = geometry.attributes.normal;\n\tconst morphNormal = geometry.morphAttributes.position;\n\n\tconst groups = geometry.groups;\n\tconst drawRange = geometry.drawRange;\n\tlet i, j, il, jl;\n\tlet group;\n\tlet start, end;\n\n\tconst modifiedPosition = new Float32Array( positionAttribute.count * positionAttribute.itemSize );\n\tconst modifiedNormal = new Float32Array( normalAttribute.count * normalAttribute.itemSize );\n\n\tif ( index !== null ) {\n\n\t\t// indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = index.getX( i );\n\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// non-indexed buffer geometry\n\n\t\tif ( Array.isArray( material ) ) {\n\n\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tgroup = groups[ i ];\n\n\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\ta = j;\n\t\t\t\t\tb = j + 1;\n\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tpositionAttribute,\n\t\t\t\t\t\tmorphPosition,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedPosition\n\t\t\t\t\t);\n\n\t\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\t\tobject,\n\t\t\t\t\t\tnormalAttribute,\n\t\t\t\t\t\tmorphNormal,\n\t\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\t\ta, b, c,\n\t\t\t\t\t\tmodifiedNormal\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\tend = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\ta = i;\n\t\t\t\tb = i + 1;\n\t\t\t\tc = i + 2;\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tpositionAttribute,\n\t\t\t\t\tmorphPosition,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedPosition\n\t\t\t\t);\n\n\t\t\t\t_calculateMorphedAttributeData(\n\t\t\t\t\tobject,\n\t\t\t\t\tnormalAttribute,\n\t\t\t\t\tmorphNormal,\n\t\t\t\t\tmorphTargetsRelative,\n\t\t\t\t\ta, b, c,\n\t\t\t\t\tmodifiedNormal\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tconst morphedPositionAttribute = new Float32BufferAttribute( modifiedPosition, 3 );\n\tconst morphedNormalAttribute = new Float32BufferAttribute( modifiedNormal, 3 );\n\n\treturn {\n\n\t\tpositionAttribute: positionAttribute,\n\t\tnormalAttribute: normalAttribute,\n\t\tmorphedPositionAttribute: morphedPositionAttribute,\n\t\tmorphedNormalAttribute: morphedNormalAttribute\n\n\t};\n\n}\n\n/**\n * Merges the {@link BufferGeometry#groups} for the given geometry.\n *\n * @param {BufferGeometry} geometry - The geometry to modify.\n * @return {BufferGeometry} - The updated geometry\n */\nfunction mergeGroups( geometry ) {\n\n\tif ( geometry.groups.length === 0 ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge.' );\n\t\treturn geometry;\n\n\t}\n\n\tlet groups = geometry.groups;\n\n\t// sort groups by material index\n\n\tgroups = groups.sort( ( a, b ) => {\n\n\t\tif ( a.materialIndex !== b.materialIndex ) return a.materialIndex - b.materialIndex;\n\n\t\treturn a.start - b.start;\n\n\t} );\n\n\t// create index for non-indexed geometries\n\n\tif ( geometry.getIndex() === null ) {\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\t\tconst indices = [];\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\tindices.push( i, i + 1, i + 2 );\n\n\t\t}\n\n\t\tgeometry.setIndex( indices );\n\n\t}\n\n\t// sort index\n\n\tconst index = geometry.getIndex();\n\n\tconst newIndices = [];\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tconst groupStart = group.start;\n\t\tconst groupLength = groupStart + group.count;\n\n\t\tfor ( let j = groupStart; j < groupLength; j ++ ) {\n\n\t\t\tnewIndices.push( index.getX( j ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dispose(); // Required to force buffer recreation\n\tgeometry.setIndex( newIndices );\n\n\t// update groups indices\n\n\tlet start = 0;\n\n\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tgroup.start = start;\n\t\tstart += group.count;\n\n\t}\n\n\t// merge groups\n\n\tlet currentGroup = groups[ 0 ];\n\n\tgeometry.groups = [ currentGroup ];\n\n\tfor ( let i = 1; i < groups.length; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\n\t\tif ( currentGroup.materialIndex === group.materialIndex ) {\n\n\t\t\tcurrentGroup.count += group.count;\n\n\t\t} else {\n\n\t\t\tcurrentGroup = group;\n\t\t\tgeometry.groups.push( currentGroup );\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n}\n\n/**\n * Modifies the supplied geometry if it is non-indexed, otherwise creates a new,\n * non-indexed geometry. Returns the geometry with smooth normals everywhere except\n * faces that meet at an angle greater than the crease angle.\n *\n * @param {BufferGeometry} geometry - The geometry to modify.\n * @param {number} [creaseAngle=Math.PI/3] - The crease angle in radians.\n * @return {BufferGeometry} - The updated geometry\n */\nfunction toCreasedNormals( geometry, creaseAngle = Math.PI / 3 /* 60 degrees */ ) {\n\n\tconst creaseDot = Math.cos( creaseAngle );\n\tconst hashMultiplier = ( 1 + 1e-10 ) * 1e2;\n\n\t// reusable vectors\n\tconst verts = [ new Vector3(), new Vector3(), new Vector3() ];\n\tconst tempVec1 = new Vector3();\n\tconst tempVec2 = new Vector3();\n\tconst tempNorm = new Vector3();\n\tconst tempNorm2 = new Vector3();\n\n\t// hashes a vector\n\tfunction hashVertex( v ) {\n\n\t\tconst x = ~ ~ ( v.x * hashMultiplier );\n\t\tconst y = ~ ~ ( v.y * hashMultiplier );\n\t\tconst z = ~ ~ ( v.z * hashMultiplier );\n\t\treturn `${x},${y},${z}`;\n\n\t}\n\n\t// BufferGeometry.toNonIndexed() warns if the geometry is non-indexed\n\t// and returns the original geometry\n\tconst resultGeometry = geometry.index ? geometry.toNonIndexed() : geometry;\n\tconst posAttr = resultGeometry.attributes.position;\n\tconst vertexMap = {};\n\n\t// find all the normals shared by commonly located vertices\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\t// add the normal to the map for all vertices\n\t\tconst normal = new Vector3().crossVectors( tempVec1, tempVec2 ).normalize();\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tif ( ! ( hash in vertexMap ) ) {\n\n\t\t\t\tvertexMap[ hash ] = [];\n\n\t\t\t}\n\n\t\t\tvertexMap[ hash ].push( normal );\n\n\t\t}\n\n\t}\n\n\t// average normals from all vertices that share a common location if they are within the\n\t// provided crease threshold\n\tconst normalArray = new Float32Array( posAttr.count * 3 );\n\tconst normAttr = new BufferAttribute( normalArray, 3, false );\n\tfor ( let i = 0, l = posAttr.count / 3; i < l; i ++ ) {\n\n\t\t// get the face normal for this vertex\n\t\tconst i3 = 3 * i;\n\t\tconst a = verts[ 0 ].fromBufferAttribute( posAttr, i3 + 0 );\n\t\tconst b = verts[ 1 ].fromBufferAttribute( posAttr, i3 + 1 );\n\t\tconst c = verts[ 2 ].fromBufferAttribute( posAttr, i3 + 2 );\n\n\t\ttempVec1.subVectors( c, b );\n\t\ttempVec2.subVectors( a, b );\n\n\t\ttempNorm.crossVectors( tempVec1, tempVec2 ).normalize();\n\n\t\t// average all normals that meet the threshold and set the normal value\n\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\tconst vert = verts[ n ];\n\t\t\tconst hash = hashVertex( vert );\n\t\t\tconst otherNormals = vertexMap[ hash ];\n\t\t\ttempNorm2.set( 0, 0, 0 );\n\n\t\t\tfor ( let k = 0, lk = otherNormals.length; k < lk; k ++ ) {\n\n\t\t\t\tconst otherNorm = otherNormals[ k ];\n\t\t\t\tif ( tempNorm.dot( otherNorm ) > creaseDot ) {\n\n\t\t\t\t\ttempNorm2.add( otherNorm );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttempNorm2.normalize();\n\t\t\tnormAttr.setXYZ( i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z );\n\n\t\t}\n\n\t}\n\n\tresultGeometry.setAttribute( 'normal', normAttr );\n\treturn resultGeometry;\n\n}\n\nexport {\n\tcomputeMikkTSpaceTangents,\n\tmergeGeometries,\n\tmergeAttributes,\n\tdeepCloneAttribute,\n\tdeinterleaveAttribute,\n\tdeinterleaveGeometry,\n\tinterleaveAttributes,\n\testimateBytesUsed,\n\tmergeVertices,\n\ttoTrianglesDrawMode,\n\tcomputeMorphedAttributes,\n\tmergeGroups,\n\ttoCreasedNormals\n};\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tColorManagement,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInstancedMesh,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tSRGBColorSpace,\n\tInstancedBufferAttribute\n} from 'three';\nimport { toTrianglesDrawMode } from '../utils/BufferGeometryUtils.js';\n\n/**\n * A loader for the glTF 2.0 format.\n *\n * [glTF]{@link https://www.khronos.org/gltf/} (GL Transmission Format) is an [open format specification]{@link https://github.com/KhronosGroup/glTF/tree/main/specification/2.0}\n * for efficient delivery and loading of 3D content. Assets may be provided either in JSON (.gltf) or binary (.glb)\n * format. External files store textures (.jpg, .png) and additional binary data (.bin). A glTF asset may deliver\n * one or more scenes, including meshes, materials, textures, skins, skeletons, morph targets, animations, lights,\n * and/or cameras.\n *\n * `GLTFLoader` uses {@link ImageBitmapLoader} whenever possible. Be advised that image bitmaps are not\n * automatically GC-collected when they are no longer referenced, and they require special handling during\n * the disposal process.\n *\n * `GLTFLoader` supports the following glTF 2.0 extensions:\n * - KHR_draco_mesh_compression\n * - KHR_materials_clearcoat\n * - KHR_materials_dispersion\n * - KHR_materials_ior\n * - KHR_materials_specular\n * - KHR_materials_transmission\n * - KHR_materials_iridescence\n * - KHR_materials_unlit\n * - KHR_materials_volume\n * - KHR_mesh_quantization\n * - KHR_lights_punctual\n * - KHR_texture_basisu\n * - KHR_texture_transform\n * - EXT_texture_webp\n * - EXT_meshopt_compression\n * - EXT_mesh_gpu_instancing\n *\n * The following glTF 2.0 extension is supported by an external user plugin:\n * - [KHR_materials_variants]{@link https://github.com/takahirox/three-gltf-extensions}\n * - [MSFT_texture_dds]{@link https://github.com/takahirox/three-gltf-extensions}\n *\n * ```js\n * const loader = new GLTFLoader();\n *\n * // Optional: Provide a DRACOLoader instance to decode compressed mesh data\n * const dracoLoader = new DRACOLoader();\n * dracoLoader.setDecoderPath( '/examples/jsm/libs/draco/' );\n * loader.setDRACOLoader( dracoLoader );\n *\n * const gltf = await loader.loadAsync( 'models/gltf/duck/duck.gltf' );\n * scene.add( gltf.scene );\n * ```\n *\n * @augments Loader\n * @three_import import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\n */\nclass GLTFLoader extends Loader {\n\n\t/**\n\t * Constructs a new glTF loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsDispersionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureAVIFExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsEmissiveStrengthExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIridescenceExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsAnisotropyExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsBumpExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshGpuInstancing( parser );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded glTF asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(GLTFLoader~LoadObject)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\t// If a base path is set, resources will be relative paths from that plus the relative path of the gltf file\n\t\t\t// Example  path = 'https://my-cnd-server.com/', url = 'assets/models/model.gltf'\n\t\t\t// resourcePath = 'https://my-cnd-server.com/assets/models/'\n\t\t\t// referenced resource 'model.bin' will be loaded from 'https://my-cnd-server.com/assets/models/model.bin'\n\t\t\t// referenced resource '../textures/texture.png' will be loaded from 'https://my-cnd-server.com/assets/textures/texture.png'\n\t\t\tconst relativeUrl = LoaderUtils.extractUrlBase( url );\n\t\t\tresourcePath = LoaderUtils.resolveURL( relativeUrl, this.path );\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\t/**\n\t * Sets the given Draco loader to this loader. Required for decoding assets\n\t * compressed with the `KHR_draco_mesh_compression` extension.\n\t *\n\t * @param {DRACOLoader} dracoLoader - The Draco loader to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the given KTX2 loader to this loader. Required for loading KTX2\n\t * compressed textures.\n\t *\n\t * @param {KTX2Loader} ktx2Loader - The KTX2 loader to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the given meshopt decoder. Required for decoding assets\n\t * compressed with the `EXT_meshopt_compression` extension.\n\t *\n\t * @param {Object} meshoptDecoder - The meshopt decoder to set.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Registers a plugin callback. This API is internally used to implement the various\n\t * glTF extensions but can also used by third-party code to add additional logic\n\t * to the loader.\n\t *\n\t * @param {function(parser:GLTFParser)} callback - The callback function to register.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Unregisters a plugin callback.\n\t *\n\t * @param {Function} callback - The callback function to unregister.\n\t * @return {GLTFLoader} A reference to this loader.\n\t */\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses the given FBX data and returns the resulting group.\n\t *\n\t * @param {string|ArrayBuffer} data - The raw glTF data.\n\t * @param {string} path - The URL base path.\n\t * @param {function(GLTFLoader~LoadObject)} onLoad - Executed when the loading process has been finished.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet json;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tjson = JSON.parse( data );\n\n\t\t} else if ( data instanceof ArrayBuffer ) {\n\n\t\t\tconst magic = textDecoder.decode( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tjson = JSON.parse( extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content );\n\n\t\t\t} else {\n\n\t\t\t\tjson = JSON.parse( textDecoder.decode( data ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tjson = data;\n\n\t\t}\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\n\t\t\tif ( ! plugin.name ) console.error( 'THREE.GLTFLoader: Invalid plugin found: missing name' );\n\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\t/**\n\t * Async version of {@link GLTFLoader#parse}.\n\t *\n\t * @async\n\t * @param {string|ArrayBuffer} data - The raw glTF data.\n\t * @param {string} path - The URL base path.\n\t * @return {Promise<GLTFLoader~LoadObject>} A Promise that resolves with the loaded glTF when the parsing has been finished.\n\t */\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_DISPERSION: 'KHR_materials_dispersion',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_IRIDESCENCE: 'KHR_materials_iridescence',\n\tKHR_MATERIALS_ANISOTROPY: 'KHR_materials_anisotropy',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tKHR_MATERIALS_EMISSIVE_STRENGTH: 'KHR_materials_emissive_strength',\n\tEXT_MATERIALS_BUMP: 'EXT_materials_bump',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_TEXTURE_AVIF: 'EXT_texture_avif',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\tEXT_MESH_GPU_INSTANCING: 'EXT_mesh_gpu_instancing'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n *\n * @private\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.setRGB( lightDef.color[ 0 ], lightDef.color[ 1 ], lightDef.color[ 2 ], LinearSRGBColorSpace );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tassignExtrasToUserData( lightNode, lightDef );\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tgetDependency( type, index ) {\n\n\t\tif ( type !== 'light' ) return;\n\n\t\treturn this._loadLight( index );\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n *\n * @private\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Emissive Strength Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/blob/5768b3ce0ef32bc39cdf1bef10b948586635ead3/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md\n *\n * @private\n */\nclass GLTFMaterialsEmissiveStrengthExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst emissiveStrength = materialDef.extensions[ this.name ].emissiveStrength;\n\n\t\tif ( emissiveStrength !== undefined ) {\n\n\t\t\tmaterialParams.emissiveIntensity = emissiveStrength;\n\n\t\t}\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n *\n * @private\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials dispersion Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_dispersion\n *\n * @private\n */\nclass GLTFMaterialsDispersionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_DISPERSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.dispersion = extension.dispersion !== undefined ? extension.dispersion : 0;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Iridescence Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_iridescence\n *\n * @private\n */\nclass GLTFMaterialsIridescenceExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.iridescenceFactor !== undefined ) {\n\n\t\t\tmaterialParams.iridescence = extension.iridescenceFactor;\n\n\t\t}\n\n\t\tif ( extension.iridescenceTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceMap', extension.iridescenceTexture ) );\n\n\t\t}\n\n\t\tif ( extension.iridescenceIor !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceIOR = extension.iridescenceIor;\n\n\t\t}\n\n\t\tif ( materialParams.iridescenceThicknessRange === undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange = [ 100, 400 ];\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMinimum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 0 ] = extension.iridescenceThicknessMinimum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessMaximum !== undefined ) {\n\n\t\t\tmaterialParams.iridescenceThicknessRange[ 1 ] = extension.iridescenceThicknessMaximum;\n\n\t\t}\n\n\t\tif ( extension.iridescenceThicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'iridescenceThicknessMap', extension.iridescenceThicknessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n *\n * @private\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tconst colorFactor = extension.sheenColorFactor;\n\t\t\tmaterialParams.sheenColor.setRGB( colorFactor[ 0 ], colorFactor[ 1 ], colorFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n *\n * @private\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n *\n * @private\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || Infinity;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n *\n * @private\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n *\n * @private\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color().setRGB( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ], LinearSRGBColorSpace );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n\n/**\n * Materials bump Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/EXT_materials_bump\n *\n * @private\n */\nclass GLTFMaterialsBumpExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_MATERIALS_BUMP;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.bumpScale = extension.bumpFactor !== undefined ? extension.bumpFactor : 1.0;\n\n\t\tif ( extension.bumpTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'bumpMap', extension.bumpTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials anisotropy Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_anisotropy\n *\n * @private\n */\nclass GLTFMaterialsAnisotropyExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.anisotropyStrength !== undefined ) {\n\n\t\t\tmaterialParams.anisotropy = extension.anisotropyStrength;\n\n\t\t}\n\n\t\tif ( extension.anisotropyRotation !== undefined ) {\n\n\t\t\tmaterialParams.anisotropyRotation = extension.anisotropyRotation;\n\n\t\t}\n\n\t\tif ( extension.anisotropyTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'anisotropyMap', extension.anisotropyTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n *\n * @private\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n *\n * @private\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * AVIF Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_avif\n *\n * @private\n */\nclass GLTFTextureAVIFExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_AVIF;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, extension.source, loader );\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n *\n * @private\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn buffer.then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst source = new Uint8Array( res, byteOffset, byteLength );\n\n\t\t\t\tif ( decoder.decodeGltfBufferAsync ) {\n\n\t\t\t\t\treturn decoder.decodeGltfBufferAsync( count, stride, source, extensionDef.mode, extensionDef.filter ).then( function ( res ) {\n\n\t\t\t\t\t\treturn res.buffer;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Support for MeshoptDecoder 0.18 or earlier, without decodeGltfBufferAsync\n\t\t\t\t\treturn decoder.ready.then( function () {\n\n\t\t\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * GPU Instancing Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_mesh_gpu_instancing\n *\n * @private\n */\nclass GLTFMeshGpuInstancing {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\n\t\tthis.parser = parser;\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( ! nodeDef.extensions || ! nodeDef.extensions[ this.name ] ||\n\t\t\tnodeDef.mesh === undefined ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst meshDef = json.meshes[ nodeDef.mesh ];\n\n\t\t// No Points or Lines + Instancing support yet\n\n\t\tfor ( const primitive of meshDef.primitives ) {\n\n\t\t\tif ( primitive.mode !== WEBGL_CONSTANTS.TRIANGLES &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP &&\n\t\t\t\t primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN &&\n\t\t\t\t primitive.mode !== undefined ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extensionDef = nodeDef.extensions[ this.name ];\n\t\tconst attributesDef = extensionDef.attributes;\n\n\t\t// @TODO: Can we support InstancedMesh + SkinnedMesh?\n\n\t\tconst pending = [];\n\t\tconst attributes = {};\n\n\t\tfor ( const key in attributesDef ) {\n\n\t\t\tpending.push( this.parser.getDependency( 'accessor', attributesDef[ key ] ).then( accessor => {\n\n\t\t\t\tattributes[ key ] = accessor;\n\t\t\t\treturn attributes[ key ];\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( pending.length < 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tpending.push( this.parser.createNodeMesh( nodeIndex ) );\n\n\t\treturn Promise.all( pending ).then( results => {\n\n\t\t\tconst nodeObject = results.pop();\n\t\t\tconst meshes = nodeObject.isGroup ? nodeObject.children : [ nodeObject ];\n\t\t\tconst count = results[ 0 ].count; // All attribute counts should be same\n\t\t\tconst instancedMeshes = [];\n\n\t\t\tfor ( const mesh of meshes ) {\n\n\t\t\t\t// Temporal variables\n\t\t\t\tconst m = new Matrix4();\n\t\t\t\tconst p = new Vector3();\n\t\t\t\tconst q = new Quaternion();\n\t\t\t\tconst s = new Vector3( 1, 1, 1 );\n\n\t\t\t\tconst instancedMesh = new InstancedMesh( mesh.geometry, mesh.material, count );\n\n\t\t\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\t\t\tif ( attributes.TRANSLATION ) {\n\n\t\t\t\t\t\tp.fromBufferAttribute( attributes.TRANSLATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.ROTATION ) {\n\n\t\t\t\t\t\tq.fromBufferAttribute( attributes.ROTATION, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.SCALE ) {\n\n\t\t\t\t\t\ts.fromBufferAttribute( attributes.SCALE, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tinstancedMesh.setMatrixAt( i, m.compose( p, q, s ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Add instance attributes to the geometry, excluding TRS.\n\t\t\t\tfor ( const attributeName in attributes ) {\n\n\t\t\t\t\tif ( attributeName === '_COLOR_0' ) {\n\n\t\t\t\t\t\tconst attr = attributes[ attributeName ];\n\t\t\t\t\t\tinstancedMesh.instanceColor = new InstancedBufferAttribute( attr.array, attr.itemSize, attr.normalized );\n\n\t\t\t\t\t} else if ( attributeName !== 'TRANSLATION' &&\n\t\t\t\t\t\t attributeName !== 'ROTATION' &&\n\t\t\t\t\t\t attributeName !== 'SCALE' ) {\n\n\t\t\t\t\t\tmesh.geometry.setAttribute( attributeName, attributes[ attributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Just in case\n\t\t\t\tObject3D.prototype.copy.call( instancedMesh, mesh );\n\n\t\t\t\tthis.parser.assignFinalMaterial( instancedMesh );\n\n\t\t\t\tinstancedMeshes.push( instancedMesh );\n\n\t\t\t}\n\n\t\t\tif ( nodeObject.isGroup ) {\n\n\t\t\t\tnodeObject.clear();\n\n\t\t\t\tnodeObject.add( ... instancedMeshes );\n\n\t\t\t\treturn nodeObject;\n\n\t\t\t}\n\n\t\t\treturn instancedMeshes[ 0 ];\n\n\t\t} );\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tconst textDecoder = new TextDecoder();\n\n\t\tthis.header = {\n\t\t\tmagic: textDecoder.decode( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = textDecoder.decode( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n *\n * @private\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType.name;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap, LinearSRGBColorSpace, reject );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n *\n * @private\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( ( transform.texCoord === undefined || transform.texCoord === texture.channel )\n\t\t\t&& transform.offset === undefined\n\t\t\t&& transform.rotation === undefined\n\t\t\t&& transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\ttexture.channel = transform.texCoord;\n\n\t\t}\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n *\n * @private\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer;\n\t\tconst values = this.sampleValues;\n\t\tconst stride = this.valueSize;\n\n\t\tconst stride2 = stride * 2;\n\t\tconst stride3 = stride * 3;\n\n\t\tconst td = t1 - t0;\n\n\t\tconst p = ( t - t0 ) / td;\n\t\tconst pp = p * p;\n\t\tconst ppp = pp * p;\n\n\t\tconst offset1 = i1 * stride3;\n\t\tconst offset0 = offset1 - stride3;\n\n\t\tconst s2 = - 2 * ppp + 3 * pp;\n\t\tconst s3 = ppp - pp;\n\t\tconst s0 = 1 - s2;\n\t\tconst s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nconst _quaternion = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_quaternion.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv1',\n\tTEXCOORD_2: 'uv2',\n\tTEXCOORD_3: 'uv3',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n *\n * @private\n * @param {Object<string, Material>} cache\n * @return {Material}\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n *\n * @private\n * @param {Object3D|Material|BufferGeometry|Object} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\tlet hasMorphColor = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\t\tif ( target.COLOR_0 !== undefined ) hasMorphColor = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal && hasMorphColor ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal && ! hasMorphColor ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\tconst pendingColorAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphColor ) {\n\n\t\t\tconst pendingAccessor = target.COLOR_0 !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.COLOR_0 )\n\t\t\t\t: geometry.attributes.color;\n\n\t\t\tpendingColorAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors ),\n\t\tPromise.all( pendingColorAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\t\tconst morphColors = accessors[ 2 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tif ( hasMorphColor ) geometry.morphAttributes.color = morphColors;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n *\n * @private\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tlet geometryKey;\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\tif ( primitiveDef.targets !== undefined ) {\n\n\t\tfor ( let i = 0, il = primitiveDef.targets.length; i < il; i ++ ) {\n\n\t\t\tgeometryKey += ':' + createAttributesKey( primitiveDef.targets[ i ] );\n\n\t\t}\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\nfunction getImageURIMimeType( uri ) {\n\n\tif ( uri.search( /\\.jpe?g($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/jpeg/ ) === 0 ) return 'image/jpeg';\n\tif ( uri.search( /\\.webp($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/webp/ ) === 0 ) return 'image/webp';\n\tif ( uri.search( /\\.ktx2($|\\?)/i ) > 0 || uri.search( /^data\\:image\\/ktx2/ ) === 0 ) return 'image/ktx2';\n\n\treturn 'image/png';\n\n}\n\nconst _identityMatrix = new Matrix4();\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Node cache\n\t\tthis.nodeCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.sourceCache = {};\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\n\t\tlet isSafari = false;\n\t\tlet safariVersion = - 1;\n\t\tlet isFirefox = false;\n\t\tlet firefoxVersion = - 1;\n\n\t\tif ( typeof navigator !== 'undefined' ) {\n\n\t\t\tconst userAgent = navigator.userAgent;\n\n\t\t\tisSafari = /^((?!chrome|android).)*safari/i.test( userAgent ) === true;\n\t\t\tconst safariMatch = userAgent.match( /Version\\/(\\d+)/ );\n\t\t\tsafariVersion = isSafari && safariMatch ? parseInt( safariMatch[ 1 ], 10 ) : - 1;\n\n\t\t\tisFirefox = userAgent.indexOf( 'Firefox' ) > - 1;\n\t\t\tfirefoxVersion = isFirefox ? userAgent.match( /Firefox\\/([0-9]+)\\./ )[ 1 ] : - 1;\n\n\t\t}\n\n\t\tif ( typeof createImageBitmap === 'undefined' || ( isSafari && safariVersion < 17 ) || ( isFirefox && firefoxVersion < 98 ) ) {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\t\tthis.nodeCache = {};\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\treturn Promise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tfor ( const scene of result.scenes ) {\n\n\t\t\t\t\tscene.updateMatrixWorld();\n\n\t\t\t\t}\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t *\n\t * @private\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t *\n\t * @private\n\t * @param {Object} cache\n\t * @param {Object3D} index\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/**\n\t * Returns a reference to a shared resource, cloning it if necessary.\n\t *\n\t * @private\n\t * @param {Object} cache\n\t * @param {number} index\n\t * @param {Object} object\n\t * @return {Object}\n\t */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t *\n\t * @private\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadNode && ext.loadNode( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadAnimation && ext.loadAnimation( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext != this && ext.getDependency && ext.getDependency( type, index );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! dependency ) {\n\n\t\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t *\n\t * @private\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t *\n\t * @private\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t *\n\t * @private\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t *\n\t * @private\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\t\t\tconst normalized = accessorDef.normalized === true;\n\n\t\t\tconst array = new TypedArray( accessorDef.count * itemSize );\n\t\t\treturn Promise.resolve( new BufferAttribute( array, itemSize, normalized ) );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\t// Ignore normalized since we copy from sparse\n\t\t\t\tbufferAttribute.normalized = false;\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute.normalized = normalized;\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t *\n\t * @private\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture|null>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceIndex = textureDef.source;\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( sourceDef.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( sourceDef.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, sourceIndex, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst cacheKey = ( sourceDef.uri || sourceDef.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst promise = this.loadImageSource( sourceIndex, loader ).then( function ( texture ) {\n\n\t\t\ttexture.flipY = false;\n\n\t\t\ttexture.name = textureDef.name || sourceDef.name || '';\n\n\t\t\tif ( texture.name === '' && typeof sourceDef.uri === 'string' && sourceDef.uri.startsWith( 'data:image/' ) === false ) {\n\n\t\t\t\ttexture.name = sourceDef.uri;\n\n\t\t\t}\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\t\t\ttexture.generateMipmaps = ! texture.isCompressedTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\tloadImageSource( sourceIndex, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( this.sourceCache[ sourceIndex ] !== undefined ) {\n\n\t\t\treturn this.sourceCache[ sourceIndex ].then( ( texture ) => texture.clone() );\n\n\t\t}\n\n\t\tconst sourceDef = json.images[ sourceIndex ];\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = sourceDef.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( sourceDef.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', sourceDef.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: sourceDef.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( sourceDef.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + sourceIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( texture, sourceDef );\n\n\t\t\ttexture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType( sourceDef.uri );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function ( error ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\tthrow error;\n\n\t\t} );\n\n\t\tthis.sourceCache[ sourceIndex ] = promise;\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t *\n\t * @private\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @param {string} [colorSpace]\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef, colorSpace ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture ) return null;\n\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord > 0 ) {\n\n\t\t\t\ttexture = texture.clone();\n\t\t\t\ttexture.channel = mapDef.texCoord;\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = colorSpace;\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t *\n\t * @private\n\t * @param {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\t\t\t\tlineMaterial.map = material.map;\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t *\n\t * @private\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.setRGB( array[ 0 ], array[ 1 ], array[ 2 ], LinearSRGBColorSpace );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture, SRGBColorSpace ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tconst emissiveFactor = materialDef.emissiveFactor;\n\t\t\tmaterialParams.emissive = new Color().setRGB( emissiveFactor[ 0 ], emissiveFactor[ 1 ], emissiveFactor[ 2 ], LinearSRGBColorSpace );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture, SRGBColorSpace ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tconst material = new materialType( materialParams );\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * When Object3D instances are targeted by animation, they need unique names.\n\t *\n\t * @private\n\t * @param {string} originalName\n\t * @return {string}\n\t */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tif ( sanitizedName in this.nodeNamesUsed ) {\n\n\t\t\treturn sanitizedName + '_' + ( ++ this.nodeNamesUsed[ sanitizedName ] );\n\n\t\t} else {\n\n\t\t\tthis.nodeNamesUsed[ sanitizedName ] = 0;\n\n\t\t\treturn sanitizedName;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @private\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t *\n\t * @private\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh|Line|Points>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\t// normalize skin weights to fix malformed assets (see #15319)\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, meshes[ 0 ], meshDef );\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tif ( meshDef.extensions ) addUnknownExtensionsToUserData( extensions, group, meshDef );\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t *\n\t * @private\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t *\n\t * @private\n\t * @param {number} skinIndex\n\t * @return {Promise<Skeleton>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = skinDef.joints.length; i < il; i ++ ) {\n\n\t\t\tpending.push( this._loadNodeShallow( skinDef.joints[ i ] ) );\n\n\t\t}\n\n\t\tif ( skinDef.inverseBindMatrices !== undefined ) {\n\n\t\t\tpending.push( this.getDependency( 'accessor', skinDef.inverseBindMatrices ) );\n\n\t\t} else {\n\n\t\t\tpending.push( null );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst inverseBindMatrices = results.pop();\n\t\t\tconst jointNodes = results;\n\n\t\t\t// Note that bones (joint nodes) may or may not be in the\n\t\t\t// scene graph at this time.\n\n\t\t\tconst bones = [];\n\t\t\tconst boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = jointNodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst jointNode = jointNodes[ i ];\n\n\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\tif ( inverseBindMatrices !== null ) {\n\n\t\t\t\t\t\tmat.fromArray( inverseBindMatrices.array, i * 16 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Skeleton( bones, boneInverses );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t *\n\t * @private\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\t\tconst animationName = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node;\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tif ( target.node === undefined ) continue;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tif ( node.updateMatrix ) {\n\n\t\t\t\t\tnode.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tconst createdTracks = parser._createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target );\n\n\t\t\t\tif ( createdTracks ) {\n\n\t\t\t\t\tfor ( let k = 0; k < createdTracks.length; k ++ ) {\n\n\t\t\t\t\t\ttracks.push( createdTracks[ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new AnimationClip( animationName, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t *\n\t * @private\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tconst nodePending = parser._loadNodeShallow( nodeIndex );\n\n\t\tconst childPending = [];\n\t\tconst childrenDef = nodeDef.children || [];\n\n\t\tfor ( let i = 0, il = childrenDef.length; i < il; i ++ ) {\n\n\t\t\tchildPending.push( parser.getDependency( 'node', childrenDef[ i ] ) );\n\n\t\t}\n\n\t\tconst skeletonPending = nodeDef.skin === undefined\n\t\t\t? Promise.resolve( null )\n\t\t\t: parser.getDependency( 'skin', nodeDef.skin );\n\n\t\treturn Promise.all( [\n\t\t\tnodePending,\n\t\t\tPromise.all( childPending ),\n\t\t\tskeletonPending\n\t\t] ).then( function ( results ) {\n\n\t\t\tconst node = results[ 0 ];\n\t\t\tconst children = results[ 1 ];\n\t\t\tconst skeleton = results[ 2 ];\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\t// This full traverse should be fine because\n\t\t\t\t// child glTF nodes have not been added to this node yet.\n\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\tif ( ! mesh.isSkinnedMesh ) return;\n\n\t\t\t\t\tmesh.bind( skeleton, _identityMatrix );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tnode.add( children[ i ] );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t// ._loadNodeShallow() parses a single node.\n\t// skin and child nodes are created and added in .loadNode() (no '_' prefix).\n\t_loadNodeShallow( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\t// This method is called from .loadNode() and .loadSkin().\n\t\t// Cache a node to avoid duplication.\n\n\t\tif ( this.nodeCache[ nodeIndex ] !== undefined ) {\n\n\t\t\treturn this.nodeCache[ nodeIndex ];\n\n\t\t}\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\tconst pending = [];\n\n\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t} );\n\n\t\tif ( meshPromise ) {\n\n\t\t\tpending.push( meshPromise );\n\n\t\t}\n\n\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t} ).forEach( function ( promise ) {\n\n\t\t\tpending.push( promise );\n\n\t\t} );\n\n\t\tthis.nodeCache[ nodeIndex ] = Promise.all( pending ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t} else if ( nodeDef.mesh !== undefined && parser.meshCache.refs[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\tconst mapping = parser.associations.get( node );\n\t\t\t\tparser.associations.set( node, { ...mapping } );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t\treturn this.nodeCache[ nodeIndex ];\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t *\n\t * @private\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( parser.getDependency( 'node', nodeIds[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function ( nodes ) {\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tscene.add( nodes[ i ] );\n\n\t\t\t}\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n\t_createAnimationTracks( node, inputAccessor, outputAccessor, sampler, target ) {\n\n\t\tconst tracks = [];\n\n\t\tconst targetName = node.name ? node.name : node.uuid;\n\t\tconst targetNames = [];\n\n\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\ttargetNames.push( targetName );\n\n\t\t}\n\n\t\tlet TypedKeyframeTrack;\n\n\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tcase PATH_PROPERTIES.translation:\n\t\t\tcase PATH_PROPERTIES.scale:\n\n\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tswitch ( outputAccessor.itemSize ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\n\t\tconst outputArray = this._getArrayFromAccessor( outputAccessor );\n\n\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\tinputAccessor.array,\n\t\t\t\toutputArray,\n\t\t\t\tinterpolation\n\t\t\t);\n\n\t\t\t// Override interpolation with custom factory method.\n\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\tthis._createCubicSplineTrackInterpolant( track );\n\n\t\t\t}\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\t_getArrayFromAccessor( accessor ) {\n\n\t\tlet outputArray = accessor.array;\n\n\t\tif ( accessor.normalized ) {\n\n\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t}\n\n\t\t\toutputArray = scaled;\n\n\t\t}\n\n\t\treturn outputArray;\n\n\t}\n\n\t_createCubicSplineTrackInterpolant( track ) {\n\n\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t};\n\n\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t}\n\n}\n\n/**\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n *\n * @private\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tif ( ColorManagement.workingColorSpace !== LinearSRGBColorSpace && 'COLOR_0' in attributes ) {\n\n\t\tconsole.warn( `THREE.GLTFLoader: Converting vertex colors from \"srgb-linear\" to \"${ColorManagement.workingColorSpace}\" not supported.` );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * Loader result of `GLTFLoader`.\n *\n * @typedef {Object} GLTFLoader~LoadObject\n * @property {Array<AnimationClip>} animations - An array of animation clips.\n * @property {Object} asset - Meta data about the loaded asset.\n * @property {Array<Camera>} cameras - An array of cameras.\n * @property {GLTFParser} parser - A reference to the internal parser.\n * @property {Group} scene - The default scene.\n * @property {Array<Group>} scenes - glTF assets might define multiple scenes.\n * @property {Object} userData - Additional data.\n **/\n\nexport { GLTFLoader };\n","/**\n * A simple pool for managing Web Workers.\n *\n * @three_import import { WorkerPool } from 'three/addons/utils/WorkerPool.js';\n */\nexport class WorkerPool {\n\n\t/**\n\t * Constructs a new Worker pool.\n\t *\n\t * @param {number} [pool=4] - The size of the pool.\n\t */\n\tconstructor( pool = 4 ) {\n\n\t\t/**\n\t\t * The size of the pool.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 4\n\t\t */\n\t\tthis.pool = pool;\n\n\t\t/**\n\t\t * A message queue.\n\t\t *\n\t\t * @type {Array<Object>}\n\t\t */\n\t\tthis.queue = [];\n\n\t\t/**\n\t\t * An array of Workers.\n\t\t *\n\t\t * @type {Array<Worker>}\n\t\t */\n\t\tthis.workers = [];\n\n\t\t/**\n\t\t * An array with resolve functions for messages.\n\t\t *\n\t\t * @type {Array<Function>}\n\t\t */\n\t\tthis.workersResolve = [];\n\n\t\t/**\n\t\t * The current worker status.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.workerStatus = 0;\n\n\t\t/**\n\t\t * A factory function for creating workers.\n\t\t *\n\t\t * @type {?Function}\n\t\t */\n\t\tthis.workerCreator = null;\n\n\t}\n\n\t_initWorker( workerId ) {\n\n\t\tif ( ! this.workers[ workerId ] ) {\n\n\t\t\tconst worker = this.workerCreator();\n\t\t\tworker.addEventListener( 'message', this._onMessage.bind( this, workerId ) );\n\t\t\tthis.workers[ workerId ] = worker;\n\n\t\t}\n\n\t}\n\n\t_getIdleWorker() {\n\n\t\tfor ( let i = 0; i < this.pool; i ++ )\n\t\t\tif ( ! ( this.workerStatus & ( 1 << i ) ) ) return i;\n\n\t\treturn - 1;\n\n\t}\n\n\t_onMessage( workerId, msg ) {\n\n\t\tconst resolve = this.workersResolve[ workerId ];\n\t\tresolve && resolve( msg );\n\n\t\tif ( this.queue.length ) {\n\n\t\t\tconst { resolve, msg, transfer } = this.queue.shift();\n\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t} else {\n\n\t\t\tthis.workerStatus ^= 1 << workerId;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets a function that is responsible for creating Workers.\n\t *\n\t * @param {Function} workerCreator - The worker creator function.\n\t */\n\tsetWorkerCreator( workerCreator ) {\n\n\t\tthis.workerCreator = workerCreator;\n\n\t}\n\n\t/**\n\t * Sets the Worker limit\n\t *\n\t * @param {number} pool - The size of the pool.\n\t */\n\tsetWorkerLimit( pool ) {\n\n\t\tthis.pool = pool;\n\n\t}\n\n\t/**\n\t * Post a message to an idle Worker. If no Worker is available,\n\t * the message is pushed into a message queue for later processing.\n\t *\n\t * @param {Object} msg - The message.\n\t * @param {Array<ArrayBuffer>} transfer - An array with array buffers for data transfer.\n\t * @return {Promise} A Promise that resolves when the message has been processed.\n\t */\n\tpostMessage( msg, transfer ) {\n\n\t\treturn new Promise( ( resolve ) => {\n\n\t\t\tconst workerId = this._getIdleWorker();\n\n\t\t\tif ( workerId !== - 1 ) {\n\n\t\t\t\tthis._initWorker( workerId );\n\t\t\t\tthis.workerStatus |= 1 << workerId;\n\t\t\t\tthis.workersResolve[ workerId ] = resolve;\n\t\t\t\tthis.workers[ workerId ].postMessage( msg, transfer );\n\n\t\t\t} else {\n\n\t\t\t\tthis.queue.push( { resolve, msg, transfer } );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Terminates all Workers of this pool. Call this  method whenever this\n\t * Worker pool is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.workers.forEach( ( worker ) => worker.terminate() );\n\t\tthis.workersResolve.length = 0;\n\t\tthis.workers.length = 0;\n\t\tthis.queue.length = 0;\n\t\tthis.workerStatus = 0;\n\n\t}\n\n}\n","const t=0,e=1,n=2,i=3,s=0,a=0,r=2,o=0,l=1,f=160,h=161,U=162,c=163,_=166,p=0,g=1,y=0,x=1,u=2,b=3,d=4,w=5,m=6,D=7,B=8,L=9,v=10,A=11,k=12,V=13,I=14,S=15,F=16,O=17,E=18,T=0,C=1,M=2,P=3,z=4,W=5,H=6,N=7,K=8,X=9,R=10,Y=11,j=0,q=1,G=2,J=13,Q=14,Z=15,$=128,tt=64,et=32,nt=16,it=0,st=1,at=2,rt=3,ot=4,lt=5,ft=6,ht=7,Ut=8,ct=9,_t=10,pt=13,gt=14,yt=15,xt=16,ut=17,bt=20,dt=21,wt=22,mt=23,Dt=24,Bt=27,Lt=28,vt=29,At=30,kt=31,Vt=34,It=35,St=36,Ft=37,Ot=38,Et=41,Tt=42,Ct=43,Mt=44,Pt=45,zt=48,Wt=49,Ht=50,Nt=58,Kt=59,Xt=62,Rt=63,Yt=64,jt=65,qt=68,Gt=69,Jt=70,Qt=71,Zt=74,$t=75,te=76,ee=77,ne=78,ie=81,se=82,ae=83,re=84,oe=85,le=88,fe=89,he=90,Ue=91,ce=92,_e=95,pe=96,ge=97,ye=98,xe=99,ue=100,be=101,de=102,we=103,me=104,De=105,Be=106,Le=107,ve=108,Ae=109,ke=110,Ve=111,Ie=112,Se=113,Fe=114,Oe=115,Ee=116,Te=117,Ce=118,Me=119,Pe=120,ze=121,We=122,He=123,Ne=124,Ke=125,Xe=126,Re=127,Ye=128,je=129,qe=130,Ge=131,Je=132,Qe=133,Ze=134,$e=135,tn=136,en=137,nn=138,sn=139,an=140,rn=141,on=142,ln=143,fn=144,hn=145,Un=146,cn=147,_n=148,pn=149,gn=150,yn=151,xn=152,un=153,bn=154,dn=155,wn=156,mn=157,Dn=158,Bn=159,Ln=160,vn=161,An=162,kn=163,Vn=164,In=165,Sn=166,Fn=167,On=168,En=169,Tn=170,Cn=171,Mn=172,Pn=173,zn=174,Wn=175,Hn=176,Nn=177,Kn=178,Xn=179,Rn=180,Yn=181,jn=182,qn=183,Gn=184,Jn=1000156007,Qn=1000156008,Zn=1000156009,$n=1000156010,ti=1000156011,ei=1000156017,ni=1000156018,ii=1000156019,si=1000156020,ai=1000156021,ri=1000054e3,oi=1000054001,li=1000054002,fi=1000054003,hi=1000054004,Ui=1000054005,ci=1000054006,_i=1000054007,pi=1000066e3,gi=1000066001,yi=1000066002,xi=1000066003,ui=1000066004,bi=1000066005,di=1000066006,wi=1000066007,mi=1000066008,Di=1000066009,Bi=1000066010,Li=1000066011,vi=1000066012,Ai=1000066013,ki=100034e4,Vi=1000340001;class Ii{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Si{constructor(t,e,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e){void 0===e&&(e=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}const Fi=new Uint8Array([0]),Oi=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(t){return(new TextEncoder).encode(t)}function Ti(t){return(new TextDecoder).decode(t)}function Ci(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let i=0;for(const e of t)n.set(new Uint8Array(e),i),i+=e.byteLength;return n}function Mi(t,e){return void 0===e&&(e=4),Math.ceil(t/e)*e-t}function Pi(t){const e=new Uint8Array(t.buffer,t.byteOffset,Oi.length);if(e[0]!==Oi[0]||e[1]!==Oi[1]||e[2]!==Oi[2]||e[3]!==Oi[3]||e[4]!==Oi[4]||e[5]!==Oi[5]||e[6]!==Oi[6]||e[7]!==Oi[7]||e[8]!==Oi[8]||e[9]!==Oi[9]||e[10]!==Oi[10]||e[11]!==Oi[11])throw new Error(\"Missing KTX 2.0 identifier.\");const n=new Ii,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Si(t,Oi.length,i,!0);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),f=s._nextUint32(),h=s._nextUint64(),U=s._nextUint64(),c=new Si(t,Oi.length+i,3*a*8,!0);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+c._nextUint64(),c._nextUint64()),uncompressedByteLength:c._nextUint64()});const _=new Si(t,r,o,!0),p={vendorId:_._skip(4)._nextUint16(),descriptorType:_._nextUint16(),versionNumber:_._nextUint16(),descriptorBlockSize:_._nextUint16(),colorModel:_._nextUint8(),colorPrimaries:_._nextUint8(),transferFunction:_._nextUint8(),flags:_._nextUint8(),texelBlockDimension:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],bytesPlane:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:_._nextUint16(),bitLength:_._nextUint8(),channelType:_._nextUint8(),samplePosition:[_._nextUint8(),_._nextUint8(),_._nextUint8(),_._nextUint8()],sampleLower:-Infinity,sampleUpper:Infinity};64&e.channelType?(e.sampleLower=_._nextInt32(),e.sampleUpper=_._nextInt32()):(e.sampleLower=_._nextUint32(),e.sampleUpper=_._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const y=new Si(t,l,f,!0);for(;y._offset<f;){const t=y._nextUint32(),e=y._scan(t),i=Ti(e);if(n.keyValue[i]=y._nextUint8Array(t-e.byteLength-1),i.match(/^ktx/i)){const t=Ti(n.keyValue[i]);n.keyValue[i]=t.substring(0,t.lastIndexOf(\"\\0\"))}y._skip(t%4?4-t%4:0)}if(U<=0)return n;const x=new Si(t,h,U,!0),u=x._nextUint16(),b=x._nextUint16(),d=x._nextUint32(),w=x._nextUint32(),m=x._nextUint32(),D=x._nextUint32(),B=[];for(let t=0;t<a;t++)B.push({imageFlags:x._nextUint32(),rgbSliceByteOffset:x._nextUint32(),rgbSliceByteLength:x._nextUint32(),alphaSliceByteOffset:x._nextUint32(),alphaSliceByteLength:x._nextUint32()});const L=h+x._offset,v=L+d,A=v+w,k=A+m,V=new Uint8Array(t.buffer,t.byteOffset+L,d),I=new Uint8Array(t.buffer,t.byteOffset+v,w),S=new Uint8Array(t.buffer,t.byteOffset+A,m),F=new Uint8Array(t.buffer,t.byteOffset+k,D);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:B,endpointsData:V,selectorsData:I,tablesData:S,extendedData:F},n}const zi={keepWriter:!1};function Wi(t,e){void 0===e&&(e={}),e={...zi,...e};let n=new ArrayBuffer(0);if(t.globalData){const e=new ArrayBuffer(20+5*t.globalData.imageDescs.length*4),i=new DataView(e);i.setUint16(0,t.globalData.endpointCount,!0),i.setUint16(2,t.globalData.selectorCount,!0),i.setUint32(4,t.globalData.endpointsData.byteLength,!0),i.setUint32(8,t.globalData.selectorsData.byteLength,!0),i.setUint32(12,t.globalData.tablesData.byteLength,!0),i.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let e=0;e<t.globalData.imageDescs.length;e++){const n=t.globalData.imageDescs[e];i.setUint32(20+5*e*4+0,n.imageFlags,!0),i.setUint32(20+5*e*4+4,n.rgbSliceByteOffset,!0),i.setUint32(20+5*e*4+8,n.rgbSliceByteLength,!0),i.setUint32(20+5*e*4+12,n.alphaSliceByteOffset,!0),i.setUint32(20+5*e*4+16,n.alphaSliceByteLength,!0)}n=Ci([e,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}const i=[];let s=t.keyValue;e.keepWriter||(s={...t.keyValue,KTXwriter:\"KTX-Parse v0.7.1\"});for(const t in s){const e=s[t],n=Ei(t),a=\"string\"==typeof e?Ci([Ei(e),Fi]):e,r=n.byteLength+1+a.byteLength,o=Mi(r,4);i.push(Ci([new Uint32Array([r]),n,Fi,a,new Uint8Array(o).fill(0)]))}const a=Ci(i);if(1!==t.dataFormatDescriptor.length||0!==t.dataFormatDescriptor[0].descriptorType)throw new Error(\"Only BASICFORMAT Data Format Descriptor output supported.\");const r=t.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*r.samples.length),l=new DataView(o),f=24+16*r.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,r.vendorId,!0),l.setUint16(6,r.descriptorType,!0),l.setUint16(8,r.versionNumber,!0),l.setUint16(10,f,!0),l.setUint8(12,r.colorModel),l.setUint8(13,r.colorPrimaries),l.setUint8(14,r.transferFunction),l.setUint8(15,r.flags),!Array.isArray(r.texelBlockDimension))throw new Error(\"texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.\");l.setUint8(16,r.texelBlockDimension[0]),l.setUint8(17,r.texelBlockDimension[1]),l.setUint8(18,r.texelBlockDimension[2]),l.setUint8(19,r.texelBlockDimension[3]);for(let t=0;t<8;t++)l.setUint8(20+t,r.bytesPlane[t]);for(let t=0;t<r.samples.length;t++){const e=r.samples[t],n=28+16*t;if(e.channelID)throw new Error(\"channelID has been renamed to channelType.\");l.setUint16(n+0,e.bitOffset,!0),l.setUint8(n+2,e.bitLength),l.setUint8(n+3,e.channelType),l.setUint8(n+4,e.samplePosition[0]),l.setUint8(n+5,e.samplePosition[1]),l.setUint8(n+6,e.samplePosition[2]),l.setUint8(n+7,e.samplePosition[3]),64&e.channelType?(l.setInt32(n+8,e.sampleLower,!0),l.setInt32(n+12,e.sampleUpper,!0)):(l.setUint32(n+8,e.sampleLower,!0),l.setUint32(n+12,e.sampleUpper,!0))}const h=Oi.length+68+3*t.levels.length*8,U=h+o.byteLength;let c=n.byteLength>0?U+a.byteLength:0;c%8&&(c+=8-c%8);const _=[],p=new DataView(new ArrayBuffer(3*t.levels.length*8)),g=new Uint32Array(t.levels.length);let y=0;0===t.supercompressionScheme&&(y=function(t,e){const n=Math.max(t,4),i=Math.min(t,4);let s=n;for(;s%i!=0;)s+=n;return s}(function(t){return t.levels[0].levelData.byteLength/function(t,e){let n=1;const i=[t.pixelWidth,t.pixelHeight,t.pixelDepth],s=function(t){const[e,n,i]=t.dataFormatDescriptor[0].texelBlockDimension;return[e+1,n+1,i+1]}(t);for(let t=0;t<3;t++)if(i[t]>0){const e=Math.ceil(Math.floor(i[t]*Math.pow(2,-0))/s[t]);n*=Math.max(1,e)}return t.layerCount>0&&(n*=t.layerCount),t.faceCount>0&&(n*=t.faceCount),n}(t)}(t)));let x=(c||U+a.byteLength)+n.byteLength;for(let e=t.levels.length-1;e>=0;e--){if(x%y){const t=Mi(x,y);_.push(new Uint8Array(t)),x+=t}const n=t.levels[e];_.push(n.levelData),g[e]=x,x+=n.levelData.byteLength}for(let e=0;e<t.levels.length;e++){const n=t.levels[e];p.setBigUint64(24*e+0,BigInt(g[e]),!0),p.setBigUint64(24*e+8,BigInt(n.levelData.byteLength),!0),p.setBigUint64(24*e+16,BigInt(n.uncompressedByteLength),!0)}const u=new ArrayBuffer(68),b=new DataView(u);return b.setUint32(0,t.vkFormat,!0),b.setUint32(4,t.typeSize,!0),b.setUint32(8,t.pixelWidth,!0),b.setUint32(12,t.pixelHeight,!0),b.setUint32(16,t.pixelDepth,!0),b.setUint32(20,t.layerCount,!0),b.setUint32(24,t.faceCount,!0),b.setUint32(28,t.levels.length,!0),b.setUint32(32,t.supercompressionScheme,!0),b.setUint32(36,h,!0),b.setUint32(40,o.byteLength,!0),b.setUint32(44,U,!0),b.setUint32(48,a.byteLength,!0),b.setBigUint64(52,BigInt(n.byteLength>0?c:0),!0),b.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(Ci([new Uint8Array(Oi).buffer,u,p.buffer,o,a,c>0?new ArrayBuffer(c-(U+a.byteLength)):new ArrayBuffer(0),n,..._]))}export{Z as KHR_DF_CHANNEL_RGBSDA_ALPHA,G as KHR_DF_CHANNEL_RGBSDA_BLUE,Q as KHR_DF_CHANNEL_RGBSDA_DEPTH,q as KHR_DF_CHANNEL_RGBSDA_GREEN,j as KHR_DF_CHANNEL_RGBSDA_RED,J as KHR_DF_CHANNEL_RGBSDA_STENCIL,g as KHR_DF_FLAG_ALPHA_PREMULTIPLIED,p as KHR_DF_FLAG_ALPHA_STRAIGHT,s as KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,U as KHR_DF_MODEL_ASTC,f as KHR_DF_MODEL_ETC1,c as KHR_DF_MODEL_ETC1S,h as KHR_DF_MODEL_ETC2,l as KHR_DF_MODEL_RGBSDA,_ as KHR_DF_MODEL_UASTC,o as KHR_DF_MODEL_UNSPECIFIED,H as KHR_DF_PRIMARIES_ACES,N as KHR_DF_PRIMARIES_ACESCC,Y as KHR_DF_PRIMARIES_ADOBERGB,z as KHR_DF_PRIMARIES_BT2020,M as KHR_DF_PRIMARIES_BT601_EBU,P as KHR_DF_PRIMARIES_BT601_SMPTE,C as KHR_DF_PRIMARIES_BT709,W as KHR_DF_PRIMARIES_CIEXYZ,R as KHR_DF_PRIMARIES_DISPLAYP3,K as KHR_DF_PRIMARIES_NTSC1953,X as KHR_DF_PRIMARIES_PAL525,T as KHR_DF_PRIMARIES_UNSPECIFIED,et as KHR_DF_SAMPLE_DATATYPE_EXPONENT,$ as KHR_DF_SAMPLE_DATATYPE_FLOAT,nt as KHR_DF_SAMPLE_DATATYPE_LINEAR,tt as KHR_DF_SAMPLE_DATATYPE_SIGNED,F as KHR_DF_TRANSFER_ACESCC,O as KHR_DF_TRANSFER_ACESCCT,E as KHR_DF_TRANSFER_ADOBERGB,D as KHR_DF_TRANSFER_BT1886,k as KHR_DF_TRANSFER_DCIP3,L as KHR_DF_TRANSFER_HLG_EOTF,B as KHR_DF_TRANSFER_HLG_OETF,b as KHR_DF_TRANSFER_ITU,x as KHR_DF_TRANSFER_LINEAR,d as KHR_DF_TRANSFER_NTSC,I as KHR_DF_TRANSFER_PAL625_EOTF,V as KHR_DF_TRANSFER_PAL_OETF,v as KHR_DF_TRANSFER_PQ_EOTF,A as KHR_DF_TRANSFER_PQ_OETF,w as KHR_DF_TRANSFER_SLOG,m as KHR_DF_TRANSFER_SLOG2,u as KHR_DF_TRANSFER_SRGB,S as KHR_DF_TRANSFER_ST240,y as KHR_DF_TRANSFER_UNSPECIFIED,a as KHR_DF_VENDORID_KHRONOS,r as KHR_DF_VERSION,e as KHR_SUPERCOMPRESSION_BASISLZ,t as KHR_SUPERCOMPRESSION_NONE,i as KHR_SUPERCOMPRESSION_ZLIB,n as KHR_SUPERCOMPRESSION_ZSTD,Ii as KTX2Container,Ut as VK_FORMAT_A1R5G5B5_UNORM_PACK16,Gt as VK_FORMAT_A2B10G10R10_SINT_PACK32,jt as VK_FORMAT_A2B10G10R10_SNORM_PACK32,qt as VK_FORMAT_A2B10G10R10_UINT_PACK32,Yt as VK_FORMAT_A2B10G10R10_UNORM_PACK32,Rt as VK_FORMAT_A2R10G10B10_SINT_PACK32,Kt as VK_FORMAT_A2R10G10B10_SNORM_PACK32,Xt as VK_FORMAT_A2R10G10B10_UINT_PACK32,Nt as VK_FORMAT_A2R10G10B10_UNORM_PACK32,Vi as VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT,ki as VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT,Li as VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT,Rn as VK_FORMAT_ASTC_10x10_SRGB_BLOCK,Xn as VK_FORMAT_ASTC_10x10_UNORM_BLOCK,mi as VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT,zn as VK_FORMAT_ASTC_10x5_SRGB_BLOCK,Pn as VK_FORMAT_ASTC_10x5_UNORM_BLOCK,Di as VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT,Hn as VK_FORMAT_ASTC_10x6_SRGB_BLOCK,Wn as VK_FORMAT_ASTC_10x6_UNORM_BLOCK,Bi as VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT,Kn as VK_FORMAT_ASTC_10x8_SRGB_BLOCK,Nn as VK_FORMAT_ASTC_10x8_UNORM_BLOCK,vi as VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT,jn as VK_FORMAT_ASTC_12x10_SRGB_BLOCK,Yn as VK_FORMAT_ASTC_12x10_UNORM_BLOCK,Ai as VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT,Gn as VK_FORMAT_ASTC_12x12_SRGB_BLOCK,qn as VK_FORMAT_ASTC_12x12_UNORM_BLOCK,pi as VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,Dn as VK_FORMAT_ASTC_4x4_SRGB_BLOCK,mn as VK_FORMAT_ASTC_4x4_UNORM_BLOCK,gi as VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT,Ln as VK_FORMAT_ASTC_5x4_SRGB_BLOCK,Bn as VK_FORMAT_ASTC_5x4_UNORM_BLOCK,yi as VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT,An as VK_FORMAT_ASTC_5x5_SRGB_BLOCK,vn as VK_FORMAT_ASTC_5x5_UNORM_BLOCK,xi as VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT,Vn as VK_FORMAT_ASTC_6x5_SRGB_BLOCK,kn as VK_FORMAT_ASTC_6x5_UNORM_BLOCK,ui as VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT,Sn as VK_FORMAT_ASTC_6x6_SRGB_BLOCK,In as VK_FORMAT_ASTC_6x6_UNORM_BLOCK,bi as VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT,On as VK_FORMAT_ASTC_8x5_SRGB_BLOCK,Fn as VK_FORMAT_ASTC_8x5_UNORM_BLOCK,di as VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT,Tn as VK_FORMAT_ASTC_8x6_SRGB_BLOCK,En as VK_FORMAT_ASTC_8x6_UNORM_BLOCK,wi as VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT,Mn as VK_FORMAT_ASTC_8x8_SRGB_BLOCK,Cn as VK_FORMAT_ASTC_8x8_UNORM_BLOCK,We as VK_FORMAT_B10G11R11_UFLOAT_PACK32,ti as VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16,ai as VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16,rt as VK_FORMAT_B4G4R4A4_UNORM_PACK16,ht as VK_FORMAT_B5G5R5A1_UNORM_PACK16,lt as VK_FORMAT_B5G6R5_UNORM_PACK16,Wt as VK_FORMAT_B8G8R8A8_SINT,Pt as VK_FORMAT_B8G8R8A8_SNORM,Ht as VK_FORMAT_B8G8R8A8_SRGB,zt as VK_FORMAT_B8G8R8A8_UINT,Mt as VK_FORMAT_B8G8R8A8_UNORM,It as VK_FORMAT_B8G8R8_SINT,kt as VK_FORMAT_B8G8R8_SNORM,St as VK_FORMAT_B8G8R8_SRGB,Vt as VK_FORMAT_B8G8R8_UINT,At as VK_FORMAT_B8G8R8_UNORM,Ze as VK_FORMAT_BC1_RGBA_SRGB_BLOCK,Qe as VK_FORMAT_BC1_RGBA_UNORM_BLOCK,Je as VK_FORMAT_BC1_RGB_SRGB_BLOCK,Ge as VK_FORMAT_BC1_RGB_UNORM_BLOCK,tn as VK_FORMAT_BC2_SRGB_BLOCK,$e as VK_FORMAT_BC2_UNORM_BLOCK,nn as VK_FORMAT_BC3_SRGB_BLOCK,en as VK_FORMAT_BC3_UNORM_BLOCK,an as VK_FORMAT_BC4_SNORM_BLOCK,sn as VK_FORMAT_BC4_UNORM_BLOCK,on as VK_FORMAT_BC5_SNORM_BLOCK,rn as VK_FORMAT_BC5_UNORM_BLOCK,fn as VK_FORMAT_BC6H_SFLOAT_BLOCK,ln as VK_FORMAT_BC6H_UFLOAT_BLOCK,Un as VK_FORMAT_BC7_SRGB_BLOCK,hn as VK_FORMAT_BC7_UNORM_BLOCK,Ne as VK_FORMAT_D16_UNORM,Ye as VK_FORMAT_D16_UNORM_S8_UINT,je as VK_FORMAT_D24_UNORM_S8_UINT,Xe as VK_FORMAT_D32_SFLOAT,qe as VK_FORMAT_D32_SFLOAT_S8_UINT,He as VK_FORMAT_E5B9G9R9_UFLOAT_PACK32,wn as VK_FORMAT_EAC_R11G11_SNORM_BLOCK,dn as VK_FORMAT_EAC_R11G11_UNORM_BLOCK,bn as VK_FORMAT_EAC_R11_SNORM_BLOCK,un as VK_FORMAT_EAC_R11_UNORM_BLOCK,gn as VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK,pn as VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK,xn as VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,yn as VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK,_n as VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,cn as VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK,$n as VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16,si as VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16,hi as VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG,ri as VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG,Ui as VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG,oi as VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG,ci as VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG,li as VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG,_i as VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG,fi as VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG,Zn as VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16,Qn as VK_FORMAT_R10X6G10X6_UNORM_2PACK16,Jn as VK_FORMAT_R10X6_UNORM_PACK16,ii as VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16,ni as VK_FORMAT_R12X4G12X4_UNORM_2PACK16,ei as VK_FORMAT_R12X4_UNORM_PACK16,ge as VK_FORMAT_R16G16B16A16_SFLOAT,pe as VK_FORMAT_R16G16B16A16_SINT,ce as VK_FORMAT_R16G16B16A16_SNORM,_e as VK_FORMAT_R16G16B16A16_UINT,Ue as VK_FORMAT_R16G16B16A16_UNORM,he as VK_FORMAT_R16G16B16_SFLOAT,fe as VK_FORMAT_R16G16B16_SINT,oe as VK_FORMAT_R16G16B16_SNORM,le as VK_FORMAT_R16G16B16_UINT,re as VK_FORMAT_R16G16B16_UNORM,ae as VK_FORMAT_R16G16_SFLOAT,se as VK_FORMAT_R16G16_SINT,ne as VK_FORMAT_R16G16_SNORM,ie as VK_FORMAT_R16G16_UINT,ee as VK_FORMAT_R16G16_UNORM,te as VK_FORMAT_R16_SFLOAT,$t as VK_FORMAT_R16_SINT,Qt as VK_FORMAT_R16_SNORM,Zt as VK_FORMAT_R16_UINT,Jt as VK_FORMAT_R16_UNORM,Ae as VK_FORMAT_R32G32B32A32_SFLOAT,ve as VK_FORMAT_R32G32B32A32_SINT,Le as VK_FORMAT_R32G32B32A32_UINT,Be as VK_FORMAT_R32G32B32_SFLOAT,De as VK_FORMAT_R32G32B32_SINT,me as VK_FORMAT_R32G32B32_UINT,we as VK_FORMAT_R32G32_SFLOAT,de as VK_FORMAT_R32G32_SINT,be as VK_FORMAT_R32G32_UINT,ue as VK_FORMAT_R32_SFLOAT,xe as VK_FORMAT_R32_SINT,ye as VK_FORMAT_R32_UINT,at as VK_FORMAT_R4G4B4A4_UNORM_PACK16,st as VK_FORMAT_R4G4_UNORM_PACK8,ft as VK_FORMAT_R5G5B5A1_UNORM_PACK16,ot as VK_FORMAT_R5G6B5_UNORM_PACK16,ze as VK_FORMAT_R64G64B64A64_SFLOAT,Pe as VK_FORMAT_R64G64B64A64_SINT,Me as VK_FORMAT_R64G64B64A64_UINT,Ce as VK_FORMAT_R64G64B64_SFLOAT,Te as VK_FORMAT_R64G64B64_SINT,Ee as VK_FORMAT_R64G64B64_UINT,Oe as VK_FORMAT_R64G64_SFLOAT,Fe as VK_FORMAT_R64G64_SINT,Se as VK_FORMAT_R64G64_UINT,Ie as VK_FORMAT_R64_SFLOAT,Ve as VK_FORMAT_R64_SINT,ke as VK_FORMAT_R64_UINT,Tt as VK_FORMAT_R8G8B8A8_SINT,Ot as VK_FORMAT_R8G8B8A8_SNORM,Ct as VK_FORMAT_R8G8B8A8_SRGB,Et as VK_FORMAT_R8G8B8A8_UINT,Ft as VK_FORMAT_R8G8B8A8_UNORM,Lt as VK_FORMAT_R8G8B8_SINT,Dt as VK_FORMAT_R8G8B8_SNORM,vt as VK_FORMAT_R8G8B8_SRGB,Bt as VK_FORMAT_R8G8B8_UINT,mt as VK_FORMAT_R8G8B8_UNORM,dt as VK_FORMAT_R8G8_SINT,ut as VK_FORMAT_R8G8_SNORM,wt as VK_FORMAT_R8G8_SRGB,bt as VK_FORMAT_R8G8_UINT,xt as VK_FORMAT_R8G8_UNORM,gt as VK_FORMAT_R8_SINT,_t as VK_FORMAT_R8_SNORM,yt as VK_FORMAT_R8_SRGB,pt as VK_FORMAT_R8_UINT,ct as VK_FORMAT_R8_UNORM,Re as VK_FORMAT_S8_UINT,it as VK_FORMAT_UNDEFINED,Ke as VK_FORMAT_X8_D24_UNORM_PACK32,Pi as read,Wi as write};\n","let A,I,B;const g={env:{emscripten_notify_memory_growth:function(A){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+C).then(A=>A.arrayBuffer()).then(A=>WebAssembly.instantiate(A,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,\"base64\"),g).then(this._init),A)}_init(A){I=A.instance,g.env.emscripten_notify_memory_growth(0)}decode(A,g=0){if(!I)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const Q=A.byteLength,C=I.exports.malloc(Q);B.set(A,C),g=g||Number(I.exports.ZSTD_findDecompressedSize(C,Q));const E=I.exports.malloc(g),i=I.exports.ZSTD_decompress(E,g,C,Q),D=B.slice(E,E+i);return I.exports.free(C),I.exports.free(E),D}}const C=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\";export{Q as ZSTDDecoder};\n","import {\n\tCompressedArrayTexture,\n\tCompressedCubeTexture,\n\tCompressedTexture,\n\tData3DTexture,\n\tDataTexture,\n\tFileLoader,\n\tFloatType,\n\tHalfFloatType,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearSRGBColorSpace,\n\tLoader,\n\tNoColorSpace,\n\tRGBAFormat,\n\tRGBA_ASTC_4x4_Format,\n\tRGBA_ASTC_6x6_Format,\n\tRGBA_BPTC_Format,\n\tRGBA_S3TC_DXT3_Format,\n\tRGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format,\n\tRGBA_S3TC_DXT5_Format,\n\tRGB_BPTC_UNSIGNED_Format,\n\tRGB_ETC1_Format,\n\tRGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format,\n\tRGB_S3TC_DXT1_Format,\n\tRGFormat,\n\tRedFormat,\n\tSRGBColorSpace,\n\tUnsignedByteType\n} from 'three';\nimport { WorkerPool } from '../utils/WorkerPool.js';\nimport {\n\tread,\n\tKHR_DF_FLAG_ALPHA_PREMULTIPLIED,\n\tKHR_DF_PRIMARIES_BT709,\n\tKHR_DF_PRIMARIES_DISPLAYP3,\n\tKHR_DF_PRIMARIES_UNSPECIFIED,\n\tKHR_DF_TRANSFER_SRGB,\n\tKHR_SUPERCOMPRESSION_NONE,\n\tKHR_SUPERCOMPRESSION_ZSTD,\n\tVK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,\n\tVK_FORMAT_ASTC_4x4_SRGB_BLOCK,\n\tVK_FORMAT_ASTC_4x4_UNORM_BLOCK,\n\tVK_FORMAT_ASTC_6x6_SRGB_BLOCK,\n\tVK_FORMAT_ASTC_6x6_UNORM_BLOCK,\n\tVK_FORMAT_BC1_RGBA_SRGB_BLOCK,\n\tVK_FORMAT_BC1_RGBA_UNORM_BLOCK,\n\tVK_FORMAT_BC1_RGB_SRGB_BLOCK,\n\tVK_FORMAT_BC1_RGB_UNORM_BLOCK,\n\tVK_FORMAT_BC3_SRGB_BLOCK,\n\tVK_FORMAT_BC3_UNORM_BLOCK,\n\tVK_FORMAT_BC5_SNORM_BLOCK,\n\tVK_FORMAT_BC5_UNORM_BLOCK,\n\tVK_FORMAT_BC7_SRGB_BLOCK,\n\tVK_FORMAT_BC7_UNORM_BLOCK,\n\tVK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,\n\tVK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,\n\tVK_FORMAT_R16G16B16A16_SFLOAT,\n\tVK_FORMAT_R16G16_SFLOAT,\n\tVK_FORMAT_R16_SFLOAT,\n\tVK_FORMAT_R32G32B32A32_SFLOAT,\n\tVK_FORMAT_R32G32_SFLOAT,\n\tVK_FORMAT_R32_SFLOAT,\n\tVK_FORMAT_R8G8B8A8_SRGB,\n\tVK_FORMAT_R8G8B8A8_UNORM,\n\tVK_FORMAT_R8G8_SRGB,\n\tVK_FORMAT_R8G8_UNORM,\n\tVK_FORMAT_R8_SRGB,\n\tVK_FORMAT_R8_UNORM,\n\tVK_FORMAT_UNDEFINED\n} from '../libs/ktx-parse.module.js';\nimport { ZSTDDecoder } from '../libs/zstddec.module.js';\nimport { DisplayP3ColorSpace, LinearDisplayP3ColorSpace } from '../math/ColorSpaces.js';\n\nconst _taskCache = new WeakMap();\n\nlet _activeLoaders = 0;\n\nlet _zstd;\n\n/**\n * A loader for KTX 2.0 GPU Texture containers.\n *\n * KTX 2.0 is a container format for various GPU texture formats. The loader supports Basis Universal GPU textures,\n * which can be quickly transcoded to a wide variety of GPU texture compression formats. While KTX 2.0 also allows\n * other hardware-specific formats, this loader does not yet parse them.\n *\n * This loader parses the KTX 2.0 container and transcodes to a supported GPU compressed texture format.\n * The required WASM transcoder and JS wrapper are available from the `examples/jsm/libs/basis` directory.\n *\n * This loader relies on Web Assembly which is not supported in older browsers.\n *\n * References:\n * - [KTX specification]{@link http://github.khronos.org/KTX-Specification/}\n * - [DFD]{@link https://www.khronos.org/registry/DataFormat/specs/1.3/dataformat.1.3.html#basicdescriptor}\n * - [BasisU HDR]{@link https://github.com/BinomialLLC/basis_universal/wiki/UASTC-HDR-Texture-Specification-v1.0}\n *\n * ```js\n * const loader = new KTX2Loader();\n * loader.setTranscoderPath( 'examples/jsm/libs/basis/' );\n * loader.detectSupport( renderer );\n * const texture = loader.loadAsync( 'diffuse.ktx2' );\n * ```\n *\n * @augments Loader\n * @three_import import { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\n */\nclass KTX2Loader extends Loader {\n\n\t/**\n\t * Constructs a new KTX2 loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.transcoderPath = '';\n\t\tthis.transcoderBinary = null;\n\t\tthis.transcoderPending = null;\n\n\t\tthis.workerPool = new WorkerPool();\n\t\tthis.workerSourceURL = '';\n\t\tthis.workerConfig = null;\n\n\t\tif ( typeof MSC_TRANSCODER !== 'undefined' ) {\n\n\t\t\tconsole.warn(\n\n\t\t\t\t'THREE.KTX2Loader: Please update to latest \"basis_transcoder\".'\n\t\t\t\t+ ' \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\n\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets the transcoder path.\n\t *\n\t * The WASM transcoder and JS wrapper are available from the `examples/jsm/libs/basis` directory.\n\t *\n\t * @param {string} path - The transcoder path to set.\n\t * @return {KTX2Loader} A reference to this loader.\n\t */\n\tsetTranscoderPath( path ) {\n\n\t\tthis.transcoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the maximum number of Web Workers to be allocated by this instance.\n\t *\n\t * @param {number} workerLimit - The worker limit.\n\t * @return {KTX2Loader} A reference to this loader.\n\t */\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerPool.setWorkerLimit( workerLimit );\n\n\t\treturn this;\n\n\t}\n\n\n\t/**\n\t * Async version of {@link KTX2Loader#detectSupport}.\n\t *\n\t * @async\n\t * @param {WebGPURenderer|WebGLRenderer} renderer - The renderer.\n\t * @return {Promise} A Promise that resolves when the support has been detected.\n\t */\n\tasync detectSupportAsync( renderer ) {\n\n\t\tthis.workerConfig = {\n\t\t\tastcSupported: await renderer.hasFeatureAsync( 'texture-compression-astc' ),\n\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\tetc1Supported: await renderer.hasFeatureAsync( 'texture-compression-etc1' ),\n\t\t\tetc2Supported: await renderer.hasFeatureAsync( 'texture-compression-etc2' ),\n\t\t\tdxtSupported: await renderer.hasFeatureAsync( 'texture-compression-bc' ),\n\t\t\tbptcSupported: await renderer.hasFeatureAsync( 'texture-compression-bptc' ),\n\t\t\tpvrtcSupported: await renderer.hasFeatureAsync( 'texture-compression-pvrtc' )\n\t\t};\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Detects hardware support for available compressed texture formats, to determine\n\t * the output format for the transcoder. Must be called before loading a texture.\n\t *\n\t * @param {WebGPURenderer|WebGLRenderer} renderer - The renderer.\n\t * @return {KTX2Loader} A reference to this loader.\n\t */\n\tdetectSupport( renderer ) {\n\n\t\tif ( renderer.isWebGPURenderer === true ) {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.hasFeature( 'texture-compression-astc' ),\n\t\t\t\tastcHDRSupported: false, // https://github.com/gpuweb/gpuweb/issues/3856\n\t\t\t\tetc1Supported: renderer.hasFeature( 'texture-compression-etc1' ),\n\t\t\t\tetc2Supported: renderer.hasFeature( 'texture-compression-etc2' ),\n\t\t\t\tdxtSupported: renderer.hasFeature( 'texture-compression-bc' ),\n\t\t\t\tbptcSupported: renderer.hasFeature( 'texture-compression-bptc' ),\n\t\t\t\tpvrtcSupported: renderer.hasFeature( 'texture-compression-pvrtc' )\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.workerConfig = {\n\t\t\t\tastcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' ),\n\t\t\t\tastcHDRSupported: renderer.extensions.has( 'WEBGL_compressed_texture_astc' )\n\t\t\t\t\t&& renderer.extensions.get( 'WEBGL_compressed_texture_astc' ).getSupportedProfiles().includes( 'hdr' ),\n\t\t\t\tetc1Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc1' ),\n\t\t\t\tetc2Supported: renderer.extensions.has( 'WEBGL_compressed_texture_etc' ),\n\t\t\t\tdxtSupported: renderer.extensions.has( 'WEBGL_compressed_texture_s3tc' ),\n\t\t\t\tbptcSupported: renderer.extensions.has( 'EXT_texture_compression_bptc' ),\n\t\t\t\tpvrtcSupported: renderer.extensions.has( 'WEBGL_compressed_texture_pvrtc' )\n\t\t\t\t\t|| renderer.extensions.has( 'WEBKIT_WEBGL_compressed_texture_pvrtc' )\n\t\t\t};\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// TODO: Make this method private\n\n\tinit() {\n\n\t\tif ( ! this.transcoderPending ) {\n\n\t\t\t// Load transcoder wrapper.\n\t\t\tconst jsLoader = new FileLoader( this.manager );\n\t\t\tjsLoader.setPath( this.transcoderPath );\n\t\t\tjsLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst jsContent = jsLoader.loadAsync( 'basis_transcoder.js' );\n\n\t\t\t// Load transcoder WASM binary.\n\t\t\tconst binaryLoader = new FileLoader( this.manager );\n\t\t\tbinaryLoader.setPath( this.transcoderPath );\n\t\t\tbinaryLoader.setResponseType( 'arraybuffer' );\n\t\t\tbinaryLoader.setWithCredentials( this.withCredentials );\n\t\t\tconst binaryContent = binaryLoader.loadAsync( 'basis_transcoder.wasm' );\n\n\t\t\tthis.transcoderPending = Promise.all( [ jsContent, binaryContent ] )\n\t\t\t\t.then( ( [ jsContent, binaryContent ] ) => {\n\n\t\t\t\t\tconst fn = KTX2Loader.BasisWorker.toString();\n\n\t\t\t\t\tconst body = [\n\t\t\t\t\t\t'/* constants */',\n\t\t\t\t\t\t'let _EngineFormat = ' + JSON.stringify( KTX2Loader.EngineFormat ),\n\t\t\t\t\t\t'let _EngineType = ' + JSON.stringify( KTX2Loader.EngineType ),\n\t\t\t\t\t\t'let _TranscoderFormat = ' + JSON.stringify( KTX2Loader.TranscoderFormat ),\n\t\t\t\t\t\t'let _BasisFormat = ' + JSON.stringify( KTX2Loader.BasisFormat ),\n\t\t\t\t\t\t'/* basis_transcoder.js */',\n\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t\t].join( '\\n' );\n\n\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\t\t\t\t\tthis.transcoderBinary = binaryContent;\n\n\t\t\t\t\tthis.workerPool.setWorkerCreator( () => {\n\n\t\t\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\t\t\t\t\t\tconst transcoderBinary = this.transcoderBinary.slice( 0 );\n\n\t\t\t\t\t\tworker.postMessage( { type: 'init', config: this.workerConfig, transcoderBinary }, [ transcoderBinary ] );\n\n\t\t\t\t\t\treturn worker;\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\tif ( _activeLoaders > 0 ) {\n\n\t\t\t\t// Each instance loads a transcoder and allocates workers, increasing network and memory cost.\n\n\t\t\t\tconsole.warn(\n\n\t\t\t\t\t'THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues.'\n\t\t\t\t\t+ ' Use a single KTX2Loader instance, or call .dispose() on old instances.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_activeLoaders ++;\n\n\t\t}\n\n\t\treturn this.transcoderPending;\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded KTX2 texture\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(CompressedTexture)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.parse( buffer, onLoad, onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Parses the given KTX2 data.\n\t *\n\t * @param {ArrayBuffer} buffer - The raw KTX2 data as an array buffer.\n\t * @param {function(CompressedTexture)} onLoad - Executed when the loading/parsing process has been finished.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t * @returns {Promise} A Promise that resolves when the parsing has been finished.\n\t */\n\tparse( buffer, onLoad, onError ) {\n\n\t\tif ( this.workerConfig === null ) {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.' );\n\n\t\t}\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\treturn cachedTask.promise.then( onLoad ).catch( onError );\n\n\t\t}\n\n\t\tthis._createTexture( buffer )\n\t\t\t.then( ( texture ) => onLoad ? onLoad( texture ) : null )\n\t\t\t.catch( onError );\n\n\t}\n\n\t_createTextureFrom( transcodeResult, container ) {\n\n\t\tconst { type: messageType, error, data: { faces, width, height, format, type, dfdFlags } } = transcodeResult;\n\n\t\tif ( messageType === 'error' ) return Promise.reject( error );\n\n\t\tlet texture;\n\n\t\tif ( container.faceCount === 6 ) {\n\n\t\t\ttexture = new CompressedCubeTexture( faces, format, type );\n\n\t\t} else {\n\n\t\t\tconst mipmaps = faces[ 0 ].mipmaps;\n\n\t\t\ttexture = container.layerCount > 1\n\t\t\t\t? new CompressedArrayTexture( mipmaps, width, height, container.layerCount, format, type )\n\t\t\t\t: new CompressedTexture( mipmaps, width, height, format, type );\n\n\t\t}\n\n\t\ttexture.minFilter = faces[ 0 ].mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\t\ttexture.generateMipmaps = false;\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.colorSpace = parseColorSpace( container );\n\t\ttexture.premultiplyAlpha = !! ( dfdFlags & KHR_DF_FLAG_ALPHA_PREMULTIPLIED );\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * @private\n\t * @param {ArrayBuffer} buffer\n\t * @param {?Object} config\n\t * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\n\t */\n\tasync _createTexture( buffer, config = {} ) {\n\n\t\tconst container = read( new Uint8Array( buffer ) );\n\n\t\t// Basis UASTC HDR is a subset of ASTC, which can be transcoded efficiently\n\t\t// to BC6H. To detect whether a KTX2 file uses Basis UASTC HDR, or default\n\t\t// ASTC, inspect the DFD color model.\n\t\t//\n\t\t// Source: https://github.com/BinomialLLC/basis_universal/issues/381\n\t\tconst isBasisHDR = container.vkFormat === VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT\n\t\t\t&& container.dataFormatDescriptor[ 0 ].colorModel === 0xA7;\n\n\t\t// If the device supports ASTC, Basis UASTC HDR requires no transcoder.\n\t\tconst needsTranscoder = container.vkFormat === VK_FORMAT_UNDEFINED\n\t\t\t|| isBasisHDR && ! this.workerConfig.astcHDRSupported;\n\n\t\tif ( ! needsTranscoder ) {\n\n\t\t\treturn createRawTexture( container );\n\n\t\t}\n\n\t\t//\n\t\tconst taskConfig = config;\n\t\tconst texturePending = this.init().then( () => {\n\n\t\t\treturn this.workerPool.postMessage( { type: 'transcode', buffer, taskConfig: taskConfig }, [ buffer ] );\n\n\t\t} ).then( ( e ) => this._createTextureFrom( e.data, container ) );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, { promise: texturePending } );\n\n\t\treturn texturePending;\n\n\t}\n\n\t/**\n\t * Frees internal resources. This method should be called\n\t * when the loader is no longer required.\n\t */\n\tdispose() {\n\n\t\tthis.workerPool.dispose();\n\t\tif ( this.workerSourceURL ) URL.revokeObjectURL( this.workerSourceURL );\n\n\t\t_activeLoaders --;\n\n\t}\n\n}\n\n\n/* CONSTANTS */\n\nKTX2Loader.BasisFormat = {\n\tETC1S: 0,\n\tUASTC: 1,\n\tUASTC_HDR: 2,\n};\n\n// Source: https://github.com/BinomialLLC/basis_universal/blob/master/webgl/texture_test/index.html\nKTX2Loader.TranscoderFormat = {\n\tETC1: 0,\n\tETC2: 1,\n\tBC1: 2,\n\tBC3: 3,\n\tBC4: 4,\n\tBC5: 5,\n\tBC7_M6_OPAQUE_ONLY: 6,\n\tBC7_M5: 7,\n\tPVRTC1_4_RGB: 8,\n\tPVRTC1_4_RGBA: 9,\n\tASTC_4x4: 10,\n\tATC_RGB: 11,\n\tATC_RGBA_INTERPOLATED_ALPHA: 12,\n\tRGBA32: 13,\n\tRGB565: 14,\n\tBGR565: 15,\n\tRGBA4444: 16,\n\tBC6H: 22,\n\tRGB_HALF: 24,\n\tRGBA_HALF: 25,\n};\n\nKTX2Loader.EngineFormat = {\n\tRGBAFormat: RGBAFormat,\n\tRGBA_ASTC_4x4_Format: RGBA_ASTC_4x4_Format,\n\tRGB_BPTC_UNSIGNED_Format: RGB_BPTC_UNSIGNED_Format,\n\tRGBA_BPTC_Format: RGBA_BPTC_Format,\n\tRGBA_ETC2_EAC_Format: RGBA_ETC2_EAC_Format,\n\tRGBA_PVRTC_4BPPV1_Format: RGBA_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT5_Format: RGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format: RGB_ETC1_Format,\n\tRGB_ETC2_Format: RGB_ETC2_Format,\n\tRGB_PVRTC_4BPPV1_Format: RGB_PVRTC_4BPPV1_Format,\n\tRGBA_S3TC_DXT1_Format: RGBA_S3TC_DXT1_Format,\n};\n\nKTX2Loader.EngineType = {\n\tUnsignedByteType: UnsignedByteType,\n\tHalfFloatType: HalfFloatType,\n\tFloatType: FloatType,\n};\n\n/* WEB WORKER */\n\nKTX2Loader.BasisWorker = function () {\n\n\tlet config;\n\tlet transcoderPending;\n\tlet BasisModule;\n\n\tconst EngineFormat = _EngineFormat; // eslint-disable-line no-undef\n\tconst EngineType = _EngineType; // eslint-disable-line no-undef\n\tconst TranscoderFormat = _TranscoderFormat; // eslint-disable-line no-undef\n\tconst BasisFormat = _BasisFormat; // eslint-disable-line no-undef\n\n\tself.addEventListener( 'message', function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tconfig = message.config;\n\t\t\t\tinit( message.transcoderBinary );\n\t\t\t\tbreak;\n\n\t\t\tcase 'transcode':\n\t\t\t\ttranscoderPending.then( () => {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst { faces, buffers, width, height, hasAlpha, format, type, dfdFlags } = transcode( message.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'transcode', id: message.id, data: { faces, width, height, hasAlpha, format, type, dfdFlags } }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} );\n\n\tfunction init( wasmBinary ) {\n\n\t\ttranscoderPending = new Promise( ( resolve ) => {\n\n\t\t\tBasisModule = { wasmBinary, onRuntimeInitialized: resolve };\n\t\t\tBASIS( BasisModule ); // eslint-disable-line no-undef\n\n\t\t} ).then( () => {\n\n\t\t\tBasisModule.initializeBasis();\n\n\t\t\tif ( BasisModule.KTX2File === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.KTX2Loader: Please update Basis Universal transcoder.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\tfunction transcode( buffer ) {\n\n\t\tconst ktx2File = new BasisModule.KTX2File( new Uint8Array( buffer ) );\n\n\t\tfunction cleanup() {\n\n\t\t\tktx2File.close();\n\t\t\tktx2File.delete();\n\n\t\t}\n\n\t\tif ( ! ktx2File.isValid() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file' );\n\n\t\t}\n\n\t\tlet basisFormat;\n\n\t\tif ( ktx2File.isUASTC() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC;\n\n\t\t} else if ( ktx2File.isETC1S() ) {\n\n\t\t\tbasisFormat = BasisFormat.ETC1S;\n\n\t\t} else if ( ktx2File.isHDR() ) {\n\n\t\t\tbasisFormat = BasisFormat.UASTC_HDR;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unknown Basis encoding' );\n\n\t\t}\n\n\t\tconst width = ktx2File.getWidth();\n\t\tconst height = ktx2File.getHeight();\n\t\tconst layerCount = ktx2File.getLayers() || 1;\n\t\tconst levelCount = ktx2File.getLevels();\n\t\tconst faceCount = ktx2File.getFaces();\n\t\tconst hasAlpha = ktx2File.getHasAlpha();\n\t\tconst dfdFlags = ktx2File.getDFDFlags();\n\n\t\tconst { transcoderFormat, engineFormat, engineType } = getTranscoderFormat( basisFormat, width, height, hasAlpha );\n\n\t\tif ( ! width || ! height || ! levelCount ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader:\tInvalid texture' );\n\n\t\t}\n\n\t\tif ( ! ktx2File.startTranscoding() ) {\n\n\t\t\tcleanup();\n\t\t\tthrow new Error( 'THREE.KTX2Loader: .startTranscoding failed' );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst buffers = [];\n\n\t\tfor ( let face = 0; face < faceCount; face ++ ) {\n\n\t\t\tconst mipmaps = [];\n\n\t\t\tfor ( let mip = 0; mip < levelCount; mip ++ ) {\n\n\t\t\t\tconst layerMips = [];\n\n\t\t\t\tlet mipWidth, mipHeight;\n\n\t\t\t\tfor ( let layer = 0; layer < layerCount; layer ++ ) {\n\n\t\t\t\t\tconst levelInfo = ktx2File.getImageLevelInfo( mip, layer, face );\n\n\t\t\t\t\tif ( face === 0 && mip === 0 && layer === 0 && ( levelInfo.origWidth % 4 !== 0 || levelInfo.origHeight % 4 !== 0 ) ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( levelCount > 1 ) {\n\n\t\t\t\t\t\tmipWidth = levelInfo.origWidth;\n\t\t\t\t\t\tmipHeight = levelInfo.origHeight;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Handles non-multiple-of-four dimensions in textures without mipmaps. Textures with\n\t\t\t\t\t\t// mipmaps must use multiple-of-four dimensions, for some texture formats and APIs.\n\t\t\t\t\t\t// See mrdoob/three.js#25908.\n\t\t\t\t\t\tmipWidth = levelInfo.width;\n\t\t\t\t\t\tmipHeight = levelInfo.height;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet dst = new Uint8Array( ktx2File.getImageTranscodedSizeInBytes( mip, layer, 0, transcoderFormat ) );\n\t\t\t\t\tconst status = ktx2File.transcodeImage( dst, mip, layer, face, transcoderFormat, 0, - 1, - 1 );\n\n\t\t\t\t\tif ( engineType === EngineType.HalfFloatType ) {\n\n\t\t\t\t\t\tdst = new Uint16Array( dst.buffer, dst.byteOffset, dst.byteLength / Uint16Array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! status ) {\n\n\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\tthrow new Error( 'THREE.KTX2Loader: .transcodeImage failed.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayerMips.push( dst );\n\n\t\t\t\t}\n\n\t\t\t\tconst mipData = concat( layerMips );\n\n\t\t\t\tmipmaps.push( { data: mipData, width: mipWidth, height: mipHeight } );\n\t\t\t\tbuffers.push( mipData.buffer );\n\n\t\t\t}\n\n\t\t\tfaces.push( { mipmaps, width, height, format: engineFormat, type: engineType } );\n\n\t\t}\n\n\t\tcleanup();\n\n\t\treturn { faces, buffers, width, height, hasAlpha, dfdFlags, format: engineFormat, type: engineType };\n\n\t}\n\n\t//\n\n\t// Optimal choice of a transcoder target format depends on the Basis format (ETC1S, UASTC, or\n\t// UASTC HDR), device capabilities, and texture dimensions. The list below ranks the formats\n\t// separately for each format. Currently, priority is assigned based on:\n\t//\n\t//   high quality > low quality > uncompressed\n\t//\n\t// Prioritization may be revisited, or exposed for configuration, in the future.\n\t//\n\t// Reference: https://github.com/KhronosGroup/3D-Formats-Guidelines/blob/main/KTXDeveloperGuide.md\n\tconst FORMAT_OPTIONS = [\n\t\t{\n\t\t\tif: 'astcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: Infinity,\n\t\t\tpriorityUASTC: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 3,\n\t\t\tpriorityUASTC: 2,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'dxtSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC1, TranscoderFormat.BC3 ],\n\t\t\tengineFormat: [ EngineFormat.RGBA_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 4,\n\t\t\tpriorityUASTC: 5,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc2Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1, TranscoderFormat.ETC2 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 1,\n\t\t\tpriorityUASTC: 3,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'etc1Supported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.ETC1 ],\n\t\t\tengineFormat: [ EngineFormat.RGB_ETC1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 2,\n\t\t\tpriorityUASTC: 4,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tif: 'pvrtcSupported',\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA ],\n\t\t\tengineFormat: [ EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format ],\n\t\t\tengineType: [ EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 5,\n\t\t\tpriorityUASTC: 6,\n\t\t\tneedsPowerOfTwo: true,\n\t\t},\n\t\t{\n\t\t\tif: 'bptcSupported',\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.BC6H ],\n\t\t\tengineFormat: [ EngineFormat.RGB_BPTC_UNSIGNED_Format ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 1,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\n\t\t// Uncompressed fallbacks.\n\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.ETC1S, BasisFormat.UASTC ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA32, TranscoderFormat.RGBA32 ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat, EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.UnsignedByteType, EngineType.UnsignedByteType ],\n\t\t\tpriorityETC1S: 100,\n\t\t\tpriorityUASTC: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t},\n\t\t{\n\t\t\tbasisFormat: [ BasisFormat.UASTC_HDR ],\n\t\t\ttranscoderFormat: [ TranscoderFormat.RGBA_HALF ],\n\t\t\tengineFormat: [ EngineFormat.RGBAFormat ],\n\t\t\tengineType: [ EngineType.HalfFloatType ],\n\t\t\tpriorityHDR: 100,\n\t\t\tneedsPowerOfTwo: false,\n\t\t}\n\t];\n\n\tconst OPTIONS = {\n\t\t// TODO: For ETC1S we intentionally sort by _UASTC_ priority, preserving\n\t\t// a historical accident shown to avoid performance pitfalls for Linux with\n\t\t// Firefox & AMD GPU (RadeonSI). Further work needed.\n\t\t// See https://github.com/mrdoob/three.js/pull/29730.\n\t\t[ BasisFormat.ETC1S ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.ETC1S ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC ) )\n\t\t\t.sort( ( a, b ) => a.priorityUASTC - b.priorityUASTC ),\n\n\t\t[ BasisFormat.UASTC_HDR ]: FORMAT_OPTIONS\n\t\t\t.filter( ( opt ) => opt.basisFormat.includes( BasisFormat.UASTC_HDR ) )\n\t\t\t.sort( ( a, b ) => a.priorityHDR - b.priorityHDR ),\n\t};\n\n\tfunction getTranscoderFormat( basisFormat, width, height, hasAlpha ) {\n\n\t\tconst options = OPTIONS[ basisFormat ];\n\n\t\tfor ( let i = 0; i < options.length; i ++ ) {\n\n\t\t\tconst opt = options[ i ];\n\n\t\t\tif ( opt.if && ! config[ opt.if ] ) continue;\n\t\t\tif ( ! opt.basisFormat.includes( basisFormat ) ) continue;\n\t\t\tif ( hasAlpha && opt.transcoderFormat.length < 2 ) continue;\n\t\t\tif ( opt.needsPowerOfTwo && ! ( isPowerOfTwo( width ) && isPowerOfTwo( height ) ) ) continue;\n\n\t\t\tconst transcoderFormat = opt.transcoderFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineFormat = opt.engineFormat[ hasAlpha ? 1 : 0 ];\n\t\t\tconst engineType = opt.engineType[ 0 ];\n\n\t\t\treturn { transcoderFormat, engineFormat, engineType };\n\n\t\t}\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Failed to identify transcoding target.' );\n\n\t}\n\n\tfunction isPowerOfTwo( value ) {\n\n\t\tif ( value <= 2 ) return true;\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t}\n\n\t/**\n\t * Concatenates N byte arrays.\n\t *\n\t * @param {Uint8Array[]} arrays\n\t * @return {Uint8Array}\n\t */\n\tfunction concat( arrays ) {\n\n\t\tif ( arrays.length === 1 ) return arrays[ 0 ];\n\n\t\tlet totalByteLength = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\ttotalByteLength += array.byteLength;\n\n\t\t}\n\n\t\tconst result = new Uint8Array( totalByteLength );\n\n\t\tlet byteOffset = 0;\n\n\t\tfor ( let i = 0; i < arrays.length; i ++ ) {\n\n\t\t\tconst array = arrays[ i ];\n\t\t\tresult.set( array, byteOffset );\n\n\t\t\tbyteOffset += array.byteLength;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n};\n\n// Parsing for non-Basis textures. These textures may have supercompression\n// like Zstd, but they do not require transcoding.\n\nconst UNCOMPRESSED_FORMATS = new Set( [ RGBAFormat, RGFormat, RedFormat ] );\n\nconst FORMAT_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: RGBAFormat,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: RGBAFormat,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: RGFormat,\n\t[ VK_FORMAT_R8G8_UNORM ]: RGFormat,\n\t[ VK_FORMAT_R8G8_SRGB ]: RGFormat,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R16_SFLOAT ]: RedFormat,\n\t[ VK_FORMAT_R8_SRGB ]: RedFormat,\n\t[ VK_FORMAT_R8_UNORM ]: RedFormat,\n\n\t[ VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK ]: RGB_ETC2_Format,\n\t[ VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK ]: RGBA_ETC2_EAC_Format,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: RGBA_ASTC_4x4_Format,\n\t[ VK_FORMAT_ASTC_4x4_SRGB_BLOCK ]: RGBA_ASTC_4x4_Format,\n\t[ VK_FORMAT_ASTC_4x4_UNORM_BLOCK ]: RGBA_ASTC_4x4_Format,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: RGBA_ASTC_6x6_Format,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: RGBA_ASTC_6x6_Format,\n\n\t[ VK_FORMAT_BC1_RGBA_UNORM_BLOCK ]: RGBA_S3TC_DXT1_Format,\n\t[ VK_FORMAT_BC1_RGBA_SRGB_BLOCK ]: RGBA_S3TC_DXT1_Format,\n\t[ VK_FORMAT_BC1_RGB_UNORM_BLOCK ]: RGB_S3TC_DXT1_Format,\n\t[ VK_FORMAT_BC1_RGB_SRGB_BLOCK ]: RGB_S3TC_DXT1_Format,\n\n\t[ VK_FORMAT_BC3_SRGB_BLOCK ]: RGBA_S3TC_DXT3_Format,\n\t[ VK_FORMAT_BC3_UNORM_BLOCK ]: RGBA_S3TC_DXT3_Format,\n\n\t[ VK_FORMAT_BC5_SNORM_BLOCK ]: RGBA_S3TC_DXT5_Format,\n\t[ VK_FORMAT_BC5_UNORM_BLOCK ]: RGBA_S3TC_DXT5_Format,\n\n\t[ VK_FORMAT_BC7_SRGB_BLOCK ]: RGBA_BPTC_Format,\n\t[ VK_FORMAT_BC7_UNORM_BLOCK ]: RGBA_BPTC_Format,\n\n};\n\nconst TYPE_MAP = {\n\n\t[ VK_FORMAT_R32G32B32A32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16B16A16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8B8A8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8B8A8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32G32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16G16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8G8_UNORM ]: UnsignedByteType,\n\t[ VK_FORMAT_R8G8_SRGB ]: UnsignedByteType,\n\n\t[ VK_FORMAT_R32_SFLOAT ]: FloatType,\n\t[ VK_FORMAT_R16_SFLOAT ]: HalfFloatType,\n\t[ VK_FORMAT_R8_SRGB ]: UnsignedByteType,\n\t[ VK_FORMAT_R8_UNORM ]: UnsignedByteType,\n\n\t[ VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK ]: UnsignedByteType,\n\t[ VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK ]: UnsignedByteType,\n\n\t[ VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT ]: HalfFloatType,\n\t[ VK_FORMAT_ASTC_6x6_SRGB_BLOCK ]: UnsignedByteType,\n\t[ VK_FORMAT_ASTC_6x6_UNORM_BLOCK ]: UnsignedByteType,\n\n};\n\nasync function createRawTexture( container ) {\n\n\tconst { vkFormat } = container;\n\n\tif ( FORMAT_MAP[ vkFormat ] === undefined ) {\n\n\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported vkFormat.' );\n\n\t}\n\n\t//\n\n\tlet zstd;\n\n\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\tif ( ! _zstd ) {\n\n\t\t\t_zstd = new Promise( async ( resolve ) => {\n\n\t\t\t\tconst zstd = new ZSTDDecoder();\n\t\t\t\tawait zstd.init();\n\t\t\t\tresolve( zstd );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tzstd = await _zstd;\n\n\t}\n\n\t//\n\n\tconst mipmaps = [];\n\n\n\tfor ( let levelIndex = 0; levelIndex < container.levels.length; levelIndex ++ ) {\n\n\t\tconst levelWidth = Math.max( 1, container.pixelWidth >> levelIndex );\n\t\tconst levelHeight = Math.max( 1, container.pixelHeight >> levelIndex );\n\t\tconst levelDepth = container.pixelDepth ? Math.max( 1, container.pixelDepth >> levelIndex ) : 0;\n\n\t\tconst level = container.levels[ levelIndex ];\n\n\t\tlet levelData;\n\n\t\tif ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE ) {\n\n\t\t\tlevelData = level.levelData;\n\n\t\t} else if ( container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD ) {\n\n\t\t\tlevelData = zstd.decode( level.levelData, level.uncompressedByteLength );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.KTX2Loader: Unsupported supercompressionScheme.' );\n\n\t\t}\n\n\t\tlet data;\n\n\t\tif ( TYPE_MAP[ vkFormat ] === FloatType ) {\n\n\t\t\tdata = new Float32Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Float32Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else if ( TYPE_MAP[ vkFormat ] === HalfFloatType ) {\n\n\t\t\tdata = new Uint16Array(\n\n\t\t\t\tlevelData.buffer,\n\t\t\t\tlevelData.byteOffset,\n\t\t\t\tlevelData.byteLength / Uint16Array.BYTES_PER_ELEMENT\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tdata = levelData;\n\n\t\t}\n\n\t\tmipmaps.push( {\n\n\t\t\tdata: data,\n\t\t\twidth: levelWidth,\n\t\t\theight: levelHeight,\n\t\t\tdepth: levelDepth,\n\n\t\t} );\n\n\t}\n\n\tlet texture;\n\n\tif ( UNCOMPRESSED_FORMATS.has( FORMAT_MAP[ vkFormat ] ) ) {\n\n\t\ttexture = container.pixelDepth === 0\n\t\t\t? new DataTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight )\n\t\t\t: new Data3DTexture( mipmaps[ 0 ].data, container.pixelWidth, container.pixelHeight, container.pixelDepth );\n\n\t} else {\n\n\t\tif ( container.pixelDepth > 0 ) throw new Error( 'THREE.KTX2Loader: Unsupported pixelDepth.' );\n\n\t\ttexture = new CompressedTexture( mipmaps, container.pixelWidth, container.pixelHeight );\n\n\t\ttexture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\n\t\ttexture.magFilter = LinearFilter;\n\n\t}\n\n\ttexture.mipmaps = mipmaps;\n\n\ttexture.type = TYPE_MAP[ vkFormat ];\n\ttexture.format = FORMAT_MAP[ vkFormat ];\n\ttexture.colorSpace = parseColorSpace( container );\n\ttexture.needsUpdate = true;\n\n\t//\n\n\treturn Promise.resolve( texture );\n\n}\n\nfunction parseColorSpace( container ) {\n\n\tconst dfd = container.dataFormatDescriptor[ 0 ];\n\n\tif ( dfd.colorPrimaries === KHR_DF_PRIMARIES_BT709 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_DISPLAYP3 ) {\n\n\t\treturn dfd.transferFunction === KHR_DF_TRANSFER_SRGB ? DisplayP3ColorSpace : LinearDisplayP3ColorSpace;\n\n\t} else if ( dfd.colorPrimaries === KHR_DF_PRIMARIES_UNSPECIFIED ) {\n\n\t\treturn NoColorSpace;\n\n\t} else {\n\n\t\tconsole.warn( `THREE.KTX2Loader: Unsupported color primaries, \"${ dfd.colorPrimaries }\"` );\n\t\treturn NoColorSpace;\n\n\t}\n\n}\n\nexport { KTX2Loader };\n","import { LinearTransfer, Matrix3, SRGBTransfer } from 'three';\n\n/** @module ColorSpaces */\n\n// Reference: http://www.russellcottrell.com/photo/matrixCalculator.htm\n\nconst P3_PRIMARIES = [ 0.680, 0.320, 0.265, 0.690, 0.150, 0.060 ];\nconst P3_LUMINANCE_COEFFICIENTS = [ 0.2289, 0.6917, 0.0793 ];\nconst REC2020_PRIMARIES = [ 0.708, 0.292, 0.170, 0.797, 0.131, 0.046 ];\nconst REC2020_LUMINANCE_COEFFICIENTS = [ 0.2627, 0.6780, 0.0593 ];\nconst D65 = [ 0.3127, 0.3290 ];\n\n/******************************************************************************\n * Display P3 definitions\n */\n\nconst LINEAR_DISPLAY_P3_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.4865709, 0.2656677, 0.1982173,\n\t0.2289746, 0.6917385, 0.0792869,\n\t0.0000000, 0.0451134, 1.0439444\n);\n\nconst XYZ_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\n\t2.4934969, - 0.9313836, - 0.4027108,\n\t- 0.8294890, 1.7626641, 0.0236247,\n\t0.0358458, - 0.0761724, 0.9568845\n);\n\n/**\n * Display-P3 color space.\n *\n * @type {string}\n * @constant\n */\nexport const DisplayP3ColorSpace = 'display-p3';\n\n/**\n * Display-P3-Linear color space.\n *\n * @type {string}\n * @constant\n */\nexport const LinearDisplayP3ColorSpace = 'display-p3-linear';\n\n/**\n * Implementation object for the Display-P3 color space.\n *\n * @type {module:ColorSpaces~ColorSpaceImpl}\n * @constant\n */\nexport const DisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: SRGBTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\n/**\n * Implementation object for the Display-P3-Linear color space.\n *\n * @type {module:ColorSpaces~ColorSpaceImpl}\n * @constant\n */\nexport const LinearDisplayP3ColorSpaceImpl = {\n\tprimaries: P3_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_DISPLAY_P3_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_DISPLAY_P3,\n\tluminanceCoefficients: P3_LUMINANCE_COEFFICIENTS,\n\tworkingColorSpaceConfig: { unpackColorSpace: DisplayP3ColorSpace },\n\toutputColorSpaceConfig: { drawingBufferColorSpace: DisplayP3ColorSpace }\n};\n\n/******************************************************************************\n * Rec. 2020 definitions\n */\n\nconst LINEAR_REC2020_TO_XYZ = /*@__PURE__*/ new Matrix3().set(\n\t0.6369580, 0.1446169, 0.1688810,\n\t0.2627002, 0.6779981, 0.0593017,\n\t0.0000000, 0.0280727, 1.0609851\n);\n\nconst XYZ_TO_LINEAR_REC2020 = /*@__PURE__*/ new Matrix3().set(\n\t1.7166512, - 0.3556708, - 0.2533663,\n\t- 0.6666844, 1.6164812, 0.0157685,\n\t0.0176399, - 0.0427706, 0.9421031\n);\n\n/**\n * Rec2020-Linear color space.\n *\n * @type {string}\n * @constant\n */\nexport const LinearRec2020ColorSpace = 'rec2020-linear';\n\n/**\n * Implementation object for the Rec2020-Linear color space.\n *\n * @type {module:ColorSpaces~ColorSpaceImpl}\n * @constant\n */\nexport const LinearRec2020ColorSpaceImpl = {\n\tprimaries: REC2020_PRIMARIES,\n\twhitePoint: D65,\n\ttransfer: LinearTransfer,\n\ttoXYZ: LINEAR_REC2020_TO_XYZ,\n\tfromXYZ: XYZ_TO_LINEAR_REC2020,\n\tluminanceCoefficients: REC2020_LUMINANCE_COEFFICIENTS,\n};\n\n\n/**\n * An object holding the color space implementation.\n *\n * @typedef {Object} module:ColorSpaces~ColorSpaceImpl\n * @property {Array<number>} primaries - The primaries.\n * @property {Array<number>} whitePoint - The white point.\n * @property {Matrix3} toXYZ - A color space conversion matrix, converting to CIE XYZ.\n * @property {Matrix3} fromXYZ - A color space conversion matrix, converting from CIE XYZ.\n * @property {Array<number>} luminanceCoefficients - The luminance coefficients.\n * @property {{unpackColorSpace:string}} [workingColorSpaceConfig] - The working color space config.\n * @property {{drawingBufferColorSpace:string}} [outputColorSpaceConfig] - The drawing buffer color space config.\n **/\n","import {\n\tBox3,\n\tMathUtils,\n\tMatrix4,\n\tMatrix3,\n\tRay,\n\tVector3\n} from 'three';\n\n// module scope helper variables\n\nconst a = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst b = {\n\tc: null, // center\n\tu: [ new Vector3(), new Vector3(), new Vector3() ], // basis vectors\n\te: [] // half width\n};\n\nconst R = [[], [], []];\nconst AbsR = [[], [], []];\nconst t = [];\n\nconst xAxis = new Vector3();\nconst yAxis = new Vector3();\nconst zAxis = new Vector3();\nconst v1 = new Vector3();\nconst size = new Vector3();\nconst closestPoint = new Vector3();\nconst rotationMatrix = new Matrix3();\nconst aabb = new Box3();\nconst matrix = new Matrix4();\nconst inverse = new Matrix4();\nconst localRay = new Ray();\n\n/**\n * Represents an oriented bounding box (OBB) in 3D space.\n *\n * @three_import import { OBB } from 'three/addons/math/OBB.js';\n */\nclass OBB {\n\n\t/**\n\t * Constructs a new OBB.\n\t *\n\t * @param {Vector3} [center] - The center of the OBB.\n\t * @param {Vector3} [halfSize] - Positive halfwidth extents of the OBB along each axis.\n\t * @param {Matrix3} [rotation] - The rotation of the OBB.\n\t */\n\tconstructor( center = new Vector3(), halfSize = new Vector3(), rotation = new Matrix3() ) {\n\n\t\t/**\n\t\t * The center of the OBB.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.center = center;\n\n\t\t/**\n\t\t * Positive halfwidth extents of the OBB along each axis.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.halfSize = halfSize;\n\n\t\t/**\n\t\t * The rotation of the OBB.\n\t\t *\n\t\t * @type {Matrix3}\n\t\t */\n\t\tthis.rotation = rotation;\n\n\t}\n\n\t/**\n\t * Sets the OBBs components to the given values.\n\t *\n\t * @param {Vector3} [center] - The center of the OBB.\n\t * @param {Vector3} [halfSize] - Positive halfwidth extents of the OBB along each axis.\n\t * @param {Matrix3} [rotation] - The rotation of the OBB.\n\t * @return {OBB} A reference to this OBB.\n\t */\n\tset( center, halfSize, rotation ) {\n\n\t\tthis.center = center;\n\t\tthis.halfSize = halfSize;\n\t\tthis.rotation = rotation;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Copies the values of the given OBB to this instance.\n\t *\n\t * @param {OBB} obb - The OBB to copy.\n\t * @return {OBB} A reference to this OBB.\n\t */\n\tcopy( obb ) {\n\n\t\tthis.center.copy( obb.center );\n\t\tthis.halfSize.copy( obb.halfSize );\n\t\tthis.rotation.copy( obb.rotation );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Returns a new OBB with copied values from this instance.\n\t *\n\t * @return {OBB} A clone of this instance.\n\t */\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\t/**\n\t * Returns the size of this OBB.\n\t *\n\t * @param {Vector3} target - The target vector that is used to store the method's result.\n\t * @return {Vector3} The size.\n\t */\n\tgetSize( target ) {\n\n\t\treturn target.copy( this.halfSize ).multiplyScalar( 2 );\n\n\t}\n\n\t/**\n\t * Clamps the given point within the bounds of this OBB.\n\t *\n\t * @param {Vector3} point - The point that should be clamped within the bounds of this OBB.\n\t * @param {Vector3} target - The target vector that is used to store the method's result.\n\t * @returns {Vector3} - The clamped point.\n\t */\n\tclampPoint( point, target ) {\n\n\t\t// Reference: Closest Point on OBB to Point in Real-Time Collision Detection\n\t\t// by Christer Ericson (chapter 5.1.4)\n\n\t\tconst halfSize = this.halfSize;\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// start at the center position of the OBB\n\n\t\ttarget.copy( this.center );\n\n\t\t// project the target onto the OBB axes and walk towards that point\n\n\t\tconst x = MathUtils.clamp( v1.dot( xAxis ), - halfSize.x, halfSize.x );\n\t\ttarget.add( xAxis.multiplyScalar( x ) );\n\n\t\tconst y = MathUtils.clamp( v1.dot( yAxis ), - halfSize.y, halfSize.y );\n\t\ttarget.add( yAxis.multiplyScalar( y ) );\n\n\t\tconst z = MathUtils.clamp( v1.dot( zAxis ), - halfSize.z, halfSize.z );\n\t\ttarget.add( zAxis.multiplyScalar( z ) );\n\n\t\treturn target;\n\n\t}\n\n\t/**\n\t * Returns `true` if the given point lies within this OBB.\n\t *\n\t * @param {Vector3} point - The point to test.\n\t * @returns {boolean} - Whether the given point lies within this OBB or not.\n\t */\n\tcontainsPoint( point ) {\n\n\t\tv1.subVectors( point, this.center );\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// project v1 onto each axis and check if these points lie inside the OBB\n\n\t\treturn Math.abs( v1.dot( xAxis ) ) <= this.halfSize.x &&\n\t\t\t\tMath.abs( v1.dot( yAxis ) ) <= this.halfSize.y &&\n\t\t\t\tMath.abs( v1.dot( zAxis ) ) <= this.halfSize.z;\n\n\t}\n\n\t/**\n\t * Returns `true` if the given AABB intersects this OBB.\n\t *\n\t * @param {Box3} box3 - The AABB to test.\n\t * @returns {boolean} - Whether the given AABB intersects this OBB or not.\n\t */\n\tintersectsBox3( box3 ) {\n\n\t\treturn this.intersectsOBB( obb.fromBox3( box3 ) );\n\n\t}\n\n\t/**\n\t * Returns `true` if the given bounding sphere intersects this OBB.\n\t *\n\t * @param {Sphere} sphere - The bounding sphere to test.\n\t * @returns {boolean} - Whether the given bounding sphere intersects this OBB or not.\n\t */\n\tintersectsSphere( sphere ) {\n\n\t\t// find the point on the OBB closest to the sphere center\n\n\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t// if that point is inside the sphere, the OBB and sphere intersect\n\n\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\t/**\n\t * Returns `true` if the given OBB intersects this OBB.\n\t *\n\t * @param {OBB} obb - The OBB to test.\n\t * @param {number} [epsilon=Number.EPSILON] - A small value to prevent arithmetic errors.\n\t * @returns {boolean} - Whether the given OBB intersects this OBB or not.\n\t */\n\tintersectsOBB( obb, epsilon = Number.EPSILON ) {\n\n\t\t// Reference: OBB-OBB Intersection in Real-Time Collision Detection\n\t\t// by Christer Ericson (chapter 4.4.1)\n\n\t\t// prepare data structures (the code uses the same nomenclature like the reference)\n\n\t\ta.c = this.center;\n\t\ta.e[ 0 ] = this.halfSize.x;\n\t\ta.e[ 1 ] = this.halfSize.y;\n\t\ta.e[ 2 ] = this.halfSize.z;\n\t\tthis.rotation.extractBasis( a.u[ 0 ], a.u[ 1 ], a.u[ 2 ] );\n\n\t\tb.c = obb.center;\n\t\tb.e[ 0 ] = obb.halfSize.x;\n\t\tb.e[ 1 ] = obb.halfSize.y;\n\t\tb.e[ 2 ] = obb.halfSize.z;\n\t\tobb.rotation.extractBasis( b.u[ 0 ], b.u[ 1 ], b.u[ 2 ] );\n\n\t\t// compute rotation matrix expressing b in a's coordinate frame\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tR[ i ][ j ] = a.u[ i ].dot( b.u[ j ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute translation vector\n\n\t\tv1.subVectors( b.c, a.c );\n\n\t\t// bring translation into a's coordinate frame\n\n\t\tt[ 0 ] = v1.dot( a.u[ 0 ] );\n\t\tt[ 1 ] = v1.dot( a.u[ 1 ] );\n\t\tt[ 2 ] = v1.dot( a.u[ 2 ] );\n\n\t\t// compute common subexpressions. Add in an epsilon term to\n\t\t// counteract arithmetic errors when two edges are parallel and\n\t\t// their cross product is (near) null\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tAbsR[ i ][ j ] = Math.abs( R[ i ][ j ] ) + epsilon;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet ra, rb;\n\n\t\t// test axes L = A0, L = A1, L = A2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ i ];\n\t\t\trb = b.e[ 0 ] * AbsR[ i ][ 0 ] + b.e[ 1 ] * AbsR[ i ][ 1 ] + b.e[ 2 ] * AbsR[ i ][ 2 ];\n\t\t\tif ( Math.abs( t[ i ] ) > ra + rb ) return false;\n\n\n\t\t}\n\n\t\t// test axes L = B0, L = B1, L = B2\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tra = a.e[ 0 ] * AbsR[ 0 ][ i ] + a.e[ 1 ] * AbsR[ 1 ][ i ] + a.e[ 2 ] * AbsR[ 2 ][ i ];\n\t\t\trb = b.e[ i ];\n\t\t\tif ( Math.abs( t[ 0 ] * R[ 0 ][ i ] + t[ 1 ] * R[ 1 ][ i ] + t[ 2 ] * R[ 2 ][ i ] ) > ra + rb ) return false;\n\n\t\t}\n\n\t\t// test axis L = A0 x B0\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 0 ] - t[ 1 ] * R[ 2 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B1\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 2 ] + b.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 1 ] - t[ 1 ] * R[ 2 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A0 x B2\n\n\t\tra = a.e[ 1 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 1 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 0 ][ 1 ] + b.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\tif ( Math.abs( t[ 2 ] * R[ 1 ][ 2 ] - t[ 1 ] * R[ 2 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 0 ] + a.e[ 2 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 1 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 0 ] - t[ 2 ] * R[ 0 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 1 ] + a.e[ 2 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 2 ] + b.e[ 2 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 1 ] - t[ 2 ] * R[ 0 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A1 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 2 ][ 2 ] + a.e[ 2 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 1 ][ 1 ] + b.e[ 1 ] * AbsR[ 1 ][ 0 ];\n\t\tif ( Math.abs( t[ 0 ] * R[ 2 ][ 2 ] - t[ 2 ] * R[ 0 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B0\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 0 ] + a.e[ 1 ] * AbsR[ 0 ][ 0 ];\n\t\trb = b.e[ 1 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 1 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 0 ] - t[ 0 ] * R[ 1 ][ 0 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B1\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 1 ] + a.e[ 1 ] * AbsR[ 0 ][ 1 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 2 ] + b.e[ 2 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 1 ] - t[ 0 ] * R[ 1 ][ 1 ] ) > ra + rb ) return false;\n\n\t\t// test axis L = A2 x B2\n\n\t\tra = a.e[ 0 ] * AbsR[ 1 ][ 2 ] + a.e[ 1 ] * AbsR[ 0 ][ 2 ];\n\t\trb = b.e[ 0 ] * AbsR[ 2 ][ 1 ] + b.e[ 1 ] * AbsR[ 2 ][ 0 ];\n\t\tif ( Math.abs( t[ 1 ] * R[ 0 ][ 2 ] - t[ 0 ] * R[ 1 ][ 2 ] ) > ra + rb ) return false;\n\n\t\t// since no separating axis is found, the OBBs must be intersecting\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Returns `true` if the given plane intersects this OBB.\n\t *\n\t * @param {Plane} plane - The plane to test.\n\t * @returns {boolean} Whether the given plane intersects this OBB or not.\n\t */\n\tintersectsPlane( plane ) {\n\n\t\t// Reference: Testing Box Against Plane in Real-Time Collision Detection\n\t\t// by Christer Ericson (chapter 5.2.3)\n\n\t\tthis.rotation.extractBasis( xAxis, yAxis, zAxis );\n\n\t\t// compute the projection interval radius of this OBB onto L(t) = this->center + t * p.normal;\n\n\t\tconst r = this.halfSize.x * Math.abs( plane.normal.dot( xAxis ) ) +\n\t\t\t\tthis.halfSize.y * Math.abs( plane.normal.dot( yAxis ) ) +\n\t\t\t\tthis.halfSize.z * Math.abs( plane.normal.dot( zAxis ) );\n\n\t\t// compute distance of the OBB's center from the plane\n\n\t\tconst d = plane.normal.dot( this.center ) - plane.constant;\n\n\t\t// Intersection occurs when distance d falls within [-r,+r] interval\n\n\t\treturn Math.abs( d ) <= r;\n\n\t}\n\n\t/**\n\t * Performs a ray/OBB intersection test and stores the intersection point\n\t * in the given 3D vector.\n\t *\n\t * @param {Ray} ray - The ray to test.\n\t * @param {Vector3} target - The target vector that is used to store the method's result.\n\t * @return {?Vector3} The intersection point. If no intersection is detected, `null` is returned.\n\t */\n\tintersectRay( ray, target ) {\n\n\t\t// the idea is to perform the intersection test in the local space\n\t\t// of the OBB.\n\n\t\tthis.getSize( size );\n\t\taabb.setFromCenterAndSize( v1.set( 0, 0, 0 ), size );\n\n\t\t// create a 4x4 transformation matrix\n\n\t\tmatrix.setFromMatrix3( this.rotation );\n\t\tmatrix.setPosition( this.center );\n\n\t\t// transform ray to the local space of the OBB\n\n\t\tinverse.copy( matrix ).invert();\n\t\tlocalRay.copy( ray ).applyMatrix4( inverse );\n\n\t\t// perform ray <-> AABB intersection test\n\n\t\tif ( localRay.intersectBox( aabb, target ) ) {\n\n\t\t\t// transform the intersection point back to world space\n\n\t\t\treturn target.applyMatrix4( matrix );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns `true` if the given ray intersects this OBB.\n\t *\n\t * @param {Ray} ray - The ray to test.\n\t * @returns {boolean} Whether the given ray intersects this OBB or not.\n\t */\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, v1 ) !== null;\n\n\t}\n\n\t/**\n\t * Defines an OBB based on the given AABB.\n\t *\n\t * @param {Box3} box3 - The AABB to setup the OBB from.\n\t * @return {OBB} A reference of this OBB.\n\t */\n\tfromBox3( box3 ) {\n\n\t\tbox3.getCenter( this.center );\n\n\t\tbox3.getSize( this.halfSize ).multiplyScalar( 0.5 );\n\n\t\tthis.rotation.identity();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Returns `true` if the given OBB is equal to this OBB.\n\t *\n\t * @param {OBB} obb - The OBB to test.\n\t * @returns {boolean} Whether the given OBB is equal to this OBB or not.\n\t */\n\tequals( obb ) {\n\n\t\treturn obb.center.equals( this.center ) &&\n\t\t\tobb.halfSize.equals( this.halfSize ) &&\n\t\t\tobb.rotation.equals( this.rotation );\n\n\t}\n\n\t/**\n\t * Applies the given transformation matrix to this OBB. This method can be\n\t * used to transform the bounding volume with the world matrix of a 3D object\n\t * in order to keep both entities in sync.\n\t *\n\t * @param {Matrix4} matrix - The matrix to apply.\n\t * @return {OBB} A reference of this OBB.\n\t */\n\tapplyMatrix4( matrix ) {\n\n\t\tconst e = matrix.elements;\n\n\t\tlet sx = v1.set( e[ 0 ], e[ 1 ], e[ 2 ] ).length();\n\t\tconst sy = v1.set( e[ 4 ], e[ 5 ], e[ 6 ] ).length();\n\t\tconst sz = v1.set( e[ 8 ], e[ 9 ], e[ 10 ] ).length();\n\n\t\tconst det = matrix.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\trotationMatrix.setFromMatrix4( matrix );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\trotationMatrix.elements[ 0 ] *= invSX;\n\t\trotationMatrix.elements[ 1 ] *= invSX;\n\t\trotationMatrix.elements[ 2 ] *= invSX;\n\n\t\trotationMatrix.elements[ 3 ] *= invSY;\n\t\trotationMatrix.elements[ 4 ] *= invSY;\n\t\trotationMatrix.elements[ 5 ] *= invSY;\n\n\t\trotationMatrix.elements[ 6 ] *= invSZ;\n\t\trotationMatrix.elements[ 7 ] *= invSZ;\n\t\trotationMatrix.elements[ 8 ] *= invSZ;\n\n\t\tthis.rotation.multiply( rotationMatrix );\n\n\t\tthis.halfSize.x *= sx;\n\t\tthis.halfSize.y *= sy;\n\t\tthis.halfSize.z *= sz;\n\n\t\tv1.setFromMatrixPosition( matrix );\n\t\tthis.center.add( v1 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst obb = new OBB();\n\nexport { OBB };\n","import {\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLineBasicMaterial,\n\tLineSegments,\n\tLoader,\n\tMaterial,\n\tMesh,\n\tMeshPhongMaterial,\n\tPoints,\n\tPointsMaterial,\n\tVector3,\n\tColor,\n\tSRGBColorSpace\n} from 'three';\n\n// o object_name | g group_name\nconst _object_pattern = /^[og]\\s*(.+)?/;\n// mtllib file_reference\nconst _material_library_pattern = /^mtllib /;\n// usemtl material_name\nconst _material_use_pattern = /^usemtl /;\n// usemap map_name\nconst _map_use_pattern = /^usemap /;\nconst _face_vertex_data_separator_pattern = /\\s+/;\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _ab = new Vector3();\nconst _cb = new Vector3();\n\nconst _color = new Color();\n\nfunction ParserState() {\n\n\tconst state = {\n\t\tobjects: [],\n\t\tobject: {},\n\n\t\tvertices: [],\n\t\tnormals: [],\n\t\tcolors: [],\n\t\tuvs: [],\n\n\t\tmaterials: {},\n\t\tmaterialLibraries: [],\n\n\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\tthis.object.name = name;\n\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t\tthis.object = {\n\t\t\t\tname: name || '',\n\t\t\t\tfromDeclaration: ( fromDeclaration !== false ),\n\n\t\t\t\tgeometry: {\n\t\t\t\t\tvertices: [],\n\t\t\t\t\tnormals: [],\n\t\t\t\t\tcolors: [],\n\t\t\t\t\tuvs: [],\n\t\t\t\t\thasUVIndices: false\n\t\t\t\t},\n\t\t\t\tmaterials: [],\n\t\t\t\tsmooth: true,\n\n\t\t\t\tstartMaterial: function ( name, libraries ) {\n\n\t\t\t\t\tconst previous = this._finalize( false );\n\n\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst material = {\n\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\tmtllib: ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\tsmooth: ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\tgroupStart: ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\tclone: function ( index ) {\n\n\t\t\t\t\t\t\tconst cloned = {\n\t\t\t\t\t\t\t\tindex: ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\tgroupEnd: - 1,\n\t\t\t\t\t\t\t\tgroupCount: - 1,\n\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcloned.clone = this.clone.bind( cloned );\n\t\t\t\t\t\t\treturn cloned;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t\tcurrentMaterial: function () {\n\n\t\t\t\t\tif ( this.materials.length > 0 ) {\n\n\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t},\n\n\t\t\t\t_finalize: function ( end ) {\n\n\t\t\t\t\tconst lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === - 1 ) {\n\n\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\tfor ( let mi = this.materials.length - 1; mi >= 0; mi -- ) {\n\n\t\t\t\t\t\t\tif ( this.materials[ mi ].groupCount <= 0 ) {\n\n\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\tthis.materials.push( {\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Inherit previous objects material.\n\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function' ) {\n\n\t\t\t\tconst declared = previousMaterial.clone( 0 );\n\t\t\t\tdeclared.inherited = true;\n\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t}\n\n\t\t\tthis.objects.push( this.object );\n\n\t\t},\n\n\t\tfinalize: function () {\n\n\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\tthis.object._finalize( true );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t},\n\n\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\tconst index = parseInt( value, 10 );\n\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t},\n\n\t\taddVertex: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddVertexPoint: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddVertexLine: function ( a ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.vertices;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\n\t\t},\n\n\t\taddNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.normals;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddFaceNormal: function ( a, b, c ) {\n\n\t\t\tconst src = this.vertices;\n\t\t\tconst dst = this.object.geometry.normals;\n\n\t\t\t_vA.fromArray( src, a );\n\t\t\t_vB.fromArray( src, b );\n\t\t\t_vC.fromArray( src, c );\n\n\t\t\t_cb.subVectors( _vC, _vB );\n\t\t\t_ab.subVectors( _vA, _vB );\n\t\t\t_cb.cross( _ab );\n\n\t\t\t_cb.normalize();\n\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\t\t\tdst.push( _cb.x, _cb.y, _cb.z );\n\n\t\t},\n\n\t\taddColor: function ( a, b, c ) {\n\n\t\t\tconst src = this.colors;\n\t\t\tconst dst = this.object.geometry.colors;\n\n\t\t\tif ( src[ a ] !== undefined ) dst.push( src[ a + 0 ], src[ a + 1 ], src[ a + 2 ] );\n\t\t\tif ( src[ b ] !== undefined ) dst.push( src[ b + 0 ], src[ b + 1 ], src[ b + 2 ] );\n\t\t\tif ( src[ c ] !== undefined ) dst.push( src[ c + 0 ], src[ c + 1 ], src[ c + 2 ] );\n\n\t\t},\n\n\t\taddUV: function ( a, b, c ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\t\t\tdst.push( src[ b + 0 ], src[ b + 1 ] );\n\t\t\tdst.push( src[ c + 0 ], src[ c + 1 ] );\n\n\t\t},\n\n\t\taddDefaultUV: function () {\n\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\t\t\tdst.push( 0, 0 );\n\n\t\t},\n\n\t\taddUVLine: function ( a ) {\n\n\t\t\tconst src = this.uvs;\n\t\t\tconst dst = this.object.geometry.uvs;\n\n\t\t\tdst.push( src[ a + 0 ], src[ a + 1 ] );\n\n\t\t},\n\n\t\taddFace: function ( a, b, c, ua, ub, uc, na, nb, nc ) {\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tlet ia = this.parseVertexIndex( a, vLen );\n\t\t\tlet ib = this.parseVertexIndex( b, vLen );\n\t\t\tlet ic = this.parseVertexIndex( c, vLen );\n\n\t\t\tthis.addVertex( ia, ib, ic );\n\t\t\tthis.addColor( ia, ib, ic );\n\n\t\t\t// normals\n\n\t\t\tif ( na !== undefined && na !== '' ) {\n\n\t\t\t\tconst nLen = this.normals.length;\n\n\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\t\t\t\tib = this.parseNormalIndex( nb, nLen );\n\t\t\t\tic = this.parseNormalIndex( nc, nLen );\n\n\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t} else {\n\n\t\t\t\tthis.addFaceNormal( ia, ib, ic );\n\n\t\t\t}\n\n\t\t\t// uvs\n\n\t\t\tif ( ua !== undefined && ua !== '' ) {\n\n\t\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\tthis.object.geometry.hasUVIndices = true;\n\n\t\t\t} else {\n\n\t\t\t\t// add placeholder values (for inconsistent face definitions)\n\n\t\t\t\tthis.addDefaultUV();\n\n\t\t\t}\n\n\t\t},\n\n\t\taddPointGeometry: function ( vertices ) {\n\n\t\t\tthis.object.geometry.type = 'Points';\n\n\t\t\tconst vLen = this.vertices.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tconst index = this.parseVertexIndex( vertices[ vi ], vLen );\n\n\t\t\t\tthis.addVertexPoint( index );\n\t\t\t\tthis.addColor( index );\n\n\t\t\t}\n\n\t\t},\n\n\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\tconst vLen = this.vertices.length;\n\t\t\tconst uvLen = this.uvs.length;\n\n\t\t\tfor ( let vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t}\n\n\t\t\tfor ( let uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tstate.startObject( '', false );\n\n\treturn state;\n\n}\n\n\n/**\n * A loader for the OBJ format.\n *\n * The [OBJ format]{@link https://en.wikipedia.org/wiki/Wavefront_.obj_file} is a simple data-format that\n * represents 3D geometry in a human readable format as the position of each vertex, the UV position of\n * each texture coordinate vertex, vertex normals, and the faces that make each polygon defined as a list\n * of vertices, and texture vertices.\n *\n * ```js\n * const loader = new OBJLoader();\n * const object = await loader.loadAsync( 'models/monster.obj' );\n * scene.add( object );\n * ```\n *\n * @augments Loader\n * @three_import import { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\n */\nclass OBJLoader extends Loader {\n\n\t/**\n\t * Constructs a new OBJ loader.\n\t *\n\t * @param {LoadingManager} [manager] - The loading manager.\n\t */\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\t/**\n\t\t * A reference to a material creator.\n\t\t *\n\t\t * @type {?MaterialCreator}\n\t\t * @default null\n\t\t */\n\t\tthis.materials = null;\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded OBJ asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(Group)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Sets the material creator for this OBJ. This object is loaded via {@link MTLLoader}.\n\t *\n\t * @param {MaterialCreator} materials - An object that creates the materials for this OBJ.\n\t * @return {OBJLoader} A reference to this loader.\n\t */\n\tsetMaterials( materials ) {\n\n\t\tthis.materials = materials;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses the given OBJ data and returns the resulting group.\n\t *\n\t * @param {string} text - The raw OBJ data as a string.\n\t * @return {Group} The parsed OBJ.\n\t */\n\tparse( text ) {\n\n\t\tconst state = new ParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1 ) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet result = [];\n\n\t\tfor ( let i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tconst line = lines[ i ].trimStart();\n\n\t\t\tif ( line.length === 0 ) continue;\n\n\t\t\tconst lineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue; // skip comments\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tconst data = line.split( _face_vertex_data_separator_pattern );\n\n\t\t\t\tswitch ( data[ 0 ] ) {\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( data.length >= 7 ) {\n\n\t\t\t\t\t\t\t_color.setRGB(\n\t\t\t\t\t\t\t\tparseFloat( data[ 4 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 5 ] ),\n\t\t\t\t\t\t\t\tparseFloat( data[ 6 ] ),\n\t\t\t\t\t\t\t\tSRGBColorSpace\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tstate.colors.push( _color.r, _color.g, _color.b );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if no colors are defined, add placeholders so color and vertex indices match\n\n\t\t\t\t\t\t\tstate.colors.push( undefined, undefined, undefined );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vn':\n\t\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 3 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vt':\n\t\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\t\tparseFloat( data[ 1 ] ),\n\t\t\t\t\t\t\tparseFloat( data[ 2 ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'f' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst vertexData = lineData.split( _face_vertex_data_separator_pattern );\n\t\t\t\tconst faceVertices = [];\n\n\t\t\t\t// Parse the face vertex data into an easy to work with format\n\n\t\t\t\tfor ( let j = 0, jl = vertexData.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst vertex = vertexData[ j ];\n\n\t\t\t\t\tif ( vertex.length > 0 ) {\n\n\t\t\t\t\t\tconst vertexParts = vertex.split( '/' );\n\t\t\t\t\t\tfaceVertices.push( vertexParts );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n\n\t\t\t\tconst v1 = faceVertices[ 0 ];\n\n\t\t\t\tfor ( let j = 1, jl = faceVertices.length - 1; j < jl; j ++ ) {\n\n\t\t\t\t\tconst v2 = faceVertices[ j ];\n\t\t\t\t\tconst v3 = faceVertices[ j + 1 ];\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tv1[ 0 ], v2[ 0 ], v3[ 0 ],\n\t\t\t\t\t\tv1[ 1 ], v2[ 1 ], v3[ 1 ],\n\t\t\t\t\t\tv1[ 2 ], v2[ 2 ], v3[ 2 ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === 'l' ) {\n\n\t\t\t\tconst lineParts = line.substring( 1 ).trim().split( ' ' );\n\t\t\t\tlet lineVertices = [];\n\t\t\t\tconst lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( '/' ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tconst parts = lineParts[ li ].split( '/' );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== '' ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== '' ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( lineFirstChar === 'p' ) {\n\n\t\t\t\tconst lineData = line.slice( 1 ).trim();\n\t\t\t\tconst pointData = lineData.split( ' ' );\n\n\t\t\t\tstate.addPointGeometry( pointData );\n\n\t\t\t} else if ( ( result = _object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// let name = result[ 0 ].slice( 1 ).trim();\n\t\t\t\tconst name = ( ' ' + result[ 0 ].slice( 1 ).trim() ).slice( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( _material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( _material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( _map_use_pattern.test( line ) ) {\n\n\t\t\t\t// the line is parsed but ignored since the loader assumes textures are defined MTL files\n\t\t\t\t// (according to https://www.okino.com/conv/imp_wave.htm, 'usemap' is the old-style Wavefront texture reference method)\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.' );\n\n\t\t\t} else if ( lineFirstChar === 's' ) {\n\n\t\t\t\tresult = line.split( ' ' );\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n\t\t\t\tif ( result.length > 1 ) {\n\n\t\t\t\t\tconst value = result[ 1 ].trim().toLowerCase();\n\t\t\t\t\tstate.object.smooth = ( value !== '0' && value !== 'off' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// ZBrush can produce \"s\" lines #11707\n\t\t\t\t\tstate.object.smooth = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst material = state.object.currentMaterial();\n\t\t\t\tif ( material ) material.smooth = state.object.smooth;\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tconsole.warn( 'THREE.OBJLoader: Unexpected line: \"' + line + '\"' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tconst container = new Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tconst hasPrimitives = ! ( state.objects.length === 1 && state.objects[ 0 ].geometry.vertices.length === 0 );\n\n\t\tif ( hasPrimitives === true ) {\n\n\t\t\tfor ( let i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\t\tconst object = state.objects[ i ];\n\t\t\t\tconst geometry = object.geometry;\n\t\t\t\tconst materials = object.materials;\n\t\t\t\tconst isLine = ( geometry.type === 'Line' );\n\t\t\t\tconst isPoints = ( geometry.type === 'Points' );\n\t\t\t\tlet hasVertexColors = false;\n\n\t\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( geometry.vertices, 3 ) );\n\n\t\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'normal', new Float32BufferAttribute( geometry.normals, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\t\t\thasVertexColors = true;\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( geometry.colors, 3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometry.hasUVIndices === true ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'uv', new Float32BufferAttribute( geometry.uvs, 2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// Create materials\n\n\t\t\t\tconst createdMaterials = [];\n\n\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\tconst materialHash = sourceMaterial.name + '_' + sourceMaterial.smooth + '_' + hasVertexColors;\n\t\t\t\t\tlet material = state.materials[ materialHash ];\n\n\t\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\t\tif ( isLine && material && ! ( material instanceof LineBasicMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialLine = new LineBasicMaterial();\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialLine, material );\n\t\t\t\t\t\t\tmaterialLine.color.copy( material.color );\n\t\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t\t} else if ( isPoints && material && ! ( material instanceof PointsMaterial ) ) {\n\n\t\t\t\t\t\t\tconst materialPoints = new PointsMaterial( { size: 10, sizeAttenuation: false } );\n\t\t\t\t\t\t\tMaterial.prototype.copy.call( materialPoints, material );\n\t\t\t\t\t\t\tmaterialPoints.color.copy( material.color );\n\t\t\t\t\t\t\tmaterialPoints.map = material.map;\n\t\t\t\t\t\t\tmaterial = materialPoints;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( material === undefined ) {\n\n\t\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\t\tmaterial = new LineBasicMaterial();\n\n\t\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\t\tmaterial = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tmaterial = new MeshPhongMaterial();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? false : true;\n\t\t\t\t\t\tmaterial.vertexColors = hasVertexColors;\n\n\t\t\t\t\t\tstate.materials[ materialHash ] = material;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedMaterials.push( material );\n\n\t\t\t\t}\n\n\t\t\t\t// Create mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\t\tfor ( let mi = 0, miLen = materials.length; mi < miLen; mi ++ ) {\n\n\t\t\t\t\t\tconst sourceMaterial = materials[ mi ];\n\t\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( isLine ) {\n\n\t\t\t\t\t\tmesh = new LineSegments( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else if ( isPoints ) {\n\n\t\t\t\t\t\tmesh = new Points( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmesh = new Mesh( buffergeometry, createdMaterials[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = object.name;\n\n\t\t\t\tcontainer.add( mesh );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// if there is only the default parser state object with no geometry data, interpret data as point cloud\n\n\t\t\tif ( state.vertices.length > 0 ) {\n\n\t\t\t\tconst material = new PointsMaterial( { size: 1, sizeAttenuation: false } );\n\n\t\t\t\tconst buffergeometry = new BufferGeometry();\n\n\t\t\t\tbuffergeometry.setAttribute( 'position', new Float32BufferAttribute( state.vertices, 3 ) );\n\n\t\t\t\tif ( state.colors.length > 0 && state.colors[ 0 ] !== undefined ) {\n\n\t\t\t\t\tbuffergeometry.setAttribute( 'color', new Float32BufferAttribute( state.colors, 3 ) );\n\t\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst points = new Points( buffergeometry, material );\n\t\t\t\tcontainer.add( points );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\n\t}\n\n}\n\nexport { OBJLoader };\n","import {\n\tColor,\n\tColorManagement,\n\tDefaultLoadingManager,\n\tFileLoader,\n\tFrontSide,\n\tLoader,\n\tLoaderUtils,\n\tMeshPhongMaterial,\n\tRepeatWrapping,\n\tTextureLoader,\n\tVector2,\n\tSRGBColorSpace\n} from 'three';\n\n/**\n * A loader for the MTL format.\n *\n * The Material Template Library format (MTL) or .MTL File Format is a companion file format\n * to OBJ that describes surface shading (material) properties of objects within one or more\n * OBJ files.\n *\n * ```js\n * const loader = new MTLLoader();\n * const materials = await loader.loadAsync( 'models/obj/male02/male02.mtl' );\n *\n * const objLoader = new OBJLoader();\n * objLoader.setMaterials( materials );\n * ```\n *\n * @augments Loader\n * @three_import import { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\n */\nclass MTLLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\t/**\n\t * Starts loading from the given URL and passes the loaded MTL asset\n\t * to the `onLoad()` callback.\n\t *\n\t * @param {string} url - The path/URL of the file to be loaded. This can also be a data URI.\n\t * @param {function(MaterialCreator)} onLoad - Executed when the loading process has been finished.\n\t * @param {onProgressCallback} onProgress - Executed while the loading is in progress.\n\t * @param {onErrorCallback} onError - Executed when errors occur.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Sets the material options.\n\t *\n\t * @param {MTLLoader~MaterialOptions} value - The material options.\n\t * @return {MTLLoader} A reference to this loader.\n\t */\n\tsetMaterialOptions( value ) {\n\n\t\tthis.materialOptions = value;\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parses the given MTL data and returns the resulting material creator.\n\t *\n\t * @param {string} text - The raw MTL data as a string.\n\t * @param {string} path - The URL base path.\n\t * @return {MaterialCreator} The material creator.\n\t */\n\tparse( text, path ) {\n\n\t\tconst lines = text.split( '\\n' );\n\t\tlet info = {};\n\t\tconst delimiter_pattern = /\\s+/;\n\t\tconst materialsInfo = {};\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlet line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst pos = line.indexOf( ' ' );\n\n\t\t\tlet key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tlet value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' || key === 'ke' ) {\n\n\t\t\t\t\tconst ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst materialCreator = new MaterialCreator( this.resourcePath || path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n}\n\n/**\n * Material options of `MTLLoader`.\n *\n * @typedef {Object} MTLLoader~MaterialOptions\n * @property {(FrontSide|BackSide|DoubleSide)} [side=FrontSide] - Which side to apply the material.\n * @property {(RepeatWrapping|ClampToEdgeWrapping|MirroredRepeatWrapping)} [wrap=RepeatWrapping] - What type of wrapping to apply for textures.\n * @property {boolean} [normalizeRGB=false] - Whether RGB colors should be normalized to `0-1` from `0-255`.\n * @property {boolean} [ignoreZeroRGBs=false] - Ignore values of RGBs (Ka,Kd,Ks) that are all 0's.\n */\n\nclass MaterialCreator {\n\n\tconstructor( baseUrl = '', options = {} ) {\n\n\t\tthis.baseUrl = baseUrl;\n\t\tthis.options = options;\n\t\tthis.materialsInfo = {};\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t\tthis.crossOrigin = 'anonymous';\n\n\t\tthis.side = ( this.options.side !== undefined ) ? this.options.side : FrontSide;\n\t\tthis.wrap = ( this.options.wrap !== undefined ) ? this.options.wrap : RepeatWrapping;\n\n\t}\n\n\tsetCrossOrigin( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t}\n\n\tsetManager( value ) {\n\n\t\tthis.manager = value;\n\n\t}\n\n\tsetMaterials( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t}\n\n\tconvert( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tconst converted = {};\n\n\t\tfor ( const mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tconst mat = materialsInfo[ mn ];\n\n\t\t\tconst covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( const prop in mat ) {\n\n\t\t\t\tlet save = true;\n\t\t\t\tlet value = mat[ prop ];\n\t\t\t\tconst lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t}\n\n\tpreload() {\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t}\n\n\tgetIndex( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t}\n\n\tgetAsArray() {\n\n\t\tlet index = 0;\n\n\t\tfor ( const mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t}\n\n\tcreate( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tcreateMaterial_( materialName ) {\n\n\t\t// Create material\n\n\t\tconst scope = this;\n\t\tconst mat = this.materialsInfo[ materialName ];\n\t\tconst params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tconst texParams = scope.getTextureParams( value, params );\n\t\t\tconst map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tif ( mapType === 'map' || mapType === 'emissiveMap' ) {\n\n\t\t\t\tmap.colorSpace = SRGBColorSpace;\n\n\t\t\t}\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( const prop in mat ) {\n\n\t\t\tconst value = mat[ prop ];\n\t\t\tlet n;\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = ColorManagement.colorSpaceToWorking( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = ColorManagement.colorSpaceToWorking( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ke':\n\n\t\t\t\t\t// Emissive using RGB values\n\t\t\t\t\tparams.emissive = ColorManagement.colorSpaceToWorking( new Color().fromArray( value ), SRGBColorSpace );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( 'map', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( 'specularMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ke':\n\n\t\t\t\t\t// Emissive map\n\n\t\t\t\t\tsetMapForType( 'emissiveMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'norm':\n\n\t\t\t\t\tsetMapForType( 'normalMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( 'bumpMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'disp':\n\n\t\t\t\t\t// Displacement texture map\n\n\t\t\t\t\tsetMapForType( 'displacementMap', value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_d':\n\n\t\t\t\t\t// Alpha map\n\n\t\t\t\t\tsetMapForType( 'alphaMap', value );\n\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( n < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tr':\n\t\t\t\t\tn = parseFloat( value );\n\n\t\t\t\t\tif ( this.options && this.options.invertTrProperty ) n = 1 - n;\n\n\t\t\t\t\tif ( n > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t}\n\n\tgetTextureParams( value, matParams ) {\n\n\t\tconst texParams = {\n\n\t\t\tscale: new Vector2( 1, 1 ),\n\t\t\toffset: new Vector2( 0, 0 )\n\n\t\t };\n\n\t\tconst items = value.split( /\\s+/ );\n\t\tlet pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-mm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.displacementBias = parseFloat( items[ pos + 1 ] );\n\t\t\tmatParams.displacementScale = parseFloat( items[ pos + 2 ] );\n\t\t\titems.splice( pos, 3 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t}\n\n\tloadTexture( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tconst manager = ( this.manager !== undefined ) ? this.manager : DefaultLoadingManager;\n\t\tlet loader = manager.getHandler( url );\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\n\t\tconst texture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n}\n\nexport { MTLLoader };\n","import {\n\tColor,\n\tLightProbe,\n\tLinearSRGBColorSpace,\n\tSphericalHarmonics3,\n\tVector3,\n\tSRGBColorSpace,\n\tNoColorSpace,\n\tHalfFloatType,\n\tDataUtils,\n\tWebGLCoordinateSystem\n} from 'three';\n\n/**\n * Utility class for creating instances of {@link LightProbe}.\n *\n * @hideconstructor\n * @three_import import { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\n */\nclass LightProbeGenerator {\n\n\t/**\n\t * Creates a light probe from the given (radiance) environment map.\n\t * The method expects that the environment map is represented as a cube texture.\n\t *\n\t * @param {CubeTexture} cubeTexture - The environment map.\n\t * @return {LightProbe} The created light probe.\n\t */\n\tstatic fromCubeTexture( cubeTexture ) {\n\n\t\t// https://www.ppsloan.org/publications/StupidSH36.pdf\n\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tconst image = cubeTexture.image[ faceIndex ];\n\n\t\t\tconst width = image.width;\n\t\t\tconst height = image.height;\n\n\t\t\tconst canvas = document.createElement( 'canvas' );\n\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\n\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, width, height );\n\n\t\t\tconst data = imageData.data;\n\n\t\t\tconst imageWidth = imageData.width; // assumed to be square\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( data[ i ] / 255, data[ i + 1 ] / 255, data[ i + 2 ] / 255 );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeTexture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = - 1 + ( pixelIndex % imageWidth + 0.5 ) * pixelSize;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1, row, - col ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1, row, col ); break;\n\n\t\t\t\t\tcase 2: coord.set( - col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( - col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( - col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n\t/**\n\t * Creates a light probe from the given (radiance) environment map.\n\t * The method expects that the environment map is represented as a cube render target.\n\t *\n\t * The cube render target must be in RGBA so `cubeRenderTarget.texture.format` must be\n\t * set to {@link RGBAFormat}.\n\t *\n\t * @async\n\t * @param {WebGPURenderer|WebGLRenderer} renderer - The renderer.\n\t * @param {CubeRenderTarget|WebGLCubeRenderTarget} cubeRenderTarget - The environment map.\n\t * @return {Promise<LightProbe>} A Promise that resolves with the created light probe.\n\t */\n\tstatic async fromCubeRenderTarget( renderer, cubeRenderTarget ) {\n\n\t\tconst flip = renderer.coordinateSystem === WebGLCoordinateSystem ? - 1 : 1;\n\n\t\t// The renderTarget must be set to RGBA in order to make readRenderTargetPixels works\n\t\tlet totalWeight = 0;\n\n\t\tconst coord = new Vector3();\n\n\t\tconst dir = new Vector3();\n\n\t\tconst color = new Color();\n\n\t\tconst shBasis = [ 0, 0, 0, 0, 0, 0, 0, 0, 0 ];\n\n\t\tconst sh = new SphericalHarmonics3();\n\t\tconst shCoefficients = sh.coefficients;\n\n\t\tconst dataType = cubeRenderTarget.texture.type;\n\t\tconst imageWidth = cubeRenderTarget.width; // assumed to be square\n\n\t\tlet data;\n\n\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\tdata = new Uint16Array( imageWidth * imageWidth * 4 );\n\n\t\t\t} else {\n\n\t\t\t\t// assuming UnsignedByteType\n\n\t\t\t\tdata = new Uint8Array( imageWidth * imageWidth * 4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let faceIndex = 0; faceIndex < 6; faceIndex ++ ) {\n\n\t\t\tif ( renderer.isWebGLRenderer ) {\n\n\t\t\t\tawait renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, data, faceIndex );\n\n\t\t\t} else {\n\n\t\t\t\tdata = await renderer.readRenderTargetPixelsAsync( cubeRenderTarget, 0, 0, imageWidth, imageWidth, 0, faceIndex );\n\n\t\t\t}\n\n\t\t\tconst pixelSize = 2 / imageWidth;\n\n\t\t\tfor ( let i = 0, il = data.length; i < il; i += 4 ) { // RGBA assumed\n\n\t\t\t\tlet r, g, b;\n\n\t\t\t\tif ( dataType === HalfFloatType ) {\n\n\t\t\t\t\tr = DataUtils.fromHalfFloat( data[ i ] );\n\t\t\t\t\tg = DataUtils.fromHalfFloat( data[ i + 1 ] );\n\t\t\t\t\tb = DataUtils.fromHalfFloat( data[ i + 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tr = data[ i ] / 255;\n\t\t\t\t\tg = data[ i + 1 ] / 255;\n\t\t\t\t\tb = data[ i + 2 ] / 255;\n\n\t\t\t\t}\n\n\t\t\t\t// pixel color\n\t\t\t\tcolor.setRGB( r, g, b );\n\n\t\t\t\t// convert to linear color space\n\t\t\t\tconvertColorToLinear( color, cubeRenderTarget.texture.colorSpace );\n\n\t\t\t\t// pixel coordinate on unit cube\n\n\t\t\t\tconst pixelIndex = i / 4;\n\n\t\t\t\tconst col = ( 1 - ( pixelIndex % imageWidth + 0.5 ) * pixelSize ) * flip;\n\n\t\t\t\tconst row = 1 - ( Math.floor( pixelIndex / imageWidth ) + 0.5 ) * pixelSize;\n\n\t\t\t\tswitch ( faceIndex ) {\n\n\t\t\t\t\tcase 0: coord.set( - 1 * flip, row, col * flip ); break;\n\n\t\t\t\t\tcase 1: coord.set( 1 * flip, row, - col * flip ); break;\n\n\t\t\t\t\tcase 2: coord.set( col, 1, - row ); break;\n\n\t\t\t\t\tcase 3: coord.set( col, - 1, row ); break;\n\n\t\t\t\t\tcase 4: coord.set( col, row, 1 ); break;\n\n\t\t\t\t\tcase 5: coord.set( - col, row, - 1 ); break;\n\n\t\t\t\t}\n\n\t\t\t\t// weight assigned to this pixel\n\n\t\t\t\tconst lengthSq = coord.lengthSq();\n\n\t\t\t\tconst weight = 4 / ( Math.sqrt( lengthSq ) * lengthSq );\n\n\t\t\t\ttotalWeight += weight;\n\n\t\t\t\t// direction vector to this pixel\n\t\t\t\tdir.copy( coord ).normalize();\n\n\t\t\t\t// evaluate SH basis functions in direction dir\n\t\t\t\tSphericalHarmonics3.getBasisAt( dir, shBasis );\n\n\t\t\t\t// accumulate\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tshCoefficients[ j ].x += shBasis[ j ] * color.r * weight;\n\t\t\t\t\tshCoefficients[ j ].y += shBasis[ j ] * color.g * weight;\n\t\t\t\t\tshCoefficients[ j ].z += shBasis[ j ] * color.b * weight;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalize\n\t\tconst norm = ( 4 * Math.PI ) / totalWeight;\n\n\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\tshCoefficients[ j ].x *= norm;\n\t\t\tshCoefficients[ j ].y *= norm;\n\t\t\tshCoefficients[ j ].z *= norm;\n\n\t\t}\n\n\t\treturn new LightProbe( sh );\n\n\t}\n\n}\n\nfunction convertColorToLinear( color, colorSpace ) {\n\n\tswitch ( colorSpace ) {\n\n\t\tcase SRGBColorSpace:\n\n\t\t\tcolor.convertSRGBToLinear();\n\t\t\tbreak;\n\n\t\tcase LinearSRGBColorSpace:\n\t\tcase NoColorSpace:\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tconsole.warn( 'WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.' );\n\t\t\tbreak;\n\n\t}\n\n\treturn color;\n\n}\n\nexport { LightProbeGenerator };\n","/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nexport var DeviceOrientationControls = function ( object ) {\n\n  var scope = this;\n\n  this.object = object;\n  this.object.rotation.reorder( 'YXZ' );\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alphaOffset = 0; // radians\n\n  var onDeviceOrientationChangeEvent = function ( event ) {\n\n    scope.deviceOrientation = event;\n\n  };\n\n  var onScreenOrientationChangeEvent = function () {\n\n    scope.screenOrientation = window.orientation || 0;\n\n  };\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setObjectQuaternion = function () {\n\n    var zee = new THREE.Vector3( 0, 0, 1 );\n\n    var euler = new THREE.Euler();\n\n    var q0 = new THREE.Quaternion();\n\n    var q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n    return function ( quaternion, alpha, beta, gamma, orient ) {\n\n      euler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n      quaternion.setFromEuler( euler ); // orient the device\n\n      quaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n      quaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n    };\n\n  }();\n\n  this.connect = function () {\n \n    onScreenOrientationChangeEvent();\n\n    window.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = true;\n\n  };\n\n  this.disconnect = function () {\n\n    window.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n    window.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n    scope.enabled = false;\n\n  };\n\n  this.update = function () {\n\n    if ( scope.enabled === false ) return;\n\n    var device = scope.deviceOrientation;\n\n    if ( device ) {\n\n      var alpha = device.alpha ? THREE.MathUtils.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\n      var beta = device.beta ? THREE.MathUtils.degToRad( device.beta ) : 0; // X'\n\n      var gamma = device.gamma ? THREE.MathUtils.degToRad( device.gamma ) : 0; // Y''\n\n      var orient = scope.screenOrientation ? THREE.MathUtils.degToRad( scope.screenOrientation ) : 0; // O\n\n      setObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\n    }\n\n\n  };\n\n  this.dispose = function () {\n\n    scope.disconnect();\n\n  };\n\n  this.connect();\n\n};\n","import * as SUPER_THREE from 'three';\nimport { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\nimport { OBB } from 'three/addons/math/OBB.js';\nimport { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\nimport { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\nimport * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\nimport { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\nimport { DeviceOrientationControls } from '../../vendor/DeviceOrientationControls.js'; // THREE.DeviceOrientationControls\n\nvar THREE = globalThis.THREE = {...SUPER_THREE};\n\n// TODO: Eventually include these only if they are needed by a component.\nTHREE.DRACOLoader = DRACOLoader;\nTHREE.GLTFLoader = GLTFLoader;\nTHREE.KTX2Loader = KTX2Loader;\nTHREE.OBJLoader = OBJLoader;\nTHREE.MTLLoader = MTLLoader;\nTHREE.OBB = OBB;\nTHREE.BufferGeometryUtils = BufferGeometryUtils;\nTHREE.LightProbeGenerator = LightProbeGenerator;\nTHREE.DeviceOrientationControls = DeviceOrientationControls;\n\nTHREE.Cache.enabled = true;\n\nexport default THREE;\n","export var AFRAME_CDN_ROOT = window.AFRAME_CDN_ROOT || 'https://cdn.aframe.io/';\nexport var AFRAME_INJECTED = 'aframe-injected';\nexport var DEFAULT_CAMERA_HEIGHT = 1.6;\nexport var DEFAULT_HANDEDNESS = 'right';\n","import debug from 'debug';\n\nvar settings = {\n  colors: {\n    debug: 'gray',\n    error: 'red',\n    info: 'gray',\n    warn: 'orange'\n  }\n};\n\n/**\n * Overwrite `debug` so we can colorize error/warning messages  and remove Time Diff\n *\n * (See issue: https://github.com/debug-js/debug/issues/582#issuecomment-1755718739)\n */\ndebug.formatArgs = formatArgs;\n\nfunction formatArgs (args) {\n  args[0] =\n    (this.useColors ? '%c' : '') +\n    this.namespace +\n    (this.useColors ? ' %c' : ' ') +\n    args[0] +\n    (this.useColors ? '%c ' : ' ');\n\n  if (!this.useColors) {\n    return;\n  }\n  this.color = getDebugNamespaceColor(this.namespace);\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit');\n\n  // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n    index++;\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Returns the type of the namespace (e.g., `error`, `warn`).\n *\n * @param {string} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {string} The type of the namespace (e.g., `warn`).\n * @api private\n */\nfunction getDebugNamespaceType (namespace) {\n  var chunks = namespace.split(':');\n\n  return chunks[chunks.length - 1];  // Return the last one\n}\n\n/**\n * Returns the color of the namespace (e.g., `orange`).\n *\n * @param {string} namespace\n *   The debug logger's namespace (e.g., `components:geometry:warn`).\n * @returns {string} The color of the namespace (e.g., `orange`).\n * @api private\n */\nfunction getDebugNamespaceColor (namespace) {\n  var type = getDebugNamespaceType(namespace);\n\n  var color = settings.colors && settings.colors[type];\n\n  return color || null;\n}\n\n/**\n * Returns `localStorage` if possible.\n *\n * This is necessary because Safari throws when a user disables\n * cookies or `localStorage` and you attempt to access it.\n *\n * @returns {localStorage}\n * @api private\n */\nfunction storage () {\n  try {\n    return window.localStorage;\n  } catch (e) {\n  }\n}\n\n/**\n * To enable console logging, type this in the Console of your Dev Tools:\n *\n *   localStorage.logs = 1\n *\n * To disable console logging:\n *\n *   localStorage.logs = 0\n *\n */\nvar ls = storage();\nif (ls && (parseInt(ls.logs, 10) || ls.logs === 'true')) {\n  debug.enable('*');\n} else {\n  debug.enable('*:error,*:info,*:warn');\n}\n\nexport default debug;\n","import debug from './debug.js';\nvar error = debug('device:error');\n\nvar supportsVRSession = false;\nvar supportsARSession = false;\n\nexport var isWebXRAvailable = navigator.xr !== undefined;\n\nif (isWebXRAvailable) {\n  var updateEnterInterfaces = function () {\n    var sceneEl = document.querySelector('a-scene');\n    if (!sceneEl) {\n      window.addEventListener('DOMContentLoaded', updateEnterInterfaces);\n      return;\n    }\n    if (sceneEl.hasLoaded) {\n      sceneEl.components['xr-mode-ui'].updateEnterInterfaces();\n    } else {\n      sceneEl.addEventListener('loaded', updateEnterInterfaces);\n    }\n  };\n  var errorHandler = function (err) {\n    error('WebXR session support error: ' + err.message);\n  };\n  if (navigator.xr.isSessionSupported) {\n    // Current WebXR spec uses a boolean-returning isSessionSupported promise\n    navigator.xr.isSessionSupported('immersive-vr').then(function (supported) {\n      supportsVRSession = supported;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n\n    navigator.xr.isSessionSupported('immersive-ar').then(function (supported) {\n      supportsARSession = supported;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else if (navigator.xr.supportsSession) {\n    // Fallback for implementations that haven't updated to the new spec yet,\n    // the old version used supportsSession which is rejected for missing\n    // support.\n    navigator.xr.supportsSession('immersive-vr').then(function () {\n      supportsVRSession = true;\n      updateEnterInterfaces();\n    }).catch(errorHandler);\n    navigator.xr.supportsSession('immersive-ar').then(function () {\n      supportsARSession = true;\n      updateEnterInterfaces();\n    }).catch(function () {});\n  } else {\n    error('WebXR has neither isSessionSupported or supportsSession?!');\n  }\n}\n\n/**\n * Determine if a headset is connected.\n */\nexport function checkHeadsetConnected () {\n  return supportsVRSession || supportsARSession;\n}\n\nexport function checkARSupport () { return supportsARSession; }\n\nexport function checkVRSupport () { return supportsVRSession; }\n\n/**\n * Checks if browser is mobile and not stand-alone dedicated vr device.\n * @returns {boolean} True if mobile browser detected.\n */\nexport var isMobile = (function () {\n  var _isMobile = false;\n  (function (a) {\n    // eslint-disable-next-line no-useless-escape\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function () { return _isMobile; };\n})();\n\n/**\n *  Detect tablet devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n */\nexport function isTablet (mockUserAgent) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n\n  var isTablet = /Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n\n  // Additional check for iPad or MacIntel with touch capabilities and not an MSStream device\n  return isTablet || isIpad();\n}\n\n/**\n *  Detect ipad devices.\n *  @param {string} mockUserAgent - Allow passing a mock user agent for testing.\n *  @param {string} mockDevicePlatform - Allow passing a mock device platform for testing.\n *  @param {string} mockDeviceTouchPoints - Allow passing a mock device touch points for testing.\n*/\nexport function isIpad (mockUserAgent, mockDevicePlatform, mockDeviceTouchPoints) {\n  var userAgent = mockUserAgent || window.navigator.userAgent;\n  var platform = mockDevicePlatform || window.navigator.platform;\n  var maxTouchPoints = mockDeviceTouchPoints || window.navigator.maxTouchPoints || 0;\n\n  return ((platform === 'iPad' || platform === 'MacIntel') && maxTouchPoints > 0 && /Macintosh|Intel|iPad|ipad/i.test(userAgent) && !window.MSStream);\n}\n\n/**\n *  Detect Apple Vision Pro devices.\n */\nexport function isAppleVisionPro () {\n  // Safari for Apple Vision Pro presents itself as a desktop browser.\n  var isMacintosh = navigator.userAgent.includes('Macintosh');\n  // Discriminates between a \"real\" desktop browser and Safari for Vision Pro.\n  var hasFiveTouchPoints = navigator.maxTouchPoints === 5;\n  // isWebXRAvailable discriminates between Vision Pro and iPad / iPhone.\n  // This will no longer work once WebXR ships in iOS / iPad OS.\n  return isMacintosh && hasFiveTouchPoints && isWebXRAvailable;\n}\n\nexport function isIOS () {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform);\n}\n\nexport function isMobileDeviceRequestingDesktopSite () {\n  return !isMobile() && !isMobileVR() && window.orientation !== undefined;\n}\n\n/**\n *  Detect Oculus Browser (standalone headset)\n */\nexport function isOculusBrowser () {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect Firefox Reality (standalone headset)\n */\nexport function isFirefoxReality () {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\n/**\n *  Detect browsers in Stand-Alone headsets\n */\nexport function isMobileVR () {\n  return isOculusBrowser() || isFirefoxReality() || isAppleVisionPro();\n}\n\nexport function isR7 () {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\n/**\n * Checks mobile device orientation.\n * @returns {boolean} True if landscape orientation.\n */\nexport function isLandscape () {\n  var orientation = window.orientation;\n  if (isR7()) { orientation += 90; }\n  return orientation === 90 || orientation === -90;\n}\n\n/**\n * Check if running in a browser or spoofed browser (bundler).\n * We need to check a node api that isn't mocked on either side.\n * `require` and `module.exports` are mocked in browser by bundlers.\n * process is polyfilled with process.browser true by Next.js with \"use client\".\n */\nexport var isBrowserEnvironment = typeof process === 'undefined' || process.browser === true;\n\n/**\n * Check if running in node on the server.\n */\nexport var isNodeEnvironment = !isBrowserEnvironment;\n","/*\n  Adapted deePool by Kyle Simpson.\n  MIT License: http://getify.mit-license.org\n*/\nvar EMPTY_SLOT = Object.freeze(Object.create(null));\n\n// Default object factory.\nfunction defaultObjectFactory () { return {}; }\n\n/**\n * Create a new pool.\n */\nexport function createPool (objectFactory) {\n  var objPool = [];\n  var nextFreeSlot = null;  // Pool location to look for a free object to use.\n\n  objectFactory = objectFactory || defaultObjectFactory;\n\n  function use () {\n    var objToUse;\n    if (nextFreeSlot === null || nextFreeSlot === objPool.length) {\n      grow(objPool.length || 5);\n    }\n    objToUse = objPool[nextFreeSlot];\n    objPool[nextFreeSlot++] = EMPTY_SLOT;\n    clearObject(objToUse);\n    return objToUse;\n  }\n\n  function recycle (obj) {\n    if (!(obj instanceof Object)) { return; }\n    if (nextFreeSlot === null || nextFreeSlot === -1) {\n      objPool[objPool.length] = obj;\n      return;\n    }\n    objPool[--nextFreeSlot] = obj;\n  }\n\n  function grow (count) {\n    var currentLength;\n    var i;\n\n    count = count === undefined ? objPool.length : count;\n    if (count > 0 && nextFreeSlot == null) {\n      nextFreeSlot = 0;\n    }\n\n    if (count > 0) {\n      currentLength = objPool.length;\n      objPool.length += Number(count);\n      for (i = currentLength; i < objPool.length; i++) {\n        // Add new obj to pool.\n        objPool[i] = objectFactory();\n      }\n    }\n\n    return objPool.length;\n  }\n\n  function size () {\n    return objPool.length;\n  }\n\n  return {\n    grow: grow,\n    pool: objPool,\n    recycle: recycle,\n    size: size,\n    use: use\n  };\n}\n\nexport function clearObject (obj) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) { obj[key] = undefined; }\n}\n\nexport function removeUnusedKeys (obj, schema) {\n  var key;\n  if (!obj || obj.constructor !== Object) { return; }\n  for (key in obj) {\n    if (!(key in schema)) {\n      delete obj[key];\n    }\n  }\n}\n","import * as THREE from 'three';\nimport debug from './debug.js';\n\nvar warn = debug('utils:coordinates:warn');\n\n// Order of coordinates parsed by coordinates.parse.\nvar COORDINATE_KEYS = ['x', 'y', 'z', 'w'];\n\n// Coordinate string regex. Handles negative, positive, and decimals.\nexport var regex = /^\\s*((-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s+){2,3}(-?\\d*\\.{0,1}\\d+(e-?\\d+)?)\\s*$/;\n\nvar whitespaceRegex = /\\s+/g;\n\n/**\n * Parses coordinates from an \"x y z\" string.\n * Example: \"3 10 -5\" to {x: 3, y: 10, z: -5}.\n *\n * @param {string} value - An \"x y z\" string.\n * @param {string} defaultVec - fallback value.\n * @param {object} target - Optional target object for coordinates.\n * @returns {object} An object with keys [x, y, z].\n */\nexport function parse (value, defaultVec, target) {\n  var coordinate;\n  var defaultVal;\n  var key;\n  var i;\n  var vec = (target && typeof target === 'object') ? target : {};\n  var x;\n  var y;\n  var z;\n  var w;\n\n  if (value && value instanceof Object) {\n    x = value.x === undefined ? defaultVec && defaultVec.x : value.x;\n    y = value.y === undefined ? defaultVec && defaultVec.y : value.y;\n    z = value.z === undefined ? defaultVec && defaultVec.z : value.z;\n    w = value.w === undefined ? defaultVec && defaultVec.w : value.w;\n    if (x !== undefined && x !== null) { vec.x = parseIfString(x); }\n    if (y !== undefined && y !== null) { vec.y = parseIfString(y); }\n    if (z !== undefined && z !== null) { vec.z = parseIfString(z); }\n    if (w !== undefined && w !== null) { vec.w = parseIfString(w); }\n    return vec;\n  }\n\n  if (value === null || value === undefined) {\n    return typeof defaultVec === 'object' ? Object.assign(vec, defaultVec) : defaultVec;\n  }\n\n  coordinate = value.trim().split(whitespaceRegex);\n  for (i = 0; i < COORDINATE_KEYS.length; i++) {\n    key = COORDINATE_KEYS[i];\n    if (coordinate[i]) {\n      vec[key] = parseFloat(coordinate[i], 10);\n    } else {\n      defaultVal = defaultVec && defaultVec[key];\n      if (defaultVal === undefined) { continue; }\n      vec[key] = parseIfString(defaultVal);\n    }\n  }\n  return vec;\n}\n\n/**\n * Stringify coordinates from an object with keys [x y z].\n * Example: {x: 3, y: 10, z: -5} to \"3 10 -5\".\n *\n * @param {object|string} data - An object with keys [x y z].\n * @returns {string} An \"x y z\" string.\n */\nexport function stringify (data) {\n  var str;\n  if (typeof data !== 'object') { return data; }\n  str = data.x + ' ' + data.y;\n  if (data.z != null) { str += ' ' + data.z; }\n  if (data.w != null) { str += ' ' + data.w; }\n  return str;\n}\n\n/**\n * Compares the values of two coordinates to check equality.\n *\n * @param {object|string} a - An object with keys [x y z].\n * @param {object|string} b - An object with keys [x y z].\n * @returns {boolean} True if both coordinates are equal, false otherwise\n */\nexport function equals (a, b) {\n  if (typeof a !== 'object' || typeof b !== 'object') {\n    return a === b;\n  }\n  return a.x === b.x && a.y === b.y && a.z === b.z && a.w === b.w;\n}\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nexport function isCoordinates (value) {\n  return regex.test(value);\n}\n\nexport function isCoordinate (value) {\n  warn('`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`');\n  return isCoordinates(value);\n}\n\nfunction parseIfString (val) {\n  if (val !== null && val !== undefined && val.constructor === String) {\n    return parseFloat(val, 10);\n  }\n  return val;\n}\n\n/**\n * Convert {x, y, z} object to three.js Vector3.\n */\nexport function toVector3 (vec3) {\n  return new THREE.Vector3(vec3.x, vec3.y, vec3.z);\n}\n","/**\n * String split with cached result.\n */\nexport var split = (function () {\n  var splitCache = {};\n\n  return function (str, delimiter) {\n    if (!(delimiter in splitCache)) { splitCache[delimiter] = {}; }\n\n    if (str in splitCache[delimiter]) { return splitCache[delimiter][str]; }\n\n    splitCache[delimiter][str] = str.split(delimiter);\n    return splitCache[delimiter][str];\n  };\n})();\n","import { split } from './split.js';\n\n/**\n * Split a delimited component property string (e.g., `material.color`) to an object\n * containing `component` name and `property` name. If there is no delimiter, just return the\n * string back.\n *\n * Uses the caching split implementation `AFRAME.utils.split`\n *\n * @param {string} str - e.g., `material.opacity`.\n * @param {string} delimiter - e.g., `.`.\n * @returns {string[]} e.g., `['material', 'opacity']`.\n */\nexport function getComponentPropertyPath (str, delimiter) {\n  delimiter = delimiter || '.';\n  var parts = split(str, delimiter);\n  if (parts.length === 1) {\n    return parts[0];\n  }\n  return parts;\n}\n\n/**\n * Get component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function getComponentProperty (el, name, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      return el.getAttribute(splitName);\n    }\n    return el.getAttribute(splitName[0])[splitName[1]];\n  }\n  return el.getAttribute(name);\n}\n\n/**\n * Set component property using encoded component name + component property name with a\n * delimiter.\n */\nexport function setComponentProperty (el, name, value, delimiter) {\n  var splitName;\n  delimiter = delimiter || '.';\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      el.setAttribute(splitName, value);\n    } else {\n      el.setAttribute(splitName[0], splitName[1], value);\n    }\n    return;\n  }\n  el.setAttribute(name, value);\n}\n","export default function forceCanvasResizeSafariMobile (canvasEl) {\n  var width = canvasEl.style.width;\n  var height = canvasEl.style.height;\n  // Taken from webvr-polyfill (https://github.com/borismus/webvr-polyfill/blob/85f657cd502ec9417bf26b87c3cb2afa6a70e079/src/util.js#L200)\n  // iOS only workaround for https://bugs.webkit.org/show_bug.cgi?id=152556\n  // By changing the size 1 pixel and restoring the previous value\n  // we trigger a size recalculation cycle.\n  canvasEl.style.width = (parseInt(width, 10) + 1) + 'px';\n  canvasEl.style.height = (parseInt(height, 10) + 1) + 'px';\n  setTimeout(function () {\n    canvasEl.style.width = width;\n    canvasEl.style.height = height;\n  }, 200);\n}\n","/* global Image, XMLHttpRequest */\nimport debug from './debug.js';\n\nvar warn = debug('utils:src-loader:warn');\n\n/**\n * Validate a texture, either as a selector or as a URL.\n * Detects whether `src` is pointing to an image or video and invokes the appropriate\n * callback.\n *\n * `src` will be passed into the callback\n *\n * @param {string|Element} src - URL or media element.\n * @param {function} isImageCb - callback if texture is an image.\n * @param {function} isVideoCb - callback if texture is a video.\n */\nexport function validateSrc (src, isImageCb, isVideoCb) {\n  checkIsImage(src, function isAnImageUrl (isImage) {\n    if (isImage) {\n      isImageCb(src);\n      return;\n    }\n    isVideoCb(src);\n  });\n}\n\n/**\n * Validates either six images as a cubemap or one image as an Equirectangular image.\n *\n * @param {string} src - A selector, image URL or comma-separated image URLs. Image URLS\n          must be wrapped by `url()`.\n * @param {function} isCubemapCb - callback if src is a cubemap.\n * @param {function} isEquirectCb - callback if src is a singular equirectangular image.\n */\nexport function validateEnvMapSrc (src, isCubemapCb, isEquirectCb) {\n  var el;\n  var cubemapSrcRegex = '';\n  var i;\n  var urls;\n  var validatedUrls = [];\n\n  if (typeof src === 'string') {\n    for (i = 0; i < 5; i++) {\n      cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\),\\\\s*)';\n    }\n    cubemapSrcRegex += '(url\\\\((?:[^\\\\)]+)\\\\)\\\\s*)';\n    urls = src.match(new RegExp(cubemapSrcRegex));\n\n    // `src` is a comma-separated list of URLs.\n    // In this case, re-use validateSrc for each side of the cube.\n    function isImageCb (url) {\n      validatedUrls.push(url);\n      if (validatedUrls.length === 6) {\n        isCubemapCb(validatedUrls);\n      }\n    }\n    if (urls) {\n      for (i = 1; i < 7; i++) {\n        validateSrc(parseUrl(urls[i]), isImageCb);\n      }\n      return;\n    }\n\n    // Single URL src\n    if (!src.startsWith('#')) {\n      var parsedSrc = parseUrl(src);\n      if (parsedSrc) {\n        validateSrc(parsedSrc, isEquirectCb);\n      } else {\n        validateSrc(src, isEquirectCb);\n      }\n      return;\n    }\n  }\n\n  // `src` is either an element or a query selector to an element (<a-cubemap> or <img>).\n  if (src.tagName) {\n    el = src;\n  } else {\n    el = validateAndGetQuerySelector(src);\n  }\n\n  if (!el) { return; }\n  if (el.tagName === 'A-CUBEMAP' && el.srcs) {\n    return isCubemapCb(el.srcs);\n  }\n  if (el.tagName === 'IMG') {\n    return isEquirectCb(el);\n  }\n  // Else if el is not a valid element, either <a-cubemap> or <img>.\n  warn('Selector \"%s\" does not point to <a-cubemap> or <img>', src);\n}\n\n/**\n * Validates six images as a cubemap, either as selector or comma-separated\n * URLs.\n *\n * @param {string} src - A selector or comma-separated image URLs. Image URLs\n          must be wrapped by `url()`.\n * @param {function} cb - callback if src is a cubemap.\n */\nexport function validateCubemapSrc (src, cb) {\n  return validateEnvMapSrc(src, cb, function isEquirectCb () {\n    warn('Expected cubemap but got image');\n  });\n}\n\n/**\n * Parses src from `url(src)`.\n * @param  {string} src - String to parse.\n * @returns {string} The parsed src, if parseable.\n */\nexport function parseUrl (src) {\n  var parsedSrc = src.match(/url\\((.+)\\)/);\n  if (!parsedSrc) { return; }\n  return parsedSrc[1];\n}\n\n/**\n * Call back whether `src` is an image.\n *\n * @param {string|Element} src - URL or element that will be tested.\n * @param {function} onResult - Callback with whether `src` is an image.\n */\nfunction checkIsImage (src, onResult) {\n  var request;\n\n  if (src.tagName) {\n    onResult(src.tagName === 'IMG');\n    return;\n  }\n  request = new XMLHttpRequest();\n\n  // Try to send HEAD request to check if image first.\n  request.open('HEAD', src);\n  request.addEventListener('load', function (event) {\n    var contentType;\n    if (request.status >= 200 && request.status < 300) {\n      contentType = request.getResponseHeader('Content-Type');\n      if (contentType == null) {\n        checkIsImageFallback(src, onResult);\n      } else {\n        if (contentType.startsWith('image')) {\n          onResult(true);\n        } else {\n          onResult(false);\n        }\n      }\n    } else {\n      checkIsImageFallback(src, onResult);\n    }\n    request.abort();\n  });\n  request.send();\n}\n\nfunction checkIsImageFallback (src, onResult) {\n  var tester = new Image();\n  tester.addEventListener('load', onLoad);\n  function onLoad () { onResult(true); }\n  tester.addEventListener('error', onError);\n  function onError () { onResult(false); }\n  tester.src = src;\n}\n\n/**\n * Query and validate a query selector,\n *\n * @param {string} selector - DOM selector.\n * @returns {object|null|undefined} Selected DOM element if exists.\n *          null if query yields no results.\n *          undefined if `selector` is not a valid selector.\n */\nfunction validateAndGetQuerySelector (selector) {\n  try {\n    var el = document.querySelector(selector);\n    if (!el) {\n      warn('No element was found matching the selector: \"%s\"', selector);\n    }\n    return el;\n  } catch (e) {  // Capture exception if it's not a valid selector.\n    warn('\"%s\" is not a valid selector', selector);\n    return undefined;\n  }\n}\n","/* global HTMLCanvasElement, HTMLVideoElement */\nimport * as THREE from 'three';\nimport * as srcLoader from './src-loader.js';\nimport debug from './debug.js';\nvar warn = debug('utils:material:warn');\n\nvar COLOR_MAPS = new Set([\n  'emissiveMap',\n  'envMap',\n  'map',\n  'specularMap'\n]);\n\nvar FILTERING_TYPES = {\n  'nearest': THREE.NearestFilter,\n  'nearest-mipmap-nearest': THREE.NearestMipMapNearestFilter,\n  'nearest-mipmap-linear': THREE.NearestMipMapLinearFilter,\n  'linear': THREE.LinearFilter,\n  'linear-mipmap-nearest': THREE.LinearMipMapNearestFilter,\n  'linear-mipmap-linear': THREE.LinearMipmapLinearFilter\n};\n\n/**\n * Set texture properties such as repeat and offset.\n *\n * @param {THREE.Texture} texture - a Texture instance.\n * @param {object} data - With keys like `repeat`.\n */\nexport function setTextureProperties (texture, data) {\n  var offset = data.offset || {x: 0, y: 0};\n  var repeat = data.repeat || {x: 1, y: 1};\n  var anisotropy = data.anisotropy || THREE.Texture.DEFAULT_ANISOTROPY;\n  var wrapS = texture.wrapS;\n  var wrapT = texture.wrapT;\n  var magFilter = FILTERING_TYPES[data.magFilter] || texture.magFilter;\n  var minFilter = FILTERING_TYPES[data.minFilter] || texture.minFilter;\n\n  // Set wrap mode to repeat only if repeat isn't 1/1. Power-of-two is required to repeat.\n  if (repeat.x !== 1 || repeat.y !== 1) {\n    wrapS = THREE.RepeatWrapping;\n    wrapT = THREE.RepeatWrapping;\n  }\n\n  // Apply texture properties\n  texture.offset.set(offset.x, offset.y);\n  texture.repeat.set(repeat.x, repeat.y);\n\n  if (texture.wrapS !== wrapS || texture.wrapT !== wrapT ||\n      texture.magFilter !== magFilter || texture.minFilter !== minFilter ||\n      texture.anisotropy !== anisotropy) {\n    texture.wrapS = wrapS;\n    texture.wrapT = wrapT;\n    texture.magFilter = magFilter;\n    texture.minFilter = minFilter;\n    texture.generateMipmaps = minFilter !== THREE.NearestFilter && minFilter !== THREE.LinearFilter;\n    texture.anisotropy = anisotropy;\n    texture.needsUpdate = true;\n  }\n}\n\n/**\n * Update `material` texture property (usually but not always `map`)\n * from `data` property (usually but not always `src`).\n *\n * @param {string} materialName\n * @param {string} dataName\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMapMaterialFromData (materialName, dataName, shader, data) {\n  var el = shader.el;\n  var material = shader.material;\n  var rendererSystem = el.sceneEl.systems.renderer;\n  var src = data[dataName];\n\n  // Because a single material / shader may have multiple textures,\n  // we need to remember the source value for this data property\n  // to avoid redundant operations which can be expensive otherwise\n  // (e.g. video texture loads).\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    // Remove the texture from the material.\n    setMap(null);\n    return;\n  }\n\n  // If material src hasn't changed, and we already have a texture,\n  // just update properties, but don't reload the texture.\n  if (src === shader.materialSrcs[materialName] &&\n      material[materialName]) {\n    setTextureProperties(material[materialName], data);\n    return;\n  }\n\n  // Remember the new src for this texture (there may be multiple).\n  shader.materialSrcs[materialName] = src;\n\n  // If the new material src is already a texture, just use it.\n  if (src instanceof THREE.Texture) { setMap(src); } else {\n    // Load texture source for the new material src.\n    // (And check if we should still use it once available in callback.)\n    el.sceneEl.systems.material.loadTextureSource(src, updateTexture);\n  }\n\n  function updateTexture (source) {\n    // If the source has been changed, don't use loaded texture.\n    if (shader.materialSrcs[materialName] !== src) { return; }\n\n    var texture = material[materialName];\n\n    // Handle removal or texture type change\n    if (texture && (source === null || !isCompatibleTexture(texture, source))) {\n      texture = null;\n    }\n\n    // Create texture if needed\n    if (!texture && source) {\n      texture = createCompatibleTexture(source);\n    }\n\n    // Update texture source and properties\n    if (texture) {\n      if (texture.source !== source) {\n        texture.source = source;\n        texture.needsUpdate = true;\n      }\n      if (COLOR_MAPS.has(materialName)) {\n        rendererSystem.applyColorCorrection(texture);\n      }\n      setTextureProperties(texture, data);\n    }\n\n    // Set map property on the material\n    setMap(texture);\n  }\n\n  function setMap (texture) {\n    // Nothing to do if texture is the same\n    if (material[materialName] === texture) {\n      return;\n    }\n\n    // Dispose old texture if present\n    if (material[materialName]) {\n      material[materialName].dispose();\n    }\n\n    material[materialName] = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Update `material.map` given `data.src`. For standard and flat shaders.\n *\n * @param {object} shader - A-Frame shader instance.\n * @param {object} data\n */\nexport function updateMap (shader, data) {\n  return updateMapMaterialFromData('map', 'src', shader, data);\n}\n\n/**\n * Updates the material's maps which give the illusion of extra geometry.\n *\n * @param {string} longType - The friendly name of the map from the component e.g. ambientOcclusionMap becomes aoMap in THREE.js\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateDistortionMap (longType, shader, data) {\n  var shortType = longType;\n  if (longType === 'ambientOcclusion') { shortType = 'ao'; }\n\n  var info = {};\n  info.src = data[longType + 'Map'];\n\n  // Pass through the repeat and offset to be handled by the material loader.\n  info.offset = data[longType + 'TextureOffset'];\n  info.repeat = data[longType + 'TextureRepeat'];\n  info.wrap = data[longType + 'TextureWrap'];\n  return updateMapMaterialFromData(shortType + 'Map', 'src', shader, info);\n}\n\n// Cache env map results as promises\nvar envMapPromises = {};\n\n/**\n * Updates the material's environment map providing reflections or refractions.\n *\n * @param {object} shader - A-Frame shader instance\n * @param {object} data\n */\nexport function updateEnvMap (shader, data) {\n  var material = shader.material;\n  var el = shader.el;\n  var materialName = 'envMap';\n  var src = data.envMap;\n  var sphericalEnvMap = data.sphericalEnvMap;\n  var refract = data.refract;\n\n  if (sphericalEnvMap) {\n    src = sphericalEnvMap;\n    warn('`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. ' +\n      'Use `envMap` property with a CubeMap or Equirectangular image instead.');\n  }\n\n  if (!shader.materialSrcs) { shader.materialSrcs = {}; }\n\n  // EnvMap has been removed\n  if (!src) {\n    // Forget the prior material src.\n    delete shader.materialSrcs[materialName];\n    material.envMap = null;\n    material.needsUpdate = true;\n    return;\n  }\n\n  // Remember the new src for this env map.\n  shader.materialSrcs[materialName] = src;\n\n  // Env map is already loading. Wait on promise.\n  if (envMapPromises[src]) {\n    envMapPromises[src].then(checkSetMap);\n    return;\n  }\n\n  // First time loading this env map.\n  envMapPromises[src] = new Promise(function (resolve) {\n    srcLoader.validateEnvMapSrc(src, function loadCubeMap (srcs) {\n      el.sceneEl.systems.material.loadCubeMapTexture(srcs, function (texture) {\n        texture.mapping = refract ? THREE.CubeRefractionMapping : THREE.CubeReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    }, function loadEquirectMap (src) {\n      el.sceneEl.systems.material.loadTexture(src, {src: src}, function (texture) {\n        texture.mapping = refract ? THREE.EquirectangularRefractionMapping : THREE.EquirectangularReflectionMapping;\n        checkSetMap(texture);\n        resolve(texture);\n      });\n    });\n  });\n\n  function checkSetMap (texture) {\n    if (shader.materialSrcs[materialName] !== src) { return; }\n    material.envMap = texture;\n    material.needsUpdate = true;\n    handleTextureEvents(el, texture);\n  }\n}\n\n/**\n * Emit event on entities on texture-related events.\n *\n * @param {Element} el - Entity.\n * @param {object} texture - three.js Texture.\n */\nexport function handleTextureEvents (el, texture) {\n  if (!texture) { return; }\n\n  el.emit('materialtextureloaded', {src: texture.image, texture: texture});\n\n  // Video events.\n  if (!texture.image || texture.image.tagName !== 'VIDEO') { return; }\n\n  texture.image.addEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n  texture.image.addEventListener('ended', emitVideoTextureEndedAll);\n  function emitVideoTextureLoadedDataAll () {\n    el.emit('materialvideoloadeddata', {src: texture.image, texture: texture});\n  }\n  function emitVideoTextureEndedAll () {\n    // Works for non-looping videos only.\n    el.emit('materialvideoended', {src: texture.image, texture: texture});\n  }\n\n  // Video source can outlive texture, so cleanup event listeners when texture is disposed\n  texture.addEventListener('dispose', function cleanupListeners () {\n    texture.image.removeEventListener('loadeddata', emitVideoTextureLoadedDataAll);\n    texture.image.removeEventListener('ended', emitVideoTextureEndedAll);\n  });\n}\n\n/**\n * Checks if a given texture type is compatible with a given source.\n *\n * @param {THREE.Texture} texture - The texture to check compatibility with\n * @param {THREE.Source} source - The source to check compatibility with\n * @returns {boolean} True if the texture is compatible with the source, false otherwise\n */\nexport function isCompatibleTexture (texture, source) {\n  if (texture.source !== source) {\n    return false;\n  }\n\n  if (source.data instanceof HTMLCanvasElement) {\n    return texture.isCanvasTexture;\n  }\n\n  if (source.data instanceof HTMLVideoElement) {\n    return texture.isVideoTexture;\n  }\n\n  return texture.isTexture && !texture.isCanvasTexture && !texture.isVideoTexture;\n}\n\nexport function createCompatibleTexture (source) {\n  var texture;\n\n  if (source.data instanceof HTMLCanvasElement) {\n    texture = new THREE.CanvasTexture();\n  } else if (source.data instanceof HTMLVideoElement) {\n    // Pass underlying video to constructor to ensure requestVideoFrameCallback is setup\n    texture = new THREE.VideoTexture(source.data);\n  } else {\n    texture = new THREE.Texture();\n  }\n\n  texture.source = source;\n  texture.needsUpdate = true;\n  return texture;\n}\n","/**\n * Utils for parsing style-like strings (e.g., \"primitive: box; width: 5; height: 4.5\").\n * Some code adapted from `style-attr` (https://github.com/joshwnj/style-attr)\n * by Josh Johnston (MIT License).\n */\nvar DASH_REGEX = /-([a-z])/g;\n\n/**\n * Deserialize style-like string into an object of properties.\n *\n * @param {string} value - HTML attribute value.\n * @param {object} [obj] - Reused object for object pooling.\n * @returns {object} Property data.\n */\nexport function parse (value, obj) {\n  var parsedData;\n  if (typeof value !== 'string') { return value; }\n  parsedData = styleParse(value, obj);\n  // The style parser returns an object { \"\" : \"test\"} when fed a string\n  if (parsedData['']) { return value; }\n  return parsedData;\n}\n\n/**\n * Serialize an object of properties into a style-like string.\n *\n * @param {object} data - Property data.\n * @returns {string}\n */\nexport function stringify (data) {\n  if (typeof data === 'string') { return data; }\n  return styleStringify(data);\n}\n\n/**\n * Converts string from hyphen to camelCase.\n *\n * @param {string} str - String to camelCase.\n * @returns {string} CamelCased string.\n */\nexport function toCamelCase (str) {\n  return str.replace(DASH_REGEX, upperCase);\n}\n\n/**\n * Split a string into chunks matching `<key>: <value>`\n */\nvar getKeyValueChunks = (function () {\n  var chunks = [];\n  var hasUnclosedUrl = /url\\([^)]+$/;\n\n  return function getKeyValueChunks (raw) {\n    var chunk = '';\n    var nextSplit;\n    var offset = 0;\n    var sep = ';';\n\n    chunks.length = 0;\n\n    while (offset < raw.length) {\n      nextSplit = raw.indexOf(sep, offset);\n      if (nextSplit === -1) { nextSplit = raw.length; }\n\n      chunk += raw.substring(offset, nextSplit);\n\n      // data URIs can contain semicolons, so make sure we get the whole thing\n      if (hasUnclosedUrl.test(chunk)) {\n        chunk += ';';\n        offset = nextSplit + 1;\n        continue;\n      }\n\n      chunks.push(chunk.trim());\n      chunk = '';\n      offset = nextSplit + 1;\n    }\n\n    return chunks;\n  };\n})();\n\n/**\n * Convert a style attribute string to an object.\n *\n * @param {object} str - Attribute string.\n * @param {object} [obj] - Object to reuse as a base, else a new one will be allocated.\n */\nfunction styleParse (str, obj) {\n  var chunks;\n  var i;\n  var item;\n  var pos;\n  var key;\n  var val;\n\n  obj = obj || {};\n\n  chunks = getKeyValueChunks(str);\n  for (i = 0; i < chunks.length; i++) {\n    item = chunks[i];\n    if (!item) { continue; }\n    // Split with `.indexOf` rather than `.split` because the value may also contain colons.\n    pos = item.indexOf(':');\n    key = item.substr(0, pos).trim();\n    val = item.substr(pos + 1).trim();\n    obj[toCamelCase(key)] = val;\n  }\n  return obj;\n}\n\n/**\n * Convert an object into an attribute string\n **/\nfunction styleStringify (obj) {\n  var key;\n  var keyCount = 0;\n  var i = 0;\n  var str = '';\n\n  for (key in obj) { keyCount++; }\n\n  for (key in obj) {\n    str += (key + ': ' + obj[key]);\n    if (i < keyCount - 1) { str += '; '; }\n    i++;\n  }\n  return str;\n}\n\nfunction upperCase (str) { return str[1].toUpperCase(); }\n","var AXIS_LABELS = ['x', 'y', 'z', 'w'];\n\n/**\n * Called on controller component `.play` handlers.\n * Check if controller matches parameters and inject tracked-controls component.\n * Handle event listeners.\n * Generate controllerconnected or controllerdisconnected events.\n *\n * @param {object} component - Tracked controls component.\n * @param {object} idPrefix - Prefix to match in gamepad id if any.\n * @param {object} queryObject - Map of values to match.\n */\nexport function checkControllerPresentAndSetup (component, idPrefix, queryObject) {\n  var el = component.el;\n  var controller;\n  var isControllerPresent = isControllerPresentWebXR;\n  var isPresent;\n\n  controller = isControllerPresent(component, idPrefix, queryObject);\n  isPresent = !!controller;\n\n  // Nothing changed, no need to do anything.\n  if (isPresent === component.controllerPresent) { return isPresent; }\n\n  component.controllerPresent = isPresent;\n\n  // Update controller presence.\n  if (isPresent) {\n    component.addEventListeners();\n    component.injectTrackedControls(controller);\n    el.emit('controllerconnected', {name: component.name, component: component});\n  } else {\n    component.removeEventListeners();\n    el.emit('controllerdisconnected', {name: component.name, component: component});\n  }\n}\n\n/**\n *\n * @param {object} component - Tracked controls component.\n * @returns {boolean} True if a controller is present.\n */\nexport function isControllerPresentWebXR (component, id, queryObject) {\n  var controllers;\n  var sceneEl = component.el.sceneEl;\n  var trackedControlsSystem = sceneEl && sceneEl.systems['tracked-controls'];\n  if (!trackedControlsSystem) { return false; }\n\n  controllers = trackedControlsSystem.controllers;\n  if (!controllers || !controllers.length) { return false; }\n\n  return findMatchingControllerWebXR(\n    controllers, id,\n    queryObject.hand, queryObject.index, queryObject.iterateControllerProfiles, queryObject.handTracking);\n}\n\nexport function findMatchingControllerWebXR (controllers, idPrefix, handedness, index, iterateProfiles, handTracking) {\n  var i;\n  var j;\n  var controller;\n  var controllerMatch = false;\n  var controllerHasHandedness;\n  var profiles;\n  for (i = 0; i < controllers.length; i++) {\n    controller = controllers[i];\n    profiles = controller.profiles;\n    if (handTracking) {\n      controllerMatch = controller.hand;\n    } else {\n      if (iterateProfiles) {\n        for (j = 0; j < profiles.length; j++) {\n          controllerMatch = profiles[j].startsWith(idPrefix);\n          if (controllerMatch) { break; }\n        }\n      } else {\n        controllerMatch = profiles.length > 0 && profiles[0].startsWith(idPrefix);\n      }\n    }\n    if (!controllerMatch) { continue; }\n    // Vive controllers are assigned handedness at runtime and it might not be always available.\n    controllerHasHandedness = controller.handedness === 'right' || controller.handedness === 'left';\n    if (controllerHasHandedness) {\n      if (controller.handedness === handedness) { return controllers[i]; }\n    } else { // Fallback to index if controller has no handedness.\n      if ((i === index)) { return controllers[i]; }\n    }\n  }\n  return undefined;\n}\n\n/**\n * Emit specific `moved` event(s) if axes changed based on original axismove event.\n *\n * @param {object} component - Controller component in use.\n * @param {object} axesMapping - For example `{thumbstick: [0, 1]}`.\n * @param {object} evt - Event to process.\n */\nexport function emitIfAxesChanged (component, axesMapping, evt) {\n  var axes;\n  var buttonType;\n  var changed;\n  var detail;\n  var j;\n\n  for (buttonType in axesMapping) {\n    axes = axesMapping[buttonType];\n\n    changed = false;\n    for (j = 0; j < axes.length; j++) {\n      if (evt.detail.changed[axes[j]]) { changed = true; }\n    }\n\n    if (!changed) { continue; }\n\n    // Axis has changed. Emit the specific moved event with axis values in detail.\n    detail = {};\n    for (j = 0; j < axes.length; j++) {\n      detail[AXIS_LABELS[j]] = evt.detail.axis[axes[j]];\n    }\n    component.el.emit(buttonType + 'moved', detail);\n  }\n}\n\n/**\n * Handle a button event and reemits the events.\n *\n * @param {string} id - id of the button.\n * @param {string} evtName - name of the reemitted event\n * @param {object} component - reference to the component\n * @param {string} hand - handedness of the controller: left or right.\n */\nexport function onButtonEvent (id, evtName, component, hand) {\n  var mapping = hand ? component.mapping[hand] : component.mapping;\n  var buttonName = mapping.buttons[id];\n  component.el.emit(buttonName + evtName);\n  if (component.updateModel) {\n    component.updateModel(buttonName, evtName);\n  }\n}\n","/* global location */\n\n/* Centralized place to reference utilities since utils is exposed to the user. */\nimport debug from './debug.js';\nimport deepAssign from 'deep-assign';\nimport * as device from './device.js';\nimport * as objectPool from './object-pool.js';\n\nvar warn = debug('utils:warn');\n\n/** @deprecated */\nexport function bind (fn) {\n  return fn.bind.apply(fn, Array.prototype.slice.call(arguments, 1));\n}\nexport * as coordinates from './coordinates.js';\nexport { default as debug } from './debug.js';\nexport * as device from './device.js';\nexport * as entity from './entity.js';\nexport { default as forceCanvasResizeSafariMobile } from './forceCanvasResizeSafariMobile.js';\nexport * as material from './material.js';\nexport * as objectPool from './object-pool.js';\nexport { split } from './split.js';\nexport * as styleParser from './styleParser.js';\nexport * as trackedControls from './tracked-controls.js';\n\nexport function checkHeadsetConnected () {\n  warn('`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`');\n  return device.checkHeadsetConnected(arguments);\n}\n\nexport function isIOS () {\n  warn('`utils.isIOS` has moved to `utils.device.isIOS`');\n  return device.isIOS(arguments);\n}\n\nexport function isMobile () {\n  warn('`utils.isMobile has moved to `utils.device.isMobile`');\n  return device.isMobile(arguments);\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttle (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * If there are multiple calls in the last interval we call the function one additional\n * time.\n * It behaves like throttle except for the very last call that gets deferred until the end of the interval.\n * This is useful when an event is used to trigger synchronization of state, and there is a need to converge\n * to the correct final state following a burst of events.\n *\n * Example use cases:\n * - synchronizing state based on the componentchanged event\n * - following a mouse pointer using the mousemove event\n * - integrating with THREE.TransformControls, via the objectChange event.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleLeadingAndTrailing (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  var deferTimer;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  var args;\n  var timerExpired = function () {\n    // Reached end of interval, call function\n    lastTime = Date.now();\n    functionToThrottle.apply(this, args);\n    deferTimer = undefined;\n  };\n\n  return function () {\n    var time = Date.now();\n    var sinceLastTime = typeof lastTime === 'undefined' ? minimumInterval : time - lastTime;\n    if (sinceLastTime >= minimumInterval) {\n      // Outside of minimum interval, call throttled function.\n      // Clear any pending timer as timeout imprecisions could otherwise cause two calls\n      // for the same interval.\n      clearTimeout(deferTimer);\n      deferTimer = undefined;\n      lastTime = time;\n      functionToThrottle.apply(null, arguments);\n    } else {\n      // Inside minimum interval, create timer if needed.\n      deferTimer = deferTimer || setTimeout(timerExpired, minimumInterval - sinceLastTime);\n      // Update args for when timer expires.\n      args = arguments;\n    }\n  };\n}\n\n/**\n * Returns throttle function that gets called at most once every interval.\n * Uses the time/timeDelta timestamps provided by the global render loop for better perf.\n *\n * @param {function} functionToThrottle\n * @param {number} minimumInterval - Minimal interval between calls (milliseconds).\n * @param {object} optionalContext - If given, bind function to throttle to this context.\n * @returns {function} Throttled function.\n */\nexport function throttleTick (functionToThrottle, minimumInterval, optionalContext) {\n  var lastTime;\n  if (optionalContext) {\n    functionToThrottle = functionToThrottle.bind(optionalContext);\n  }\n  return function (time, delta) {\n    var sinceLastTime = typeof lastTime === 'undefined' ? delta : time - lastTime;\n    if (typeof lastTime === 'undefined' || (sinceLastTime >= minimumInterval)) {\n      lastTime = time;\n      functionToThrottle(time, sinceLastTime);\n    }\n  };\n}\n\n/**\n * Returns debounce function that gets called only once after a set of repeated calls.\n *\n * @param {function} func - function to debounce\n * @param {number} wait - Time to wait for repeated function calls (milliseconds).\n * @param {boolean} immediate - Calls the function immediately regardless of if it should be waiting.\n * @returns {function} Debounced function.\n */\nexport function debounce (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this;\n    var args = arguments;\n    var later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\n/**\n * Mix the properties of source object(s) into a destination object.\n *\n * @param  {object} dest - The object to which properties will be copied.\n * @param  {...object} source - The object(s) from which properties will be copied.\n */\nexport var extend = Object.assign;\nexport var extendDeep = deepAssign;\n\nexport function clone (obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Checks if two values are equal.\n * Includes objects and arrays and nested objects and arrays.\n * Try to keep this function performant as it will be called often to see if a component\n * should be updated.\n *\n * @param {object} a - First object.\n * @param {object} b - Second object.\n * @returns {boolean} Whether two objects are deeply equal.\n */\nexport var deepEqual = (function () {\n  var arrayPool = objectPool.createPool(function () { return []; });\n\n  return function (a, b) {\n    var key;\n    var keysA;\n    var keysB;\n    var i;\n    var valA;\n    var valB;\n\n    // If not objects or arrays, compare as values.\n    if (a === undefined || b === undefined || a === null || b === null ||\n        !(a && b && (a.constructor === Object && b.constructor === Object) ||\n                    (a.constructor === Array && b.constructor === Array))) {\n      return a === b;\n    }\n\n    // Different number of keys, not equal.\n    keysA = arrayPool.use();\n    keysB = arrayPool.use();\n    keysA.length = 0;\n    keysB.length = 0;\n    for (key in a) { keysA.push(key); }\n    for (key in b) { keysB.push(key); }\n    if (keysA.length !== keysB.length) {\n      arrayPool.recycle(keysA);\n      arrayPool.recycle(keysB);\n      return false;\n    }\n\n    // Return `false` at the first sign of inequality.\n    for (i = 0; i < keysA.length; ++i) {\n      valA = a[keysA[i]];\n      valB = b[keysA[i]];\n      // Check nested array and object.\n      if ((typeof valA === 'object' || typeof valB === 'object') ||\n          (Array.isArray(valA) && Array.isArray(valB))) {\n        if (valA === valB) { continue; }\n        if (!deepEqual(valA, valB)) {\n          arrayPool.recycle(keysA);\n          arrayPool.recycle(keysB);\n          return false;\n        }\n      } else if (valA !== valB) {\n        arrayPool.recycle(keysA);\n        arrayPool.recycle(keysB);\n        return false;\n      }\n    }\n\n    arrayPool.recycle(keysA);\n    arrayPool.recycle(keysB);\n    return true;\n  };\n})();\n\n/**\n * Computes the difference between two objects.\n *\n * @param {object} a - First object to compare (e.g., oldData).\n * @param {object} b - Second object to compare (e.g., newData).\n * @returns {object}\n *   Difference object where set of keys note which values were not equal, and values are\n *   `b`'s values.\n */\nexport var diff = (function () {\n  var keys = [];\n\n  return function (a, b, targetObject) {\n    var aVal;\n    var bVal;\n    var bKey;\n    var diff;\n    var key;\n    var i;\n    var isComparingObjects;\n\n    diff = targetObject || {};\n\n    // Collect A keys.\n    keys.length = 0;\n    for (key in a) { keys.push(key); }\n\n    if (!b) { return diff; }\n\n    // Collect B keys.\n    for (bKey in b) {\n      if (keys.indexOf(bKey) === -1) {\n        keys.push(bKey);\n      }\n    }\n\n    for (i = 0; i < keys.length; i++) {\n      key = keys[i];\n      aVal = a[key];\n      bVal = b[key];\n      isComparingObjects = aVal && bVal &&\n                          aVal.constructor === Object && bVal.constructor === Object;\n      if ((isComparingObjects && !deepEqual(aVal, bVal)) ||\n          (!isComparingObjects && aVal !== bVal)) {\n        diff[key] = bVal;\n      }\n    }\n    return diff;\n  };\n})();\n\n/**\n * Returns whether we should capture this keyboard event for keyboard shortcuts.\n * @param {Event} event Event object.\n * @returns {boolean} Whether the key event should be captured.\n */\nexport function shouldCaptureKeyEvent (event) {\n  if (event.metaKey) { return false; }\n  return document.activeElement === document.body;\n}\n\n/**\n * Splits a string into an array based on a delimiter.\n *\n * @param   {string} [str='']        Source string\n * @param   {string} [delimiter=' '] Delimiter to use\n * @returns {string[]}               Array of delimited strings\n */\nexport function splitString (str, delimiter) {\n  if (typeof delimiter === 'undefined') { delimiter = ' '; }\n  // First collapse the whitespace (or whatever the delimiter is).\n  var regex = new RegExp(delimiter, 'g');\n  str = (str || '').replace(regex, delimiter);\n  // Then split.\n  return str.split(delimiter);\n}\n\n/**\n * Extracts data from the element given an object that contains expected keys.\n *\n * @param {Element} el - Source element.\n * @param {object} [defaults={}] - Object of default key-value pairs.\n * @returns {object}\n */\nexport function getElData (el, defaults) {\n  defaults = defaults || {};\n  var data = {};\n  Object.keys(defaults).forEach(copyAttribute);\n  function copyAttribute (key) {\n    if (el.hasAttribute(key)) {\n      data[key] = el.getAttribute(key);\n    }\n  }\n  return data;\n}\n\n/**\n * Retrieves querystring value.\n * @param {string} name Name of querystring key.\n * @returns {string} Value\n */\nexport function getUrlParameter (name) {\n  // eslint-disable-next-line no-useless-escape\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * Detects whether context is within iframe.\n */\nexport function isIframed () {\n  return window.top !== window.self;\n}\n\n/**\n * Finds all elements under the element that have the isScene\n * property set to true\n */\nexport function findAllScenes (el) {\n  var matchingElements = [];\n  var allElements = el.getElementsByTagName('*');\n  for (var i = 0, n = allElements.length; i < n; i++) {\n    if (allElements[i].isScene) {\n      // Element exists with isScene set.\n      matchingElements.push(allElements[i]);\n    }\n  }\n  return matchingElements;\n}\n\n// Must be at bottom to avoid circular dependency.\nexport * as srcLoader from './src-loader.js';\n","import * as constants from '../../constants/index.js';\nimport { extend } from '../../utils/index.js';\n\nexport var MOBILE_HEAD_TAGS = [\n  Meta({name: 'viewport', content: 'width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover'}),\n\n  // W3C-standardised meta tags.\n  Meta({name: 'mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'theme-color', content: 'black'})\n];\n\nexport var MOBILE_IOS_HEAD_TAGS = [\n  // iOS-specific meta tags for fullscreen when pinning to homescreen.\n  Meta({name: 'apple-mobile-web-app-capable', content: 'yes'}),\n  Meta({name: 'apple-mobile-web-app-status-bar-style', content: 'black'}),\n  Link({rel: 'apple-touch-icon', href: 'https://aframe.io/images/aframe-logo-152.png'})\n];\n\nfunction Meta (attrs) {\n  return {\n    tagName: 'meta',\n    attributes: attrs,\n    exists: function () { return document.querySelector('meta[name=\"' + attrs.name + '\"]'); }\n  };\n}\n\nfunction Link (attrs) {\n  return {\n    tagName: 'link',\n    attributes: attrs,\n    exists: function () { return document.querySelector('link[rel=\"' + attrs.rel + '\"]'); }\n  };\n}\n\n/**\n * Injects the necessary metatags in the document for mobile support:\n * 1. Prevent the user to zoom in the document.\n * 2. Ensure that window.innerWidth and window.innerHeight have the correct\n *    values and the canvas is properly scaled.\n * 3. To allow fullscreen mode when pinning a web app on the home screen on\n *    iOS.\n * Adapted from https://www.reddit.com/r/web_design/comments/3la04p/\n *\n * @param {object} scene - Scene element\n * @returns {Array}\n */\nexport var inject = function injectHeadTags (scene) {\n  var headEl = document.head;\n  var headScriptEl = headEl.querySelector('script');\n  var tag;\n  var headTags = [];\n  MOBILE_HEAD_TAGS.forEach(createAndInjectTag);\n  if (scene.isIOS) {\n    MOBILE_IOS_HEAD_TAGS.forEach(createAndInjectTag);\n  }\n  return headTags;\n\n  function createAndInjectTag (tagObj) {\n    if (!tagObj || tagObj.exists()) { return; }\n\n    tag = createTag(tagObj);\n    if (!tag) { return; }\n\n    if (headScriptEl) {\n      headScriptEl.parentNode.insertBefore(tag, headScriptEl);\n    } else {\n      headEl.appendChild(tag);\n    }\n\n    headTags.push(tag);\n  }\n};\n\nfunction createTag (tagObj) {\n  if (!tagObj || !tagObj.tagName) { return; }\n  var meta = document.createElement(tagObj.tagName);\n  meta.setAttribute(constants.AFRAME_INJECTED, '');\n  return extend(meta, tagObj.attributes);\n}\n","import * as THREE from 'three';\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\nvar styleParser = utils.styleParser;\n\nvar sceneEl;\nvar titleEl;\nvar getSceneCanvasSize;\n\nvar ATTR_NAME = 'loading-screen';\nvar LOADER_TITLE_CLASS = 'a-loader-title';\n\nexport function setup (el, getCanvasSize) {\n  sceneEl = el;\n  getSceneCanvasSize = getCanvasSize;\n  var loaderAttribute = sceneEl.hasAttribute(ATTR_NAME) ? styleParser.parse(sceneEl.getAttribute(ATTR_NAME)) : undefined;\n  var dotsColor = loaderAttribute && loaderAttribute.dotsColor || 'white';\n  var backgroundColor = loaderAttribute && loaderAttribute.backgroundColor || '#24CAFF';\n  var loaderEnabled = loaderAttribute === undefined || loaderAttribute.enabled === 'true' || loaderAttribute.enabled === undefined; // true default\n  var loaderScene;\n  var sphereGeometry;\n  var sphereMaterial;\n  var sphereMesh1;\n  var sphereMesh2;\n  var sphereMesh3;\n  var camera;\n  var clock;\n  var time;\n  var render;\n\n  if (!loaderEnabled) { return; }\n\n  // Setup Scene.\n  loaderScene = new THREE.Scene();\n  sphereGeometry = new THREE.SphereGeometry(0.20, 36, 18, 0, 2 * Math.PI, 0, Math.PI);\n  sphereMaterial = new THREE.MeshBasicMaterial({color: dotsColor});\n  sphereMesh1 = new THREE.Mesh(sphereGeometry, sphereMaterial);\n  sphereMesh2 = sphereMesh1.clone();\n  sphereMesh3 = sphereMesh1.clone();\n  camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.0005, 10000);\n  clock = new THREE.Clock();\n  time = 0;\n  render = function () {\n    sceneEl.renderer.render(loaderScene, camera);\n    time = clock.getElapsedTime() % 4;\n    sphereMesh1.visible = time >= 1;\n    sphereMesh2.visible = time >= 2;\n    sphereMesh3.visible = time >= 3;\n  };\n\n  loaderScene.background = new THREE.Color(backgroundColor);\n  loaderScene.add(camera);\n  sphereMesh1.position.set(-1, 0, -15);\n  sphereMesh2.position.set(0, 0, -15);\n  sphereMesh3.position.set(1, 0, -15);\n  camera.add(sphereMesh1);\n  camera.add(sphereMesh2);\n  camera.add(sphereMesh3);\n  setupTitle();\n\n  // Delay 200ms to avoid loader flashes.\n  setTimeout(function () {\n    if (sceneEl.hasLoaded) { return; }\n    resize(camera);\n    titleEl.style.display = 'block';\n    window.addEventListener('resize', function () { resize(camera); });\n    sceneEl.renderer.setAnimationLoop(render);\n  }, 200);\n}\n\nexport function remove () {\n  window.removeEventListener('resize', resize);\n  if (!titleEl) { return; }\n  // Hide title.\n  titleEl.style.display = 'none';\n}\n\nfunction resize (camera) {\n  var embedded = sceneEl.hasAttribute('embedded');\n  var size = getSceneCanvasSize(sceneEl.canvas, embedded, sceneEl.maxCanvasSize, sceneEl.is('vr-mode'));\n  camera.aspect = size.width / size.height;\n  camera.updateProjectionMatrix();\n   // Notify renderer of size change.\n  sceneEl.renderer.setSize(size.width, size.height, false);\n}\n\nfunction setupTitle () {\n  titleEl = document.createElement('div');\n  titleEl.className = LOADER_TITLE_CLASS;\n  titleEl.innerHTML = document.title;\n  titleEl.style.display = 'none';\n  titleEl.setAttribute(AFRAME_INJECTED, '');\n  sceneEl.appendChild(titleEl);\n}\n","/*\n  Scene index for keeping track of created scenes.\n*/\nexport default [];\n","import * as coordinates from '../utils/coordinates.js';\nimport debug from 'debug';\n\nvar warn = debug('core:propertyTypes:warn');\n\nexport var propertyTypes = {};\nvar nonCharRegex = /[,> .[\\]:]/;\nvar urlRegex = /url\\((.+)\\)/;\n\n// Built-in property types.\nregisterPropertyType('audio', '', assetParse, assetStringify);\nregisterPropertyType('array', [], arrayParse, arrayStringify, arrayEquals);\nregisterPropertyType('asset', '', assetParse, assetStringify);\nregisterPropertyType('boolean', false, boolParse);\nregisterPropertyType('color', '#FFF');\nregisterPropertyType('int', 0, intParse);\nregisterPropertyType('number', 0, numberParse);\nregisterPropertyType('map', '', assetParse, assetStringify);\nregisterPropertyType('model', '', assetParse, assetStringify);\nregisterPropertyType('selector', null, selectorParse, selectorStringify, defaultEquals, false);\nregisterPropertyType('selectorAll', null, selectorAllParse, selectorAllStringify, arrayEquals, false);\nregisterPropertyType('src', '', srcParse, assetStringify);\nregisterPropertyType('string', '');\nregisterPropertyType('time', 0, intParse);\nregisterPropertyType('vec2', {x: 0, y: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec3', {x: 0, y: 0, z: 0}, vecParse, coordinates.stringify, coordinates.equals);\nregisterPropertyType('vec4', {x: 0, y: 0, z: 0, w: 1}, vecParse, coordinates.stringify, coordinates.equals);\n\n/**\n * Register a parser for re-use such that when someone uses `type` in the schema,\n * `schema.process` will set the property `parse` and `stringify`.\n *\n * @param {string} type - Type name.\n * @param {any} [defaultValue=null] - Default value to use if component does not define default value.\n * @param {function} [parse=defaultParse] - Parse string function.\n * @param {function} [stringify=defaultStringify] - Stringify to DOM function.\n * @param {function} [equals=defaultEquals] - Equality comparator.\n * @param {boolean} [cacheable=false] - Whether or not the parsed value of a property can be cached.\n */\nexport function registerPropertyType (type, defaultValue, parse, stringify, equals, cacheable) {\n  if (type in propertyTypes) {\n    throw new Error('Property type ' + type + ' is already registered.');\n  }\n\n  propertyTypes[type] = {\n    default: defaultValue,\n    parse: parse || defaultParse,\n    stringify: stringify || defaultStringify,\n    equals: equals || defaultEquals,\n    isCacheable: cacheable !== false\n  };\n}\n\nfunction arrayParse (value) {\n  if (Array.isArray(value)) { return value; }\n  if (!value || typeof value !== 'string') { return []; }\n  return value.split(',').map(trim);\n  function trim (str) { return str.trim(); }\n}\n\nfunction arrayStringify (value) {\n  return value.join(', ');\n}\n\nfunction arrayEquals (a, b) {\n  if (!Array.isArray(a) || !Array.isArray(b)) {\n    return a === b;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; i++) {\n    // FIXME: Deep-equals for objects?\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * For general assets.\n *\n * @param {string} value - Can either be `url(<value>)`, an ID selector to an asset, or\n *   just string.\n * @returns {string} Parsed value from `url(<value>)`, src from `<someasset src>`, or\n *   just string.\n */\nfunction assetParse (value) {\n  var el;\n  var parsedUrl;\n\n  // If an element was provided (e.g. canvas or video), just return it.\n  if (typeof value !== 'string') { return value; }\n\n  // Wrapped `url()` in case of data URI.\n  parsedUrl = value.match(urlRegex);\n  if (parsedUrl) { return parsedUrl[1]; }\n\n  // ID.\n  if (value.charAt(0) === '#') {\n    el = document.getElementById(value.substring(1));\n    if (el) {\n      // Pass through media elements. If we have the elements, we don't have to call\n      // three.js loaders which would re-request the assets.\n      if (el.tagName === 'CANVAS' || el.tagName === 'VIDEO' || el.tagName === 'IMG') {\n        return el;\n      }\n      return el.getAttribute('src');\n    }\n    warn('\"' + value + '\" asset not found.');\n    return;\n  }\n\n  // Non-wrapped url().\n  return value;\n}\n\nfunction assetStringify (value) {\n  if (value.getAttribute) {\n    var id = value.getAttribute('id');\n    if (id) {\n      return '#' + value.getAttribute('id');\n    }\n    // HTMLElement without id can not be stringified, as there is no string assetParse\n    // could convert back to this exact element, using the src attribute instead.\n    return value.getAttribute('src');\n  }\n  return defaultStringify(value);\n}\n\nfunction defaultParse (value) {\n  return value;\n}\n\nfunction defaultStringify (value) {\n  if (value === null) { return 'null'; }\n  return value.toString();\n}\n\nfunction defaultEquals (a, b) {\n  return a === b;\n}\n\nfunction boolParse (value) {\n  return value !== 'false' && value !== false;\n}\n\nfunction intParse (value) {\n  return parseInt(value, 10);\n}\n\nfunction numberParse (value) {\n  return parseFloat(value, 10);\n}\n\nfunction selectorParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  if (value[0] === '#' && !nonCharRegex.test(value)) {\n    // When selecting element by ID only, use getElementById for better performance.\n    // Don't match like #myId .child.\n    return document.getElementById(value.substring(1));\n  }\n  return document.querySelector(value);\n}\n\nfunction selectorAllParse (value) {\n  if (!value) { return null; }\n  if (typeof value !== 'string') { return value; }\n  return Array.prototype.slice.call(document.querySelectorAll(value), 0);\n}\n\nfunction selectorStringify (value) {\n  if (value.getAttribute) {\n    return '#' + value.getAttribute('id');\n  }\n  return defaultStringify(value);\n}\n\nfunction selectorAllStringify (value) {\n  if (value instanceof Array) {\n    return value.map(function (element) {\n      return '#' + element.getAttribute('id');\n    }).join(', ');\n  }\n  return defaultStringify(value);\n}\n\nfunction srcParse (value) {\n  warn('`src` property type is deprecated. Use `asset` instead.');\n  return assetParse(value);\n}\n\nfunction vecParse (value, defaultValue, target) {\n  return coordinates.parse(value, defaultValue, target);\n}\n\n/**\n * Validate the default values in a schema to match their type.\n *\n * @param {string} type - Property type name.\n * @param defaultVal - Property type default value.\n * @returns {boolean} Whether default value is accurate given the type.\n */\nexport function isValidDefaultValue (type, defaultVal) {\n  if (type === 'audio' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'array' && !Array.isArray(defaultVal)) { return false; }\n  if (type === 'asset' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'boolean' && typeof defaultVal !== 'boolean') { return false; }\n  if (type === 'color' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'int' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'number' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'map' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'model' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'selector' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'selectorAll' && typeof defaultVal !== 'string' &&\n      defaultVal !== null) { return false; }\n  if (type === 'src' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'string' && typeof defaultVal !== 'string') { return false; }\n  if (type === 'time' && typeof defaultVal !== 'number') { return false; }\n  if (type === 'vec2') { return isValidDefaultCoordinate(defaultVal, 2); }\n  if (type === 'vec3') { return isValidDefaultCoordinate(defaultVal, 3); }\n  if (type === 'vec4') { return isValidDefaultCoordinate(defaultVal, 4); }\n  return true;\n}\n\n/**\n * Checks if default coordinates are valid.\n *\n * @param possibleCoordinates\n * @param {number} dimensions - 2 for 2D Vector, 3 for 3D vector.\n * @returns {boolean} Whether coordinates are parsed correctly.\n */\nexport function isValidDefaultCoordinate (possibleCoordinates, dimensions) {\n  if (possibleCoordinates === null) { return true; }\n  if (typeof possibleCoordinates !== 'object') { return false; }\n\n  if (Object.keys(possibleCoordinates).length !== dimensions) {\n    return false;\n  } else {\n    var x = possibleCoordinates.x;\n    var y = possibleCoordinates.y;\n    var z = possibleCoordinates.z;\n    var w = possibleCoordinates.w;\n\n    if (typeof x !== 'number' || typeof y !== 'number') { return false; }\n    if (dimensions > 2 && typeof z !== 'number') { return false; }\n    if (dimensions > 3 && typeof w !== 'number') { return false; }\n  }\n\n  return true;\n}\n","import * as utils from '../utils/index.js';\nimport * as PropertyTypes from './propertyTypes.js';\n\nvar debug = utils.debug;\nvar isValidDefaultValue = PropertyTypes.isValidDefaultValue;\nvar propertyTypes = PropertyTypes.propertyTypes;\n\nvar warn = debug('core:schema:warn');\n\n/**\n * A schema is classified as a schema for a single property if:\n * - `type` is defined on the schema as a string.\n * - OR `default` is defined on the schema, as a reserved keyword.\n * - OR schema is empty.\n */\nexport function isSingleProperty (schema) {\n  if ('type' in schema) {\n    return typeof schema.type === 'string';\n  }\n  return 'default' in schema;\n}\n\n/**\n * Build step to schema to use `type` to inject default value, parser, and stringifier.\n *\n * @param {object} schema\n * @param {string} componentName\n * @returns {object} Schema.\n */\nexport function process (schema, componentName) {\n  var propName;\n\n  // For single property schema, run processPropDefinition over the whole schema.\n  if (isSingleProperty(schema)) {\n    return processPropertyDefinition(schema, componentName);\n  }\n\n  // For multi-property schema, run processPropDefinition over each property definition.\n  for (propName in schema) {\n    schema[propName] = processPropertyDefinition(schema[propName], componentName);\n  }\n  return schema;\n}\n\n/**\n * Inject default value, parser, stringifier for single property.\n *\n * @param {object} propDefinition\n * @param {string} componentName\n */\nexport function processPropertyDefinition (propDefinition, componentName) {\n  var defaultVal = propDefinition.default;\n  var isCustomType;\n  var propType;\n  var typeName = propDefinition.type;\n\n  // Type inference.\n  if (!propDefinition.type) {\n    if (defaultVal !== undefined &&\n        (typeof defaultVal === 'boolean' || typeof defaultVal === 'number')) {\n      // Type inference.\n      typeName = typeof defaultVal;\n    } else if (Array.isArray(defaultVal)) {\n      typeName = 'array';\n    } else {\n      // Fall back to string.\n      typeName = 'string';\n    }\n  } else if (propDefinition.type === 'bool') {\n    typeName = 'boolean';\n  } else if (propDefinition.type === 'float') {\n    typeName = 'number';\n  }\n\n  propType = propertyTypes[typeName];\n  if (!propType) {\n    warn('Unknown property type for component `' + componentName + '`: ' + typeName);\n  }\n\n  // Fill in parse and stringify using property types.\n  isCustomType = !!propDefinition.parse;\n  propDefinition.parse = propDefinition.parse || propType.parse;\n  propDefinition.stringify = propDefinition.stringify || propType.stringify;\n  propDefinition.equals = propDefinition.equals || propType.equals;\n  propDefinition.isCacheable = propDefinition.isCacheable === true || propType.isCacheable;\n\n  // Fill in type name.\n  propDefinition.type = typeName;\n\n  // Check that default value exists.\n  if ('default' in propDefinition) {\n    // Check that default values are valid.\n    if (!isCustomType && !isValidDefaultValue(typeName, defaultVal)) {\n      warn('Default value `' + defaultVal + '` does not match type `' + typeName +\n           '` in component `' + componentName + '`');\n    }\n  } else {\n    // Fill in default value.\n    propDefinition.default = propType.default;\n  }\n\n  return propDefinition;\n}\n\n/**\n * Parse propData using schema. Use default values if not existing in propData.\n *\n * @param {object} propData - Unparsed properties.\n * @param {object} schema - Property types definition.\n * @param {boolean} getPartialData - Whether to return full component data or just the data\n *        with keys in `propData`.\n * @param {string } componentName - Name of the component, used for the property warning.\n * @param {boolean} silent - Suppress warning messages.\n */\nexport var parseProperties = (function () {\n  var propNames = [];\n\n  return function (propData, schema, getPartialData, componentName, silent) {\n    var i;\n    var propName;\n    var propDefinition;\n    var propValue;\n\n    propNames.length = 0;\n    for (propName in (getPartialData ? propData : schema)) {\n      if (getPartialData && propData[propName] === undefined) { continue; }\n      propNames.push(propName);\n    }\n\n    if (propData === null || typeof propData !== 'object') { return propData; }\n\n    // Validation errors.\n    for (propName in propData) {\n      if (propData[propName] !== undefined && !schema[propName] && !silent) {\n        warn('Unknown property `' + propName +\n             '` for component/system `' + componentName + '`.');\n      }\n    }\n\n    for (i = 0; i < propNames.length; i++) {\n      propName = propNames[i];\n      propDefinition = schema[propName];\n      propValue = propData[propName];\n      if (!(schema[propName])) { return; }\n      propData[propName] = parseProperty(propValue, propDefinition);\n    }\n\n    return propData;\n  };\n})();\n\n/**\n * Deserialize a single property.\n *\n * @param {any} value - The value to parse.\n * @param {object} propDefinition - The single property schema for the property.\n * @param {any} target - Optional target value to parse into (reuse).\n */\nexport function parseProperty (value, propDefinition, target) {\n  // Use default value if value is falsy.\n  if (value === undefined || value === null || value === '') {\n    value = propDefinition.default;\n    if (Array.isArray(value)) { value = value.slice(); }\n  }\n  // Invoke property type parser.\n  return propDefinition.parse(value, propDefinition.default, target);\n}\n\n/**\n * Serialize a group of properties.\n */\nexport function stringifyProperties (propData, schema) {\n  var propName;\n  var propDefinition;\n  var propValue;\n  var stringifiedData = {};\n  var value;\n\n  for (propName in propData) {\n    propDefinition = schema[propName];\n    propValue = propData[propName];\n    value = propValue;\n    if (typeof value === 'object') {\n      value = stringifyProperty(propValue, propDefinition);\n      if (!propDefinition) { warn('Unknown component property: ' + propName); }\n    }\n    if (value !== undefined) {\n      stringifiedData[propName] = value;\n    }\n  }\n  return stringifiedData;\n}\n\n/**\n * Serialize a single property.\n */\nexport function stringifyProperty (value, propDefinition) {\n  // This function stringifies but it's used in a context where\n  // there's always second stringification pass. By returning the original\n  // value when it's not an object we save one unnecessary call\n  // to JSON.stringify.\n  if (typeof value !== 'object') { return value; }\n  // if there's no schema for the property we use standard JSON stringify\n  if (!propDefinition || value === null) { return JSON.stringify(value); }\n  return propDefinition.stringify(value);\n}\n","/* global Node */\nimport * as schema from './schema.js';\nimport scenes from './scene/scenes.js';\nimport * as systems from './system.js';\nimport * as utils from '../utils/index.js';\n\nexport var components = {}; // Keep track of registered components.\nvar parseProperty = schema.parseProperty;\nvar processSchema = schema.process;\nvar isSingleProp = schema.isSingleProperty;\nvar stringifyProperties = schema.stringifyProperties;\nvar stringifyProperty = schema.stringifyProperty;\nvar styleParser = utils.styleParser;\nvar warn = utils.debug('core:component:warn');\n\nvar aframeScript = document.currentScript;\nvar upperCaseRegExp = new RegExp('[A-Z]+');\n\n// Object pools by component, created upon registration.\nvar objectPools = {};\nvar emptyInitialOldData = Object.freeze({});\nvar encounteredUnknownProperties = [];\n\n// Handler translating get/set into getComputedPropertyValue and recomputeProperty.\nvar attrValueProxyHandler = {\n  get: function (target, prop) {\n    return target.getComputedPropertyValue(prop);\n  },\n  set: function (target, prop, newValue) {\n    if (prop in target.schema) {\n      target.recomputeProperty(prop, newValue);\n    } else if (newValue !== undefined) {\n      target.handleUnknownProperty(prop, newValue);\n    }\n    return true;\n  }\n};\n\n/**\n * Component class definition.\n *\n * Components configure appearance, modify behavior, or add functionality to\n * entities. The behavior and appearance of an entity can be changed at runtime\n * by adding, removing, or updating components. Entities do not share instances\n * of components.\n *\n * @constructor\n * @param {object} el - Reference to the entity element.\n * @param {string} attrValue - Value of the corresponding HTML attribute.\n * @param {string} id - Optional id for differentiating multiple instances on the same entity.\n */\nexport var Component = function (el, attrValue, id) {\n  var self = this;\n\n  // If component is sceneOnly check the entity is the scene element\n  if (this.sceneOnly && !el.isScene) {\n    throw new Error('Component `' + this.name + '` can only be applied to <a-scene>');\n  }\n\n  // If component name has an id we check component type multiplicity.\n  if (id && !this.multiple) {\n    throw new Error('Trying to initialize multiple ' +\n                    'components of type `' + this.name +\n                    '`. There can only be one component of this type per entity.');\n  }\n\n  this.el = el;\n  this.id = id;\n  this.attrName = this.name + (id ? '__' + id : '');\n  this.evtDetail = {id: this.id, name: this.name};\n  this.initialized = false;\n  this.el.components[this.attrName] = this;\n  this.objectPool = objectPools[this.name];\n\n  var events = this.events;\n  this.events = {};\n  eventsBind(this, events);\n\n  // Allocate data and oldData.\n  this.attrValue = undefined;\n  if (this.isObjectBased) {\n    this.data = this.objectPool.use();\n    // Drop any properties added by dynamic schemas in previous use\n    utils.objectPool.removeUnusedKeys(this.data, this.schema);\n    this.oldData = this.objectPool.use();\n    utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n\n    this.attrValueProxy = new Proxy(this, attrValueProxyHandler);\n  } else {\n    this.data = undefined;\n    this.oldData = undefined;\n    this.attrValueProxy = undefined;\n  }\n\n  // Dynamic schema requires special handling of unknown properties to avoid false-positives.\n  this.deferUnknownPropertyWarnings = !!this.updateSchema;\n\n  // Last value passed to updateProperties.\n  // This type of throttle ensures that when a burst of changes occurs, the final change to the\n  // component always triggers an event (so a consumer of this event will end up reading the correct\n  // final state, following a burst of changes).\n  this.throttledEmitComponentChanged = utils.throttleLeadingAndTrailing(function emitChange () {\n    el.emit('componentchanged', self.evtDetail, false);\n  }, 200);\n\n  // Initial call to updateProperties, force clobber to trigger an initial computation of all properties.\n  this.updateProperties(attrValue, true);\n};\n\nComponent.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during component initialization and is only run once.\n   * Components can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Map of event names to bound event handlers that will be lifecycle-handled.\n   * Will be detached on pause / remove.\n   * Will be attached on play.\n   */\n  events: {},\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever component's data changes.\n   * Also called on component initialization when the component receives initial data.\n   *\n   * @param {object} prevData - Previous attributes of the component.\n   */\n  update: function (prevData) { /* no-op */ },\n\n  /**\n   * Update schema handler. Allows the component to dynamically change its schema.\n   * Called whenever a property marked as schemaChange changes.\n   * Also called on initialization when the component receives initial data.\n   *\n   * @param {object} data - The data causing the schema change\n   */\n  updateSchema: undefined,\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   * @param {object} camera - Camera used to render the last frame.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ },\n\n  /**\n   * Remove handler. Similar to detachedCallback.\n   * Called whenever component is removed from the entity (i.e., removeAttribute).\n   * Components can use this to reset behavior on the entity.\n   */\n  remove: function () { /* no-op */ },\n\n  /**\n   * Stringify properties if necessary.\n   *\n   * Only called from `Entity.setAttribute` for properties whose parsers accept a non-string\n   * value (e.g., selector, vec3 property types).\n   *\n   * @param {object} data - Complete component data.\n   * @returns {string}\n   */\n  stringify: function (data) {\n    var schema = this.schema;\n    if (typeof data === 'string') { return data; }\n    if (this.isSingleProperty) { return stringifyProperty(data, schema); }\n    data = stringifyProperties(data, schema);\n    return styleParser.stringify(data);\n  },\n\n  /**\n   * Write cached attribute data to the entity DOM element.\n   *\n   * @param {boolean} isDefault - Whether component is a default component. Always flush for\n   *   default components.\n   */\n  flushToDOM: function (isDefault) {\n    var attrValue = isDefault ? this.data : this.attrValue;\n    if (attrValue === null || attrValue === undefined) { return; }\n    window.HTMLElement.prototype.setAttribute.call(this.el, this.attrName,\n                                                   this.stringify(attrValue));\n  },\n\n  /**\n   * Apply new component data if data has changed (from setAttribute).\n   *\n   * @param {string} attrValue - HTML attribute value.\n   *        If undefined, use the cached attribute value and continue updating properties.\n   * @param {boolean} clobber - The previous component data is overwritten by the attrValue.\n   */\n  updateProperties: function (attrValue, clobber) {\n    var el = this.el;\n\n    // Update data\n    this.updateData(attrValue, clobber);\n\n    // Just cache the attribute if the entity has not loaded\n    // Components are not initialized until the entity has loaded\n    if (!el.hasLoaded && !el.isLoading) {\n      return;\n    }\n\n    if (this.initialized) {\n      this.callUpdateHandler();\n    } else {\n      this.initComponent();\n    }\n  },\n\n  initComponent: function () {\n    var el = this.el;\n    var initialOldData;\n\n    // Component is already being initialized.\n    if (el.initializingComponents[this.name]) { return; }\n\n    // Prevent infinite loop in case of init method setting same component on the entity.\n    el.initializingComponents[this.name] = true;\n    // Initialize component.\n    this.init();\n    this.initialized = true;\n    delete el.initializingComponents[this.name];\n\n    // For oldData, pass empty object to multiple-prop schemas or object single-prop schema.\n    // Pass undefined to rest of types.\n    initialOldData = this.isObjectBased ? emptyInitialOldData : undefined;\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n    this.storeOldData();\n    this.update(initialOldData);\n\n    // Play the component if the entity is playing.\n    if (el.isPlaying) { this.play(); }\n    el.emit('componentinitialized', this.evtDetail, false);\n  },\n\n  /**\n   * @param {string|object} attrValue - Passed argument from setAttribute.\n   * @param {boolean} clobber - Whether or not to overwrite previous data by the attrValue.\n   */\n  updateData: function (attrValue, clobber) {\n    // Single property (including object based single property)\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    // Multi-property\n    if (clobber) {\n      // Clobber. Rebuild.\n      utils.objectPool.clearObject(this.attrValue);\n      this.recomputeData(attrValue);\n      // Quirk: always update schema when clobbering, even if there are no schemaChange properties in schema.\n      this.schemaChangeRequired = !!this.updateSchema;\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    } else {\n      // AttrValue is an object, apply it to the attrValueProxy object\n      utils.extend(this.attrValueProxy, attrValue);\n    }\n\n    // Update schema if needed\n    this.updateSchemaIfNeeded(attrValue);\n  },\n\n  updateSchemaIfNeeded: function (attrValue) {\n    if (this.schemaChangeRequired && this.updateSchema) {\n      encounteredUnknownProperties.length = 0;\n\n      this.updateSchema(this.data);\n      utils.objectPool.removeUnusedKeys(this.data, this.schema);\n      this.recomputeData(attrValue);\n      this.schemaChangeRequired = false;\n\n      // Report any excess properties not valid in the updated schema\n      for (var key in this.attrValue) {\n        if (this.attrValue[key] === undefined) { continue; }\n        if (encounteredUnknownProperties.indexOf(key) !== -1) { continue; }\n        if (!(key in this.schema)) {\n          warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n        }\n      }\n    }\n\n    // Log any pending unknown property warning\n    for (var i = 0; i < encounteredUnknownProperties.length; i++) {\n      warn('Unknown property `' + encounteredUnknownProperties[i] +\n            '` for component `' + this.name + '`.');\n    }\n    encounteredUnknownProperties.length = 0;\n  },\n\n  /**\n   * Check if component should fire update and fire update lifecycle handler.\n   */\n  callUpdateHandler: function () {\n    // Don't update if properties haven't changed.\n    // Always update rotation, position, scale.\n    if (!this.isPositionRotationScale && !this.dataChanged) { return; }\n\n    // Unset dataChanged before calling update, as update might (indirectly) trigger a change\n    this.dataChanged = false;\n\n    // Flag oldData in use while inside `update()`\n    var oldData = this.oldData;\n    this.oldDataInUse = true;\n    this.update(oldData);\n    if (oldData !== this.oldData) {\n      // Recursive update replaced oldData, so clean up our copy.\n      this.objectPool.recycle(oldData);\n    }\n    this.oldDataInUse = false;\n\n    // Update oldData to match current data state for next update\n    this.storeOldData();\n\n    this.throttledEmitComponentChanged();\n  },\n\n  handleMixinUpdate: function () {\n    this.recomputeData();\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Reset value of a property to the property's default value.\n   * If single property component, reset value to component's default value.\n   *\n   * @param {string} propertyName - Name of property to reset.\n   */\n  resetProperty: function (propertyName) {\n    if (!this.isSingleProperty && !(propertyName in this.schema)) { return; }\n\n    // Reset attrValue for single- and multi-property components\n    if (propertyName) {\n      this.attrValue[propertyName] = undefined;\n    } else {\n      // Return attrValue for object based single property components\n      if (this.isObjectBased) {\n        this.objectPool.recycle(this.attrValue);\n      }\n      this.attrValue = undefined;\n    }\n    this.recomputeProperty(propertyName, undefined);\n    this.updateSchemaIfNeeded();\n    this.callUpdateHandler();\n  },\n\n  /**\n   * Extend schema of component given a partial schema.\n   *\n   * Some components might want to mutate their schema based on certain properties.\n   * e.g., Material component changes its schema based on `shader` to account for different\n   * uniforms.\n   *\n   * @param {object} schemaAddon - Schema chunk that extend base schema.\n   */\n  extendSchema: function (schemaAddon) {\n    var extendedSchema;\n    // Clone base schema.\n    extendedSchema = utils.extend({}, components[this.name].schema);\n    // Extend base schema with new schema chunk.\n    utils.extend(extendedSchema, schemaAddon);\n    this.schema = processSchema(extendedSchema);\n    this.el.emit('schemachanged', this.evtDetail);\n  },\n\n  getComputedPropertyValue: function (key) {\n    var mixinEls = this.el.mixinEls;\n\n    // Defined as attribute on entity\n    var attrValue = (this.attrValue && key) ? this.attrValue[key] : this.attrValue;\n    if (attrValue !== undefined) {\n      return attrValue;\n    }\n\n    // Inherited from mixin\n    for (var i = mixinEls.length - 1; i >= 0; i--) {\n      var mixinData = mixinEls[i].getAttribute(this.attrName);\n      if ((mixinData === null) || (key && !(key in mixinData))) { continue; }\n      return key ? mixinData[key] : mixinData;\n    }\n\n    // Schema default\n    var schemaDefault = key ? this.schema[key].default : this.schema.default;\n    return schemaDefault;\n  },\n\n  recomputeProperty: function (key, newValue) {\n    var propertySchema = key ? this.schema[key] : this.schema;\n\n    if (newValue !== undefined && newValue !== null) {\n      // Initialize attrValue ad-hoc as it's the return value of getDOMAttribute\n      // and is expected to be undefined until a property has been set.\n      if (this.attrValue === undefined && this.isObjectBased) {\n        this.attrValue = this.objectPool.use();\n      }\n\n      // Parse the new value into attrValue (re-using objects where possible)\n      var newAttrValue = key ? this.attrValue[key] : this.attrValue;\n      // Some property types (like selectors) depend on external state (e.g. DOM) during parsing and can't be cached.\n      newAttrValue = propertySchema.isCacheable ? parseProperty(newValue, propertySchema, newAttrValue) : newValue;\n      // In case the output is a string, store the unparsed value (no double parsing and helps inspector)\n      if (typeof newAttrValue === 'string') {\n        // Quirk: empty strings aren't considered values for single-property schemas\n        newAttrValue = newValue === '' ? undefined : newValue;\n      }\n      // Update attrValue with new, possibly parsed, value.\n      if (key) {\n        this.attrValue[key] = newAttrValue;\n      } else {\n        this.attrValue = newAttrValue;\n      }\n    }\n\n    // Quirk: recursive updates keep this.oldData in use, meaning oldData isn't up-to-date yet.\n    // Before the first change to data is made, provision a new oldData and update it.\n    // Cleanup of orphaned oldData objects is handled in callUpdateHandler.\n    if (this.oldDataInUse) {\n      this.oldData = this.objectPool.use();\n      utils.objectPool.removeUnusedKeys(this.oldData, this.schema);\n      this.storeOldData();\n      this.oldDataInUse = false;\n    }\n\n    var oldComputedValue = key ? this.oldData[key] : this.oldData;\n    var targetValue = key ? this.data[key] : this.data;\n\n    var newComputedValue = parseProperty(this.getComputedPropertyValue(key), propertySchema, targetValue);\n    // Quirk: Single-property arrays DO NOT share references, while arrays in multi-property components do.\n    if (propertySchema.type === 'array' && !key) {\n      newComputedValue = utils.clone(newComputedValue);\n    }\n\n    // Check if the resulting (parsed) value differs from before\n    if (!propertySchema.equals(newComputedValue, oldComputedValue)) {\n      this.dataChanged = true;\n\n      // Mark schema change required\n      if (propertySchema.schemaChange) {\n        this.schemaChangeRequired = true;\n      }\n    }\n\n    // Update data with the newly computed value.\n    if (key) {\n      this.data[key] = newComputedValue;\n    } else {\n      this.data = newComputedValue;\n    }\n\n    return newComputedValue;\n  },\n\n  handleUnknownProperty: function (key, newValue) {\n    // Persist the raw value on attrValue\n    if (this.attrValue === undefined) {\n      this.attrValue = this.objectPool.use();\n    }\n    this.attrValue[key] = newValue;\n\n    // Handle warning the user about the unknown property.\n    // Since a component might have a dynamic schema, the warning might be\n    // silenced or deferred to avoid false-positives.\n    if (this.deferUnknownPropertyWarnings) {\n      encounteredUnknownProperties.push(key);\n    } else if (!this.silenceUnknownPropertyWarnings) {\n      warn('Unknown property `' + key + '` for component `' + this.name + '`.');\n    }\n  },\n\n  /**\n   * Updates oldData to the current state of data taking care to\n   * copy and clone objects where necessary.\n   */\n  storeOldData: function () {\n    // Non object based single properties\n    if (!this.isObjectBased) {\n      this.oldData = this.data;\n      return;\n    }\n\n    // Object based single property\n    if (this.isSingleProperty) {\n      this.oldData = parseProperty(this.data, this.schema, this.oldData);\n      return;\n    }\n\n    // Object based\n    var key;\n    for (key in this.schema) {\n      if (this.data[key] === undefined) { continue; }\n      if (this.data[key] && typeof this.data[key] === 'object') {\n        this.oldData[key] = parseProperty(this.data[key], this.schema[key], this.oldData[key]);\n      } else {\n        this.oldData[key] = this.data[key];\n      }\n    }\n  },\n\n  /**\n   * Triggers a recompute of the data object.\n   *\n   * @param {string|object} attrValue - Optional additional data updates\n   */\n  recomputeData: function (attrValue) {\n    var key;\n\n    if (this.isSingleProperty) {\n      this.recomputeProperty(undefined, attrValue);\n      return;\n    }\n\n    for (key in this.schema) {\n      this.attrValueProxy[key] = undefined;\n    }\n\n    if (attrValue && typeof attrValue === 'object') {\n      utils.extend(this.attrValueProxy, attrValue);\n    } else if (typeof attrValue === 'string') {\n      // AttrValue is a style string, parse it into the attrValueProxy object\n      styleParser.parse(attrValue, this.attrValueProxy);\n    }\n  },\n\n  /**\n   * Attach events from component-defined events map.\n   */\n  eventsAttach: function () {\n    var eventName;\n    // Safety detach to prevent double-registration.\n    this.eventsDetach();\n    for (eventName in this.events) {\n      this.el.addEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Detach events from component-defined events map.\n   */\n  eventsDetach: function () {\n    var eventName;\n    for (eventName in this.events) {\n      this.el.removeEventListener(eventName, this.events[eventName]);\n    }\n  },\n\n  /**\n   * Release and free memory.\n   */\n  destroy: function () {\n    this.objectPool.recycle(this.attrValue);\n    this.objectPool.recycle(this.data);\n    this.objectPool.recycle(this.oldData);\n    this.attrValue = this.data = this.oldData = this.attrValueProxy = undefined;\n  }\n};\n\nfunction eventsBind (component, events) {\n  var eventName;\n  for (eventName in events) {\n    component.events[eventName] = events[eventName].bind(component);\n  }\n}\n\n// For testing.\nexport var registrationOrderWarnings = {};\n\n/**\n * Register a component to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component schema and lifecycle method handlers.\n * @returns {object} Component.\n */\nexport function registerComponent (name, definition) {\n  var NewComponent;\n  var proto = {};\n  var schema;\n  var schemaIsSingleProp;\n\n  // Warning if component is statically registered after the scene.\n  if (document.currentScript && document.currentScript !== aframeScript) {\n    scenes.forEach(function checkPosition (sceneEl) {\n      // Okay to register component after the scene at runtime.\n      if (sceneEl.hasLoaded) { return; }\n\n      // Check that component is declared before the scene.\n      if (document.currentScript.compareDocumentPosition(sceneEl) ===\n          Node.DOCUMENT_POSITION_FOLLOWING) { return; }\n\n      warn('The component `' + name + '` was registered in a <script> tag after the scene. ' +\n           'Component <script> tags in an HTML file should be declared *before* the scene ' +\n           'such that the component is available to entities during scene initialization.');\n\n      // For testing.\n      if (window.debug) { registrationOrderWarnings[name] = true; }\n    });\n  }\n\n  if (upperCaseRegExp.test(name) === true) {\n    warn('The component name `' + name + '` contains uppercase characters, but ' +\n         'HTML will ignore the capitalization of attribute names. ' +\n         'Change the name to be lowercase: `' + name.toLowerCase() + '`');\n  }\n\n  if (name.indexOf('__') !== -1) {\n    throw new Error('The component name `' + name + '` is not allowed. ' +\n                    'The sequence __ (double underscore) is reserved to specify an id' +\n                    ' for multiple components of the same type');\n  }\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (components[name]) {\n    throw new Error('The component `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same component ' +\n                    'or two different components of the same name.');\n  }\n\n  NewComponent = function (el, attr, id) {\n    Component.call(this, el, attr, id);\n  };\n\n  NewComponent.prototype = Object.create(Component.prototype, proto);\n  NewComponent.prototype.name = name;\n  NewComponent.prototype.isPositionRotationScale =\n    name === 'position' || name === 'rotation' || name === 'scale';\n  NewComponent.prototype.constructor = NewComponent;\n  NewComponent.prototype.system = systems && systems.systems[name];\n  NewComponent.prototype.play = wrapPlay(NewComponent.prototype.play);\n  NewComponent.prototype.pause = wrapPause(NewComponent.prototype.pause);\n\n  schema = utils.extend(processSchema(NewComponent.prototype.schema,\n                                      NewComponent.prototype.name));\n  NewComponent.prototype.isSingleProperty = schemaIsSingleProp = isSingleProp(NewComponent.prototype.schema);\n  NewComponent.prototype.isObjectBased = !schemaIsSingleProp ||\n              (schemaIsSingleProp && (isObject(schema.default) || isObject(parseProperty(undefined, schema))));\n\n  // Create object pool for class of components.\n  objectPools[name] = utils.objectPool.createPool();\n\n  components[name] = {\n    Component: NewComponent,\n    dependencies: NewComponent.prototype.dependencies,\n    before: NewComponent.prototype.before,\n    after: NewComponent.prototype.after,\n    isSingleProperty: NewComponent.prototype.isSingleProperty,\n    isObjectBased: NewComponent.prototype.isObjectBased,\n    multiple: NewComponent.prototype.multiple,\n    sceneOnly: NewComponent.prototype.sceneOnly,\n    name: name,\n    schema: schema,\n    stringify: NewComponent.prototype.stringify\n  };\n\n  // Notify all scenes\n  for (var i = 0; i < scenes.length; i++) {\n    scenes[i].emit('componentregistered', {name: name}, false);\n  }\n\n  return NewComponent;\n}\n\n/**\n * Checks if a component has defined a method that needs to run every frame.\n */\nfunction hasBehavior (component) {\n  return component.tick || component.tock;\n}\n\n/**\n * Wrapper for defined pause method.\n * Pause component by removing tick behavior and calling user's pause method.\n *\n * @param {function} pauseMethod\n * @returns {function}\n */\nfunction wrapPause (pauseMethod) {\n  return function pause () {\n    var sceneEl = this.el.sceneEl;\n    if (!this.isPlaying) { return; }\n    pauseMethod.call(this);\n    this.isPlaying = false;\n    this.eventsDetach();\n    // Remove tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.removeBehavior(this);\n  };\n}\n\n/**\n * Wrapper for defined play method.\n * Play component by adding tick behavior and calling user's play method.\n *\n * @param {function} playMethod\n * @returns {function}\n */\nfunction wrapPlay (playMethod) {\n  return function play () {\n    var sceneEl = this.el.sceneEl;\n    var shouldPlay = this.el.isPlaying && !this.isPlaying;\n    if (!this.initialized || !shouldPlay) { return; }\n    playMethod.call(this);\n    this.isPlaying = true;\n    this.eventsAttach();\n    // Add tick behavior.\n    if (!hasBehavior(this)) { return; }\n    sceneEl.addBehavior(this);\n  };\n}\n\nfunction isObject (value) {\n  return value && value.constructor === Object && !(value instanceof window.HTMLElement);\n}\n","/* global CustomEvent */\n\n/**\n * Flag indicating if A-Frame can initialize the scene or should wait.\n */\nexport var canInitializeElements = false;\n\n/**\n * Waits for the document to be ready.\n */\nexport function waitForDocumentReadyState () {\n  if (document.readyState === 'complete') {\n    emitReady();\n    return;\n  }\n\n  document.addEventListener('readystatechange', function onReadyStateChange () {\n    if (document.readyState !== 'complete') { return; }\n    document.removeEventListener('readystatechange', onReadyStateChange);\n    emitReady();\n  });\n}\n\n/**\n * Signals A-Frame that everything is ready to initialize.\n */\nexport function emitReady () {\n  if (canInitializeElements) { return; }\n  canInitializeElements = true;\n  setTimeout(function () {\n    document.dispatchEvent(new CustomEvent('aframeready'));\n  });\n}\n\n/** Resets the canInitializeElements flag, used for testing */\nexport function reset () {\n  canInitializeElements = false;\n}\n","import { parseProperties, parseProperty, process as processSchema, isSingleProperty as isSingleProp } from './schema.js';\nimport * as components from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as ready from './readyState.js';\n\nvar styleParser = utils.styleParser;\n\nexport var systems = {};  // Keep track of registered systems.\n\n/**\n * System class definition.\n *\n * Systems provide global scope and services to a group of instantiated components of the\n * same class. They can also help abstract logic away from components such that components\n * only have to worry about data.\n *\n * For example, a physics component that creates a physics world that oversees\n * all entities with a physics or rigid body component.\n *\n * TODO: Have the System prototype reuse the Component prototype. Most code is copied\n * and some pieces are missing from the Component facilities (e.g., attribute caching,\n * setAttribute behavior).\n *\n * @constructor\n * @param {Element} sceneEl - Handle to the scene element where system applies to.\n * @property {string} name - Name that system is registered under.\n */\nexport var System = function (sceneEl) {\n  var component = components && components.components[this.name];\n\n  // Set reference to scene.\n  this.el = sceneEl;\n  this.sceneEl = sceneEl;\n\n  // Set reference to matching component (if exists).\n  if (component) { component.Component.prototype.system = this; }\n\n  // Process system configuration.\n  this.buildData();\n  this.init();\n  this.update({});\n};\n\nSystem.prototype = {\n  /**\n   * Schema to configure system.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Called during scene initialization and is only run once.\n   * Systems can use this to set initial state.\n   */\n  init: function () { /* no-op */ },\n\n  /**\n   * Update handler. Called during scene attribute updates.\n   * Systems can use this to dynamically update their state.\n   */\n  update: function (oldData) { /* no-op */ },\n\n  /**\n   * Build data and call update handler.\n   *\n   * @private\n   */\n  updateProperties: function (rawData) {\n    var oldData = this.data;\n    if (Object.keys(this.schema).length === 0) { return; }\n    this.buildData(rawData);\n    this.update(oldData);\n  },\n\n  /**\n   * Parse data.\n   */\n  buildData: function (rawData) {\n    var schema = this.schema;\n    if (Object.keys(schema).length === 0) { return; }\n    rawData = rawData || window.HTMLElement.prototype.getAttribute.call(this.sceneEl, this.name);\n    if (isSingleProp(schema)) {\n      this.data = parseProperty(rawData, schema);\n    } else {\n      this.data = parseProperties(styleParser.parse(rawData) || {}, schema, false, this.name);\n    }\n  },\n\n  /**\n   * Tick handler.\n   * Called on each tick of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tick: undefined,\n\n  /**\n   * Tock handler.\n   * Called on each tock of the scene render loop.\n   * Affected by play and pause.\n   *\n   * @param {number} time - Scene tick time.\n   * @param {number} timeDelta - Difference in current render time and previous render time.\n   */\n  tock: undefined,\n\n  /**\n   * Called to start any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  play: function () { /* no-op */ },\n\n  /**\n   * Called to stop any dynamic behavior (e.g., animation, AI, events, physics).\n   */\n  pause: function () { /* no-op */ }\n};\n\n/**\n * Registers a system to A-Frame.\n *\n * @param {string} name - Component name.\n * @param {object} definition - Component property and methods.\n */\nexport function registerSystem (name, definition) {\n  var i;\n  var NewSystem;\n  var proto = {};\n  var scenes = utils.findAllScenes(document);\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (systems[name]) {\n    throw new Error('The system `' + name + '` has been already registered. ' +\n                    'Check that you are not loading two versions of the same system ' +\n                    'or two different systems of the same name.');\n  }\n  NewSystem = function (sceneEl) { System.call(this, sceneEl); };\n  NewSystem.prototype = Object.create(System.prototype, proto);\n  NewSystem.prototype.name = name;\n  NewSystem.prototype.constructor = NewSystem;\n  NewSystem.prototype.schema = utils.extend(processSchema(NewSystem.prototype.schema));\n  systems[name] = NewSystem;\n\n  // Initialize systems for existing scenes\n  if (ready.canInitializeElements) {\n    for (i = 0; i < scenes.length; i++) { scenes[i].initSystem(name); }\n  }\n}\n","/* global customElements, CustomEvent, HTMLElement, MutationObserver */\nimport * as utils from '../utils/index.js';\nimport * as readyState from './readyState.js';\n\nvar warn = utils.debug('core:a-node:warn');\n\nexport var knownTags = {\n  'a-scene': true,\n  'a-assets': true,\n  'a-assets-items': true,\n  'a-cubemap': true,\n  'a-mixin': true,\n  'a-node': true,\n  'a-entity': true\n};\n\nfunction isANode (node) {\n  return node.tagName.toLowerCase() in knownTags || node.isANode;\n}\n\n/**\n * Base class for A-Frame that manages loading of objects.\n *\n * Nodes can be modified using mixins.\n * Nodes emit a `loaded` event when they and their children have initialized.\n */\nexport class ANode extends HTMLElement {\n  constructor () {\n    super();\n    this.computedMixinStr = '';\n    this.hasLoaded = false;\n    this.isANode = true;\n    this.mixinEls = [];\n  }\n\n  connectedCallback () {\n    // Defer if not ready to initialize.\n    if (!readyState.canInitializeElements) {\n      document.addEventListener('aframeready', this.connectedCallback.bind(this));\n      return;\n    }\n    this.doConnectedCallback();\n  }\n\n  doConnectedCallback () {\n    var mixins;\n\n    this.sceneEl = this.closestScene();\n\n    if (!this.sceneEl) {\n      warn('You are attempting to attach <' + this.tagName + '> outside of an A-Frame ' +\n           'scene. Append this element to `<a-scene>` instead.');\n    }\n\n    this.hasLoaded = false;\n    this.emit('nodeready', undefined, false);\n\n    if (!this.isMixin) {\n      mixins = this.getAttribute('mixin');\n      if (mixins) { this.updateMixins(mixins); }\n    }\n  }\n\n  /**\n   * Handle mixin.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n    if (newVal === this.computedMixinStr) { return; }\n\n    if (attr === 'mixin' && !this.isMixin) {\n      this.updateMixins(newVal, oldVal);\n    }\n  }\n\n /**\n  * Returns the first scene by traversing up the tree starting from and\n  * including receiver element.\n  */\n  closestScene () {\n    var element = this;\n    while (element) {\n      if (element.isScene) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  /**\n   * Returns first element matching a selector by traversing up the tree starting\n   * from and including receiver element.\n   *\n   * @param {string} selector - Selector of element to find.\n   */\n  closest (selector) {\n    var matches = this.matches || this.mozMatchesSelector ||\n      this.msMatchesSelector || this.oMatchesSelector || this.webkitMatchesSelector;\n    var element = this;\n    while (element) {\n      if (matches.call(element, selector)) { break; }\n      element = element.parentElement;\n    }\n    return element;\n  }\n\n  disconnectedCallback () {\n    this.hasLoaded = false;\n  }\n\n  /**\n   * Wait for children to load, if any.\n   * Then emit `loaded` event and set `hasLoaded`.\n   */\n  load (cb, childFilter) {\n    var children;\n    var childrenLoaded;\n    var self = this;\n\n    if (this.hasLoaded) { return; }\n\n    // Default to waiting for all nodes.\n    childFilter = childFilter || isANode;\n    // Wait for children to load (if any), then load.\n    children = this.getChildren();\n    childrenLoaded = children.filter(childFilter).map(function (child) {\n      return new Promise(function waitForLoaded (resolve, reject) {\n        if (child.hasLoaded) { return resolve(); }\n        child.addEventListener('loaded', resolve);\n        child.addEventListener('error', reject);\n      });\n    });\n\n    Promise.allSettled(childrenLoaded).then(function emitLoaded (results) {\n      results.forEach(function checkResultForError (result) {\n        if (result.status === 'rejected') {\n          // An \"error\" event has already been fired by THREE.js loader,\n          // so we don't need to fire another one.\n          // A warning explaining the consequences of the error is sufficient.\n          warn('Rendering scene with errors on node: ', result.reason.target);\n        }\n      });\n\n      self.isLoading = true;\n      self.setupMutationObserver();\n      if (cb) { cb(); }\n      self.isLoading = false;\n      self.hasLoaded = true;\n      // loaded-private is an event analog to loaded that gives A-Frame an opportunity to manage internal\n      // affairs before the publicly loaded event fires and corresponding handlers executed.\n      self.emit('loaded-private', undefined, false);\n      self.emit('loaded', undefined, false);\n    });\n  }\n\n  /**\n   * With custom elements V1 attributeChangedCallback only fires\n   * for attributes defined statically via observedAttributes.\n   * One can assign any arbitrary components to an A-Frame entity\n   * hence we can't know the list of attributes beforehand.\n   * This function setup a mutation observer to keep track of the entity attribute changes\n   * in the DOM and update components accordingly.\n   */\n  setupMutationObserver () {\n    var self = this;\n    var observerConfig = {attributes: true, attributeOldValue: true};\n    var observer = new MutationObserver(function callAttributeChangedCallback (mutationList) {\n      var i;\n      for (i = 0; i < mutationList.length; i++) {\n        if (mutationList[i].type === 'attributes') {\n          var attributeName = mutationList[i].attributeName;\n          var newValue = window.HTMLElement.prototype.getAttribute.call(self, attributeName);\n          var oldValue = mutationList[i].oldValue;\n          self.attributeChangedCallback(attributeName, oldValue, newValue);\n        }\n      }\n    });\n    observer.observe(this, observerConfig);\n  }\n\n  getChildren () {\n    return Array.prototype.slice.call(this.children, 0);\n  }\n\n  /**\n   * Unregister old mixins and listeners.\n   * Register new mixins and listeners.\n   * Registering means to update `this.mixinEls` with listeners.\n   */\n  updateMixins (newMixins, oldMixins) {\n    var newMixinIdArray = ANode.newMixinIdArray;\n    var oldMixinIdArray = ANode.oldMixinIdArray;\n    var mixinIds = ANode.mixinIds;\n\n    var i;\n    var newMixinIds;\n    var oldMixinIds;\n\n    newMixinIdArray.length = 0;\n    oldMixinIdArray.length = 0;\n    newMixinIds = newMixins ? utils.split(newMixins.trim(), /\\s+/) : newMixinIdArray;\n    oldMixinIds = oldMixins ? utils.split(oldMixins.trim(), /\\s+/) : oldMixinIdArray;\n\n    mixinIds.newMixinIds = newMixinIds;\n    mixinIds.oldMixinIds = oldMixinIds;\n\n    // Unregister old mixins.\n    for (i = 0; i < oldMixinIds.length; i++) {\n      if (newMixinIds.indexOf(oldMixinIds[i]) === -1) {\n        this.unregisterMixin(oldMixinIds[i]);\n      }\n    }\n\n    // Register new mixins.\n    this.computedMixinStr = '';\n    this.mixinEls.length = 0;\n    for (i = 0; i < newMixinIds.length; i++) {\n      this.registerMixin(newMixinIds[i]);\n    }\n\n    // Update DOM. Keep track of `computedMixinStr` to not recurse back here after\n    // update.\n    if (this.computedMixinStr) {\n      this.computedMixinStr = this.computedMixinStr.trim();\n      window.HTMLElement.prototype.setAttribute.call(this, 'mixin',\n                                                     this.computedMixinStr);\n    }\n\n    if (newMixinIds.length === 0) {\n      window.HTMLElement.prototype.removeAttribute.call(this, 'mixin');\n    }\n\n    return mixinIds;\n  }\n\n  /**\n   * From mixin ID, add mixin element to `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to register.\n   */\n  registerMixin (mixinId) {\n    var compositedMixinIds;\n    var i;\n    var mixin;\n    var mixinEl = document.getElementById(mixinId);\n\n    if (!mixinEl) {\n      warn('No mixin was found with id `%s`', mixinId);\n      return;\n    }\n\n    // Register composited mixins (if mixin has mixins).\n    mixin = mixinEl.getAttribute('mixin');\n    if (mixin) {\n      compositedMixinIds = utils.split(mixin.trim(), /\\s+/);\n      for (i = 0; i < compositedMixinIds.length; i++) {\n        this.registerMixin(compositedMixinIds[i]);\n      }\n    }\n\n    // Register mixin.\n    this.computedMixinStr = this.computedMixinStr + ' ' + mixinEl.id;\n    this.mixinEls.push(mixinEl);\n  }\n\n  setAttribute (attr, newValue) {\n    if (attr === 'mixin') { this.updateMixins(newValue); }\n    window.HTMLElement.prototype.setAttribute.call(this, attr, newValue);\n  }\n\n  /**\n   * Removes the mixin element from `mixinEls`.\n   *\n   * @param {string} mixinId - ID of the mixin to remove.\n   */\n  unregisterMixin (mixinId) {\n    var i;\n    var mixinEls = this.mixinEls;\n    var mixinEl;\n    for (i = 0; i < mixinEls.length; ++i) {\n      mixinEl = mixinEls[i];\n      if (mixinId === mixinEl.id) {\n        mixinEls.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  /**\n   * Emit a DOM event.\n   *\n   * @param {string} name - Name of event.\n   * @param {object} [detail={}] - Custom data to pass as `detail` to the event.\n   * @param {boolean} [bubbles=true] - Whether the event should bubble.\n   * @param {object} [extraData] - Extra data to pass to the event, if any.\n   */\n  emit (name, detail, bubbles, extraData) {\n    var data = ANode.evtData;\n\n    if (bubbles === undefined) { bubbles = true; }\n    data.bubbles = !!bubbles;\n    data.detail = detail;\n\n    // If extra data is present, we need to create a new object.\n    if (extraData) { data = utils.extend({}, extraData, data); }\n\n    this.dispatchEvent(new CustomEvent(name, data));\n  }\n}\n\nANode.evtData = {};\nANode.newMixinIdArray = [];\nANode.oldMixinIdArray = [];\nANode.mixinIds = {};\n\ncustomElements.define('a-node', ANode);\n","/* global customElements */\nimport * as THREE from 'three';\nimport { ANode } from './a-node.js';\nimport { components as COMPONENTS } from './component.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug('core:a-entity:debug');\nvar warn = utils.debug('core:a-entity:warn');\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\nvar OBJECT3D_COMPONENTS = ['position', 'rotation', 'scale', 'visible'];\nvar ONCE = {once: true};\n\n/**\n * Entity is a container object that components are plugged into to comprise everything in\n * the scene. In A-Frame, they inherently have position, rotation, and scale.\n *\n * To be able to take components, the scene element inherits from the entity definition.\n *\n * @property {object} components - entity's currently initialized components.\n * @property {THREE.Object3D} object3D - three.js object.\n * @property {string[]} states\n * @property {boolean} isPlaying - false if dynamic behavior of the entity is paused.\n */\nexport class AEntity extends ANode {\n  constructor () {\n    super();\n    this.components = {};\n    // To avoid double initializations and infinite loops.\n    this.initializingComponents = {};\n    this.componentsToUpdate = {};\n    this.isEntity = true;\n    this.isPlaying = false;\n    this.object3D = new THREE.Group();\n    this.object3D.rotation.order = 'YXZ';\n    this.object3D.el = this;\n    this.object3DMap = {};\n    this.parentEl = null;\n    this.rotationObj = {};\n    this.states = [];\n  }\n\n  /**\n   * Handle changes coming from the browser DOM inspector.\n   */\n  attributeChangedCallback (attr, oldVal, newVal) {\n    var component = this.components[attr];\n\n    super.attributeChangedCallback();\n    // If the empty string is passed by the component initialization\n    // logic we ignore the component update.\n    if (component && component.justInitialized && newVal === '') {\n      delete component.justInitialized;\n      return;\n    }\n    // When a component is removed after calling el.removeAttribute('material')\n    if (!component && newVal === null) { return; }\n    this.setEntityAttribute(attr, oldVal, newVal);\n  }\n\n  doConnectedCallback () {\n    var self = this;  // Component.\n    var assetsEl;  // Asset management system element.\n    var sceneEl;\n\n    // ANode method.\n    super.doConnectedCallback();\n\n    sceneEl = this.sceneEl;\n\n    this.addToParent();\n\n    // Don't .load() scene on attachedCallback.\n    if (this.isScene) { return; }\n\n    // Gracefully not error when outside of <a-scene> (e.g., tests).\n    if (!sceneEl) {\n      this.load();\n      return;\n    }\n\n    // Wait for asset management system to finish before loading.\n    assetsEl = sceneEl.querySelector('a-assets');\n    if (assetsEl && !assetsEl.hasLoaded) {\n      assetsEl.addEventListener('loaded', function () { self.load(); });\n      return;\n    }\n    this.load();\n  }\n\n  /**\n   * Tell parent to remove this element's object3D from its object3D.\n   * Do not call on scene element because that will cause a call to document.body.remove().\n   */\n  disconnectedCallback () {\n    var componentName;\n\n    if (!this.parentEl) { return; }\n\n    // Remove components.\n    for (componentName in this.components) {\n      this.removeComponent(componentName, false);\n    }\n\n    if (this.isScene) { return; }\n\n    this.removeFromParent();\n    super.disconnectedCallback();\n\n    // Remove cyclic reference.\n    this.object3D.el = null;\n  }\n\n  getObject3D (type) {\n    return this.object3DMap[type];\n  }\n\n  /**\n   * Set a THREE.Object3D into the map.\n   *\n   * @param {string} type - Developer-set name of the type of object, will be unique per type.\n   * @param {THREE.Object3D} obj - A THREE.Object3D.\n   */\n  setObject3D (type, obj) {\n    var oldObj;\n    var self = this;\n\n    if (!(obj instanceof THREE.Object3D)) {\n      throw new Error(\n        '`Entity.setObject3D` was called with an object that was not an instance of ' +\n        'THREE.Object3D.'\n      );\n    }\n\n    // Remove existing object of the type.\n    oldObj = this.getObject3D(type);\n    if (oldObj) { this.object3D.remove(oldObj); }\n\n    // Set references to A-Frame entity.\n    obj.el = this;\n    if (obj.children.length) {\n      obj.traverse(function bindEl (child) {\n        child.el = self;\n      });\n    }\n\n    // Add.\n    this.object3D.add(obj);\n    this.object3DMap[type] = obj;\n    this.emit('object3dset', {object: obj, type: type});\n  }\n\n  /**\n   * Remove object from scene and entity object3D map.\n   */\n  removeObject3D (type) {\n    var obj = this.getObject3D(type);\n    if (!obj) {\n      warn('Tried to remove `Object3D` of type:', type, 'which was not defined.');\n      return;\n    }\n    this.object3D.remove(obj);\n    delete this.object3DMap[type];\n    this.emit('object3dremove', {type: type});\n  }\n\n  /**\n   * Gets or creates an object3D of a given type.\n   *\n   * @param {string} type - Type of the object3D.\n   * @param {string} Constructor - Constructor to use to create the object3D if needed.\n   * @returns {object}\n   */\n  getOrCreateObject3D (type, Constructor) {\n    var object3D = this.getObject3D(type);\n    if (!object3D && Constructor) {\n      object3D = new Constructor();\n      this.setObject3D(type, object3D);\n    }\n    warn('`getOrCreateObject3D` has been deprecated. Use `setObject3D()` ' +\n         'and `object3dset` event instead.');\n    return object3D;\n  }\n\n  /**\n   * Add child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  add (el) {\n    if (!el.object3D) {\n      throw new Error(\"Trying to add an element that doesn't have an `object3D`\");\n    }\n    this.object3D.add(el.object3D);\n    this.emit('child-attached', {el: el});\n  }\n\n  /**\n   * Tell parentNode to add this entity to itself.\n   */\n  addToParent () {\n    var parentNode = this.parentEl = this.parentNode;\n\n    // `!parentNode` check primarily for unit tests.\n    if (!parentNode || !parentNode.add || this.attachedToParent) { return; }\n\n    parentNode.add(this);\n    this.attachedToParent = true;  // To prevent multiple attachments to same parent.\n  }\n\n  /**\n   * Tell parentNode to remove this entity from itself.\n   */\n  removeFromParent () {\n    var parentEl = this.parentEl;\n    this.parentEl.remove(this);\n    this.attachedToParent = false;\n    this.parentEl = null;\n    parentEl.emit('child-detached', {el: this});\n  }\n\n  load () {\n    var self = this;\n\n    if (this.hasLoaded || !this.parentEl) { return; }\n\n    super.load.call(this, function entityLoadCallback () {\n      // Check if entity was detached while it was waiting to load.\n      if (!self.parentEl) { return; }\n\n      self.updateComponents();\n      if (self.isScene || self.parentEl.isPlaying) { self.play(); }\n    });\n  }\n\n  /**\n   * Remove child entity.\n   *\n   * @param {Element} el - Child entity.\n   */\n  remove (el) {\n    if (el) {\n      this.object3D.remove(el.object3D);\n    } else {\n      this.parentNode.removeChild(this);\n    }\n  }\n\n  /**\n   * @returns {Array<Element>} Direct children that are entities.\n   */\n  getChildEntities () {\n    var children = this.children;\n    var childEntities = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      if (child instanceof AEntity) {\n        childEntities.push(child);\n      }\n    }\n\n    return childEntities;\n  }\n\n  /**\n   * Initialize component.\n   *\n   * @param {string} attrName - Attribute name associated to the component.\n   * @param {object} data - Component data\n   * @param {boolean} isDependency - True if the component is a dependency.\n   */\n  initComponent (attrName, data, isDependency) {\n    var component;\n    var componentId;\n    var componentInfo;\n    var componentName;\n    var isComponentDefined;\n\n    componentInfo = utils.split(attrName, MULTIPLE_COMPONENT_DELIMITER);\n    componentName = componentInfo[0];\n    componentId = componentInfo.length > 2\n      ? componentInfo.slice(1).join('__')\n      : componentInfo[1];\n\n    // Not a registered component.\n    if (!COMPONENTS[componentName]) { return; }\n\n    // Component is not a dependency and is undefined.\n    // If a component is a dependency, then it is okay to have no data.\n    isComponentDefined = checkComponentDefined(this, attrName) ||\n                         data !== undefined;\n    if (!isComponentDefined && !isDependency) { return; }\n\n    // Component already initialized.\n    if (attrName in this.components) { return; }\n\n    // Initialize dependencies first\n    this.initComponentDependencies(componentName);\n\n    // Initialize component\n    component = new COMPONENTS[componentName].Component(this, data, componentId);\n    if (this.isPlaying) { component.play(); }\n\n    // Components are reflected in the DOM as attributes but the state is not shown\n    // hence we set the attribute to empty string.\n    // The flag justInitialized is for attributeChangedCallback to not overwrite\n    // the component with the empty string.\n    if (!this.hasAttribute(attrName)) {\n      component.justInitialized = true;\n      window.HTMLElement.prototype.setAttribute.call(this, attrName, '');\n    }\n\n    debug('Component initialized: %s', attrName);\n  }\n\n  /**\n   * Initialize dependencies of a component.\n   *\n   * @param {string} name - Root component name.\n   */\n  initComponentDependencies (name) {\n    var self = this;\n    var component = COMPONENTS[name];\n    var dependencies;\n    var i;\n\n    // Not a component.\n    if (!component) { return; }\n\n    // No dependencies.\n    dependencies = COMPONENTS[name].dependencies;\n\n    if (!dependencies) { return; }\n\n    // Initialize dependencies.\n    for (i = 0; i < dependencies.length; i++) {\n      // Call getAttribute to initialize the data from the DOM.\n      self.initComponent(\n        dependencies[i],\n        window.HTMLElement.prototype.getAttribute.call(self, dependencies[i]) || undefined,\n        true\n      );\n    }\n  }\n\n  removeComponent (name, destroy) {\n    var component;\n\n    component = this.components[name];\n    if (!component) { return; }\n\n    // Wait for component to initialize.\n    if (!component.initialized) {\n      this.addEventListener('componentinitialized', function tryRemoveLater (evt) {\n        if (evt.detail.name !== name) { return; }\n        this.removeComponent(name, destroy);\n        this.removeEventListener('componentinitialized', tryRemoveLater);\n      });\n      return;\n    }\n\n    component.pause();\n    component.remove();\n\n    // Keep component attached to entity in case of just full entity detach.\n    if (destroy) {\n      component.destroy();\n      delete this.components[name];\n      // Remove attribute from DOM, if still present\n      if (this.hasAttribute(name)) {\n        window.HTMLElement.prototype.removeAttribute.call(this, name);\n      }\n    }\n\n    this.emit('componentremoved', component.evtDetail, false);\n  }\n\n  /**\n   * Initialize or update all components.\n   * Build data using initial components, defined attributes, mixins, and defaults.\n   * Update default components before the rest.\n   *\n   * @property {function} getExtraComponents - Can be implemented to include component data\n   *   from other sources (e.g., implemented by primitives).\n   */\n  updateComponents () {\n    var data;\n    var extraComponents;\n    var i;\n    var name;\n    var componentsToUpdate = this.componentsToUpdate;\n\n    if (!this.hasLoaded && !this.isLoading) { return; }\n\n    // Gather mixin-defined components.\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (name in this.mixinEls[i].componentCache) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather from extra initial component data if defined (e.g., primitives).\n    if (this.getExtraComponents) {\n      extraComponents = this.getExtraComponents();\n      for (name in extraComponents) {\n        if (isComponent(name)) { componentsToUpdate[name] = true; }\n      }\n    }\n\n    // Gather entity-defined components.\n    for (i = 0; i < this.attributes.length; ++i) {\n      name = this.attributes[i].name;\n      if (OBJECT3D_COMPONENTS.indexOf(name) !== -1) { continue; }\n      if (isComponent(name)) { componentsToUpdate[name] = true; }\n    }\n\n    // object3D components first (position, rotation, scale, visible).\n    for (i = 0; i < OBJECT3D_COMPONENTS.length; i++) {\n      name = OBJECT3D_COMPONENTS[i];\n      if (!this.hasAttribute(name)) { continue; }\n      this.updateComponent(name, this.getDOMAttribute(name));\n    }\n\n    // Initialize or update rest of components.\n    for (name in componentsToUpdate) {\n      data = mergeComponentData(this.getDOMAttribute(name),\n                                extraComponents && extraComponents[name]);\n      this.updateComponent(name, data);\n      delete componentsToUpdate[name];\n    }\n  }\n\n  /**\n   * Initialize, update, or remove a single component.\n   *\n   * When initializing, we set the component on `this.components`.\n   *\n   * @param {string} attr - Component name.\n   * @param {object} attrValue - Value of the DOM attribute.\n   * @param {boolean} clobber - If new attrValue completely replaces previous properties.\n   */\n  updateComponent (attr, attrValue, clobber) {\n    var component = this.components[attr];\n\n    if (component) {\n      // Remove component.\n      if (attrValue === null && !checkComponentDefined(this, attr)) {\n        this.removeComponent(attr, true);\n        return;\n      }\n      // Component already initialized. Update component.\n      component.updateProperties(attrValue, clobber);\n      return;\n    }\n\n    // Component not yet initialized. Initialize component.\n    this.initComponent(attr, attrValue, false);\n  }\n\n  /**\n   * If `attr` is a component name, detach the component from the entity.\n   *\n   * If `propertyName` is given, reset the component property value to its default.\n   *\n   * @param {string} attr - Attribute name, which could also be a component name.\n   * @param {string} propertyName - Component prop name, if resetting an individual prop.\n   */\n  removeAttribute (attr, propertyName) {\n    var component = this.components[attr];\n\n    // Remove component.\n    if (component && propertyName === undefined) {\n      this.removeComponent(attr, true);\n    }\n\n    // Reset component property value.\n    if (component && propertyName !== undefined) {\n      component.resetProperty(propertyName);\n      return;\n    }\n\n    // Remove mixins.\n    if (attr === 'mixin') {\n      this.mixinUpdate('');\n    }\n\n    window.HTMLElement.prototype.removeAttribute.call(this, attr);\n  }\n\n  /**\n   * Start dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also play.\n   */\n  play () {\n    var entities;\n    var i;\n    var key;\n\n    // Already playing.\n    if (this.isPlaying || (!this.hasLoaded && !this.isLoading)) { return; }\n    this.isPlaying = true;\n\n    // Wake up all components.\n    for (key in this.components) { this.components[key].play(); }\n\n    // Tell all child entities to play.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].play(); }\n\n    this.emit('play');\n  }\n\n  /**\n   * Pause dynamic behavior associated with entity such as dynamic components and animations.\n   * Tell all children entities to also pause.\n   */\n  pause () {\n    var entities;\n    var i;\n    var key;\n\n    if (!this.isPlaying) { return; }\n    this.isPlaying = false;\n\n    // Sleep all components.\n    for (key in this.components) { this.components[key].pause(); }\n\n    // Tell all child entities to pause.\n    entities = this.getChildEntities();\n    for (i = 0; i < entities.length; i++) { entities[i].pause(); }\n\n    this.emit('pause');\n  }\n\n  /**\n   * Deals with updates on entity-specific attributes (i.e., components and mixins).\n   *\n   * @param {string} attr\n   * @param {string} oldVal\n   * @param {string|object} newVal\n   */\n  setEntityAttribute (attr, oldVal, newVal) {\n    if (COMPONENTS[attr] || this.components[attr]) {\n      this.updateComponent(attr, newVal);\n      return;\n    }\n    if (attr === 'mixin') {\n      // Ignore if `<a-node>` code is just updating computed mixin in the DOM.\n      if (newVal === this.computedMixinStr) { return; }\n      this.mixinUpdate(newVal, oldVal);\n    }\n  }\n\n  /**\n   * When mixins updated, trigger init or optimized-update of relevant components.\n   */\n  mixinUpdate (newMixins, oldMixins, deferred) {\n    var componentsUpdated = AEntity.componentsUpdated;\n\n    var component;\n    var mixinEl;\n    var mixinIds;\n    var i;\n    var self = this;\n\n    if (!deferred) { oldMixins = oldMixins || this.getAttribute('mixin'); }\n\n    if (!this.hasLoaded) {\n      this.addEventListener('loaded-private', function () {\n        self.mixinUpdate(newMixins, oldMixins, true);\n      }, ONCE);\n      return;\n    }\n\n    mixinIds = this.updateMixins(newMixins, oldMixins);\n\n    // Loop over current mixins.\n    componentsUpdated.length = 0;\n    for (i = 0; i < this.mixinEls.length; i++) {\n      for (component in this.mixinEls[i].componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            // Update. Just rebuild data.\n            this.components[component].handleMixinUpdate();\n          } else {\n            // Init. buildData will gather mixin values.\n            this.initComponent(component, null);\n          }\n          componentsUpdated.push(component);\n        }\n      }\n    }\n\n    // Loop over old mixins to call for data rebuild.\n    for (i = 0; i < mixinIds.oldMixinIds.length; i++) {\n      mixinEl = document.getElementById(mixinIds.oldMixinIds[i]);\n      if (!mixinEl) { continue; }\n      for (component in mixinEl.componentCache) {\n        if (componentsUpdated.indexOf(component) === -1) {\n          if (this.components[component]) {\n            if (this.getDOMAttribute(component)) {\n              // Update component if explicitly defined.\n              this.components[component].handleMixinUpdate();\n            } else {\n              // Remove component if not explicitly defined.\n              this.removeComponent(component, true);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * setAttribute can:\n   *\n   * 1. Set a single property of a multi-property component.\n   * 2. Set multiple properties of a multi-property component.\n   * 3. Replace properties of a multi-property component.\n   * 4. Set a value for a single-property component, mixin, or normal HTML attribute.\n   *\n   * @param {string} attrName - Component or attribute name.\n   * @param {any} arg1 - Can be a value, property name, CSS-style property string, or\n   *   object of properties.\n   * @param {any} arg2 - If arg1 is a property name, this should be a value. Otherwise,\n   *   it is a boolean indicating whether to clobber previous values (defaults to false).\n   */\n  setAttribute (attrName, arg1, arg2) {\n    var singlePropUpdate = AEntity.singlePropUpdate;\n\n    var newAttrValue;\n    var clobber;\n    var componentName;\n    var delimiterIndex;\n    var isDebugMode;\n    var key;\n\n    delimiterIndex = attrName.indexOf(MULTIPLE_COMPONENT_DELIMITER);\n    componentName = delimiterIndex > 0 ? attrName.substring(0, delimiterIndex) : attrName;\n\n    // Not a component. Normal set attribute.\n    if (!COMPONENTS[componentName]) {\n      if (attrName === 'mixin') { this.mixinUpdate(arg1); }\n      super.setAttribute.call(this, attrName, arg1);\n      return;\n    }\n\n    // Initialize component first if not yet initialized.\n    if (!this.components[attrName] && this.hasAttribute(attrName)) {\n      this.updateComponent(\n        attrName,\n        window.HTMLElement.prototype.getAttribute.call(this, attrName));\n    }\n\n    // Determine new attributes from the arguments\n    if (typeof arg2 !== 'undefined' &&\n        typeof arg1 === 'string' &&\n        arg1.length > 0 &&\n        typeof utils.styleParser.parse(arg1) === 'string') {\n      // Update a single property of a multi-property component\n      for (key in singlePropUpdate) { delete singlePropUpdate[key]; }\n      newAttrValue = singlePropUpdate;\n      newAttrValue[arg1] = arg2;\n      clobber = false;\n    } else {\n      // Update with a value, object, or CSS-style property string, with the possibility\n      // of clobbering previous values.\n      newAttrValue = arg1;\n      clobber = (arg2 === true);\n    }\n\n    // Update component\n    this.updateComponent(attrName, newAttrValue, clobber);\n\n    // In debug mode, write component data up to the DOM.\n    isDebugMode = this.sceneEl && this.sceneEl.getAttribute('debug');\n    if (isDebugMode) { this.components[attrName].flushToDOM(); }\n  }\n\n  /**\n   * Reflect component data in the DOM (as seen from the browser DOM Inspector).\n   *\n   * @param {boolean} recursive - Also flushToDOM on the children.\n   **/\n  flushToDOM (recursive) {\n    var components = this.components;\n    var child;\n    var children = this.children;\n    var i;\n    var key;\n\n    // Flush entity's components to DOM.\n    for (key in components) {\n      components[key].flushToDOM();\n    }\n\n    // Recurse.\n    if (!recursive) { return; }\n    for (i = 0; i < children.length; ++i) {\n      child = children[i];\n      if (!child.flushToDOM) { continue; }\n      child.flushToDOM(recursive);\n    }\n  }\n\n  /**\n   * If `attr` is a component, returns ALL component data including applied mixins and\n   * defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getAttribute (attr) {\n    // If component, return component data.\n    var component;\n    if (attr === 'position') { return this.object3D.position; }\n    if (attr === 'rotation') { return getRotation(this); }\n    if (attr === 'scale') { return this.object3D.scale; }\n    if (attr === 'visible') { return this.object3D.visible; }\n    component = this.components[attr];\n    if (component) { return component.data; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * If `attr` is a component, returns JUST the component data defined on the entity.\n   * Like a partial version of `getComputedAttribute` as returned component data\n   * does not include applied mixins or defaults.\n   *\n   * If `attr` is not a component, fall back to HTML getAttribute.\n   *\n   * @param {string} attr\n   * @returns {object|string} Object if component, else string.\n   */\n  getDOMAttribute (attr) {\n    // If cached value exists, return partial component data.\n    var component = this.components[attr];\n    if (component) { return component.attrValue; }\n    return window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  addState (state) {\n    if (this.is(state)) { return; }\n    this.states.push(state);\n    this.emit('stateadded', state);\n  }\n\n  removeState (state) {\n    var stateIndex = this.states.indexOf(state);\n    if (stateIndex === -1) { return; }\n    this.states.splice(stateIndex, 1);\n    this.emit('stateremoved', state);\n  }\n\n  /**\n   * Checks if the element is in a given state. e.g. el.is('alive');\n   *\n   * @param {string} state - Name of the state we want to check\n   */\n  is (state) {\n    return this.states.indexOf(state) !== -1;\n  }\n\n  /**\n   * Open Inspector to this entity.\n   */\n  inspect () {\n    this.sceneEl.components.inspector.openInspector(this);\n  }\n\n  /**\n   * Clean up memory and return memory to object pools.\n   */\n  destroy () {\n    var key;\n    if (this.parentNode) {\n      warn('Entity can only be destroyed if detached from scenegraph.');\n      return;\n    }\n    for (key in this.components) {\n      this.components[key].destroy();\n    }\n  }\n}\n\n/**\n * Check if a component is *defined* for an entity, including defaults and mixins.\n * Does not check whether the component has been *initialized* for an entity.\n *\n * @param {string} el - Entity.\n * @param {string} name - Component name.\n * @returns {boolean}\n */\nfunction checkComponentDefined (el, name) {\n  // Check if element contains the component.\n  if (el.components[name] && el.components[name].attrValue) { return true; }\n\n  return isComponentMixedIn(name, el.mixinEls);\n}\n\n/**\n * Check if any mixins contains a component.\n *\n * @param {string} name - Component name.\n * @param {Array<Element>} mixinEls - Array of <a-mixin>s.\n */\nfunction isComponentMixedIn (name, mixinEls) {\n  var i;\n  var inMixin = false;\n  for (i = 0; i < mixinEls.length; ++i) {\n    inMixin = mixinEls[i].hasAttribute(name);\n    if (inMixin) { break; }\n  }\n  return inMixin;\n}\n\n/**\n * Given entity defined value, merge in extra data if necessary.\n * Handle both single and multi-property components.\n *\n * @param {string} attrValue - Entity data.\n * @param extraData - Entity data from another source to merge in.\n */\nfunction mergeComponentData (attrValue, extraData) {\n  // Extra data not defined, just return attrValue.\n  if (!extraData) { return attrValue; }\n\n  // Merge multi-property data.\n  if (extraData.constructor === Object) {\n    return utils.extend(extraData, utils.styleParser.parse(attrValue || {}));\n  }\n\n  // Return data, precedence to the defined value.\n  return attrValue || extraData;\n}\n\nfunction isComponent (componentName) {\n  if (componentName.indexOf(MULTIPLE_COMPONENT_DELIMITER) !== -1) {\n    componentName = utils.split(componentName, MULTIPLE_COMPONENT_DELIMITER)[0];\n  }\n  if (!COMPONENTS[componentName]) { return false; }\n  return true;\n}\n\nfunction getRotation (entityEl) {\n  var radToDeg = THREE.MathUtils.radToDeg;\n  var rotation = entityEl.object3D.rotation;\n  var rotationObj = entityEl.rotationObj;\n  rotationObj.x = radToDeg(rotation.x);\n  rotationObj.y = radToDeg(rotation.y);\n  rotationObj.z = radToDeg(rotation.z);\n  return rotationObj;\n}\n\nAEntity.componentsUpdated = [];\nAEntity.singlePropUpdate = {};\n\ncustomElements.define('a-entity', AEntity);\n","import { isIframed } from '../../utils/index.js';\n\n/**\n * Provides a post message API for scenes contained\n * in an iframe.\n */\nexport function initPostMessageAPI (scene) {\n  // Handles fullscreen behavior when inside an iframe.\n  if (!isIframed()) { return; }\n  // postMessage API handler\n  window.addEventListener('message', postMessageAPIHandler.bind(scene));\n}\n\nfunction postMessageAPIHandler (event) {\n  var scene = this;\n  if (!event.data) { return; }\n\n  switch (event.data.type) {\n    case 'vr': {\n      switch (event.data.data) {\n        case 'enter':\n          scene.enterVR();\n          break;\n        case 'exit':\n          scene.exitVR();\n          break;\n      }\n    }\n  }\n}\n","import { isIOS } from './device.js';\n\n// Safari regression introduced in iOS 12 and remains in iOS 13.\n// https://stackoverflow.com/questions/62717621/white-space-at-page-bottom-after-device-rotation-in-ios-safari\nif (isIOS()) {\n  window.addEventListener('orientationchange', function () {\n    document.documentElement.style.height = 'initial';\n    setTimeout(function () {\n      document.documentElement.style.height = '100%';\n      setTimeout(function () {\n        // this line prevents the content\n        // from hiding behind the address bar\n        window.scrollTo(0, 1);\n      }, 500);\n    }, 500);\n  });\n}\n","/* global Promise, customElements, screen */\nimport * as THREE from 'three';\nimport { inject as initMetaTags } from './metaTags.js';\nimport { initWakelock } from './wakelock.js';\nimport * as loadingScreen from './loadingScreen.js';\nimport scenes from './scenes.js';\nimport { systems } from '../system.js';\nimport { components } from '../component.js';\nimport * as utils from '../../utils/index.js';\n\n// Require after.\nimport { AEntity } from '../a-entity.js';\nimport { ANode } from '../a-node.js';\nimport { initPostMessageAPI } from './postMessage.js';\n\nimport '../../utils/ios-orientationchange-blank-bug.js';\n\nvar warn = utils.debug('core:a-scene:warn');\n\nvar isIOS = utils.device.isIOS();\nvar isMobile = utils.device.isMobile();\nvar isWebXRAvailable = utils.device.isWebXRAvailable;\n\n/**\n * Scene element, holds all entities.\n *\n * @member {Array} behaviors - Component instances that have registered themselves to be\n           updated on every tick.\n * @member {object} camera - three.js Camera object.\n * @member {object} canvas\n * @member {boolean} isScene - Differentiates as scene entity as opposed to other entities.\n * @member {boolean} isMobile - Whether browser is mobile (via UA detection).\n * @member {object} object3D - Root three.js Scene object.\n * @member {object} renderer\n * @member {boolean} renderStarted\n * @member {object} systems - Registered instantiated systems.\n * @member {number} time\n */\n\nexport class AScene extends AEntity {\n  constructor () {\n    var self;\n    super();\n    self = this;\n    self.clock = new THREE.Clock();\n    self.isIOS = isIOS;\n    self.isMobile = isMobile;\n    self.hasWebXR = isWebXRAvailable;\n    self.isAR = false;\n    self.isScene = true;\n    self.object3D = new THREE.Scene();\n    self.resize = self.resize.bind(self);\n    self.render = self.render.bind(self);\n    self.systems = {};\n    self.systemNames = [];\n    self.time = self.delta = 0;\n    self.usedOfferSession = false;\n\n    self.componentOrder = [];\n    self.behaviors = {};\n    self.hasLoaded = false;\n    self.isPlaying = false;\n    self.originalHTML = self.innerHTML;\n  }\n\n  addFullScreenStyles () {\n    document.documentElement.classList.add('a-fullscreen');\n  }\n\n  removeFullScreenStyles () {\n    document.documentElement.classList.remove('a-fullscreen');\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    var embedded = this.hasAttribute('embedded');\n\n    // Default components.\n    this.setAttribute('inspector', '');\n    this.setAttribute('keyboard-shortcuts', '');\n    this.setAttribute('screenshot', '');\n    this.setAttribute('xr-mode-ui', '');\n    this.setAttribute('device-orientation-permission-ui', '');\n    super.doConnectedCallback();\n\n    // Renderer initialization\n    setupCanvas(this);\n    this.setupRenderer();\n    loadingScreen.setup(this, getCanvasSize);\n\n    this.resize();\n    if (!embedded) { this.addFullScreenStyles(); }\n    initPostMessageAPI(this);\n\n    initMetaTags(this);\n    initWakelock(this);\n\n    // Bind functions.\n    this.enterVRBound = function () { self.enterVR(); };\n    this.exitVRBound = function () { self.exitVR(); };\n\n    window.addEventListener('sessionend', this.resize);\n    // Camera set up by camera system.\n    this.addEventListener('cameraready', function () {\n      self.attachedCallbackPostCamera();\n    });\n\n    this.initSystems();\n    // Compute component order\n    this.componentOrder = determineComponentBehaviorOrder(components, this.componentOrder);\n    this.addEventListener('componentregistered', function () {\n      // Recompute order\n      self.componentOrder = determineComponentBehaviorOrder(components, self.componentOrder);\n    });\n\n    // WebXR Immersive navigation handler.\n    if (this.hasWebXR && navigator.xr && navigator.xr.addEventListener) {\n      navigator.xr.addEventListener('sessiongranted', function () { self.enterVR(); });\n    }\n  }\n\n  attachedCallbackPostCamera () {\n    var resize;\n    var self = this;\n\n    window.addEventListener('load', resize);\n    window.addEventListener('resize', function () {\n      // Workaround for a Webkit bug (https://bugs.webkit.org/show_bug.cgi?id=170595)\n      // where the window does not contain the correct viewport size\n      // after an orientation change. The window size is correct if the operation\n      // is postponed a few milliseconds.\n      // self.resize can be called directly once the bug above is fixed.\n      if (self.isIOS) {\n        setTimeout(self.resize, 100);\n      } else {\n        self.resize();\n      }\n    });\n    this.play();\n\n    // Add to scene index.\n    scenes.push(this);\n  }\n\n  /**\n   * Initialize all systems.\n   */\n  initSystems () {\n    var name;\n\n    // Initialize camera system first.\n    this.initSystem('camera');\n\n    for (name in systems) {\n      if (name === 'camera') { continue; }\n      this.initSystem(name);\n    }\n  }\n\n  /**\n   * Initialize a system.\n   */\n  initSystem (name) {\n    if (this.systems[name]) { return; }\n    this.systems[name] = new systems[name](this);\n    this.systemNames.push(name);\n  }\n\n  /**\n   * Shut down scene on detach.\n   */\n  disconnectedCallback () {\n    // Remove from scene index.\n    var sceneIndex = scenes.indexOf(this);\n    super.disconnectedCallback();\n\n    scenes.splice(sceneIndex, 1);\n\n    window.removeEventListener('sessionend', this.resize);\n    this.removeFullScreenStyles();\n    this.renderer.dispose();\n  }\n\n  /**\n   * Add ticks and tocks.\n   *\n   * @param {object} behavior - A component.\n   */\n  addBehavior (behavior) {\n    var behaviorSet;\n    var behaviors = this.behaviors[behavior.name];\n    var behaviorType;\n\n    if (!behaviors) {\n      behaviors = this.behaviors[behavior.name] = {\n        tick: { inUse: false, array: [], markedForRemoval: [] },\n        tock: { inUse: false, array: [], markedForRemoval: [] }\n      };\n    }\n\n    // Check if behavior has tick and/or tock and add the behavior to the appropriate list.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n\n      // In case the behaviorSet is in use, make sure this behavior isn't on the removal list.\n      if (behaviorSet.inUse) {\n        var index = behaviorSet.markedForRemoval.indexOf(behavior);\n        if (index !== -1) {\n          behaviorSet.markedForRemoval.splice(index, 1);\n        }\n      }\n      // Add behavior to the set\n      if (behaviorSet.array.indexOf(behavior) === -1) {\n        behaviorSet.array.push(behavior);\n      }\n    }\n  }\n\n  /**\n   * For tests.\n   */\n  getPointerLockElement () {\n    return document.pointerLockElement;\n  }\n\n  /**\n   * For tests.\n   */\n  checkHeadsetConnected () {\n    return utils.device.checkHeadsetConnected();\n  }\n\n  enterAR () {\n    var errorMessage;\n    if (!this.hasWebXR) {\n      errorMessage = 'Failed to enter AR mode, WebXR not supported.';\n      throw new Error(errorMessage);\n    }\n    if (!utils.device.checkARSupport()) {\n      errorMessage = 'Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.';\n      throw new Error(errorMessage);\n    }\n    return this.enterVR(true);\n  }\n\n  /**\n   * Call `requestSession` if WebXR is supported.\n   * Call `requestFullscreen` on desktop.\n   * Handle events, states, fullscreen styles.\n   *\n   * @param {?boolean} useAR - if true, try immersive-ar mode\n   * @returns {Promise}\n   */\n  enterVR (useAR, useOfferSession) {\n    var self = this;\n    var vrManager = self.renderer.xr;\n    var xrInit;\n\n    // Don't enter VR if already in VR.\n    if (useOfferSession && (!navigator.xr || !navigator.xr.offerSession)) { return Promise.resolve('OfferSession is not supported.'); }\n    if (self.usedOfferSession && useOfferSession) { return Promise.resolve('OfferSession was already called.'); }\n    if (this.is('vr-mode')) { return Promise.resolve('Already in VR.'); }\n\n    // Has VR.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      var rendererSystem = self.getAttribute('renderer');\n      vrManager.enabled = true;\n\n      if (this.hasWebXR) {\n        // XR API.\n        if (this.xrSession) {\n          this.xrSession.removeEventListener('end', this.exitVRBound);\n        }\n        var refspace = this.sceneEl.systems.webxr.sessionReferenceSpaceType;\n        vrManager.setReferenceSpaceType(refspace);\n        var xrMode = useAR ? 'immersive-ar' : 'immersive-vr';\n        xrInit = this.sceneEl.systems.webxr.sessionConfiguration;\n        return new Promise(function (resolve, reject) {\n          var requestSession = useOfferSession ? navigator.xr.offerSession.bind(navigator.xr) : navigator.xr.requestSession.bind(navigator.xr);\n          self.usedOfferSession |= useOfferSession;\n          requestSession(xrMode, xrInit).then(\n            function requestSuccess (xrSession) {\n              if (useOfferSession) {\n                self.usedOfferSession = false;\n              }\n\n              vrManager.layersEnabled = xrSession.enabledFeatures ? xrSession.enabledFeatures.indexOf('layers') !== -1 : true;\n              vrManager.setSession(xrSession).then(function () {\n                vrManager.setFoveation(rendererSystem.foveationLevel);\n                self.xrSession = xrSession;\n                self.systems.renderer.setWebXRFrameRate(xrSession);\n                xrSession.addEventListener('end', self.exitVRBound);\n                enterVRSuccess(resolve);\n              });\n            },\n            function requestFail (error) {\n              var useAR = xrMode === 'immersive-ar';\n              var mode = useAR ? 'AR' : 'VR';\n              reject(new Error('Failed to enter ' + mode + ' mode (`requestSession`)', { cause: error }));\n            }\n          );\n        });\n      } else {\n        var mode = useAR ? 'AR' : 'VR';\n        throw new Error('Failed to enter ' + mode + ' no WebXR');\n      }\n    }\n\n    // No VR.\n    enterVRSuccess();\n    return Promise.resolve();\n\n    // Callback that happens on enter VR success or enter fullscreen (any API).\n    function enterVRSuccess (resolve) {\n      if (useAR) {\n        self.addState('ar-mode');\n      } else {\n        self.addState('vr-mode');\n      }\n      self.emit('enter-vr', {target: self});\n      // Lock to landscape orientation on mobile.\n      if (!self.hasWebXR && self.isMobile && screen.orientation && screen.orientation.lock) {\n        screen.orientation.lock('landscape');\n      }\n      self.addFullScreenStyles();\n\n      // Call `requestFullscreen` on desktop\n      if (!self.isMobile && !self.checkHeadsetConnected()) {\n        requestFullscreen(self.canvas);\n      }\n\n      self.resize();\n      if (resolve) { resolve(); }\n    }\n  }\n\n  /**\n   * Call `xrSession.end` if WebXR.\n   * Handle events, states, fullscreen styles.\n   *\n   * @returns {Promise}\n   */\n  exitVR () {\n    var self = this;\n    var vrManager = this.renderer.xr;\n\n    // Don't exit VR if not in VR.\n    if (!this.is('vr-mode') && !this.is('ar-mode')) { return Promise.resolve('Not in immersive mode.'); }\n\n    // Handle exiting VR if not yet already and in a headset or mobile.\n    if (this.checkHeadsetConnected() || this.isMobile) {\n      vrManager.enabled = false;\n      if (this.hasWebXR) {\n        this.xrSession.removeEventListener('end', this.exitVRBound);\n        // Capture promise to avoid errors.\n        this.xrSession.end().then(function () {}, function () {});\n        this.xrSession = undefined;\n      } else {\n        throw Error('Failed to exit VR - no WebXR');\n      }\n    } else {\n      exitFullscreen();\n    }\n\n    // Handle exiting VR in all other cases (2D fullscreen, external exit VR event).\n    exitVRSuccess();\n\n    return Promise.resolve();\n\n    function exitVRSuccess () {\n      self.removeState('vr-mode');\n      self.removeState('ar-mode');\n      // Lock to landscape orientation on mobile.\n      if (self.isMobile && screen.orientation && screen.orientation.unlock) {\n        screen.orientation.unlock();\n      }\n      // Exiting VR in embedded mode, no longer need fullscreen styles.\n      if (self.hasAttribute('embedded')) { self.removeFullScreenStyles(); }\n\n      self.resize();\n      if (self.isIOS) { utils.forceCanvasResizeSafariMobile(self.canvas); }\n      self.renderer.setPixelRatio(window.devicePixelRatio);\n      self.emit('exit-vr', {target: self});\n    }\n  }\n\n  /**\n   * Wraps Entity.getAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Wraps Entity.getDOMAttribute to take into account for systems.\n   * If system exists, then return system data rather than possible component data.\n   */\n  getDOMAttribute (attr) {\n    var system = this.systems[attr];\n    if (system) { return system.data; }\n    return AEntity.prototype.getDOMAttribute.call(this, attr);\n  }\n\n  /**\n   * Wrap Entity.setAttribute to take into account for systems.\n   * If system exists, then skip component initialization checks and do a normal\n   * setAttribute.\n   */\n  setAttribute (attr, value, componentPropValue) {\n    // Check if system exists (i.e. is registered).\n    if (systems[attr]) {\n      ANode.prototype.setAttribute.call(this, attr, value);\n\n      // Update system instance, if initialized on the scene.\n      var system = this.systems[attr];\n      if (system) {\n        system.updateProperties(value);\n      }\n      return;\n    }\n    AEntity.prototype.setAttribute.call(this, attr, value, componentPropValue);\n  }\n\n  /**\n   * @param {object} behavior - A component.\n   */\n  removeBehavior (behavior) {\n    var behaviorSet;\n    var behaviorType;\n    var behaviors = this.behaviors[behavior.name];\n    var index;\n\n    // Check if behavior has tick and/or tock and remove the behavior from the appropriate\n    // array.\n    for (behaviorType in behaviors) {\n      if (!behavior[behaviorType]) { continue; }\n      behaviorSet = behaviors[behaviorType];\n      index = behaviorSet.array.indexOf(behavior);\n      if (index !== -1) {\n        // Check if the behavior can safely be removed.\n        if (behaviorSet.inUse) {\n          // Set is in use, so only mark for removal.\n          if (behaviorSet.markedForRemoval.indexOf(behavior) === -1) {\n            behaviorSet.markedForRemoval.push(behavior);\n          }\n        } else {\n          // Swap and remove from the end\n          behaviorSet.array[index] = behaviorSet.array[behaviorSet.array.length - 1];\n          behaviorSet.array.pop();\n        }\n      }\n    }\n  }\n\n  resize () {\n    var camera = this.camera;\n    var canvas = this.canvas;\n    var embedded;\n    var isVRPresenting;\n    var size;\n    var isPresenting = this.renderer.xr.isPresenting;\n    isVRPresenting = this.renderer.xr.enabled && isPresenting;\n\n    // Do not update renderer, if a camera or a canvas have not been injected.\n    // In VR mode, three handles canvas resize based on the dimensions of the created\n    // XRWebGLLayer or XRProjectionLayer. These dimensions are independent of\n    // the window size, therefore should not be overwritten with the window's width and\n    // height, except when in fullscreen mode.\n    if (!camera || !canvas || (this.is('vr-mode') && (this.isMobile || isVRPresenting))) {\n      return;\n    }\n\n    // Update camera.\n    embedded = this.getAttribute('embedded') && !this.is('vr-mode');\n    size = getCanvasSize(canvas, embedded, this.maxCanvasSize, this.is('vr-mode'));\n    camera.aspect = size.width / size.height;\n    camera.updateProjectionMatrix();\n\n    // Notify renderer of size change.\n    this.renderer.setSize(size.width, size.height, false);\n    this.emit('rendererresize', null, false);\n  }\n\n  setupRenderer () {\n    var self = this;\n    var renderer;\n    var rendererAttr;\n    var rendererAttrString;\n    var rendererConfig;\n\n    rendererConfig = {\n      alpha: true,\n      antialias: !isMobile,\n      canvas: this.canvas,\n      logarithmicDepthBuffer: false,\n      powerPreference: 'high-performance'\n    };\n\n    this.maxCanvasSize = {height: -1, width: -1};\n\n    if (this.hasAttribute('renderer')) {\n      rendererAttrString = this.getAttribute('renderer');\n      rendererAttr = utils.styleParser.parse(rendererAttrString);\n\n      if (rendererAttr.precision) {\n        rendererConfig.precision = rendererAttr.precision + 'p';\n      }\n\n      if (rendererAttr.antialias && rendererAttr.antialias !== 'auto') {\n        rendererConfig.antialias = rendererAttr.antialias === 'true';\n      }\n\n      if (rendererAttr.logarithmicDepthBuffer && rendererAttr.logarithmicDepthBuffer !== 'auto') {\n        rendererConfig.logarithmicDepthBuffer = rendererAttr.logarithmicDepthBuffer === 'true';\n      }\n\n      if (rendererAttr.alpha) {\n        rendererConfig.alpha = rendererAttr.alpha === 'true';\n      }\n\n      if (rendererAttr.stencil) {\n        rendererConfig.stencil = rendererAttr.stencil === 'true';\n      }\n\n      if (rendererAttr.multiviewStereo) {\n        rendererConfig.multiviewStereo = rendererAttr.multiviewStereo === 'true';\n      }\n\n      this.maxCanvasSize = {\n        width: rendererAttr.maxCanvasWidth\n          ? parseInt(rendererAttr.maxCanvasWidth)\n          : this.maxCanvasSize.width,\n        height: rendererAttr.maxCanvasHeight\n          ? parseInt(rendererAttr.maxCanvasHeight)\n          : this.maxCanvasSize.height\n      };\n    }\n\n    // Trick Webpack so that it can't statically determine the exact export used.\n    // Otherwise it will conclude that one of the two exports can't be found in THREE.\n    // Only one needs to exist, and this should be determined at runtime.\n    var rendererImpl = ['WebGLRenderer', 'WebGPURenderer'].find(function (x) { return THREE[x]; });\n    renderer = this.renderer = new THREE[rendererImpl](rendererConfig);\n    if (!renderer.xr.setPoseTarget) {\n      renderer.xr.setPoseTarget = function () {};\n    }\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    if (this.camera) { renderer.xr.setPoseTarget(this.camera.el.object3D); }\n    this.addEventListener('camera-set-active', function () {\n      renderer.xr.setPoseTarget(self.camera.el.object3D);\n    });\n  }\n\n  /**\n   * Handler attached to elements to help scene know when to kick off.\n   * Scene waits for all entities to load.\n   */\n  play () {\n    var self = this;\n    var sceneEl = this;\n\n    if (this.renderStarted) {\n      AEntity.prototype.play.call(this);\n      return;\n    }\n\n    this.addEventListener('loaded', function () {\n      var renderer = this.renderer;\n      AEntity.prototype.play.call(this);  // .play() *before* render.\n\n      if (sceneEl.renderStarted) { return; }\n      sceneEl.resize();\n\n      // Kick off render loop.\n      if (sceneEl.renderer) {\n        if (window.performance) { window.performance.mark('render-started'); }\n        loadingScreen.remove();\n        renderer.setAnimationLoop(this.render);\n        sceneEl.renderStarted = true;\n        sceneEl.emit('renderstart');\n      }\n    });\n\n    // setTimeout to wait for all nodes to attach and run their callbacks.\n    setTimeout(function () {\n      AEntity.prototype.load.call(self);\n    });\n  }\n\n  /**\n   * Wrap `updateComponent` to not initialize the component if the component has a system\n   * (aframevr/aframe#2365).\n   */\n  updateComponent (componentName) {\n    if (componentName in systems) { return; }\n    AEntity.prototype.updateComponent.apply(this, arguments);\n  }\n\n  /**\n   * Behavior-updater meant to be called from scene render.\n   * Abstracted to a different function to facilitate unit testing (`scene.tick()`) without\n   * needing to render.\n   */\n  tick (time, timeDelta) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tick', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tick) { continue; }\n      systems[this.systemNames[i]].tick(time, timeDelta);\n    }\n  }\n\n  /**\n   * Behavior-updater meant to be called after scene render for post processing purposes.\n   * Abstracted to a different function to facilitate unit testing (`scene.tock()`) without\n   * needing to render.\n   */\n  tock (time, timeDelta, camera) {\n    var i;\n    var systems = this.systems;\n\n    // Components.\n    this.callComponentBehaviors('tock', time, timeDelta);\n\n    // Systems.\n    for (i = 0; i < this.systemNames.length; i++) {\n      if (!systems[this.systemNames[i]].tock) { continue; }\n      systems[this.systemNames[i]].tock(time, timeDelta, camera);\n    }\n  }\n\n  /**\n   * The render loop.\n   *\n   * Updates animations.\n   * Updates behaviors.\n   * Renders with request animation frame.\n   */\n  render (time, frame) {\n    var renderer = this.renderer;\n\n    this.frame = frame;\n    this.delta = this.clock.getDelta() * 1000;\n    this.time = this.clock.elapsedTime * 1000;\n\n    if (this.isPlaying) { this.tick(this.time, this.delta); }\n    var savedBackground = null;\n    if (this.is('ar-mode')) {\n      // In AR mode, don't render the default background. Hide it, then\n      // restore it again after rendering.\n      savedBackground = this.object3D.background;\n      this.object3D.background = null;\n    }\n    renderer.render(this.object3D, this.camera);\n    if (savedBackground) {\n      this.object3D.background = savedBackground;\n    }\n    if (this.isPlaying) {\n      var renderCamera = renderer.xr.isPresenting ? renderer.xr.getCamera() : this.camera;\n      this.tock(this.time, this.delta, renderCamera);\n    }\n  }\n\n  callComponentBehaviors (behavior, time, timeDelta) {\n    var i;\n\n    for (var c = 0; c < this.componentOrder.length; c++) {\n      var behaviors = this.behaviors[this.componentOrder[c]];\n      if (!behaviors) { continue; }\n      var behaviorSet = behaviors[behavior];\n\n      behaviorSet.inUse = true;\n      for (i = 0; i < behaviorSet.array.length; i++) {\n        if (!behaviorSet.array[i].isPlaying) { continue; }\n        behaviorSet.array[i][behavior](time, timeDelta);\n      }\n      behaviorSet.inUse = false;\n\n      // Clean up any behaviors marked for removal\n      for (i = 0; i < behaviorSet.markedForRemoval.length; i++) {\n        this.removeBehavior(behaviorSet.markedForRemoval[i]);\n      }\n      behaviorSet.markedForRemoval.length = 0;\n    }\n  }\n}\n\n/**\n * Derives an ordering from the components, taking any before and after\n * constraints into account.\n *\n * @param {object} components - The components to order\n * @param {Array} array - Optional array to use as output\n */\nexport function determineComponentBehaviorOrder (components, array) {\n  var graph = {};\n  var i;\n  var key;\n  var result = array || [];\n  result.length = 0;\n\n  // Construct graph nodes for each element\n  for (key in components) {\n    var element = components[key];\n    if (element === undefined) { continue; }\n    var before = element.before ? element.before.slice(0) : [];\n    var after = element.after ? element.after.slice(0) : [];\n    graph[key] = { before: before, after: after, visited: false, done: false };\n  }\n\n  // Normalize to after constraints, warn about missing nodes\n  for (key in graph) {\n    for (i = 0; i < graph[key].before.length; i++) {\n      var beforeName = graph[key].before[i];\n      if (!(beforeName in graph)) {\n        warn('Invalid ordering constraint, no component named `' + beforeName + '` referenced by `' + key + '`');\n        continue;\n      }\n\n      graph[beforeName].after.push(key);\n    }\n  }\n\n  // Perform topological depth-first search\n  // https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search\n  function visit (name) {\n    if (!(name in graph) || graph[name].done) {\n      return;\n    }\n\n    if (graph[name].visited) {\n      warn('Cycle detected, ignoring one or more before/after constraints. ' +\n        'The resulting order might be incorrect');\n      return;\n    }\n\n    graph[name].visited = true;\n\n    for (var i = 0; i < graph[name].after.length; i++) {\n      var afterName = graph[name].after[i];\n      if (!(afterName in graph)) {\n        warn('Invalid before/after constraint, no component named `' +\n            afterName + '` referenced in `' + name + '`');\n      }\n      visit(afterName);\n    }\n\n    graph[name].done = true;\n    result.push(name);\n  }\n\n  for (key in graph) {\n    if (graph[key].done) {\n      continue;\n    }\n    visit(key);\n  }\n  return result;\n}\n\n/**\n * Return size constrained to maxSize - maintaining aspect ratio.\n *\n * @param {object} size - size parameters (width and height).\n * @param {object} maxSize - Max size parameters (width and height).\n * @returns {object} Width and height.\n */\nfunction constrainSizeTo (size, maxSize) {\n  var aspectRatio;\n  var pixelRatio = window.devicePixelRatio;\n\n  if (!maxSize || (maxSize.width === -1 && maxSize.height === -1)) {\n    return size;\n  }\n\n  if (size.width * pixelRatio < maxSize.width &&\n    size.height * pixelRatio < maxSize.height) {\n    return size;\n  }\n\n  aspectRatio = size.width / size.height;\n\n  if ((size.width * pixelRatio) > maxSize.width && maxSize.width !== -1) {\n    size.width = Math.round(maxSize.width / pixelRatio);\n    size.height = Math.round(maxSize.width / aspectRatio / pixelRatio);\n  }\n\n  if ((size.height * pixelRatio) > maxSize.height && maxSize.height !== -1) {\n    size.height = Math.round(maxSize.height / pixelRatio);\n    size.width = Math.round(maxSize.height * aspectRatio / pixelRatio);\n  }\n\n  return size;\n}\n\ncustomElements.define('a-scene', AScene);\n\n/**\n * Return the canvas size where the scene will be rendered.\n * Will be always the window size except when the scene is embedded.\n * The parent size will be returned in that case.\n * the returned size will be constrained to the maxSize maintaining aspect ratio.\n *\n * @param {Element} canvasEl - the canvas element\n * @param {boolean} embedded - Is the scene embedded?\n * @param {object} maxSize - Max size parameters\n * @param {boolean} isVR - If in VR\n * @returns {number} Max size\n */\nfunction getCanvasSize (canvasEl, embedded, maxSize, isVR) {\n  if (!canvasEl.parentElement) { return {height: 0, width: 0}; }\n  if (embedded) {\n    var size;\n    size = {\n      height: canvasEl.parentElement.offsetHeight,\n      width: canvasEl.parentElement.offsetWidth\n    };\n    return constrainSizeTo(size, maxSize);\n  }\n  return getMaxSize(maxSize, isVR);\n}\n\n/**\n * Return the canvas size. Will be the window size unless that size is greater than the\n * maximum size (no maximum by default). The constrained size will be returned in that case,\n * maintaining aspect ratio\n *\n * @param {object} maxSize - Max size parameters (width and height).\n * @param {boolean} isVR - If in VR.\n * @returns {object} Width and height.\n */\nfunction getMaxSize (maxSize, isVR) {\n  var size;\n  size = {height: document.body.offsetHeight, width: document.body.offsetWidth};\n  if (isVR) {\n    return size;\n  } else {\n    return constrainSizeTo(size, maxSize);\n  }\n}\n\nfunction requestFullscreen (canvas) {\n  var requestFullscreen =\n    canvas.requestFullscreen ||\n    canvas.webkitRequestFullscreen ||\n    canvas.mozRequestFullScreen ||  // The capitalized `S` is not a typo.\n    canvas.msRequestFullscreen;\n  // Hide navigation buttons on Android.\n  requestFullscreen.apply(canvas, [{navigationUI: 'hide'}]);\n}\n\nfunction exitFullscreen () {\n  var fullscreenEl =\n    document.fullscreenElement ||\n    document.webkitFullscreenElement ||\n    document.mozFullScreenElement;\n  if (!fullscreenEl) { return; }\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  }\n}\n\nexport function setupCanvas (sceneEl) {\n  var canvasEl;\n\n  canvasEl = document.createElement('canvas');\n  canvasEl.classList.add('a-canvas');\n  // Mark canvas as provided/injected by A-Frame.\n  canvasEl.dataset.aframeCanvas = true;\n  sceneEl.appendChild(canvasEl);\n\n  document.addEventListener('fullscreenchange', onFullScreenChange);\n  document.addEventListener('mozfullscreenchange', onFullScreenChange);\n  document.addEventListener('webkitfullscreenchange', onFullScreenChange);\n  document.addEventListener('MSFullscreenChange', onFullScreenChange);\n\n  // Prevent overscroll on mobile.\n  canvasEl.addEventListener('touchmove', function (event) { event.preventDefault(); }, {passive: false});\n\n  // Set canvas on scene.\n  sceneEl.canvas = canvasEl;\n  sceneEl.emit('render-target-loaded', {target: canvasEl});\n  // For unknown reasons a synchronous resize does not work on desktop when\n  // entering/exiting fullscreen.\n  setTimeout(sceneEl.resize.bind(sceneEl), 0);\n\n  function onFullScreenChange () {\n    var fullscreenEl =\n      document.fullscreenElement ||\n      document.mozFullScreenElement ||\n      document.webkitFullscreenElement;\n    // No fullscreen element === exit fullscreen\n    if (!fullscreenEl) { sceneEl.exitVR(); }\n    document.activeElement.blur();\n    document.body.focus();\n  }\n}\n","import Wakelock from '../../../vendor/wakelock/wakelock.js';\n\nexport function initWakelock (scene) {\n  if (!scene.isMobile) { return; }\n\n  var wakelock = scene.wakelock = new Wakelock();\n  scene.addEventListener('enter-vr', function () { wakelock.request(); });\n  scene.addEventListener('exit-vr', function () { wakelock.release(); });\n}\n","import * as schema from './schema.js';\nimport * as THREE from 'three';\n\nvar processSchema = schema.process;\nexport var geometries = {};  // Registered geometries.\nexport var geometryNames = [];  // Names of registered geometries.\n\n/**\n * Geometry class definition.\n *\n * Geometries extend the geometry component API to create and register geometry types.\n */\nexport var Geometry = function () {};\n\nGeometry.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.geometry = new THREE.BufferGeometry();\n    return this.geometry;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated geometry data changes.\n   *\n   * @param {object} data - New geometry data.\n   */\n  update: function (data) { /* no-op */ }\n};\n\n/**\n * Registers a geometry to A-Frame.\n *\n * @param {string} name - Geometry name.\n * @param {object} definition - Geometry property and methods.\n * @returns {object} Geometry.\n */\nexport function registerGeometry (name, definition) {\n  var NewGeometry;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function expandDefinition (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (geometries[name]) {\n    throw new Error('The geometry `' + name + '` has been already registered');\n  }\n  NewGeometry = function () { Geometry.call(this); };\n  NewGeometry.prototype = Object.create(Geometry.prototype, proto);\n  NewGeometry.prototype.name = name;\n  NewGeometry.prototype.constructor = NewGeometry;\n  geometries[name] = {\n    Geometry: NewGeometry,\n    schema: processSchema(NewGeometry.prototype.schema)\n  };\n  geometryNames.push(name);\n  return NewGeometry;\n}\n","/* global customElements */\nimport { knownTags } from '../../core/a-node.js';\nimport { AEntity } from '../../core/a-entity.js';\nimport { components } from '../../core/component.js';\nimport * as utils from '../../utils/index.js';\n\nvar debug = utils.debug;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar log = debug('extras:primitives:debug');\nvar warn = debug('extras:primitives:warn');\nvar error = debug('extras:primitives:error');\n\nexport var primitives = {};\n\nexport function registerPrimitive (name, definition) {\n  name = name.toLowerCase();\n\n  if (knownTags[name]) {\n    error('Trying to register primitive ' + name + ' that has been already previously registered');\n    return;\n  }\n\n  knownTags[name] = true;\n\n  log('Registering <%s>', name);\n\n  // Deprecation warning for defaultAttributes usage.\n  if (definition.defaultAttributes) {\n    warn(\"The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.\");\n  }\n\n  var mappings = definition.mappings || {};\n  var primitiveClass = class extends AEntity {\n    constructor () {\n      super();\n      this.defaultComponentsFromPrimitive = definition.defaultComponents || definition.defaultAttributes || {};\n      this.deprecated = definition.deprecated || null;\n      this.deprecatedMappings = definition.deprecatedMappings || {};\n      this.mappings = mappings;\n\n      if (definition.deprecated) { console.warn(definition.deprecated); }\n      this.resolveMappingCollisions();\n    }\n\n    /**\n     * If a mapping collides with a registered component name\n     * it renames the mapping to componentname-property\n     */\n    resolveMappingCollisions () {\n      var mappings = this.mappings;\n      var self = this;\n      Object.keys(mappings).forEach(function resolveCollision (key) {\n        var newAttribute;\n        if (key !== key.toLowerCase()) { warn('Mapping keys should be specified in lower case. The mapping key ' + key + ' may not be recognized'); }\n        if (components[key]) {\n          newAttribute = mappings[key].replace('.', '-');\n          mappings[newAttribute] = mappings[key];\n          delete mappings[key];\n          console.warn('The primitive ' + self.tagName.toLowerCase() + ' has a mapping collision. ' +\n                       'The attribute ' + key + ' has the same name as a registered component and' +\n                       ' has been renamed to ' + newAttribute);\n        }\n      });\n    }\n\n    getExtraComponents () {\n      var attr;\n      var data;\n      var i;\n      var mapping;\n      var mixins;\n      var self = this;\n\n      // Gather component data from default components.\n      data = utils.clone(this.defaultComponentsFromPrimitive);\n\n      // Factor in mixins to overwrite default components.\n      mixins = this.getAttribute('mixin');\n      if (mixins) {\n        mixins = utils.split(mixins.trim(), /\\s+/);\n        mixins.forEach(function applyMixin (mixinId) {\n          var mixinEl = document.getElementById(mixinId);\n          if (!mixinEl) { return; }\n          var rawAttributeCache = mixinEl.rawAttributeCache;\n          var mixinComponents = mixinEl.componentCache;\n          for (var name in rawAttributeCache) {\n            // Check if the attribute matches a mapping.\n            mapping = self.mappings[name];\n            if (mapping) {\n              applyMapping(mapping, rawAttributeCache[name], data);\n              return;\n            }\n\n            // Check if the attribute belongs to a component.\n            if (name in mixinComponents) {\n              data[name] = extend(data[name], mixinComponents[name]);\n            }\n          }\n        });\n      }\n\n      // Gather component data from mappings.\n      for (i = 0; i < this.attributes.length; i++) {\n        attr = this.attributes[i];\n        mapping = this.mappings[attr.name];\n        if (mapping) {\n          applyMapping(mapping, attr.value, data);\n        }\n      }\n\n      return data;\n\n      /**\n       * For the base to be extensible, both objects must be pure JavaScript objects.\n       * The function assumes that base is undefined, or null or a pure object.\n       */\n      function extend (base, extension) {\n        if (isUndefined(base)) {\n          return copy(extension);\n        }\n        if (isUndefined(extension)) {\n          return copy(base);\n        }\n        if (isPureObject(base) && isPureObject(extension)) {\n          return utils.extendDeep(base, extension);\n        }\n        return copy(extension);\n      }\n\n      function isUndefined (value) {\n        return typeof value === 'undefined';\n      }\n\n      function copy (value) {\n        if (isPureObject(value)) {\n          return utils.extendDeep({}, value);\n        }\n        return value;\n      }\n\n      function isPureObject (value) {\n        return value !== null && value.constructor === Object;\n      }\n    }\n\n    /**\n     * Sync to attribute to component property whenever mapped attribute changes.\n     * If attribute is mapped to a component property, set the component property using\n     * the attribute value.\n     */\n    attributeChangedCallback (attr, oldVal, value) {\n      var componentName = this.mappings[attr];\n\n      if (attr in this.deprecatedMappings) {\n        console.warn(this.deprecatedMappings[attr]);\n      }\n\n      if (!attr || !componentName) {\n        super.attributeChangedCallback(attr, oldVal, value);\n        return;\n      }\n\n      // Set value.\n      setComponentProperty(this, componentName, value);\n    }\n  };\n\n  customElements.define(name, primitiveClass);\n  primitiveClass.mappings = mappings;\n\n  // Store.\n  primitives[name] = primitiveClass;\n  return primitiveClass;\n}\n\n/**\n * Sets the relevant property based on the mapping property path.\n *\n * @param {string} mapping - The mapped property path.\n * @param {string} attrValue - The (raw) attribute value.\n * @param {object} data - The data object to apply the mapping to.\n */\nfunction applyMapping (mapping, attrValue, data) {\n  var path = utils.entity.getComponentPropertyPath(mapping);\n  if (path.constructor === Array) {\n    data[path[0]] = data[path[0]] || {};\n    data[path[0]][path[1]] = attrValue.trim();\n  } else {\n    data[path] = attrValue.trim();\n  }\n}\n\n/**\n * Add component mappings using schema.\n */\nfunction addComponentMapping (componentName, mappings) {\n  var schema = components[componentName].schema;\n  Object.keys(schema).forEach(function (prop) {\n    // Hyphenate where there is camelCase.\n    var attrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    // If there is a mapping collision, prefix with component name and hyphen.\n    if (mappings[attrName] !== undefined) { attrName = componentName + '-' + prop; }\n    mappings[attrName] = componentName + '.' + prop;\n  });\n}\n\n/**\n * Helper to define a primitive, building mappings using a component schema.\n */\nexport function definePrimitive (tagName, defaultComponents, mappings) {\n  // If no initial mappings provided, start from empty map.\n  mappings = mappings || {};\n\n  // From the default components, add mapping automagically.\n  Object.keys(defaultComponents).forEach(function buildMappings (componentName) {\n    addComponentMapping(componentName, mappings);\n  });\n\n  // Register the primitive.\n  registerPrimitive(tagName, utils.extendDeep({}, null, {\n    defaultComponents: defaultComponents,\n    mappings: mappings\n  }));\n}\n","import * as THREE from 'three';\nimport { process as processSchema } from './schema.js';\nimport * as utils from '../utils/index.js';\n\nexport var shaders = {};  // Keep track of registered shaders.\nexport var shaderNames = [];  // Keep track of the names of registered shaders.\n\n// A-Frame properties to three.js uniform types.\nvar propertyToThreeMapping = {\n  array: 'v3',\n  color: 'v3',\n  int: 'i',\n  number: 'f',\n  map: 't',\n  time: 'f',\n  vec2: 'v2',\n  vec3: 'v3',\n  vec4: 'v4'\n};\n\n/**\n * Shader class definition.\n *\n * Shaders extend the material component API so you can create your own library\n * of customized materials.\n *\n */\nexport var Shader = function () {};\n\nShader.prototype = {\n  /**\n   * Contains the type schema and defaults for the data values.\n   * Data is coerced into the types of the values of the defaults.\n   */\n  schema: {},\n\n  vertexShader:\n    'void main() {' +\n      'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);' +\n    '}',\n\n  fragmentShader:\n    'void main() {' +\n      'gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);' +\n    '}',\n\n  /**\n   * Init handler. Similar to attachedCallback.\n   * Called during shader initialization and is only run once.\n   */\n  init: function (data) {\n    this.uniforms = this.initUniforms();\n    this.material = new (this.raw ? THREE.RawShaderMaterial : THREE.ShaderMaterial)({\n      uniforms: this.uniforms,\n      glslVersion: this.raw || this.glsl3 ? THREE.GLSL3 : null,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader\n    });\n    return this.material;\n  },\n\n  initUniforms: function () {\n    var key;\n    var schema = this.schema;\n    var variables = {};\n    var varType;\n\n    for (key in schema) {\n      if (schema[key].is !== 'uniform') { continue; }\n      varType = propertyToThreeMapping[schema[key].type];\n      variables[key] = {\n        type: varType,\n        value: undefined  // Let update handle setting these.\n      };\n    }\n    return variables;\n  },\n\n  /**\n   * Update handler. Similar to attributeChangedCallback.\n   * Called whenever the associated material data changes.\n   *\n   * @param {object} data - New material data.\n   */\n  update: function (data) {\n    var key;\n    var materialKey;\n    var schema = this.schema;\n    var uniforms = this.uniforms;\n\n    for (key in data) {\n      if (!schema[key] || schema[key].is !== 'uniform') { continue; }\n\n      if (schema[key].type === 'map') {\n        // If data unchanged, get out early.\n        if (!uniforms[key] || uniforms[key].value === data[key]) { continue; }\n\n        // Special handling is needed for textures.\n        materialKey = '_texture_' + key;\n\n        // We can't actually set the variable correctly until we've loaded the texture.\n        this.setMapOnTextureLoad(uniforms, key, materialKey);\n\n        // Kick off the texture update now that handler is added.\n        utils.material.updateMapMaterialFromData(materialKey, key, this, data);\n        continue;\n      }\n      uniforms[key].value = this.parseValue(schema[key].type, data[key]);\n      uniforms[key].needsUpdate = true;\n    }\n  },\n\n  parseValue: function (type, value) {\n    var color;\n    switch (type) {\n      case 'vec2': {\n        return new THREE.Vector2(value.x, value.y);\n      }\n      case 'vec3': {\n        return new THREE.Vector3(value.x, value.y, value.z);\n      }\n      case 'vec4': {\n        return new THREE.Vector4(value.x, value.y, value.z, value.w);\n      }\n      case 'color': {\n        color = new THREE.Color(value);\n        return new THREE.Vector3(color.r, color.g, color.b);\n      }\n      default: {\n        return value;\n      }\n    }\n  },\n\n  setMapOnTextureLoad: function (uniforms, key, materialKey) {\n    var self = this;\n    this.el.addEventListener('materialtextureloaded', function () {\n      uniforms[key].value = self.material[materialKey];\n      uniforms[key].needsUpdate = true;\n    });\n  }\n};\n\n/**\n * Registers a shader to A-Frame.\n *\n * @param {string} name - shader name.\n * @param {object} definition - shader property and methods.\n * @returns {object} Shader.\n */\nexport function registerShader (name, definition) {\n  var NewShader;\n  var proto = {};\n\n  // Format definition object to prototype object.\n  Object.keys(definition).forEach(function (key) {\n    proto[key] = {\n      value: definition[key],\n      writable: true\n    };\n  });\n\n  if (shaders[name]) {\n    throw new Error('The shader ' + name + ' has already been registered');\n  }\n  NewShader = function () { Shader.call(this); };\n  NewShader.prototype = Object.create(Shader.prototype, proto);\n  NewShader.prototype.name = name;\n  NewShader.prototype.constructor = NewShader;\n  shaders[name] = {\n    Shader: NewShader,\n    schema: processSchema(NewShader.prototype.schema)\n  };\n  shaderNames.push(name);\n  return NewShader;\n}\n","/* global customElements */\nimport * as THREE from 'three';\nimport { ANode } from './a-node.js';\nimport { debug } from '../utils/index.js';\n\nvar fileLoader = new THREE.FileLoader();\nvar warn = debug('core:a-assets:warn');\n\n/**\n * Asset management system. Handles blocking on asset loading.\n */\nclass AAssets extends ANode {\n  constructor () {\n    super();\n    this.isAssets = true;\n    this.fileLoader = fileLoader;\n    this.timeout = null;\n  }\n\n  doConnectedCallback () {\n    var self = this;\n    var i;\n    var loaded = [];\n    var mediaEl;\n    var mediaEls;\n    var imgEl;\n    var imgEls;\n    var timeout;\n    var children;\n\n    super.doConnectedCallback();\n\n    if (!this.parentNode.isScene) {\n      throw new Error('<a-assets> must be a child of a <a-scene>.');\n    }\n\n    // Wait for <img>s.\n    imgEls = this.querySelectorAll('img');\n    for (i = 0; i < imgEls.length; i++) {\n      imgEl = fixUpMediaElement(imgEls[i]);\n      loaded.push(new Promise(function (resolve, reject) {\n        // Set in cache because we won't be needing to call three.js loader if we have.\n        // a loaded media element.\n        THREE.Cache.add(imgEls[i].getAttribute('src'), imgEl);\n        if (imgEl.complete) {\n          resolve();\n          return;\n        }\n        imgEl.onload = resolve;\n        imgEl.onerror = reject;\n      }));\n    }\n\n    // Wait for <audio>s and <video>s.\n    mediaEls = this.querySelectorAll('audio, video');\n    for (i = 0; i < mediaEls.length; i++) {\n      mediaEl = fixUpMediaElement(mediaEls[i]);\n      if (!mediaEl.src && !mediaEl.srcObject) {\n        warn('Audio/video asset has neither `src` nor `srcObject` attributes.');\n      }\n      loaded.push(mediaElementLoaded(mediaEl));\n    }\n\n    // Wait for <a-asset-item>s\n    children = this.getChildren();\n    children.forEach(function (child) {\n      if (!child.isAssetItem || !child.hasAttribute('src')) { return; }\n\n      loaded.push(new Promise(function waitForLoaded (resolve, reject) {\n        if (child.hasLoaded) { return resolve(); }\n        child.addEventListener('loaded', resolve);\n        child.addEventListener('error', reject);\n      }));\n    });\n\n    // Trigger loaded for scene to start rendering.\n    Promise.allSettled(loaded).then(function () {\n      // Make sure the timeout didn't occur.\n      if (self.timeout === null) { return; }\n      self.load();\n    });\n\n    // Timeout to start loading anyways.\n    timeout = parseInt(this.getAttribute('timeout'), 10) || 3000;\n    this.timeout = setTimeout(function () {\n      // Make sure the loading didn't complete.\n      if (self.hasLoaded) { return; }\n      warn('Asset loading timed out in', timeout, 'ms');\n      self.timeout = null;\n      self.emit('timeout');\n      self.load();\n    }, timeout);\n  }\n\n  disconnectedCallback () {\n    super.disconnectedCallback();\n    if (this.timeout) { clearTimeout(this.timeout); }\n  }\n\n  load () {\n    // Filter out all children, as waiting already took place in doConnectedCallback.\n    super.load.call(this, null, function () { return false; });\n  }\n}\n\ncustomElements.define('a-assets', AAssets);\n\n/**\n * Preload using XHRLoader for any type of asset.\n */\nclass AAssetItem extends ANode {\n  constructor () {\n    super();\n    this.data = null;\n    this.isAssetItem = true;\n  }\n\n  connectedCallback () {\n    var self = this;\n    var src = this.getAttribute('src');\n    fileLoader.setResponseType(\n      this.getAttribute('response-type') || inferResponseType(src));\n    fileLoader.load(src, function handleOnLoad (response) {\n      self.data = response;\n      ANode.prototype.load.call(self);\n    }, function handleOnProgress (xhr) {\n      self.emit('progress', {\n        loadedBytes: xhr.loaded,\n        totalBytes: xhr.total,\n        xhr: xhr\n      });\n    }, function handleOnError (xhr) {\n      self.emit('error', {xhr: xhr}, false);\n    });\n  }\n}\n\ncustomElements.define('a-asset-item', AAssetItem);\n\n/**\n * Create a Promise that resolves once the media element has finished buffering.\n *\n * @param {Element} el - HTMLMediaElement.\n * @returns {Promise}\n */\nfunction mediaElementLoaded (el) {\n  if (!el.hasAttribute('autoplay') && el.getAttribute('preload') !== 'auto') {\n    return;\n  }\n\n  // If media specifies autoplay or preload, wait until media is completely buffered.\n  return new Promise(function (resolve, reject) {\n    if (el.readyState === 4) { return resolve(); }  // Already loaded.\n    if (el.error) { return reject(); }  // Error.\n\n    el.addEventListener('loadeddata', checkProgress, false);\n    el.addEventListener('progress', checkProgress, false);\n    el.addEventListener('error', reject, false);\n\n    function checkProgress () {\n      // Add up the seconds buffered.\n      var secondsBuffered = 0;\n      for (var i = 0; i < el.buffered.length; i++) {\n        secondsBuffered += el.buffered.end(i) - el.buffered.start(i);\n      }\n\n      // Compare seconds buffered to media duration.\n      if (secondsBuffered >= el.duration) {\n        // Set in cache because we won't be needing to call three.js loader if we have.\n        // a loaded media element.\n        // Store video elements only. three.js loader is used for audio elements.\n        // See assetParse too.\n        if (el.tagName === 'VIDEO') {\n          THREE.Cache.add(el.getAttribute('src'), el);\n        }\n        resolve();\n      }\n    }\n  });\n}\n\n/**\n * Automatically add attributes to media elements where convenient.\n * crossorigin, playsinline.\n */\nfunction fixUpMediaElement (mediaEl) {\n  // Cross-origin.\n  var newMediaEl = setCrossOrigin(mediaEl);\n\n  // Plays inline for mobile.\n  if (newMediaEl.tagName && newMediaEl.tagName.toLowerCase() === 'video') {\n    newMediaEl.setAttribute('playsinline', '');\n    newMediaEl.setAttribute('webkit-playsinline', '');\n  }\n\n  if (newMediaEl !== mediaEl) {\n    mediaEl.parentNode.appendChild(newMediaEl);\n    mediaEl.parentNode.removeChild(mediaEl);\n  }\n  return newMediaEl;\n}\n\n/**\n * Automatically set `crossorigin` if not defined on the media element.\n * If it is not defined, we must create and re-append a new media element <img> and\n * have the browser re-request it with `crossorigin` set.\n *\n * @param {Element} mediaEl - Media element (e.g., <img>, <audio>, <video>).\n * @returns {Element} Media element to be used to listen to for loaded events.\n */\nfunction setCrossOrigin (mediaEl) {\n  var newMediaEl;\n  var src;\n\n  // Already has crossorigin set.\n  if (mediaEl.hasAttribute('crossorigin')) { return mediaEl; }\n\n  src = mediaEl.getAttribute('src');\n\n  if (src !== null) {\n    // Does not have protocol.\n    if (src.indexOf('://') === -1) { return mediaEl; }\n\n    // Determine if cross origin is actually needed.\n    if (extractDomain(src) === window.location.host) { return mediaEl; }\n  }\n\n  warn('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. ' +\n       'A-Frame will re-request the asset with `crossorigin` attribute set. ' +\n       'Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)', src);\n  mediaEl.crossOrigin = 'anonymous';\n  newMediaEl = mediaEl.cloneNode(true);\n  return newMediaEl;\n}\n\n/**\n * Extract domain out of URL.\n *\n * @param {string} url\n * @returns {string}\n */\nfunction extractDomain (url) {\n  // Find and remove protocol (e.g., http, ftp, etc.) to get domain.\n  var domain = url.indexOf('://') > -1 ? url.split('/')[2] : url.split('/')[0];\n\n  // Find and remove port number.\n  return domain.substring(0, domain.indexOf(':'));\n}\n\n/**\n * Infer response-type attribute from src.\n * Default is text (default XMLHttpRequest.responseType)\n * and arraybuffer for .glb files.\n *\n * @param {string} src\n * @returns {string}\n */\nexport function inferResponseType (src) {\n  var fileName = getFileNameFromURL(src);\n  var dotLastIndex = fileName.lastIndexOf('.');\n  if (dotLastIndex >= 0) {\n    var extension = fileName.slice(dotLastIndex, src.search(/\\?|#|$/));\n    if (extension === '.glb') {\n      return 'arraybuffer';\n    }\n  }\n  return 'text';\n}\n\n/**\n * Extract filename from URL\n *\n * @param {string} url\n * @returns {string}\n */\nexport function getFileNameFromURL (url) {\n  var parser = document.createElement('a');\n  parser.href = url;\n  var query = parser.search.replace(/^\\?/, '');\n  var filePath = url.replace(query, '').replace('?', '');\n  return filePath.substring(filePath.lastIndexOf('/') + 1);\n}\n","/* global customElements, HTMLElement */\nimport { debug } from '../utils/index.js';\n\nvar warn = debug('core:cubemap:warn');\n\n/**\n * Cubemap element that handles validation and exposes list of six image sources (URL or <img>).\n * Does not listen to updates.\n */\nclass ACubeMap extends HTMLElement {\n  /**\n   * Calculates this.srcs.\n   */\n\n  constructor (self) {\n    self = super(self);\n    return self;\n  }\n\n  onReadyStateChange () {\n    if (document.readyState === 'complete') {\n      this.doConnectedCallback();\n    }\n  }\n\n  connectedCallback () {\n    // Defer if DOM is not ready.\n    if (document.readyState !== 'complete') {\n      document.addEventListener('readystatechange', this.onReadyStateChange.bind(this));\n      return;\n    }\n    ACubeMap.prototype.doConnectedCallback.call(this);\n  }\n\n  doConnectedCallback () {\n    this.srcs = this.validate();\n  }\n\n  /**\n   * Checks for exactly six elements with [src].\n   * When <img>s are used they will be prefetched.\n   *\n   * @returns {Array<string|Element>|undefined} six URLs or <img> elements if valid, else undefined.\n   */\n  validate () {\n    var elements = this.querySelectorAll('[src]');\n    var i;\n    var srcs = [];\n    if (elements.length === 6) {\n      for (i = 0; i < elements.length; i++) {\n        if (elements[i].tagName === 'IMG') {\n          srcs.push(elements[i]);\n        } else {\n          srcs.push(elements[i].getAttribute('src'));\n        }\n      }\n      return srcs;\n    }\n    // Else if there are not six elements, throw a warning.\n    warn(\n      '<a-cubemap> did not contain exactly six elements each with a ' +\n      '`src` attribute.');\n  }\n}\n\ncustomElements.define('a-cubemap', ACubeMap);\n","/* global customElements */\nimport { ANode } from './a-node.js';\nimport { components } from './component.js';\nimport * as utils from '../utils/index.js';\nimport * as styleParser from '../utils/styleParser.js';\n\nvar MULTIPLE_COMPONENT_DELIMITER = '__';\n\n/**\n * @property {object} componentCache - Cache of pre-parsed values. An object where the keys\n *         are component names and the values are already parsed by the component.\n * @property {object} rawAttributeCache - Cache of the raw attribute values.\n */\nclass AMixin extends ANode {\n  constructor () {\n    super();\n    this.componentCache = {};\n    this.rawAttributeCache = {};\n    this.isMixin = true;\n  }\n\n  doConnectedCallback () {\n    super.doConnectedCallback();\n\n    this.sceneEl = this.closestScene();\n    this.id = this.getAttribute('id');\n    this.cacheAttributes();\n    this.updateEntities();\n    this.load();\n  }\n\n  attributeChangedCallback (attr, oldVal, newVal) {\n    super.attributeChangedCallback();\n    this.cacheAttribute(attr, newVal);\n    this.updateEntities();\n  }\n\n  /**\n   * setAttribute that parses and caches component values.\n   */\n  setAttribute (attr, value) {\n    window.HTMLElement.prototype.setAttribute.call(this, attr, value);\n    this.cacheAttribute(attr, value);\n  }\n\n  /**\n   * If `attr` is a component, then parse the value using the schema and store it.\n   */\n  cacheAttribute (attr, value) {\n    var component;\n    var componentName;\n\n    // Get component data.\n    componentName = utils.split(attr, MULTIPLE_COMPONENT_DELIMITER)[0];\n    component = components[componentName];\n    if (value === undefined) {\n      value = window.HTMLElement.prototype.getAttribute.call(this, attr);\n    }\n\n    this.rawAttributeCache[attr] = value;\n    if (!component) { return; }\n    this.componentCache[attr] = this.parseComponentAttrValue(component, value);\n  }\n\n  /**\n   * Given an HTML attribute value parses the string based on the component schema.\n   * To avoid double parsing of strings when mixed into the actual component,\n   * we store the original instead of the parsed one.\n   *\n   * @param {object} component - The component to parse for.\n   * @param {string} attrValue - HTML attribute value.\n   */\n  parseComponentAttrValue (component, attrValue) {\n    var parsedValue;\n    if (typeof attrValue !== 'string') { return attrValue; }\n    if (component.isSingleProperty) {\n      parsedValue = component.schema.parse(attrValue);\n      if (typeof parsedValue === 'string') { parsedValue = attrValue; }\n    } else {\n      // Use style parser as the values will be parsed once mixed in.\n      // Furthermore parsing might fail with dynamic schema's.\n      parsedValue = styleParser.parse(attrValue);\n    }\n    return parsedValue;\n  }\n\n  /**\n   * If `attr` is a component, then grab pre-parsed value from the cache.\n   * Else do a normal getAttribute.\n   */\n  getAttribute (attr) {\n    return this.componentCache[attr] ||\n      window.HTMLElement.prototype.getAttribute.call(this, attr);\n  }\n\n  /**\n   * Parse and cache every component defined on the mixin.\n   */\n  cacheAttributes () {\n    var attributes = this.attributes;\n    var attrName;\n    var i;\n    for (i = 0; i < attributes.length; i++) {\n      attrName = attributes[i].name;\n      this.cacheAttribute(attrName);\n    }\n  }\n\n  /**\n   * For entities that already have been loaded by the time the mixin was attached, tell\n   * those entities to register the mixin and refresh their component data.\n   */\n  updateEntities () {\n    var entity;\n    var entities;\n    var i;\n\n    if (!this.sceneEl) { return; }\n\n    entities = this.sceneEl.querySelectorAll('[mixin~=' + this.id + ']');\n    for (i = 0; i < entities.length; i++) {\n      entity = entities[i];\n      if (!entity.hasLoaded || entity.isMixin) { continue; }\n      entity.mixinUpdate(this.id);\n    }\n  }\n}\n\ncustomElements.define('a-mixin', AMixin);\n","import * as THREE from 'three';\nimport anime from 'super-animejs';\nimport { registerComponent, components } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = 'color';\nvar PROP_POSITION = 'position';\nvar PROP_ROTATION = 'rotation';\nvar PROP_SCALE = 'scale';\nvar STRING_COMPONENTS = 'components';\nvar STRING_OBJECT3D = 'object3D';\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nexport var Component = registerComponent('animation', {\n  schema: {\n    autoplay: {default: true},\n    delay: {default: 0},\n    dir: {default: ''},\n    dur: {default: 1000},\n    easing: {default: 'easeInQuad'},\n    elasticity: {default: 400},\n    enabled: {default: true},\n    from: {default: ''},\n    loop: {\n      default: 0,\n      parse: function (value) {\n        // Boolean or integer.\n        if (value === true || value === 'true') { return true; }\n        if (value === false || value === 'false') { return false; }\n        return parseInt(value, 10);\n      }\n    },\n    property: {default: ''},\n    startEvents: {type: 'array'},\n    pauseEvents: {type: 'array'},\n    resumeEvents: {type: 'array'},\n    round: {default: false},\n    to: {default: ''},\n    type: {default: ''},\n    isRawProperty: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.eventDetail = {name: this.attrName};\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function () {\n        self.animationIsPlaying = false;\n        self.el.emit('animationcomplete', self.eventDetail, false);\n        if (self.id) {\n          self.el.emit('animationcomplete__' + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function (oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) { return; }\n\n    if (!data.property) { return; }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function (t, dt) {\n    if (!this.animationIsPlaying) { return; }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function () {\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  pause: function () {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function () {\n    if (!this.paused) { return; }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function () {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n    this.animation.began = true;\n\n    this.removeEventListeners();\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || data.startEvents && data.startEvents.length) { return; }\n\n    // Delay animation.\n    if (data.delay) {\n      setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function () {\n    this.updateConfig();\n    this.animation.began = true;\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit('animationbegin', this.eventDetail, false);\n  },\n\n  pauseAnimation: function () {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function () {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function () {\n    if (!this.data.enabled) { return; }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === '' ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r &&\n            value.g === lastValue.g &&\n            value.b === lastValue.b) { return; }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === '') {\n      // Infer from.\n      from = isRawProperty(data)\n        ? getRawProperty(el, data.property)\n        : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === 'true' || data.to === 'false' ||\n                data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === 'true' || data.from === true ? 1 : 0;\n      to = data.to === 'true' || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function () {\n      var lastValue;\n\n      return function (anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaneously even if the value has not changed. Also better for perf\n        // anyway.\n        if (value === lastValue) { return; }\n        lastValue = value;\n\n        if (isBoolean) { value = value >= 1; }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n    var split = splitDot(data.property);\n    var property = split[0] === 'object3D' ? split[1] : split[0];\n\n    // Parse coordinates.\n    from = data.from !== ''\n      ? utils.coordinates.parse(data.from)  // If data.from defined, use that.\n      : getComponentProperty(el, property);  // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) { config[key] = to[key]; }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (property === PROP_POSITION || property === PROP_ROTATION ||\n        property === PROP_SCALE) {\n      config.update = (function () {\n        var lastValue = {};\n        return function (anim) {\n          var value = anim.animatables[0].target;\n\n          // For animation timeline.\n          if (value.x === lastValue.x &&\n              value.y === lastValue.y &&\n              value.z === lastValue.z) { return; }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[property].set(value.x, value.y, value.z);\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function () {\n      var lastValue = {};\n      return function (anim) {\n        var value = anim.animatables[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x &&\n            value.y === lastValue.y &&\n            value.z === lastValue.z) { return; }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function () {\n    var propType;\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === 'vec2' || propType === 'vec3' || propType === 'vec4') {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function (cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== '') { return false; }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) { return false; }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) { return false; }\n\n    el.addEventListener('componentinitialized', function wait (evt) {\n      if (evt.detail.name !== componentName) { return; }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener('componentinitialized', wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function () {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) { continue; }\n      if (component.name !== 'animation') { continue; }\n      if (!component.animationIsPlaying) { continue; }\n      if (component.data.property !== this.data.property) { continue; }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function () {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  setColorConfig: function (from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType (el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split('.');\n  // Object3D.\n  if (split[0] === 'object3D' && !split[2]) {\n    if (split[1] === 'position' ||\n        split[1] === 'rotation' ||\n        split[1] === 'scale') {\n      return 'vec3';\n    }\n  }\n\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) { return null; }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) { return null; }\n\n  // Multi-prop.\n  if (propertyName) { return component.schema[propertyName].type; }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians (obj) {\n  obj.x = THREE.MathUtils.degToRad(obj.x);\n  obj.y = THREE.MathUtils.degToRad(obj.y);\n  obj.z = THREE.MathUtils.degToRad(obj.z);\n}\n\nfunction addEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners (el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty (el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  if (value === undefined) {\n    console.log(el);\n    throw new Error('[animation] property (' + path + ') could not be found');\n  }\n  return value;\n}\n\nfunction setRawProperty (el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith('object3D.rotation')) {\n    value = THREE.MathUtils.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) { targetValue = targetValue[split[i]]; }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if ('r' in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot (path) {\n  if (path in splitCache) { return splitCache[path]; }\n  splitCache[path] = path.split('.');\n  return splitCache[path];\n}\n\nfunction isRawProperty (data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) ||\n         data.property.startsWith(STRING_OBJECT3D);\n}\n","/* global XRRigidTransform, localStorage */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:anchored:warn');\n\n/**\n * Anchored component.\n * Feature only available in browsers that implement the WebXR anchors module.\n * Once anchored the entity remains to a fixed position in real-world space.\n * If the anchor is persistent, the anchor positioned remains across sessions or until the browser data is cleared.\n */\nexport var Component = registerComponent('anchored', {\n  schema: {\n    persistent: {default: false}\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('anchors') === -1) {\n      optionalFeaturesArray.push('anchors');\n      this.el.sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.auxQuaternion = new THREE.Quaternion();\n\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n  },\n\n  onEnterVR: function () {\n    this.anchor = undefined;\n    this.requestPersistentAnchorPending = this.data.persistent;\n    this.requestAnchorPending = !this.data.persistent;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var refSpace;\n    var pose;\n    var object3D = this.el.object3D;\n\n    if ((!sceneEl.is('ar-mode') && !sceneEl.is('vr-mode'))) { return; }\n    if (!this.anchor && this.requestPersistentAnchorPending) { this.restorePersistentAnchor(); }\n    if (!this.anchor && this.requestAnchorPending) { this.createAnchor(); }\n    if (!this.anchor) { return; }\n\n    frame = sceneEl.frame;\n    refSpace = xrManager.getReferenceSpace();\n\n    pose = frame.getPose(this.anchor.anchorSpace, refSpace);\n    // Apply position and orientation, leave scale as-is (see aframevr/aframe#5630)\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n  },\n\n  createAnchor: async function createAnchor (position, quaternion) {\n    var sceneEl = this.el.sceneEl;\n    var xrManager = sceneEl.renderer.xr;\n    var frame;\n    var referenceSpace;\n    var anchorPose;\n    var anchor;\n    var object3D = this.el.object3D;\n\n    position = position || object3D.position;\n    quaternion = quaternion || this.auxQuaternion.setFromEuler(object3D.rotation);\n\n    if (!anchorsSupported(sceneEl)) {\n      warn('This browser doesn\\'t support the WebXR anchors module');\n      return;\n    }\n\n    if (this.anchor) { this.deleteAnchor(); }\n\n    frame = sceneEl.frame;\n    referenceSpace = xrManager.getReferenceSpace();\n    anchorPose = new XRRigidTransform(\n      {\n        x: position.x,\n        y: position.y,\n        z: position.z\n      },\n      {\n        x: quaternion.x,\n        y: quaternion.y,\n        z: quaternion.z,\n        w: quaternion.w\n      });\n\n    this.requestAnchorPending = false;\n    anchor = await frame.createAnchor(anchorPose, referenceSpace);\n    if (this.data.persistent) {\n      if (this.el.id) {\n        this.persistentHandle = await anchor.requestPersistentHandle();\n        localStorage.setItem(this.el.id, this.persistentHandle);\n      } else {\n        warn('The anchor won\\'t be persisted because the entity has no assigned id.');\n      }\n    }\n    sceneEl.object3D.attach(this.el.object3D);\n    this.anchor = anchor;\n  },\n\n  restorePersistentAnchor: async function restorePersistentAnchor () {\n    var xrManager = this.el.sceneEl.renderer.xr;\n    var session = xrManager.getSession();\n    var persistentAnchors = session.persistentAnchors;\n    var storedPersistentHandle;\n    this.requestPersistentAnchorPending = false;\n    if (!this.el.id) {\n      warn('The entity associated to the persistent anchor cannot be retrieved because it doesn\\'t have an assigned id.');\n      this.requestAnchorPending = true;\n      return;\n    }\n    if (persistentAnchors) {\n      storedPersistentHandle = localStorage.getItem(this.el.id);\n      for (var i = 0; i < persistentAnchors.length; ++i) {\n        if (storedPersistentHandle !== persistentAnchors[i]) { continue; }\n        this.anchor = await session.restorePersistentAnchor(persistentAnchors[i]);\n        if (this.anchor) { this.persistentHandle = persistentAnchors[i]; }\n        break;\n      }\n      if (!this.anchor) { this.requestAnchorPending = true; }\n    } else {\n      this.requestPersistentAnchorPending = true;\n    }\n  },\n\n  deleteAnchor: function () {\n    var xrManager;\n    var session;\n    var anchor = this.anchor;\n\n    if (!anchor) { return; }\n    xrManager = this.el.sceneEl.renderer.xr;\n    session = xrManager.getSession();\n\n    anchor.delete();\n    this.el.sceneEl.object3D.add(this.el.object3D);\n    if (this.persistentHandle) { session.deletePersistentAnchor(this.persistentHandle); }\n    this.anchor = undefined;\n  }\n});\n\nfunction anchorsSupported (sceneEl) {\n  var xrManager = sceneEl.renderer.xr;\n  var session = xrManager.getSession();\n  return (session && session.restorePersistentAnchor);\n}\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Camera component.\n * Pairs along with camera system to handle tracking the active camera.\n */\nexport var Component = registerComponent('camera', {\n  schema: {\n    active: {default: true},\n    far: {default: 10000},\n    fov: {default: 80, min: 0},\n    near: {default: 0.005, min: 0},\n    spectator: {default: false},\n    zoom: {default: 1, min: 0}\n  },\n\n  /**\n   * Initialize three.js camera and add it to the entity.\n   * Add reference from scene to this entity as the camera.\n   */\n  init: function () {\n    var camera;\n    var el = this.el;\n\n    // Create camera.\n    camera = this.camera = new THREE.PerspectiveCamera();\n    el.setObject3D('camera', camera);\n  },\n\n  /**\n   * Update three.js camera.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var camera = this.camera;\n\n    // Update properties.\n    camera.aspect = data.aspect || (window.innerWidth / window.innerHeight);\n    camera.far = data.far;\n    camera.fov = data.fov;\n    camera.near = data.near;\n    camera.zoom = data.zoom;\n    camera.updateProjectionMatrix();\n\n    this.updateActiveCamera(oldData);\n    this.updateSpectatorCamera(oldData);\n  },\n\n  updateActiveCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // Active property did not change.\n    if (oldData && oldData.active === data.active || data.spectator) { return; }\n\n    // If `active` property changes, or first update, handle active camera with system.\n    if (data.active && system.activeCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setActiveCamera(el);\n    } else if (!data.active && system.activeCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableActiveCamera();\n    }\n  },\n\n  updateSpectatorCamera: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var system = this.system;\n    // spectator property did not change.\n    if (oldData && oldData.spectator === data.spectator) { return; }\n\n    // If `spectator` property changes, or first update, handle spectator camera with system.\n    if (data.spectator && system.spectatorCameraEl !== el) {\n      // Camera enabled. Set camera to this camera.\n      system.setSpectatorCamera(el);\n    } else if (!data.spectator && system.spectatorCameraEl === el) {\n      // Camera disabled. Set camera to another camera.\n      system.disableSpectatorCamera();\n    }\n  },\n\n  /**\n   * Remove camera on remove (callback).\n   */\n  remove: function () {\n    this.el.removeObject3D('camera');\n  }\n});\n","/* global MouseEvent, TouchEvent */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar EVENTS = {\n  CLICK: 'click',\n  FUSING: 'fusing',\n  MOUSEENTER: 'mouseenter',\n  MOUSEDOWN: 'mousedown',\n  MOUSELEAVE: 'mouseleave',\n  MOUSEUP: 'mouseup'\n};\n\nvar STATES = {\n  FUSING: 'cursor-fusing',\n  HOVERING: 'cursor-hovering',\n  HOVERED: 'cursor-hovered'\n};\n\nvar CANVAS_EVENTS = {\n  DOWN: ['mousedown', 'touchstart'],\n  UP: ['mouseup', 'touchend']\n};\n\nvar WEBXR_EVENTS = {\n  DOWN: ['selectstart'],\n  UP: ['selectend']\n};\n\nvar CANVAS_HOVER_CLASS = 'a-mouse-cursor-hover';\n\n/**\n * Cursor component. Applies the raycaster component specifically for starting the raycaster\n * from the camera and pointing from camera's facing direction, and then only returning the\n * closest intersection. Cursor can be fine-tuned by setting raycaster properties.\n *\n * @member {object} fuseTimeout - Timeout to trigger fuse-click.\n * @member {Element} cursorDownEl - Entity that was last mousedowned during current click.\n * @member {object} intersection - Attributes of the current intersection event, including\n *         3D- and 2D-space coordinates. See: http://threejs.org/docs/api/core/Raycaster.html\n * @member {Element} intersectedEl - Currently-intersected entity. Used to keep track to\n *         emit events when unintersecting.\n */\nexport var Component = registerComponent('cursor', {\n  dependencies: ['raycaster'],\n\n  schema: {\n    downEvents: {default: []},\n    fuse: {default: utils.device.isMobile()},\n    fuseTimeout: {default: 1500, min: 0},\n    mouseCursorStylesEnabled: {default: true},\n    upEvents: {default: []},\n    rayOrigin: {default: 'entity', oneOf: ['mouse', 'entity', 'xrselect']}\n  },\n\n  after: ['tracked-controls'],\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.fuseTimeout = undefined;\n    this.cursorDownEl = null;\n    this.intersectedEl = null;\n    this.canvasBounds = document.body.getBoundingClientRect();\n    this.isCursorDown = false;\n    this.activeXRInput = null;\n\n    // Debounce.\n    this.updateCanvasBounds = utils.debounce(function updateCanvasBounds () {\n      self.canvasBounds = self.el.sceneEl.canvas.getBoundingClientRect();\n    }, 500);\n\n    this.eventDetail = {};\n    this.intersectedEventDetail = {cursorEl: this.el};\n\n    // Bind methods.\n    this.onCursorDown = this.onCursorDown.bind(this);\n    this.onCursorUp = this.onCursorUp.bind(this);\n    this.onIntersection = this.onIntersection.bind(this);\n    this.onIntersectionCleared = this.onIntersectionCleared.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  update: function (oldData) {\n    var rayOrigin = this.data.rayOrigin;\n    if (rayOrigin === oldData.rayOrigin) { return; }\n    if (rayOrigin === 'entity') { this.resetRaycaster(); }\n    this.updateMouseEventListeners();\n    // Update the WebXR event listeners if needed.\n    // This handles the cases a cursor is created or has its rayOrigin changed during an XR session.\n    // In the case the cursor is created before we have an active XR session, it does not add the WebXR event listeners here (addWebXREventListeners is a no-op without xrSession), upon onEnterVR they are added.\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n    if (oldData.rayOrigin === 'xrselect' || oldData.rayOrigin === 'entity') {\n      this.removeWebXREventListeners();\n    }\n  },\n\n  tick: function () {\n    // Update on frame to allow someone to select and mousemove\n    var frame = this.el.sceneEl.frame;\n    var inputSource = this.activeXRInput;\n    if (this.data.rayOrigin === 'xrselect' && frame && inputSource) {\n      this.onMouseMove({\n        frame: frame,\n        inputSource: inputSource,\n        type: 'fakeselectevent'\n      });\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeState(STATES.HOVERING);\n    el.removeState(STATES.FUSING);\n    clearTimeout(this.fuseTimeout);\n    if (this.intersectedEl) { this.intersectedEl.removeState(STATES.HOVERED); }\n    this.removeEventListeners();\n  },\n\n  addEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    function addCanvasListeners () {\n      canvas = el.sceneEl.canvas;\n      if (data.downEvents.length || data.upEvents.length) { return; }\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.addEventListener(downEvent, self.onCursorDown, {passive: false});\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.addEventListener(upEvent, self.onCursorUp, {passive: false});\n      });\n    }\n\n    canvas = el.sceneEl.canvas;\n    if (canvas) {\n      addCanvasListeners();\n    } else {\n      el.sceneEl.addEventListener('render-target-loaded', addCanvasListeners);\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.addEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.addEventListener(upEvent, self.onCursorUp);\n    });\n    el.addEventListener('raycaster-intersection', this.onIntersection);\n    el.addEventListener('raycaster-closest-entity-changed', this.onIntersection);\n\n    el.addEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n\n    el.sceneEl.addEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    window.addEventListener('resize', this.updateCanvasBounds);\n    window.addEventListener('scroll', this.updateCanvasBounds);\n\n    this.updateMouseEventListeners();\n  },\n\n  removeEventListeners: function () {\n    var canvas;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    canvas = el.sceneEl.canvas;\n    if (canvas && !data.downEvents.length && !data.upEvents.length) {\n      CANVAS_EVENTS.DOWN.forEach(function (downEvent) {\n        canvas.removeEventListener(downEvent, self.onCursorDown);\n      });\n      CANVAS_EVENTS.UP.forEach(function (upEvent) {\n        canvas.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n\n    data.downEvents.forEach(function (downEvent) {\n      el.removeEventListener(downEvent, self.onCursorDown);\n    });\n    data.upEvents.forEach(function (upEvent) {\n      el.removeEventListener(upEvent, self.onCursorUp);\n    });\n    el.removeEventListener('raycaster-intersection', this.onIntersection);\n    el.removeEventListener('raycaster-closest-entity-changed', this.onIntersection);\n    el.removeEventListener('raycaster-intersection-cleared', this.onIntersectionCleared);\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchstart', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n\n    el.sceneEl.removeEventListener('rendererresize', this.updateCanvasBounds);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    window.removeEventListener('resize', this.updateCanvasBounds);\n    window.removeEventListener('scroll', this.updateCanvasBounds);\n\n    this.removeWebXREventListeners();\n  },\n\n  updateMouseEventListeners: function () {\n    var canvas;\n    var el = this.el;\n\n    canvas = el.sceneEl.canvas;\n    canvas.removeEventListener('mousemove', this.onMouseMove);\n    canvas.removeEventListener('touchmove', this.onMouseMove);\n    el.setAttribute('raycaster', 'useWorldCoordinates', false);\n    if (this.data.rayOrigin !== 'mouse') { return; }\n    canvas.addEventListener('mousemove', this.onMouseMove);\n    canvas.addEventListener('touchmove', this.onMouseMove, {passive: false});\n    el.setAttribute('raycaster', 'useWorldCoordinates', true);\n    this.updateCanvasBounds();\n  },\n\n  resetRaycaster: function () {\n    this.el.setAttribute('raycaster', {\n      direction: new THREE.Vector3().set(0, 0, -1),\n      origin: new THREE.Vector3()\n    });\n  },\n\n  addWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.addEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.addEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  removeWebXREventListeners: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    if (xrSession) {\n      WEBXR_EVENTS.DOWN.forEach(function (downEvent) {\n        xrSession.removeEventListener(downEvent, self.onCursorDown);\n      });\n      WEBXR_EVENTS.UP.forEach(function (upEvent) {\n        xrSession.removeEventListener(upEvent, self.onCursorUp);\n      });\n    }\n  },\n\n  onMouseMove: (function () {\n    var direction = new THREE.Vector3();\n    var mouse = new THREE.Vector2();\n    var origin = new THREE.Vector3();\n    var rayCasterConfig = {origin: origin, direction: direction};\n\n    return function (evt) {\n      var bounds = this.canvasBounds;\n      var camera = this.el.sceneEl.camera;\n      var cameraElParent;\n      var left;\n      var point;\n      var top;\n\n      var frame;\n      var inputSource;\n      var referenceSpace;\n      var pose;\n      var transform;\n\n      camera.parent.updateMatrixWorld();\n\n      // Calculate mouse position based on the canvas element\n      if (evt.type === 'touchmove' || evt.type === 'touchstart') {\n        // Track the first touch for simplicity.\n        point = evt.touches.item(0);\n      } else {\n        point = evt;\n      }\n\n      left = point.clientX - bounds.left;\n      top = point.clientY - bounds.top;\n      mouse.x = (left / bounds.width) * 2 - 1;\n      mouse.y = -(top / bounds.height) * 2 + 1;\n\n      if (this.data.rayOrigin === 'xrselect' && (evt.type === 'selectstart' || evt.type === 'fakeselectevent')) {\n        frame = evt.frame;\n        inputSource = evt.inputSource;\n        referenceSpace = this.el.sceneEl.renderer.xr.getReferenceSpace();\n        pose = frame.getPose(inputSource.targetRaySpace, referenceSpace);\n        if (pose) {\n          transform = pose.transform;\n          direction.set(0, 0, -1);\n          direction.applyQuaternion(transform.orientation);\n          origin.copy(transform.position);\n\n          // Transform XRPose into world space\n          cameraElParent = camera.el.object3D.parent;\n          cameraElParent.localToWorld(origin);\n          direction.transformDirection(cameraElParent.matrixWorld);\n        }\n      } else if (evt.type === 'fakeselectout') {\n        direction.set(0, 1, 0);\n        origin.set(0, 9999, 0);\n      } else if (camera && camera.isPerspectiveCamera) {\n        origin.setFromMatrixPosition(camera.matrixWorld);\n        direction.set(mouse.x, mouse.y, 0.5).unproject(camera).sub(origin).normalize();\n      } else if (camera && camera.isOrthographicCamera) {\n        origin.set(mouse.x, mouse.y, (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera); // set origin in plane of camera\n        direction.set(0, 0, -1).transformDirection(camera.matrixWorld);\n      } else {\n        console.error('AFRAME.Raycaster: Unsupported camera type: ' + camera.type);\n      }\n\n      this.el.setAttribute('raycaster', rayCasterConfig);\n      if (evt.type === 'touchmove') { evt.preventDefault(); }\n    };\n  })(),\n\n  /**\n   * Trigger mousedown and keep track of the mousedowned entity.\n   */\n  onCursorDown: function (evt) {\n    this.isCursorDown = true;\n    // Raycast again for touch.\n    if (this.data.rayOrigin === 'mouse' && evt.type === 'touchstart') {\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n      evt.preventDefault();\n    }\n\n    if (this.data.rayOrigin === 'xrselect' && evt.type === 'selectstart') {\n      this.activeXRInput = evt.inputSource;\n      this.onMouseMove(evt);\n      this.el.components.raycaster.checkIntersections();\n\n      // if something was tapped on don't do ar-hit-test things\n      if (\n        this.el.components.raycaster.intersectedEls.length &&\n        this.el.sceneEl.components['ar-hit-test'] !== undefined &&\n        this.el.sceneEl.getAttribute('ar-hit-test').enabled\n      ) {\n        // Cancel the ar-hit-test behaviours and disable the ar-hit-test\n        this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', false);\n        this.reenableARHitTest = true;\n      }\n    }\n\n    this.twoWayEmit(EVENTS.MOUSEDOWN, evt);\n    this.cursorDownEl = this.intersectedEl;\n  },\n\n  /**\n   * Trigger mouseup if:\n   * - Not fusing (mobile has no mouse).\n   * - Currently intersecting an entity.\n   * - Currently-intersected entity is the same as the one when mousedown was triggered,\n   *   in case user mousedowned one entity, dragged to another, and mouseupped.\n   */\n  onCursorUp: function (evt) {\n    if (!this.isCursorDown) { return; }\n    if (this.data.rayOrigin === 'xrselect' && this.activeXRInput !== evt.inputSource) { return; }\n\n    this.isCursorDown = false;\n\n    var data = this.data;\n    this.twoWayEmit(EVENTS.MOUSEUP, evt);\n\n    if (this.reenableARHitTest === true) {\n      this.el.sceneEl.setAttribute('ar-hit-test', 'enabled', true);\n      this.reenableARHitTest = undefined;\n    }\n\n    // If intersected entity has changed since the cursorDown, still emit mouseUp on the\n    // previously cursorUp entity.\n    if (this.cursorDownEl && this.cursorDownEl !== this.intersectedEl) {\n      this.intersectedEventDetail.intersection = null;\n      this.cursorDownEl.emit(EVENTS.MOUSEUP, this.intersectedEventDetail);\n    }\n\n    if ((!data.fuse || data.rayOrigin === 'mouse' || data.rayOrigin === 'xrselect') &&\n        this.intersectedEl && this.cursorDownEl === this.intersectedEl) {\n      this.twoWayEmit(EVENTS.CLICK, evt);\n    }\n\n    // if the current xr input stops selecting then make the ray caster point somewhere else\n    if (data.rayOrigin === 'xrselect') {\n      this.onMouseMove({\n        type: 'fakeselectout'\n      });\n    }\n\n    this.activeXRInput = null;\n    this.cursorDownEl = null;\n    if (evt.type === 'touchend') { evt.preventDefault(); }\n  },\n\n  /**\n   * Handle intersection.\n   */\n  onIntersection: function (evt) {\n    var currentIntersection;\n    var cursorEl = this.el;\n    var index;\n    var intersectedEl;\n    var intersection;\n\n    // Select closest object, excluding the cursor.\n    index = evt.detail.els[0] === cursorEl ? 1 : 0;\n    intersection = evt.detail.intersections[index];\n    intersectedEl = evt.detail.els[index];\n\n    // If cursor is the only intersected object, ignore the event.\n    if (!intersectedEl) { return; }\n\n    // Already intersecting this entity.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Ignore events further away than active intersection.\n    if (this.intersectedEl) {\n      currentIntersection = this.el.components.raycaster.getIntersection(this.intersectedEl);\n      if (currentIntersection && currentIntersection.distance <= intersection.distance) { return; }\n    }\n\n    // Unset current intersection.\n    this.clearCurrentIntersection(true);\n\n    this.setIntersection(intersectedEl, intersection);\n  },\n\n  /**\n   * Handle intersection cleared.\n   */\n  onIntersectionCleared: function (evt) {\n    var clearedEls = evt.detail.clearedEls;\n    // Check if the current intersection has ended\n    if (clearedEls.indexOf(this.intersectedEl) === -1) { return; }\n    this.clearCurrentIntersection();\n  },\n\n  onEnterVR: function () {\n    var rayOrigin = this.data.rayOrigin;\n    this.clearCurrentIntersection(true);\n    if (rayOrigin === 'xrselect' || rayOrigin === 'entity') {\n      this.addWebXREventListeners();\n    }\n  },\n\n  setIntersection: function (intersectedEl, intersection) {\n    var cursorEl = this.el;\n    var data = this.data;\n    var self = this;\n\n    // Already intersecting.\n    if (this.intersectedEl === intersectedEl) { return; }\n\n    // Set new intersection.\n    this.intersectedEl = intersectedEl;\n\n    // Hovering.\n    cursorEl.addState(STATES.HOVERING);\n    intersectedEl.addState(STATES.HOVERED);\n    this.twoWayEmit(EVENTS.MOUSEENTER);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.add(CANVAS_HOVER_CLASS);\n    }\n\n    // Begin fuse if necessary.\n    if (data.fuseTimeout === 0 || !data.fuse || data.rayOrigin === 'xrselect' || data.rayOrigin === 'mouse') { return; }\n    cursorEl.addState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.FUSING);\n    this.fuseTimeout = setTimeout(function fuse () {\n      cursorEl.removeState(STATES.FUSING);\n      self.twoWayEmit(EVENTS.CLICK);\n    }, data.fuseTimeout);\n  },\n\n  clearCurrentIntersection: function (ignoreRemaining) {\n    var index;\n    var intersection;\n    var intersections;\n    var cursorEl = this.el;\n\n    // Nothing to be cleared.\n    if (!this.intersectedEl) { return; }\n\n    // No longer hovering (or fusing).\n    this.intersectedEl.removeState(STATES.HOVERED);\n    cursorEl.removeState(STATES.HOVERING);\n    cursorEl.removeState(STATES.FUSING);\n    this.twoWayEmit(EVENTS.MOUSELEAVE);\n\n    if (this.data.mouseCursorStylesEnabled && this.data.rayOrigin === 'mouse') {\n      this.el.sceneEl.canvas.classList.remove(CANVAS_HOVER_CLASS);\n    }\n\n    // Unset intersected entity (after emitting the event).\n    this.intersectedEl = null;\n\n    // Clear fuseTimeout.\n    clearTimeout(this.fuseTimeout);\n\n    // Set intersection to another raycast element if any.\n    if (ignoreRemaining === true) { return; }\n    intersections = this.el.components.raycaster.intersections;\n    if (intersections.length === 0) { return; }\n    // Exclude the cursor.\n    index = intersections[0].object.el === cursorEl ? 1 : 0;\n    intersection = intersections[index];\n    if (!intersection) { return; }\n    this.setIntersection(intersection.object.el, intersection);\n  },\n\n  /**\n   * Helper to emit on both the cursor and the intersected entity (if exists).\n   */\n  twoWayEmit: function (evtName, originalEvent) {\n    var el = this.el;\n    var intersectedEl = this.intersectedEl;\n    var intersection;\n\n    function addOriginalEvent (detail, evt) {\n      if (originalEvent instanceof MouseEvent) {\n        detail.mouseEvent = originalEvent;\n      } else if (typeof TouchEvent !== 'undefined' &&\n                 originalEvent instanceof TouchEvent) {\n        detail.touchEvent = originalEvent;\n      }\n    }\n\n    intersection = this.el.components.raycaster.getIntersection(intersectedEl);\n    this.eventDetail.intersectedEl = intersectedEl;\n    this.eventDetail.intersection = intersection;\n    addOriginalEvent(this.eventDetail, originalEvent);\n    el.emit(evtName, this.eventDetail);\n\n    if (!intersectedEl) { return; }\n\n    this.intersectedEventDetail.intersection = intersection;\n    addOriginalEvent(this.intersectedEventDetail, originalEvent);\n    intersectedEl.emit(evtName, this.intersectedEventDetail);\n  }\n});\n","import * as THREE from 'three';\nimport { geometries, geometryNames } from '../core/geometry.js';\nimport { registerComponent } from '../core/component.js';\n\nvar dummyGeometry = new THREE.BufferGeometry();\n\n/**\n * Geometry component. Combined with material component to make a mesh in 3D object.\n * Extended with registered geometries.\n */\nexport var Component = registerComponent('geometry', {\n  schema: {\n    buffer: {default: true},\n    primitive: {default: 'box', oneOf: geometryNames, schemaChange: true},\n    skipCache: {default: false}\n  },\n\n  init: function () {\n    this.geometry = null;\n  },\n\n  /**\n   * Talk to geometry system to get or create geometry.\n   */\n  update: function (previousData) {\n    var data = this.data;\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    // Dispose old geometry if we created one.\n    if (this.geometry) {\n      system.unuseGeometry(previousData);\n      this.geometry = null;\n    }\n\n    // Create new geometry.\n    this.geometry = system.getOrCreateGeometry(data);\n\n    // Set on mesh. If mesh does not exist, create it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.geometry = this.geometry;\n    } else {\n      mesh = new THREE.Mesh();\n      mesh.geometry = this.geometry;\n      // Default material if not defined on the entity.\n      if (!this.el.getAttribute('material')) {\n        mesh.material = new THREE.MeshStandardMaterial({\n          color: Math.random() * 0xFFFFFF,\n          metalness: 0,\n          roughness: 0.5\n        });\n      }\n      el.setObject3D('mesh', mesh);\n    }\n  },\n\n  /**\n   * Tell geometry system that entity is no longer using the geometry.\n   * Unset the geometry on the mesh\n   */\n  remove: function () {\n    this.system.unuseGeometry(this.data);\n    this.el.getObject3D('mesh').geometry = dummyGeometry;\n    this.geometry = null;\n  },\n\n  /**\n   * Update geometry component schema based on geometry type.\n   */\n  updateSchema: function (data) {\n    var currentGeometryType = this.oldData && this.oldData.primitive;\n    var newGeometryType = data.primitive;\n    var schema = geometries[newGeometryType] && geometries[newGeometryType].schema;\n\n    // Geometry has no schema.\n    if (!schema) { throw new Error('Unknown geometry schema `' + newGeometryType + '`'); }\n    // Nothing has changed.\n    if (currentGeometryType && currentGeometryType === newGeometryType) { return; }\n\n    this.extendSchema(schema);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar GAMEPAD_ID_PREFIX = 'generic';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - thumbstick\n *\n * Axis:\n * 0 - touchpad\n * 1 - thumbstick\n *\n */\nvar INPUT_MAPPING = {\n  axes: {\n    touchpad: [0, 1],\n    thumbstick: [2, 3]\n  },\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('generic-tracked-controller-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    defaultModel: {default: true},\n    defaultModelColor: {default: 'gray'},\n    disabled: {default: false}\n  },\n\n  after: ['tracked-controls'],\n\n  /**\n   * Button IDs:\n   * 0 - trackpad\n   * 1 - trigger\n   */\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.wasControllerConnected = false;\n    this.bindMethods();\n\n    // generic-tracked-controller-controls has the lowest precedence.\n    // Disable this component if there are more specialized controls components.\n    this.el.addEventListener('controllerconnected', function (evt) {\n      if (evt.detail.name === self.name) { return; }\n      self.wasControllerConnected = true;\n      self.removeEventListeners();\n      self.removeControllersUpdateListener();\n    });\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, GAMEPAD_ID_PREFIX,\n      {hand: hand, iterateControllerProfiles: true});\n  },\n\n  play: function () {\n    if (this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // Do nothing if tracked-controls already set.\n    // Generic controls have the lowest precedence.\n    if (this.el.components['tracked-controls']) {\n      this.removeEventListeners();\n      return;\n    }\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX,\n      iterateControllerProfiles: true\n    });\n    if (!this.data.defaultModel) { return; }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    if (!this.wasControllerConnected) { return; }\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  initDefaultModel: function () {\n    var modelEl = this.modelEl = document.createElement('a-entity');\n    modelEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 0.03\n    });\n    modelEl.setAttribute('material', {color: this.data.color});\n    this.el.appendChild(modelEl);\n    this.el.emit('controllermodelready', {\n      name: 'generic-tracked-controller-controls',\n      model: this.modelEl,\n      rayOrigin: {origin: {x: 0, y: 0, z: -0.01}, direction: {x: 0, y: 0, z: -1}}\n    });\n  }\n});\n","import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:gltf-model:warn');\n\n/**\n * glTF model loader.\n */\nexport var Component = registerComponent('gltf-model', {\n  schema: {type: 'model'},\n\n  init: function () {\n    var self = this;\n    var dracoLoader = this.system.getDRACOLoader();\n    var meshoptDecoder = this.system.getMeshoptDecoder();\n    var ktxLoader = this.system.getKTX2Loader();\n    this.model = null;\n    this.loader = new GLTFLoader();\n    if (dracoLoader) {\n      this.loader.setDRACOLoader(dracoLoader);\n    }\n    if (meshoptDecoder) {\n      this.ready = meshoptDecoder.then(function (meshoptDecoder) {\n        self.loader.setMeshoptDecoder(meshoptDecoder);\n      });\n    } else {\n      this.ready = Promise.resolve();\n    }\n    if (ktxLoader) {\n      this.loader.setKTX2Loader(ktxLoader);\n    }\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    this.remove();\n\n    if (!src) { return; }\n\n    this.ready.then(function () {\n      self.loader.load(src, function gltfLoaded (gltfModel) {\n        if (src !== self.data) { return; }\n        self.model = gltfModel.scene || gltfModel.scenes[0];\n        self.model.animations = gltfModel.animations;\n\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      }, undefined /* onProgress */, function gltfFailed (error) {\n        var message = (error && error.message) ? error.message : 'Failed to load glTF model';\n        warn(message);\n        el.emit('model-error', {format: 'gltf', src: src});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n    this.model = null;\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\nregisterComponent('grabbable', {\n  init: function () {\n    this.el.setAttribute('obb-collider', 'centerModel: true');\n  }\n});\n","/* global XRHand */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AEntity } from '../core/a-entity.js';\nimport { checkControllerPresentAndSetup } from '../utils/tracked-controls.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\nvar LEFT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/left.glb';\nvar RIGHT_HAND_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus-hands/v4/right.glb';\n\nvar JOINTS = [\n  'wrist',\n  'thumb-metacarpal',\n  'thumb-phalanx-proximal',\n  'thumb-phalanx-distal',\n  'thumb-tip',\n  'index-finger-metacarpal',\n  'index-finger-phalanx-proximal',\n  'index-finger-phalanx-intermediate',\n  'index-finger-phalanx-distal',\n  'index-finger-tip',\n  'middle-finger-metacarpal',\n  'middle-finger-phalanx-proximal',\n  'middle-finger-phalanx-intermediate',\n  'middle-finger-phalanx-distal',\n  'middle-finger-tip',\n  'ring-finger-metacarpal',\n  'ring-finger-phalanx-proximal',\n  'ring-finger-phalanx-intermediate',\n  'ring-finger-phalanx-distal',\n  'ring-finger-tip',\n  'pinky-finger-metacarpal',\n  'pinky-finger-phalanx-proximal',\n  'pinky-finger-phalanx-intermediate',\n  'pinky-finger-phalanx-distal',\n  'pinky-finger-tip'\n];\n\nvar WRIST_INDEX = 0;\nvar THUMB_TIP_INDEX = 4;\nvar INDEX_TIP_INDEX = 9;\n\nvar PINCH_START_DISTANCE = 0.015;\nvar PINCH_END_DISTANCE = 0.02;\n\n/**\n * Controls for hand tracking\n */\nexport var Component = registerComponent('hand-tracking-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    modelStyle: {default: 'mesh', oneOf: ['dots', 'mesh']},\n    modelColor: {default: 'white'},\n    modelOpacity: {default: 1.0}\n  },\n\n  after: ['tracked-controls'],\n\n  bindMethods: function () {\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n  },\n\n  addEventListeners: function () {\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = true;\n    }\n  },\n\n  removeEventListeners: function () {\n    this.el.removeEventListener('model-loaded', this.onModelLoaded);\n    for (var i = 0; i < this.jointEls.length; ++i) {\n      this.jointEls[i].object3D.visible = false;\n    }\n  },\n\n  init: function () {\n    var sceneEl = this.el.sceneEl;\n    var webxrData = sceneEl.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (optionalFeaturesArray.indexOf('hand-tracking') === -1) {\n      optionalFeaturesArray.push('hand-tracking');\n      sceneEl.setAttribute('webxr', webxrData);\n    }\n\n    this.wristObject3D = new THREE.Object3D();\n    this.el.sceneEl.object3D.add(this.wristObject3D);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onChildAttached = this.onChildAttached.bind(this);\n    this.jointEls = [];\n    this.controllerPresent = false;\n    this.isPinched = false;\n    this.pinchEventDetail = {\n      position: new THREE.Vector3(),\n      wristRotation: new THREE.Quaternion()\n    };\n    this.indexTipPosition = new THREE.Vector3();\n\n    this.hasPoses = false;\n    this.jointPoses = new Float32Array(16 * JOINTS.length);\n    this.jointRadii = new Float32Array(JOINTS.length);\n\n    this.bindMethods();\n\n    this.updateReferenceSpace = this.updateReferenceSpace.bind(this);\n    this.el.sceneEl.addEventListener('enter-vr', this.updateReferenceSpace);\n    this.el.sceneEl.addEventListener('exit-vr', this.updateReferenceSpace);\n    this.el.addEventListener('child-attached', this.onChildAttached);\n\n    this.wristObject3D.visible = false;\n  },\n\n  onChildAttached: function (evt) {\n    this.addChildEntity(evt.detail.el);\n  },\n\n  update: function () {\n    this.updateModelMaterial();\n  },\n\n  updateModelMaterial: function () {\n    var jointEls = this.jointEls;\n    var skinnedMesh = this.skinnedMesh;\n    var transparent = !(this.data.modelOpacity === 1.0);\n    if (skinnedMesh) {\n      this.skinnedMesh.material.color.set(this.data.modelColor);\n      this.skinnedMesh.material.transparent = transparent;\n      this.skinnedMesh.material.opacity = this.data.modelOpacity;\n    }\n\n    for (var i = 0; i < jointEls.length; i++) {\n      jointEls[i].setAttribute('material', {\n        color: this.data.modelColor,\n        transparent: transparent,\n        opacity: this.data.modelOpacity\n      });\n    }\n  },\n\n  updateReferenceSpace: function () {\n    var self = this;\n    var xrSession = this.el.sceneEl.xrSession;\n    this.referenceSpace = undefined;\n    if (!xrSession) { return; }\n    var referenceSpaceType = self.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(referenceSpaceType).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (error) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(referenceSpaceType, 'tracked-controls-webxr uses reference space ' + referenceSpaceType);\n      throw error;\n    });\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var hand = data.hand ? data.hand : undefined;\n    checkControllerPresentAndSetup(\n      this, '',\n      {hand: hand, iterateControllerProfiles: true, handTracking: true});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var frame = sceneEl.frame;\n    var trackedControlsWebXR = this.el.components['tracked-controls'];\n    var referenceSpace = this.referenceSpace;\n    if (!controller || !frame || !referenceSpace || !trackedControlsWebXR) { return; }\n    this.hasPoses = false;\n    if (controller.hand) {\n      this.el.object3D.position.set(0, 0, 0);\n      this.el.object3D.rotation.set(0, 0, 0);\n\n      this.hasPoses = frame.fillPoses(controller.hand.values(), referenceSpace, this.jointPoses) &&\n        frame.fillJointRadii(controller.hand.values(), this.jointRadii);\n\n      this.updateHandModel();\n      this.detectGesture();\n      this.updateWristObject();\n    }\n  },\n\n  updateWristObject: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var wristObject3D = this.wristObject3D;\n      if (!wristObject3D || !this.hasPoses) { return; }\n      jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16);\n      wristObject3D.position.setFromMatrixPosition(jointPose);\n      wristObject3D.quaternion.setFromRotationMatrix(jointPose);\n    };\n  })(),\n\n  updateHandModel: function () {\n    this.wristObject3D.visible = true;\n    this.el.object3D.visible = true;\n\n    if (this.data.modelStyle === 'dots') {\n      this.updateHandDotsModel();\n    }\n\n    if (this.data.modelStyle === 'mesh') {\n      this.updateHandMeshModel();\n    }\n  },\n\n  getBone: function (name) {\n    var bones = this.bones;\n    for (var i = 0; i < bones.length; i++) {\n      if (bones[i].name === name) { return bones[i]; }\n    }\n    return null;\n  },\n\n  updateHandMeshModel: (function () {\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var i = 0;\n      var jointPoses = this.jointPoses;\n      var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n      if (!controller || !this.mesh) { return; }\n      this.mesh.visible = false;\n      if (!this.hasPoses) { return; }\n      for (var inputjoint of controller.hand.values()) {\n        var bone = this.getBone(inputjoint.jointName);\n        if (bone != null) {\n          this.mesh.visible = true;\n          jointPose.fromArray(jointPoses, i * 16);\n          bone.position.setFromMatrixPosition(jointPose);\n          bone.quaternion.setFromRotationMatrix(jointPose);\n        }\n        i++;\n      }\n    };\n  })(),\n\n  updateHandDotsModel: function () {\n    var jointPoses = this.jointPoses;\n    var jointRadii = this.jointRadii;\n    var controller = this.el.components['tracked-controls'] && this.el.components['tracked-controls'].controller;\n    var jointEl;\n    var object3D;\n\n    for (var i = 0; i < controller.hand.size; i++) {\n      jointEl = this.jointEls[i];\n      object3D = jointEl.object3D;\n      jointEl.object3D.visible = this.hasPoses;\n      if (!this.hasPoses) { continue; }\n      object3D.matrix.fromArray(jointPoses, i * 16);\n      object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n      jointEl.setAttribute('scale', {x: jointRadii[i], y: jointRadii[i], z: jointRadii[i]});\n    }\n  },\n\n  detectGesture: function () {\n    this.detectPinch();\n  },\n\n  detectPinch: (function () {\n    var thumbTipPosition = new THREE.Vector3();\n    var jointPose = new THREE.Matrix4();\n    return function () {\n      var indexTipPosition = this.indexTipPosition;\n      var pinchEventDetail = this.pinchEventDetail;\n      if (!this.hasPoses) { return; }\n\n      thumbTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, THUMB_TIP_INDEX * 16));\n      indexTipPosition.setFromMatrixPosition(jointPose.fromArray(this.jointPoses, INDEX_TIP_INDEX * 16));\n      pinchEventDetail.wristRotation.setFromRotationMatrix(jointPose.fromArray(this.jointPoses, WRIST_INDEX * 16));\n\n      var distance = indexTipPosition.distanceTo(thumbTipPosition);\n\n      if (distance < PINCH_START_DISTANCE && this.isPinched === false) {\n        this.isPinched = true;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchstarted', pinchEventDetail);\n      }\n\n      if (distance > PINCH_END_DISTANCE && this.isPinched === true) {\n        this.isPinched = false;\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchended', pinchEventDetail);\n      }\n\n      if (this.isPinched) {\n        pinchEventDetail.position.copy(indexTipPosition).add(thumbTipPosition).multiplyScalar(0.5);\n        this.el.emit('pinchmoved', pinchEventDetail);\n      }\n    };\n  })(),\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      id: '',\n      hand: data.hand,\n      iterateControllerProfiles: true,\n      handTrackingEnabled: true\n    });\n\n    if (this.mesh) {\n      if (this.mesh !== el.getObject3D('mesh')) {\n        el.setObject3D('mesh', this.mesh);\n      }\n      return;\n    }\n    this.initDefaultModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    var el = this.el;\n    var controller;\n    this.checkIfControllerPresent();\n    controller = el.components['tracked-controls'] && el.components['tracked-controls'].controller;\n    if (!this.mesh) { return; }\n    if (controller && controller.hand && (controller.hand instanceof XRHand)) {\n      el.setObject3D('mesh', this.mesh);\n    }\n  },\n\n  initDefaultModel: function () {\n    var data = this.data;\n    if (data.modelStyle === 'dots') {\n      this.initDotsModel();\n    }\n\n    if (data.modelStyle === 'mesh') {\n      this.initMeshHandModel();\n    }\n\n    this.el.object3D.visible = true;\n    this.wristObject3D.visible = true;\n  },\n\n  initDotsModel: function () {\n    // Add models just once.\n    if (this.jointEls.length !== 0) { return; }\n    for (var i = 0; i < JOINTS.length; ++i) {\n      var jointEl = this.jointEl = document.createElement('a-entity');\n      jointEl.setAttribute('geometry', {\n        primitive: 'sphere',\n        radius: 1.0\n      });\n      jointEl.object3D.visible = false;\n      this.el.appendChild(jointEl);\n      this.jointEls.push(jointEl);\n    }\n    this.updateModelMaterial();\n  },\n\n  initMeshHandModel: function () {\n    var modelURL = this.data.hand === 'left' ? LEFT_HAND_MODEL_URL : RIGHT_HAND_MODEL_URL;\n    this.el.setAttribute('gltf-model', modelURL);\n  },\n\n  onModelLoaded: function () {\n    var mesh = this.mesh = this.el.getObject3D('mesh').children[0];\n    var skinnedMesh = this.skinnedMesh = mesh.getObjectByProperty('type', 'SkinnedMesh');\n    if (!this.skinnedMesh) { return; }\n    this.bones = skinnedMesh.skeleton.bones;\n    this.el.removeObject3D('mesh');\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(0, 0, 0);\n    skinnedMesh.frustumCulled = false;\n    skinnedMesh.material = new THREE.MeshStandardMaterial();\n    this.updateModelMaterial();\n    this.setupChildrenEntities();\n    this.el.setObject3D('mesh', mesh);\n    this.el.emit('controllermodelready', {\n      name: 'hand-tracking-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  setupChildrenEntities: function () {\n    var childrenEls = this.el.children;\n    for (var i = 0; i < childrenEls.length; ++i) {\n      if (!(childrenEls[i] instanceof AEntity)) { continue; }\n      this.addChildEntity(childrenEls[i]);\n    }\n  },\n\n  addChildEntity: function (childEl) {\n    if (!(childEl instanceof AEntity)) { return; }\n    this.wristObject3D.add(childEl.object3D);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\n\nregisterComponent('hand-tracking-grab-controls', {\n  schema: {\n    hand: {default: 'right', oneOf: ['left', 'right']},\n    color: {type: 'color', default: 'white'},\n    hoverColor: {type: 'color', default: '#538df1'},\n    hoverEnabled: {default: false}\n  },\n\n  init: function () {\n    var el = this.el;\n    var data = this.data;\n    var trackedObject3DVariable;\n\n    if (data.hand === 'right') {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.3';\n    } else {\n      trackedObject3DVariable = 'components.hand-tracking-controls.bones.21';\n    }\n\n    el.setAttribute('hand-tracking-controls', {hand: data.hand});\n    el.setAttribute('obb-collider', {trackedObject3D: trackedObject3DVariable, size: 0.04});\n\n    this.auxMatrix = new THREE.Matrix4();\n\n    this.onCollisionStarted = this.onCollisionStarted.bind(this);\n    this.el.addEventListener('obbcollisionstarted', this.onCollisionStarted);\n\n    this.onCollisionEnded = this.onCollisionEnded.bind(this);\n    this.el.addEventListener('obbcollisionended', this.onCollisionEnded);\n\n    this.onPinchStarted = this.onPinchStarted.bind(this);\n    this.el.addEventListener('pinchstarted', this.onPinchStarted);\n\n    this.onPinchEnded = this.onPinchEnded.bind(this);\n    this.el.addEventListener('pinchended', this.onPinchEnded);\n  },\n\n  transferEntityOwnership: function () {\n    var grabbingElComponent;\n    var grabbingEls = this.el.sceneEl.querySelectorAll('[hand-tracking-grab-controls]');\n    for (var i = 0; i < grabbingEls.length; ++i) {\n      grabbingElComponent = grabbingEls[i].components['hand-tracking-grab-controls'];\n      if (grabbingElComponent === this) { continue; }\n      if (this.grabbedEl && this.grabbedEl === grabbingElComponent.grabbedEl) {\n        grabbingElComponent.releaseGrabbedEntity();\n      }\n    }\n    return false;\n  },\n\n  onCollisionStarted: function (evt) {\n    var withEl = evt.detail.withEl;\n    if (this.collidedEl) { return; }\n    if (!withEl.getAttribute('grabbable')) { return; }\n    this.collidedEl = withEl;\n    this.grabbingObject3D = evt.detail.trackedObject3D;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.hoverColor);\n    }\n  },\n\n  onCollisionEnded: function () {\n    this.collidedEl = undefined;\n    if (this.grabbedEl) { return; }\n    this.grabbingObject3D = undefined;\n    if (this.data.hoverEnabled) {\n      this.el.setAttribute('hand-tracking-controls', 'modelColor', this.data.color);\n    }\n  },\n\n  onPinchStarted: function (evt) {\n    if (!this.collidedEl) { return; }\n    this.grabbedEl = this.collidedEl;\n    this.transferEntityOwnership();\n    this.grab();\n  },\n\n  onPinchEnded: function () {\n    this.releaseGrabbedEntity();\n  },\n\n  releaseGrabbedEntity: function () {\n    var grabbedEl = this.grabbedEl;\n    if (!grabbedEl) { return; }\n\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    var newParent = this.originalParent;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabended', {grabbedEl: grabbedEl});\n    this.grabbedEl = undefined;\n    this.originalParent = undefined;\n  },\n\n  grab: function () {\n    var grabbedEl = this.grabbedEl;\n    var child = grabbedEl.object3D;\n    var parent = child.parent;\n    this.originalParent = parent;\n    var newParent = this.el.components['hand-tracking-controls'].wristObject3D;\n\n    child.applyMatrix4(parent.matrixWorld);\n    child.applyMatrix4(this.auxMatrix.copy(newParent.matrixWorld).invert());\n    parent.remove(child);\n    newParent.add(child);\n\n    this.el.emit('grabstarted', {grabbedEl: grabbedEl});\n  }\n});\n","import * as THREE from 'three';\nimport { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\n// Found at https://github.com/aframevr/assets.\nvar MODEL_URLS = {\n  toonLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHand.glb',\n  toonRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHand.glb',\n  lowPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandLow.glb',\n  lowPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandLow.glb',\n  highPolyLeft: AFRAME_CDN_ROOT + 'controllers/hands/leftHandHigh.glb',\n  highPolyRight: AFRAME_CDN_ROOT + 'controllers/hands/rightHandHigh.glb'\n};\n\n// Poses.\nvar ANIMATIONS = {\n  open: 'Open',\n  // point: grip active, trackpad surface active, trigger inactive.\n  point: 'Point',\n  // pointThumb: grip active, trigger inactive, trackpad surface inactive.\n  pointThumb: 'Point + Thumb',\n  // fist: grip active, trigger active, trackpad surface active.\n  fist: 'Fist',\n  // hold: trigger active, grip inactive.\n  hold: 'Hold',\n  // thumbUp: grip active, trigger active, trackpad surface inactive.\n  thumbUp: 'Thumb Up'\n};\n\n// Map animation to public events for the API.\nvar EVENTS = {};\nEVENTS[ANIMATIONS.fist] = 'grip';\nEVENTS[ANIMATIONS.thumbUp] = 'pistol';\nEVENTS[ANIMATIONS.point] = 'pointing';\n\n/**\n * Hand controls component that abstracts 6DoF controls:\n *   meta-touch-controls, vive-controls, windows-motion-controls.\n *\n * Originally meant to be a sample implementation of applications-specific controls that\n * abstracts multiple types of controllers.\n *\n * Auto-detect appropriate controller.\n * Handle common events coming from the detected vendor-specific controls.\n * Translate button events to semantic hand-related event names:\n *   (gripclose, gripopen, thumbup, thumbdown, pointup, pointdown)\n * Load hand model with gestures that are applied based on the button pressed.\n *\n * @property {string} Hand mapping (`left`, `right`).\n */\nexport var Component = registerComponent('hand-controls', {\n  schema: {\n    color: {default: 'white', type: 'color'},\n    hand: { default: 'left' },\n    handModelStyle: {default: 'lowPoly', oneOf: ['lowPoly', 'highPoly', 'toon']}\n  },\n\n  after: ['tracked-controls'],\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    // Active buttons populated by events provided by the attached controls.\n    this.pressedButtons = {};\n    this.touchedButtons = {};\n    this.loader = new GLTFLoader();\n    this.loader.setCrossOrigin('anonymous');\n\n    this.onGripDown = function () { self.handleButton('grip', 'down'); };\n    this.onGripUp = function () { self.handleButton('grip', 'up'); };\n    this.onTrackpadDown = function () { self.handleButton('trackpad', 'down'); };\n    this.onTrackpadUp = function () { self.handleButton('trackpad', 'up'); };\n    this.onTrackpadTouchStart = function () { self.handleButton('trackpad', 'touchstart'); };\n    this.onTrackpadTouchEnd = function () { self.handleButton('trackpad', 'touchend'); };\n    this.onTriggerDown = function () { self.handleButton('trigger', 'down'); };\n    this.onTriggerUp = function () { self.handleButton('trigger', 'up'); };\n    this.onTriggerTouchStart = function () { self.handleButton('trigger', 'touchstart'); };\n    this.onTriggerTouchEnd = function () { self.handleButton('trigger', 'touchend'); };\n    this.onGripTouchStart = function () { self.handleButton('grip', 'touchstart'); };\n    this.onGripTouchEnd = function () { self.handleButton('grip', 'touchend'); };\n    this.onThumbstickDown = function () { self.handleButton('thumbstick', 'down'); };\n    this.onThumbstickUp = function () { self.handleButton('thumbstick', 'up'); };\n    this.onAorXTouchStart = function () { self.handleButton('AorX', 'touchstart'); };\n    this.onAorXTouchEnd = function () { self.handleButton('AorX', 'touchend'); };\n    this.onBorYTouchStart = function () { self.handleButton('BorY', 'touchstart'); };\n    this.onBorYTouchEnd = function () { self.handleButton('BorY', 'touchend'); };\n    this.onSurfaceTouchStart = function () { self.handleButton('surface', 'touchstart'); };\n    this.onSurfaceTouchEnd = function () { self.handleButton('surface', 'touchend'); };\n    this.onControllerConnected = this.onControllerConnected.bind(this);\n    this.onControllerDisconnected = this.onControllerDisconnected.bind(this);\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n\n    // Hidden by default.\n    el.object3D.visible = false;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var mesh = this.el.getObject3D('mesh');\n\n    if (!mesh || !mesh.mixer) { return; }\n\n    mesh.mixer.update(delta / 1000);\n  },\n\n  onControllerConnected: function (evt) {\n    var el = this.el;\n    var hand = this.data.hand;\n    var mesh = this.el.getObject3D('mesh');\n\n    el.object3D.visible = true;\n\n    var handModelOrientationZ = hand === 'left' ? Math.PI / 2 : -Math.PI / 2;\n    // The WebXR standard defines the grip space such that a cylinder held in a closed hand points\n    // along the Z axis. The models currently have such a cylinder point along the X-Axis.\n    var handModelOrientationX = el.sceneEl.hasWebXR ? -Math.PI / 2 : 0;\n\n    // Pico4, at least on Wolvic, needs a different rotation offset\n    // for the hand model. Pico Browser claims to use oculus\n    // controllers instead; will load meta-touch-controls and does\n    // not require this adjustment.\n    if (evt.detail.name === 'pico-controls') {\n      handModelOrientationX += Math.PI / 4;\n    }\n\n    mesh.position.set(0, 0, 0);\n    mesh.rotation.set(handModelOrientationX, 0, handModelOrientationZ);\n  },\n\n  onControllerDisconnected: function () {\n    this.el.object3D.visible = false;\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('gripdown', this.onGripDown);\n    el.addEventListener('gripup', this.onGripUp);\n    el.addEventListener('trackpaddown', this.onTrackpadDown);\n    el.addEventListener('trackpadup', this.onTrackpadUp);\n    el.addEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.addEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.addEventListener('triggerdown', this.onTriggerDown);\n    el.addEventListener('triggerup', this.onTriggerUp);\n    el.addEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.addEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.addEventListener('griptouchstart', this.onGripTouchStart);\n    el.addEventListener('griptouchend', this.onGripTouchEnd);\n    el.addEventListener('thumbstickdown', this.onThumbstickDown);\n    el.addEventListener('thumbstickup', this.onThumbstickUp);\n    el.addEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.addEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.addEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.addEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.addEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.addEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('gripdown', this.onGripDown);\n    el.removeEventListener('gripup', this.onGripUp);\n    el.removeEventListener('trackpaddown', this.onTrackpadDown);\n    el.removeEventListener('trackpadup', this.onTrackpadUp);\n    el.removeEventListener('trackpadtouchstart', this.onTrackpadTouchStart);\n    el.removeEventListener('trackpadtouchend', this.onTrackpadTouchEnd);\n    el.removeEventListener('triggerdown', this.onTriggerDown);\n    el.removeEventListener('triggerup', this.onTriggerUp);\n    el.removeEventListener('triggertouchstart', this.onTriggerTouchStart);\n    el.removeEventListener('triggertouchend', this.onTriggerTouchEnd);\n    el.removeEventListener('griptouchstart', this.onGripTouchStart);\n    el.removeEventListener('griptouchend', this.onGripTouchEnd);\n    el.removeEventListener('thumbstickdown', this.onThumbstickDown);\n    el.removeEventListener('thumbstickup', this.onThumbstickUp);\n    el.removeEventListener('abuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('abuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('bbuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('bbuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('xbuttontouchstart', this.onAorXTouchStart);\n    el.removeEventListener('xbuttontouchend', this.onAorXTouchEnd);\n    el.removeEventListener('ybuttontouchstart', this.onBorYTouchStart);\n    el.removeEventListener('ybuttontouchend', this.onBorYTouchEnd);\n    el.removeEventListener('surfacetouchstart', this.onSurfaceTouchStart);\n    el.removeEventListener('surfacetouchend', this.onSurfaceTouchEnd);\n  },\n\n  /**\n   * Update handler. More like the `init` handler since the only property is the hand, and\n   * that won't be changing much.\n   */\n  update: function (previousHand) {\n    var controlConfiguration;\n    var el = this.el;\n    var hand = this.data.hand;\n    var handModelStyle = this.data.handModelStyle;\n    var handColor = this.data.color;\n    var self = this;\n\n    // Get common configuration to abstract different vendor controls.\n    controlConfiguration = {\n      hand: hand,\n      model: false\n    };\n\n    // Set model.\n    if (hand !== previousHand) {\n      var handmodelUrl = MODEL_URLS[handModelStyle + hand.charAt(0).toUpperCase() + hand.slice(1)];\n      this.loader.load(handmodelUrl, function (gltf) {\n        var mesh = gltf.scene.children[0];\n        mesh.mixer = new THREE.AnimationMixer(mesh);\n        self.clips = gltf.animations;\n        el.setObject3D('mesh', mesh);\n        mesh.traverse(function (object) {\n          if (!object.isMesh) { return; }\n          object.material.color = new THREE.Color(handColor);\n        });\n        el.setAttribute('magicleap-controls', controlConfiguration);\n        el.setAttribute('vive-controls', controlConfiguration);\n        el.setAttribute('meta-touch-controls', controlConfiguration);\n        el.setAttribute('pico-controls', controlConfiguration);\n        el.setAttribute('windows-motion-controls', controlConfiguration);\n        el.setAttribute('hp-mixed-reality-controls', controlConfiguration);\n      });\n    }\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  /**\n   * Play model animation, based on which button was pressed and which kind of event.\n   *\n   * 1. Process buttons.\n   * 2. Determine gesture (this.determineGesture()).\n   * 3. Animation gesture (this.animationGesture()).\n   * 4. Emit gesture events (this.emitGestureEvents()).\n   *\n   * @param {string} button - Name of the button.\n   * @param {string} evt - Type of event for the button (i.e., down/up/touchstart/touchend).\n   */\n  handleButton: function (button, evt) {\n    var lastGesture;\n    var isPressed = evt === 'down';\n    var isTouched = evt === 'touchstart';\n\n    // Update objects.\n    if (evt.indexOf('touch') === 0) {\n      // Update touch object.\n      if (isTouched === this.touchedButtons[button]) { return; }\n      this.touchedButtons[button] = isTouched;\n    } else {\n      // Update button object.\n      if (isPressed === this.pressedButtons[button]) { return; }\n      this.pressedButtons[button] = isPressed;\n    }\n\n    // Determine the gesture.\n    lastGesture = this.gesture;\n    this.gesture = this.determineGesture();\n\n    // Same gesture.\n    if (this.gesture === lastGesture) { return; }\n    // Animate gesture.\n    this.animateGesture(this.gesture, lastGesture);\n\n    // Emit events.\n    this.emitGestureEvents(this.gesture, lastGesture);\n  },\n\n  /**\n   * Determine which pose hand should be in considering active and touched buttons.\n   */\n  determineGesture: function () {\n    var gesture;\n    var isGripActive = this.pressedButtons.grip;\n    var isSurfaceActive = this.pressedButtons.surface || this.touchedButtons.surface;\n    var isTrackpadActive = this.pressedButtons.trackpad || this.touchedButtons.trackpad;\n    var isTriggerActive = this.pressedButtons.trigger || this.touchedButtons.trigger;\n    var isABXYActive = this.touchedButtons.AorX || this.touchedButtons.BorY;\n    var isVive = isViveController(this.el.components['tracked-controls']);\n\n    // Works well with Oculus Touch and Windows Motion Controls, but Vive needs tweaks.\n    if (isVive) {\n      if (isGripActive || isTriggerActive) {\n        gesture = ANIMATIONS.fist;\n      } else if (isTrackpadActive) {\n        gesture = ANIMATIONS.point;\n      }\n    } else {\n      if (isGripActive) {\n        if (isSurfaceActive || isABXYActive || isTrackpadActive) {\n          gesture = isTriggerActive ? ANIMATIONS.fist : ANIMATIONS.point;\n        } else {\n          gesture = isTriggerActive ? ANIMATIONS.thumbUp : ANIMATIONS.pointThumb;\n        }\n      } else if (isTriggerActive) {\n        gesture = ANIMATIONS.hold;\n      }\n    }\n\n    return gesture;\n  },\n\n  /**\n   * Play corresponding clip to a gesture\n   */\n  getClip: function (gesture) {\n    var clip;\n    var i;\n    for (i = 0; i < this.clips.length; i++) {\n      clip = this.clips[i];\n      if (clip.name !== gesture) { continue; }\n      return clip;\n    }\n  },\n\n  /**\n   * Play gesture animation.\n   *\n   * @param {string} gesture - Which pose to animate to. If absent, then animate to open.\n   * @param {string} lastGesture - Previous gesture, to reverse back to open if needed.\n   */\n  animateGesture: function (gesture, lastGesture) {\n    if (gesture) {\n      this.playAnimation(gesture || ANIMATIONS.open, lastGesture, false);\n      return;\n    }\n\n    // If no gesture, then reverse the current gesture back to open pose.\n    this.playAnimation(lastGesture, lastGesture, true);\n  },\n\n  /**\n   * Emit `hand-controls`-specific events.\n   */\n  emitGestureEvents: function (gesture, lastGesture) {\n    var el = this.el;\n    var eventName;\n\n    if (lastGesture === gesture) { return; }\n\n    // Emit event for lastGesture not inactive.\n    eventName = getGestureEventName(lastGesture, false);\n    if (eventName) { el.emit(eventName); }\n\n    // Emit event for current gesture now active.\n    eventName = getGestureEventName(gesture, true);\n    if (eventName) { el.emit(eventName); }\n  },\n\n  /**\n  * Play hand animation based on button state.\n  *\n  * @param {string} gesture - Name of the animation as specified by the model.\n  * @param {string} lastGesture - Previous pose.\n  * @param {boolean} reverse - Whether animation should play in reverse.\n  */\n  playAnimation: function (gesture, lastGesture, reverse) {\n    var clip;\n    var fromAction;\n    var mesh = this.el.getObject3D('mesh');\n    var toAction;\n\n    if (!mesh) { return; }\n\n    // Grab clip action.\n    clip = this.getClip(gesture);\n    toAction = mesh.mixer.clipAction(clip);\n\n    // Reverse from gesture to no gesture.\n    if (reverse) {\n      toAction.paused = false;\n      toAction.timeScale = -1;\n      return;\n    }\n\n    toAction.clampWhenFinished = true;\n    toAction.loop = THREE.LoopOnce;\n    toAction.repetitions = 0;\n    toAction.timeScale = 1;\n    toAction.time = 0;\n    toAction.weight = 1;\n\n    // No gesture to gesture.\n    if (!lastGesture) {\n      // Play animation.\n      mesh.mixer.stopAllAction();\n      toAction.play();\n      return;\n    }\n\n    // Animate or crossfade from gesture to gesture.\n    clip = this.getClip(lastGesture);\n    toAction.reset();\n    toAction.play();\n    fromAction = mesh.mixer.clipAction(clip);\n    fromAction.crossFadeTo(toAction, 0.15, true);\n  }\n});\n\n/**\n * Suffix gestures based on toggle state (e.g., open/close, up/down, start/end).\n *\n * @param {string} gesture\n * @param {boolean} active\n */\nfunction getGestureEventName (gesture, active) {\n  var eventName;\n\n  if (!gesture) { return; }\n\n  eventName = EVENTS[gesture];\n  if (eventName === 'grip') {\n    return eventName + (active ? 'close' : 'open');\n  }\n  if (eventName === 'point') {\n    return eventName + (active ? 'up' : 'down');\n  }\n  if (eventName === 'pointing' || eventName === 'pistol') {\n    return eventName + (active ? 'start' : 'end');\n  }\n}\n\nfunction isViveController (trackedControls) {\n  var controller = trackedControls && trackedControls.controller;\n  var isVive = controller && (controller.id && controller.id.indexOf('OpenVR ') === 0 ||\n    (controller.profiles &&\n     controller.profiles[0] &&\n     controller.profiles[0] === 'htc-vive'));\n  return isVive;\n}\n","import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-ar', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('ar-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n","import { registerComponent as register } from '../core/component.js';\n\nexport var Component = register('hide-on-enter-vr', {\n  init: function () {\n    var self = this;\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      if (self.el.sceneEl.is('vr-mode')) {\n        self.el.object3D.visible = false;\n      }\n    });\n    this.el.sceneEl.addEventListener('exit-vr', function () {\n      self.el.object3D.visible = true;\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'hp-mixed-reality';\nvar HP_MIXED_REALITY_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/hp/mixed-reality/';\n\nvar HP_MIXED_REALITY_POSITION_OFFSET = {x: 0, y: 0, z: 0.06};\nvar HP_MIXED_REALITY_ROTATION_OFFSET = {_x: Math.PI / 4, _y: 0, _z: 0, _order: 'XYZ'};\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {touchpad: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * HP Mixed Reality Controls\n */\nexport var Component = registerComponent('hp-mixed-reality-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', HP_MIXED_REALITY_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n\n    if (!this.data.model) { return; }\n\n    controllerObject3D.position.copy(HP_MIXED_REALITY_POSITION_OFFSET);\n    controllerObject3D.rotation.copy(HP_MIXED_REALITY_ROTATION_OFFSET);\n\n    this.el.emit('controllermodelready', {\n      name: 'hp-mixed-reality-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n","/* global XRMediaBinding, XRRigidTransform, XRWebGLBinding */\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nvar warn = utils.debug('components:layer:warn');\n\nexport var Component = registerComponent('layer', {\n  schema: {\n    type: {default: 'quad', oneOf: ['quad', 'monocubemap', 'stereocubemap']},\n    src: {type: 'map'},\n    rotateCubemap: {default: false},\n    width: {default: 0},\n    height: {default: 0}\n  },\n\n  init: function () {\n    this.quaternion = new THREE.Quaternion();\n    this.position = new THREE.Vector3();\n    this.layerEnabled = false;\n    // From another component, set this.el.components.layer.needsRedraw = true\n    // if you use a canvas as src and want to redraw the layer.\n    this.needsRedraw = false;\n\n    this.bindMethods();\n\n    var webxrData = this.el.sceneEl.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    // Types monocubemap and stereocubemap currently don't have any fallback\n    // so make the layers feature required. For other types make it optional\n    // so the fallback is used on devices not supporting WebXR layers.\n    if (this.data.type === 'monocubemap' || this.data.type === 'stereocubemap') {\n      if (requiredFeaturesArray.indexOf('layers') === -1) {\n        requiredFeaturesArray.push('layers');\n        this.el.sceneEl.setAttribute('webxr', webxrData);\n      }\n    } else {\n      if (optionalFeaturesArray.indexOf('layers') === -1) {\n        optionalFeaturesArray.push('layers');\n        this.el.sceneEl.setAttribute('webxr', webxrData);\n      }\n    }\n    this.el.sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    this.el.sceneEl.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  bindMethods: function () {\n    this.onRequestedReferenceSpace = this.onRequestedReferenceSpace.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n  },\n\n  update: function (oldData) {\n    if (this.data.src !== oldData.src) { this.updateSrc(); }\n  },\n\n  updateSrc: function () {\n    var type = this.data.type;\n    this.destroyLayer();\n    this.texture = undefined;\n    this.textureIsVideo = this.data.src.tagName === 'VIDEO';\n    if (type === 'quad') {\n      this.loadQuadImage();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.loadCubeMapImages();\n      return;\n    }\n  },\n\n  loadCubeMapImages: function () {\n    var glayer;\n    var xrGLFactory = this.xrGLFactory;\n    var frame = this.el.sceneEl.frame;\n    var src = this.data.src;\n    var type = this.data.type;\n\n    this.visibilityChanged = false;\n    if (!this.layer) { return; }\n    if (type !== 'monocubemap' && type !== 'stereocubemap') { return; }\n\n    if (!src.complete) {\n      this.pendingCubeMapUpdate = true;\n    } else {\n      this.pendingCubeMapUpdate = false;\n    }\n\n    if (!this.loadingScreen) {\n      this.loadingScreen = true;\n    } else {\n      this.loadingScreen = false;\n    }\n\n    if (type === 'monocubemap') {\n      glayer = xrGLFactory.getSubImage(this.layer, frame);\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n    } else {\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'left');\n      this.loadCubeMapImage(glayer.colorTexture, src, 0);\n      glayer = xrGLFactory.getSubImage(this.layer, frame, 'right');\n      this.loadCubeMapImage(glayer.colorTexture, src, 6);\n    }\n  },\n\n  loadQuadImage: function () {\n    var src = this.data.src;\n    var self = this;\n    this.el.sceneEl.systems.material.loadTexture(src, {src: src}, function textureLoaded (texture) {\n      self.el.sceneEl.renderer.initTexture(texture);\n      self.texture = texture;\n      self.updateQuadPanel();\n    });\n  },\n\n  preGenerateCubeMapTextures: function (src, callback) {\n    if (this.data.type === 'monocubemap') {\n      this.generateCubeMapTextures(src, 0, callback);\n    } else {\n      this.generateCubeMapTextures(src, 0, callback);\n      this.generateCubeMapTextures(src, 6, callback);\n    }\n  },\n\n  generateCubeMapTextures: function (src, faceOffset, callback) {\n    var data = this.data;\n    var cubeFaceSize = this.cubeFaceSize;\n    var textureSourceCubeFaceSize = Math.min(src.width, src.height);\n    var cubefaceTextures = [];\n    var imgTmp0;\n    var imgTmp2;\n\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n\n      if (data.rotateCubemap) {\n        if (i === 2 || i === 3) {\n          tempCanvasContext.save();\n          tempCanvasContext.translate(cubeFaceSize, cubeFaceSize);\n          tempCanvasContext.rotate(Math.PI);\n        }\n      }\n\n      // Note that this call to drawImage will not only copy the bytes to the\n      // canvas but also could resized the image if our cube face size is\n      // smaller than the source image due to GL max texture size.\n      tempCanvasContext.drawImage(\n        src,\n        (i + faceOffset) * textureSourceCubeFaceSize, // top left x coord in source\n        0, // top left y coord in source\n        textureSourceCubeFaceSize, // x pixel count from source\n        textureSourceCubeFaceSize, // y pixel count from source\n        0, // dest x offset in the canvas\n        0, // dest y offset in the canvas\n        cubeFaceSize, // x pixel count in dest\n        cubeFaceSize  // y pixel count in dest\n      );\n\n      tempCanvasContext.restore();\n\n      if (callback) { callback(); }\n      cubefaceTextures.push(tempCanvas);\n    }\n\n    if (data.rotateCubemap) {\n      imgTmp0 = cubefaceTextures[0];\n      imgTmp2 = cubefaceTextures[1];\n\n      cubefaceTextures[0] = imgTmp2;\n      cubefaceTextures[1] = imgTmp0;\n\n      imgTmp0 = cubefaceTextures[4];\n      imgTmp2 = cubefaceTextures[5];\n\n      cubefaceTextures[4] = imgTmp2;\n      cubefaceTextures[5] = imgTmp0;\n    }\n\n    if (callback) { callback(); }\n    return cubefaceTextures;\n  },\n\n  loadCubeMapImage: function (layerColorTexture, src, faceOffset) {\n    var gl = this.el.sceneEl.renderer.getContext();\n    var cubefaceTextures;\n\n    // don't flip the pixels as we load them into the texture buffer.\n    // TEXTURE_CUBE_MAP expects the Y to be flipped for the faces and it already\n    // is flipped in our texture image.\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, layerColorTexture);\n\n    if (!src.complete || this.loadingScreen) {\n      cubefaceTextures = this.loadingScreenImages;\n    } else {\n      cubefaceTextures = this.generateCubeMapTextures(src, faceOffset);\n    }\n\n    var errorCode = 0;\n    cubefaceTextures.forEach(function (canvas, i) {\n      gl.texSubImage2D(\n        gl.TEXTURE_CUBE_MAP_POSITIVE_X + i,\n        0,\n        0, 0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        canvas\n      );\n      errorCode = gl.getError();\n    });\n\n    if (errorCode !== 0) {\n      console.log('renderingError, WebGL Error Code: ' + errorCode);\n    }\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n  },\n\n  tick: function () {\n    if (!this.el.sceneEl.xrSession) { return; }\n    if (!this.referenceSpace) { return; }\n    if (this.layerEnabled && !this.layer && (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode'))) { this.initLayer(); }\n    this.updateTransform();\n    if (this.data.src.complete && (this.pendingCubeMapUpdate || this.loadingScreen || this.visibilityChanged)) { this.loadCubeMapImages(); }\n    if (!this.needsRedraw && !this.layer.needsRedraw) { return; }\n    if (this.textureIsVideo) { return; }\n    if (this.data.type === 'quad') { this.draw(); }\n  },\n\n  initLayer: function () {\n    var self = this;\n    var type = this.data.type;\n\n    this.el.sceneEl.xrSession.onvisibilitychange = function (evt) {\n      self.visibilityChanged = evt.session.visibilityState !== 'hidden';\n    };\n\n    if (type === 'quad') {\n      this.initQuadLayer();\n      return;\n    }\n\n    if (type === 'monocubemap' || type === 'stereocubemap') {\n      this.initCubeMapLayer();\n      return;\n    }\n  },\n\n  initQuadLayer: function () {\n    if (!this.texture) { return; }\n    var sceneEl = this.el.sceneEl;\n    if (this.textureIsVideo) {\n      var mediaBinding = new XRMediaBinding(sceneEl.xrSession);\n      this.layer = mediaBinding.createQuadLayer(this.data.src, {\n        space: this.referenceSpace,\n        height: this.data.height / 2 || this.texture.image.height / 1000,\n        width: this.data.width / 2 || this.texture.image.width / 1000\n      });\n    } else {\n      var xrGLFactory = this.xrGLFactory = sceneEl.renderer.xr.getBinding();\n      this.layer = xrGLFactory.createQuadLayer({\n        space: this.referenceSpace,\n        viewPixelHeight: this.texture.image.height,\n        viewPixelWidth: this.texture.image.width,\n        height: this.data.height / 2 || this.texture.image.height / 1000,\n        width: this.data.width / 2 || this.texture.image.width / 1000\n      });\n    }\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initCubeMapLayer: function () {\n    var src = this.data.src;\n    var sceneEl = this.el.sceneEl;\n    var gl = sceneEl.renderer.getContext();\n    var glSizeLimit = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    var cubeFaceSize = this.cubeFaceSize = Math.min(glSizeLimit, Math.min(src.width, src.height));\n    var xrGLFactory = this.xrGLFactory = sceneEl.renderer.xr.getBinding();\n    this.layer = xrGLFactory.createCubeLayer({\n      space: this.referenceSpace,\n      viewPixelWidth: cubeFaceSize,\n      viewPixelHeight: cubeFaceSize,\n      layout: this.data.type === 'monocubemap' ? 'mono' : 'stereo',\n      isStatic: false\n    });\n\n    this.initLoadingScreenImages();\n    this.loadCubeMapImages();\n    sceneEl.renderer.xr.addLayer(this.layer);\n  },\n\n  initLoadingScreenImages: function () {\n    var cubeFaceSize = this.cubeFaceSize;\n    var loadingScreenImages = this.loadingScreenImages = [];\n    for (var i = 0; i < 6; i++) {\n      var tempCanvas = document.createElement('CANVAS');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      var tempCanvasContext = tempCanvas.getContext('2d');\n      tempCanvas.width = tempCanvas.height = cubeFaceSize;\n      tempCanvasContext.fillStyle = 'black';\n      tempCanvasContext.fillRect(0, 0, cubeFaceSize, cubeFaceSize);\n      if (i !== 2 && i !== 3) {\n        tempCanvasContext.translate(cubeFaceSize, 0);\n        tempCanvasContext.scale(-1, 1);\n        tempCanvasContext.fillStyle = 'white';\n        tempCanvasContext.font = '30px Arial';\n        tempCanvasContext.fillText('Loading', cubeFaceSize / 2, cubeFaceSize / 2);\n      }\n      loadingScreenImages.push(tempCanvas);\n    }\n  },\n\n  destroyLayer: function () {\n    if (!this.layer) { return; }\n    this.el.sceneEl.renderer.xr.removeLayer(this.layer);\n    this.layer.destroy();\n    this.layer = undefined;\n  },\n\n  toggleCompositorLayer: function () {\n    this.enableCompositorLayer(!this.layerEnabled);\n  },\n\n  enableCompositorLayer: function (enable) {\n    this.layerEnabled = enable;\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = !this.layerEnabled;\n    }\n  },\n\n  updateQuadPanel: function () {\n    var quadPanelEl = this.quadPanelEl;\n    if (!this.quadPanelEl) {\n      quadPanelEl = this.quadPanelEl = document.createElement('a-entity');\n      this.el.appendChild(quadPanelEl);\n    }\n\n    quadPanelEl.setAttribute('material', {\n      shader: 'flat',\n      minFilter: 'linear',\n      src: this.data.src,\n      transparent: true\n    });\n\n    quadPanelEl.setAttribute('geometry', {\n      primitive: 'plane',\n      height: this.data.height || this.texture.image.height / 1000,\n      width: this.data.width || this.texture.image.width / 1000\n    });\n  },\n\n  draw: function () {\n    var gl = this.el.sceneEl.renderer.getContext();\n    var sceneEl = this.el.sceneEl;\n    var textureEl = this.data.src;\n    var glayer = this.xrGLFactory.getSubImage(this.layer, sceneEl.frame);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    gl.bindTexture(gl.TEXTURE_2D, glayer.colorTexture);\n    gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, textureEl.width, textureEl.height, gl.RGBA, gl.UNSIGNED_BYTE, textureEl);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this.needsRedraw = false;\n  },\n\n  updateTransform: function () {\n    var el = this.el;\n    var position = this.position;\n    var quaternion = this.quaternion;\n    el.object3D.updateMatrixWorld();\n    position.setFromMatrixPosition(el.object3D.matrixWorld);\n    quaternion.setFromRotationMatrix(el.object3D.matrixWorld);\n    if (!this.layerEnabled) { position.set(0, 0, 100000000); }\n    this.layer.transform = new XRRigidTransform(position, quaternion);\n  },\n\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    var xrSession = sceneEl.xrSession;\n    if (this.data.src.play) { this.data.src.play(); }\n    if (!sceneEl.hasWebXR || typeof XRWebGLBinding === 'undefined' || typeof XRMediaBinding === 'undefined' || !xrSession) {\n      warn('The layer component requires WebXR and the layers API enabled');\n      return;\n    }\n    xrSession.requestReferenceSpace('local-floor').then(this.onRequestedReferenceSpace);\n    this.layerEnabled = true;\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = false;\n    }\n  },\n\n  onExitVR: function () {\n    this.layerEnabled = false;\n    if (this.quadPanelEl) {\n      this.quadPanelEl.object3D.visible = true;\n    }\n    this.destroyLayer();\n  },\n\n  onRequestedReferenceSpace: function (referenceSpace) {\n    this.referenceSpace = referenceSpace;\n  }\n});\n","/**\n * Find the distance from a plane defined by a point on the plane and the normal of the plane to any point.\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @returns {number}\n */\nexport function distanceOfPointFromPlane (positionOnPlane, planeNormal, pointToTest) {\n  // the d value in the plane equation a*x + b*y + c*z=d\n  var d = planeNormal.dot(positionOnPlane);\n\n  // distance of point from plane\n  return (d - planeNormal.dot(pointToTest)) / planeNormal.length();\n}\n\n/**\n * Find the point on a plane that lies closest to\n * @param {THREE.Vector3} positionOnPlane any point on the plane.\n * @param {THREE.Vector3} planeNormal the normal of the plane\n * @param {THREE.Vector3} pointToTest point to test\n * @param {THREE.Vector3} resultPoint where to store the result.\n * @returns {THREE.Vector3}\n */\nexport function nearestPointInPlane (positionOnPlane, planeNormal, pointToTest, resultPoint) {\n  var t = distanceOfPointFromPlane(positionOnPlane, planeNormal, pointToTest);\n  // closest point on the plane\n  resultPoint.copy(planeNormal);\n  resultPoint.multiplyScalar(t);\n  resultPoint.add(pointToTest);\n  return resultPoint;\n}\n","import { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nregisterComponent('laser-controls', {\n  schema: {\n    hand: {default: 'right'},\n    model: {default: true},\n    defaultModelColor: {type: 'color', default: 'grey'}\n  },\n\n  init: function () {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n    var controlsConfiguration = {hand: data.hand, model: data.model};\n\n    // Set all controller models.\n    el.setAttribute('hp-mixed-reality-controls', controlsConfiguration);\n    el.setAttribute('magicleap-controls', controlsConfiguration);\n    el.setAttribute('oculus-go-controls', controlsConfiguration);\n    el.setAttribute('meta-touch-controls', controlsConfiguration);\n    el.setAttribute('pico-controls', controlsConfiguration);\n    el.setAttribute('valve-index-controls', controlsConfiguration);\n    el.setAttribute('vive-controls', controlsConfiguration);\n    el.setAttribute('vive-focus-controls', controlsConfiguration);\n    el.setAttribute('windows-motion-controls', controlsConfiguration);\n    el.setAttribute('generic-tracked-controller-controls', {hand: controlsConfiguration.hand});\n\n    // Wait for controller to connect, or have a valid pointing pose, before creating ray\n    el.addEventListener('controllerconnected', createRay);\n    el.addEventListener('controllerdisconnected', hideRay);\n    el.addEventListener('controllermodelready', function (evt) {\n      createRay(evt);\n      self.modelReady = true;\n    });\n\n    function createRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n\n      if (!controllerConfig) { return; }\n\n      // Show the line unless a particular config opts to hide it, until a controllermodelready\n      // event comes through.\n      var raycasterConfig = utils.extend({\n        showLine: true\n      }, controllerConfig.raycaster || {});\n\n      // The controllermodelready event contains a rayOrigin that takes into account\n      // offsets specific to the loaded model.\n      if (evt.detail.rayOrigin) {\n        raycasterConfig.origin = evt.detail.rayOrigin.origin;\n        raycasterConfig.direction = evt.detail.rayOrigin.direction;\n        raycasterConfig.showLine = true;\n      }\n\n      // Only apply a default raycaster if it does not yet exist. This prevents it overwriting\n      // config applied from a controllermodelready event.\n      if (evt.detail.rayOrigin || !self.modelReady) {\n        el.setAttribute('raycaster', raycasterConfig);\n      } else {\n        el.setAttribute('raycaster', 'showLine', true);\n      }\n\n      el.setAttribute('cursor', utils.extend({\n        fuse: false\n      }, controllerConfig.cursor));\n    }\n\n    function hideRay (evt) {\n      var controllerConfig = config[evt.detail.name];\n      if (!controllerConfig) { return; }\n      el.setAttribute('raycaster', 'showLine', false);\n    }\n  },\n\n  config: {\n    'generic-tracked-controller-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'hp-mixed-reality-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'magicleap-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'oculus-go-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0.0005, z: 0}}\n    },\n\n    'meta-touch-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {origin: {x: 0, y: 0, z: 0}}\n    },\n\n    'pico-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'valve-index-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']}\n    },\n\n    'vive-focus-controls': {\n      cursor: {downEvents: ['trackpaddown', 'triggerdown'], upEvents: ['trackpadup', 'triggerup']}\n    },\n\n    'windows-motion-controls': {\n      cursor: {downEvents: ['triggerdown'], upEvents: ['triggerup']},\n      raycaster: {showLine: false}\n    }\n  }\n});\n","import * as THREE from 'three';\nimport { LightProbeGenerator } from 'three/addons/lights/LightProbeGenerator.js';\nimport { diff, debug, srcLoader } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport * as mathUtils from '../utils/math.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\nvar warn = debug('components:light:warn');\n\nvar probeCache = {};\n\n/**\n * Light component.\n */\nexport var Component = registerComponent('light', {\n  schema: {\n    angle: {default: 60, if: {type: ['spot']}},\n    color: {type: 'color', if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot']}},\n    envMap: {default: '', if: {type: ['probe']}},\n    groundColor: {type: 'color', if: {type: ['hemisphere']}},\n    decay: {default: 1, if: {type: ['point', 'spot']}},\n    distance: {default: 0.0, min: 0, if: {type: ['point', 'spot']}},\n    intensity: {default: 3.14, min: 0, if: {type: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe']}},\n    penumbra: {default: 0, min: 0, max: 1, if: {type: ['spot']}},\n    type: {\n      default: 'directional',\n      oneOf: ['ambient', 'directional', 'hemisphere', 'point', 'spot', 'probe'],\n      schemaChange: true\n    },\n    target: {type: 'selector', if: {type: ['spot', 'directional']}},\n\n    // Shadows.\n    castShadow: {default: false, if: {type: ['point', 'spot', 'directional']}},\n    shadowBias: {default: 0, if: {castShadow: true}},\n    shadowCameraFar: {default: 500, if: {castShadow: true}},\n    shadowCameraFov: {default: 90, if: {castShadow: true}},\n    shadowCameraNear: {default: 0.5, if: {castShadow: true}},\n    shadowCameraTop: {default: 5, if: {castShadow: true}},\n    shadowCameraRight: {default: 5, if: {castShadow: true}},\n    shadowCameraBottom: {default: -5, if: {castShadow: true}},\n    shadowCameraLeft: {default: -5, if: {castShadow: true}},\n    shadowCameraVisible: {default: false, if: {castShadow: true}},\n    shadowCameraAutomatic: {default: '', if: {type: ['directional']}},\n    shadowMapHeight: {default: 512, if: {castShadow: true}},\n    shadowMapWidth: {default: 512, if: {castShadow: true}},\n    shadowRadius: {default: 1, if: {castShadow: true}}\n  },\n\n  /**\n   * Notifies scene a light has been added to remove default lighting.\n   */\n  init: function () {\n    var el = this.el;\n    this.light = null;\n    this.defaultTarget = null;\n    this.system.registerLight(el);\n  },\n\n  /**\n   * (Re)create or update light.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var diffData = diff(data, oldData);\n    var light = this.light;\n    var self = this;\n\n    // Existing light.\n    if (light && !('type' in diffData)) {\n      var shadowsLoaded = false;\n      // Light type has not changed. Update light.\n      Object.keys(diffData).forEach(function (key) {\n        var value = data[key];\n\n        switch (key) {\n          case 'color': {\n            light.color.set(value);\n            break;\n          }\n\n          case 'groundColor': {\n            light.groundColor.set(value);\n            break;\n          }\n\n          case 'angle': {\n            light.angle = degToRad(value);\n            break;\n          }\n\n          case 'target': {\n            // Reset target if selector is null.\n            if (value === null) {\n              if (data.type === 'spot' || data.type === 'directional') {\n                light.target = self.defaultTarget;\n              }\n            } else {\n              // Target specified, set target to entity's `object3D` when it is loaded.\n              if (value.hasLoaded) {\n                self.onSetTarget(value, light);\n              } else {\n                value.addEventListener('loaded', self.onSetTarget.bind(self, value, light));\n              }\n            }\n            break;\n          }\n\n          case 'envMap':\n            self.updateProbeMap(data, light);\n            break;\n\n          case 'castShadow':\n          case 'shadowBias':\n          case 'shadowCameraFar':\n          case 'shadowCameraFov':\n          case 'shadowCameraNear':\n          case 'shadowCameraTop':\n          case 'shadowCameraRight':\n          case 'shadowCameraBottom':\n          case 'shadowCameraLeft':\n          case 'shadowCameraVisible':\n          case 'shadowMapHeight':\n          case 'shadowMapWidth':\n          case 'shadowRadius':\n            if (!shadowsLoaded) {\n              self.updateShadow();\n              shadowsLoaded = true;\n            }\n            break;\n\n          case 'shadowCameraAutomatic':\n            if (data.shadowCameraAutomatic) {\n              self.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n            } else {\n              self.shadowCameraAutomaticEls = [];\n            }\n            break;\n\n          default: {\n            light[key] = value;\n          }\n        }\n      });\n      return;\n    }\n\n    // No light yet or light type has changed. Create and add light.\n    this.setLight(this.data);\n    this.updateShadow();\n  },\n\n  tick: (function () {\n    var bbox = new THREE.Box3();\n    var normal = new THREE.Vector3();\n    var cameraWorldPosition = new THREE.Vector3();\n    var tempMat = new THREE.Matrix4();\n    var sphere = new THREE.Sphere();\n    var tempVector = new THREE.Vector3();\n\n    return function () {\n      if (!(\n        this.data.type === 'directional' &&\n        this.light.shadow &&\n        this.light.shadow.camera instanceof THREE.OrthographicCamera &&\n        this.shadowCameraAutomaticEls.length\n      )) return;\n\n      var camera = this.light.shadow.camera;\n      camera.getWorldDirection(normal);\n      camera.getWorldPosition(cameraWorldPosition);\n      tempMat.copy(camera.matrixWorld);\n      tempMat.invert();\n\n      camera.near = 1;\n      camera.left = 100000;\n      camera.right = -100000;\n      camera.top = -100000;\n      camera.bottom = 100000;\n      this.shadowCameraAutomaticEls.forEach(function (el) {\n        bbox.setFromObject(el.object3D);\n        bbox.getBoundingSphere(sphere);\n        var distanceToPlane = mathUtils.distanceOfPointFromPlane(cameraWorldPosition, normal, sphere.center);\n        var pointOnCameraPlane = mathUtils.nearestPointInPlane(cameraWorldPosition, normal, sphere.center, tempVector);\n\n        var pointInXYPlane = pointOnCameraPlane.applyMatrix4(tempMat);\n        camera.near = Math.min(-distanceToPlane - sphere.radius - 1, camera.near);\n        camera.left = Math.min(-sphere.radius + pointInXYPlane.x, camera.left);\n        camera.right = Math.max(sphere.radius + pointInXYPlane.x, camera.right);\n        camera.top = Math.max(sphere.radius + pointInXYPlane.y, camera.top);\n        camera.bottom = Math.min(-sphere.radius + pointInXYPlane.y, camera.bottom);\n      });\n      camera.updateProjectionMatrix();\n    };\n  }()),\n\n  setLight: function (data) {\n    var el = this.el;\n    var newLight = this.getLight(data);\n    if (newLight) {\n      if (this.light) {\n        el.removeObject3D('light');\n      }\n\n      this.light = newLight;\n      this.light.el = el;\n      el.setObject3D('light', this.light);\n\n      // HACK solution for issue #1624\n      if (data.type === 'spot' || data.type === 'directional' || data.type === 'hemisphere') {\n        el.getObject3D('light').translateY(-1);\n      }\n\n      // set and position default lighttarget as a child to enable spotlight orientation\n      if (data.type === 'spot') {\n        el.setObject3D('light-target', this.defaultTarget);\n        el.getObject3D('light-target').position.set(0, 0, -1);\n      }\n\n      if (data.shadowCameraAutomatic) {\n        this.shadowCameraAutomaticEls = Array.from(document.querySelectorAll(data.shadowCameraAutomatic));\n      } else {\n        this.shadowCameraAutomaticEls = [];\n      }\n    }\n  },\n\n  /**\n   * Updates shadow-related properties on the current light.\n   */\n  updateShadow: function () {\n    var el = this.el;\n    var data = this.data;\n    var light = this.light;\n\n    light.castShadow = data.castShadow;\n\n    // Shadow camera helper.\n    var cameraHelper = el.getObject3D('cameraHelper');\n    if (data.shadowCameraVisible && !cameraHelper) {\n      cameraHelper = new THREE.CameraHelper(light.shadow.camera);\n      el.setObject3D('cameraHelper', cameraHelper);\n    } else if (!data.shadowCameraVisible && cameraHelper) {\n      el.removeObject3D('cameraHelper');\n    }\n\n    if (!data.castShadow) { return light; }\n\n    // Shadow appearance.\n    light.shadow.bias = data.shadowBias;\n    light.shadow.radius = data.shadowRadius;\n    light.shadow.mapSize.height = data.shadowMapHeight;\n    light.shadow.mapSize.width = data.shadowMapWidth;\n\n    // Shadow camera.\n    light.shadow.camera.near = data.shadowCameraNear;\n    light.shadow.camera.far = data.shadowCameraFar;\n    if (light.shadow.camera instanceof THREE.OrthographicCamera) {\n      light.shadow.camera.top = data.shadowCameraTop;\n      light.shadow.camera.right = data.shadowCameraRight;\n      light.shadow.camera.bottom = data.shadowCameraBottom;\n      light.shadow.camera.left = data.shadowCameraLeft;\n    } else {\n      light.shadow.camera.fov = data.shadowCameraFov;\n    }\n    light.shadow.camera.updateProjectionMatrix();\n\n    if (cameraHelper) { cameraHelper.update(); }\n  },\n\n  /**\n   * Creates a new three.js light object given data object defining the light.\n   *\n   * @param {object} data\n   */\n  getLight: function (data) {\n    var angle = data.angle;\n    var color = new THREE.Color(data.color);\n    color = color.getHex();\n    var decay = data.decay;\n    var distance = data.distance;\n    var groundColor = new THREE.Color(data.groundColor);\n    groundColor = groundColor.getHex();\n    var intensity = data.intensity;\n    var type = data.type;\n    var target = data.target;\n    var light = null;\n\n    switch (type.toLowerCase()) {\n      case 'ambient': {\n        return new THREE.AmbientLight(color, intensity);\n      }\n\n      case 'directional': {\n        light = new THREE.DirectionalLight(color, intensity);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'hemisphere': {\n        return new THREE.HemisphereLight(color, groundColor, intensity);\n      }\n\n      case 'point': {\n        return new THREE.PointLight(color, intensity, distance, decay);\n      }\n\n      case 'spot': {\n        light = new THREE.SpotLight(color, intensity, distance, degToRad(angle), data.penumbra, decay);\n        this.defaultTarget = light.target;\n        if (target) {\n          if (target.hasLoaded) {\n            this.onSetTarget(target, light);\n          } else {\n            target.addEventListener('loaded', this.onSetTarget.bind(this, target, light));\n          }\n        }\n        return light;\n      }\n\n      case 'probe': {\n        light = new THREE.LightProbe();\n        this.updateProbeMap(data, light);\n        return light;\n      }\n\n      default: {\n        warn('%s is not a valid light type. ' +\n           'Choose from ambient, directional, hemisphere, point, spot.', type);\n      }\n    }\n  },\n\n  /**\n   * Generate the spherical harmonics for the LightProbe from a cube map\n   */\n  updateProbeMap: function (data, light) {\n    if (!data.envMap) {\n      // reset parameters if no map\n      light.copy(new THREE.LightProbe());\n      return;\n    }\n\n    // Populate the cache if not done for this envMap yet\n    var sceneEl = this.el.sceneEl;\n    if (probeCache[data.envMap] === undefined) {\n      probeCache[data.envMap] = new Promise(function (resolve) {\n        srcLoader.validateCubemapSrc(data.envMap, function loadEnvMap (srcs) {\n          sceneEl.systems.material.loadCubeMapTexture(srcs, function (texture) {\n            var tempLightProbe = LightProbeGenerator.fromCubeTexture(texture);\n            resolve(tempLightProbe);\n          });\n        });\n      });\n    }\n\n    // Copy over light probe properties\n    probeCache[data.envMap].then(function (tempLightProbe) {\n      light.copy(tempLightProbe);\n    });\n  },\n\n  onSetTarget: function (targetEl, light) {\n    light.target = targetEl.object3D;\n  },\n\n  /**\n   * Remove light on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    el.removeObject3D('light');\n    if (el.getObject3D('cameraHelper')) {\n      el.removeObject3D('cameraHelper');\n    }\n  }\n});\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { registerShader } from '../core/shader.js';\nvar DEFAULT_PREVIEW_DISTANCE = 15.0;\n\n/**\n * Link component. Connect experiences and traverse between them in VR\n *\n * @member {object} hiddenEls - Store the hidden elements during peek mode.\n */\nexport var Component = registerComponent('link', {\n  schema: {\n    backgroundColor: {default: 'red', type: 'color'},\n    borderColor: {default: 'white', type: 'color'},\n    highlighted: {default: false},\n    highlightedColor: {default: '#24CAFF', type: 'color'},\n    href: {default: ''},\n    image: {type: 'asset'},\n    on: {default: 'click'},\n    peekMode: {default: false},\n    title: {default: ''},\n    titleColor: {default: 'white', type: 'color'},\n    visualAspectEnabled: {default: false}\n  },\n\n  init: function () {\n    this.navigate = this.navigate.bind(this);\n    this.previousQuaternion = undefined;\n    this.quaternionClone = new THREE.Quaternion();\n    // Store hidden elements during peek mode so we can show them again later.\n    this.hiddenEls = [];\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var backgroundColor;\n    var strokeColor;\n\n    if (!data.visualAspectEnabled) { return; }\n\n    var elScale = this.el.getAttribute('scale');\n    this.previewDistance = DEFAULT_PREVIEW_DISTANCE * (elScale.x + elScale.y) / 2;\n\n    this.initVisualAspect();\n\n    backgroundColor = data.highlighted ? data.highlightedColor : data.backgroundColor;\n    strokeColor = data.highlighted ? data.highlightedColor : data.borderColor;\n    el.setAttribute('material', 'backgroundColor', backgroundColor);\n    el.setAttribute('material', 'strokeColor', strokeColor);\n\n    if (data.on !== oldData.on) { this.updateEventListener(); }\n\n    if (oldData.peekMode !== undefined &&\n        data.peekMode !== oldData.peekMode) { this.updatePeekMode(); }\n\n    if (!data.image || oldData.image === data.image) { return; }\n\n    el.setAttribute('material', 'pano',\n                    typeof data.image === 'string' ? data.image : data.image.src);\n  },\n\n  /*\n   * Toggle all elements and full 360 preview of the linked page.\n   */\n  updatePeekMode: function () {\n    var el = this.el;\n    var sphereEl = this.sphereEl;\n    if (this.data.peekMode) {\n      this.hideAll();\n      el.getObject3D('mesh').visible = false;\n      sphereEl.setAttribute('visible', true);\n    } else {\n      this.showAll();\n      el.getObject3D('mesh').visible = true;\n      sphereEl.setAttribute('visible', false);\n    }\n  },\n\n  play: function () {\n    this.updateEventListener();\n  },\n\n  pause: function () {\n    this.removeEventListener();\n  },\n\n  updateEventListener: function () {\n    var el = this.el;\n    if (!el.isPlaying) { return; }\n    this.removeEventListener();\n    el.addEventListener(this.data.on, this.navigate);\n  },\n\n  removeEventListener: function () {\n    var on = this.data.on;\n    if (!on) { return; }\n    this.el.removeEventListener(on, this.navigate);\n  },\n\n  initVisualAspect: function () {\n    var el = this.el;\n    var semiSphereEl;\n    var sphereEl;\n    var textEl;\n\n    if (!this.data.visualAspectEnabled || this.visualAspectInitialized) { return; }\n\n    textEl = this.textEl = this.textEl || document.createElement('a-entity');\n    sphereEl = this.sphereEl = this.sphereEl || document.createElement('a-entity');\n    semiSphereEl = this.semiSphereEl = this.semiSphereEl || document.createElement('a-entity');\n\n    // Set portal.\n    el.setAttribute('geometry', {primitive: 'circle', radius: 1.0, segments: 64});\n    el.setAttribute('material', {shader: 'portal', pano: this.data.image, side: 'double', previewDistance: this.previewDistance});\n\n    // Set text that displays the link title and URL.\n    textEl.setAttribute('text', {\n      color: this.data.titleColor,\n      align: 'center',\n      font: 'kelsonsans',\n      value: this.data.title || this.data.href,\n      width: 4\n    });\n    textEl.setAttribute('position', '0 1.5 0');\n    el.appendChild(textEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    semiSphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 1.0,\n      phiStart: 0,\n      segmentsWidth: 64,\n      segmentsHeight: 64,\n      phiLength: 180,\n      thetaStart: 0,\n      thetaLength: 360\n    });\n    semiSphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    semiSphereEl.setAttribute('rotation', '0 180 0');\n    semiSphereEl.setAttribute('position', '0 0 0');\n    semiSphereEl.setAttribute('visible', false);\n    el.appendChild(semiSphereEl);\n\n    // Set sphere rendered when camera is close to portal to allow user to peek inside.\n    sphereEl.setAttribute('geometry', {\n      primitive: 'sphere',\n      radius: 10,\n      segmentsWidth: 64,\n      segmentsHeight: 64\n    });\n    sphereEl.setAttribute('material', {\n      shader: 'portal',\n      borderEnabled: 0.0,\n      pano: this.data.image,\n      side: 'back',\n      previewDistance: this.previewDistance\n    });\n    sphereEl.setAttribute('visible', false);\n    el.appendChild(sphereEl);\n\n    this.visualAspectInitialized = true;\n  },\n\n  navigate: function () {\n    window.location = this.data.href;\n  },\n\n  /**\n   * 1. Swap plane that represents portal with sphere with a hole when the camera is close\n   * so user can peek inside portal. Sphere is rendered on opposite side of portal\n   * from where user enters.\n   * 2. Place the url/title above or inside portal depending on distance to camera.\n   * 3. Face portal to camera when far away from user.\n   */\n  tick: (function () {\n    var cameraWorldPosition = new THREE.Vector3();\n    var elWorldPosition = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n    var scale = new THREE.Vector3();\n\n    return function () {\n      var el = this.el;\n      var object3D = el.object3D;\n      var camera = el.sceneEl.camera;\n      var cameraPortalOrientation;\n      var distance;\n      var textEl = this.textEl;\n\n      if (!this.data.visualAspectEnabled) { return; }\n\n      // Update matrices\n      object3D.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n\n      object3D.matrix.decompose(elWorldPosition, quaternion, scale);\n      elWorldPosition.setFromMatrixPosition(object3D.matrixWorld);\n      cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n      distance = elWorldPosition.distanceTo(cameraWorldPosition);\n\n      if (distance > this.previewDistance * 1.33333) {\n        // Store original orientation to be restored when the portal stops facing the camera.\n        if (!this.previousQuaternion) {\n          this.quaternionClone.copy(quaternion);\n          this.previousQuaternion = this.quaternionClone;\n        }\n        // If the portal is far away from the user, face portal to camera.\n        object3D.lookAt(cameraWorldPosition);\n      } else {\n        // When portal is close to the user/camera.\n        cameraPortalOrientation = this.calculateCameraPortalOrientation();\n        // If user gets very close to portal, replace with holed sphere they can peek in.\n        if (distance < 0.5) {\n          // Configure text size and sphere orientation depending side user approaches portal.\n          if (this.semiSphereEl.getAttribute('visible') === true) { return; }\n          textEl.setAttribute('text', 'width', 1.5);\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('position', '0 0 0.75');\n            textEl.setAttribute('rotation', '0 180 0');\n            this.semiSphereEl.setAttribute('rotation', '0 0 0');\n          } else {\n            textEl.setAttribute('position', '0 0 -0.75');\n            textEl.setAttribute('rotation', '0 0 0');\n            this.semiSphereEl.setAttribute('rotation', '0 180 0');\n          }\n          el.getObject3D('mesh').visible = false;\n          this.semiSphereEl.setAttribute('visible', true);\n          this.peekCameraPortalOrientation = cameraPortalOrientation;\n        } else {\n          // Calculate which side the camera is approaching the camera (back / front).\n          // Adjust text orientation based on camera position.\n          if (cameraPortalOrientation <= 0.0) {\n            textEl.setAttribute('rotation', '0 180 0');\n          } else {\n            textEl.setAttribute('rotation', '0 0 0');\n          }\n          textEl.setAttribute('text', 'width', 5);\n          textEl.setAttribute('position', '0 1.5 0');\n          el.getObject3D('mesh').visible = true;\n          this.semiSphereEl.setAttribute('visible', false);\n          this.peekCameraPortalOrientation = undefined;\n        }\n        if (this.previousQuaternion) {\n          object3D.quaternion.copy(this.previousQuaternion);\n          this.previousQuaternion = undefined;\n        }\n      }\n    };\n  })(),\n\n  hideAll: function () {\n    var el = this.el;\n    var hiddenEls = this.hiddenEls;\n    var self = this;\n    if (hiddenEls.length > 0) { return; }\n    el.sceneEl.object3D.traverse(function (object) {\n      if (object && object.el && object.el.hasAttribute('link-controls')) { return; }\n      if (!object.el || object === el.sceneEl.object3D || object.el === el ||\n          object.el === self.sphereEl || object.el === el.sceneEl.cameraEl ||\n          object.el.getAttribute('visible') === false || object.el === self.textEl ||\n          object.el === self.semiSphereEl) {\n        return;\n      }\n      object.el.setAttribute('visible', false);\n      hiddenEls.push(object.el);\n    });\n  },\n\n  showAll: function () {\n    this.hiddenEls.forEach(function (el) { el.setAttribute('visible', true); });\n    this.hiddenEls = [];\n  },\n\n  /**\n   * Calculate whether the camera faces the front or back face of the portal.\n   * @returns {number} > 0 if camera faces front of portal, < 0 if it faces back of portal.\n   */\n  calculateCameraPortalOrientation: (function () {\n    var mat4 = new THREE.Matrix4();\n    var cameraPosition = new THREE.Vector3();\n    var portalNormal = new THREE.Vector3(0, 0, 1);\n    var portalPosition = new THREE.Vector3(0, 0, 0);\n\n    return function () {\n      var el = this.el;\n      var camera = el.sceneEl.camera;\n\n      // Reset tmp variables.\n      cameraPosition.set(0, 0, 0);\n      portalNormal.set(0, 0, 1);\n      portalPosition.set(0, 0, 0);\n\n      // Apply portal orientation to the normal.\n      el.object3D.matrixWorld.extractRotation(mat4);\n      portalNormal.applyMatrix4(mat4);\n\n      // Calculate portal world position.\n      el.object3D.updateMatrixWorld();\n      el.object3D.localToWorld(portalPosition);\n\n      // Calculate camera world position.\n      camera.parent.parent.updateMatrixWorld();\n      camera.parent.updateMatrixWorld();\n      camera.updateMatrixWorld();\n      camera.localToWorld(cameraPosition);\n\n      // Calculate vector from portal to camera.\n      // (portal) -------> (camera)\n      cameraPosition.sub(portalPosition).normalize();\n      portalNormal.normalize();\n\n      // Side where camera approaches portal is given by sign of dot product of portal normal\n      // and portal to camera vectors.\n      return Math.sign(portalNormal.dot(cameraPosition));\n    };\n  })(),\n\n  remove: function () {\n    this.removeEventListener();\n  }\n});\n\n/* eslint-disable */\nregisterShader('portal', {\n  schema: {\n    borderEnabled: {default: 1.0, type: 'int', is: 'uniform'},\n    backgroundColor: {default: 'red', type: 'color', is: 'uniform'},\n    pano: {type: 'map', is: 'uniform'},\n    strokeColor: {default: 'white', type: 'color', is: 'uniform'},\n    previewDistance: {default: DEFAULT_PREVIEW_DISTANCE, type: 'float', is: 'uniform'}\n  },\n\n  vertexShader: [\n    'vec3 portalPosition;',\n    'varying vec3 vWorldPosition;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'void main() {',\n    'vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);',\n    'portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;',\n    'vDistance = length(portalPosition - cameraPosition);',\n    'vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;',\n    'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    '#define RECIPROCAL_PI2 0.15915494',\n    'uniform sampler2D pano;',\n    'uniform vec3 strokeColor;',\n    'uniform vec3 backgroundColor;',\n    'uniform float borderEnabled;',\n    'uniform float previewDistance;',\n    'varying float vDistanceToCenter;',\n    'varying float vDistance;',\n    'varying vec3 vWorldPosition;',\n    'void main() {',\n    'vec3 direction = normalize(vWorldPosition - cameraPosition);',\n    'vec2 sampleUV;',\n    'float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);',\n    'sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);',\n    'sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;',\n    'if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {',\n    'gl_FragColor = vec4(strokeColor, 1.0);',\n    '} else {',\n    'gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));',\n    '}',\n    '}'\n  ].join('\\n')\n});\n/* eslint-enable */\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('line', {\n  schema: {\n    start: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    end: {type: 'vec3', default: {x: 0, y: 0, z: 0}},\n    color: {type: 'color', default: '#74BEC1'},\n    opacity: {type: 'number', default: 1},\n    visible: {default: true}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var data = this.data;\n    var geometry;\n    var material;\n    material = this.material = new THREE.LineBasicMaterial({\n      color: data.color,\n      opacity: data.opacity,\n      transparent: data.opacity < 1,\n      visible: data.visible\n    });\n    geometry = this.geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(geometry, material);\n    this.el.setObject3D(this.attrName, this.line);\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var geometry = this.geometry;\n    var geoNeedsUpdate = false;\n    var material = this.material;\n    var positionArray = geometry.attributes.position.array;\n\n    // Update geometry.\n    if (!isEqualVec3(data.start, oldData.start)) {\n      positionArray[0] = data.start.x;\n      positionArray[1] = data.start.y;\n      positionArray[2] = data.start.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (!isEqualVec3(data.end, oldData.end)) {\n      positionArray[3] = data.end.x;\n      positionArray[4] = data.end.y;\n      positionArray[5] = data.end.z;\n      geoNeedsUpdate = true;\n    }\n\n    if (geoNeedsUpdate) {\n      geometry.attributes.position.needsUpdate = true;\n      geometry.computeBoundingSphere();\n    }\n\n    material.color.setStyle(data.color);\n    material.opacity = data.opacity;\n    material.transparent = data.opacity < 1;\n    material.visible = data.visible;\n  },\n\n  remove: function () {\n    this.el.removeObject3D(this.attrName, this.line);\n  }\n});\n\nfunction isEqualVec3 (a, b) {\n  if (!a || !b) { return false; }\n  return (a.x === b.x && a.y === b.y && a.z === b.z);\n}\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'logitech-mx-ink';\nvar LOGITECH_MX_INK_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/logitech/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 5 - touchpad\n * 6 - tip\n * 7 - dock\n *\n*/\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  },\n  right: {\n    buttons: ['front', 'back', 'none', 'none', 'none', 'tip']\n  }\n};\n\n/**\n * Logitech MX Ink Controls\n */\nexport var Component = registerComponent('logitech-mx-ink-controls', {\n  schema: {\n    hand: {default: 'left'},\n    model: {default: true},\n    orientationOffset: {type: 'vec3'}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    el.sceneEl.removeEventListener('exit-vr', this.onExitVR);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    var id = GAMEPAD_ID;\n    el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true,\n      orientationOffset: data.orientationOffset\n    });\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (!this.data.model) { return; }\n    if (controllerObject3D) {\n      controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n      this.el.setObject3D('mesh', controllerObject3D);\n      return;\n    }\n    this.el.setAttribute('gltf-model', LOGITECH_MX_INK_MODEL_GLB_BASE_URL + 'logitech-mx-ink.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'logitech-mx-ink-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n\n    this.controllerObject3D = this.el.getObject3D('mesh');\n    this.controllerObject3D.visible = this.el.sceneEl.is('vr-mode');\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  }\n});\n","/* global DeviceOrientationEvent  */\nimport * as THREE from 'three';\nimport { DeviceOrientationControls } from '../../vendor/DeviceOrientationControls.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\n// To avoid recalculation at every mouse movement tick\nvar PI_2 = Math.PI / 2;\n\n/**\n * look-controls. Update entity pose, factoring mouse, touch.\n */\nexport var Component = registerComponent('look-controls', {\n  dependencies: ['position', 'rotation'],\n\n  schema: {\n    enabled: {default: true},\n    magicWindowTrackingEnabled: {default: true},\n    pointerLockEnabled: {default: false},\n    reverseMouseDrag: {default: false},\n    reverseTouchDrag: {default: false},\n    touchEnabled: {default: true},\n    mouseEnabled: {default: true}\n  },\n\n  init: function () {\n    this.deltaYaw = 0;\n    this.previousHMDPosition = new THREE.Vector3();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.magicWindowAbsoluteEuler = new THREE.Euler();\n    this.magicWindowDeltaEuler = new THREE.Euler();\n    this.position = new THREE.Vector3();\n    this.magicWindowObject = new THREE.Object3D();\n    this.rotation = {};\n    this.deltaRotation = {};\n    this.savedPose = null;\n    this.pointerLocked = false;\n    this.setupMouseControls();\n    this.bindMethods();\n    this.previousMouseEvent = {};\n\n    this.setupMagicWindowControls();\n\n    // To save / restore camera pose\n    this.savedPose = {\n      position: new THREE.Vector3(),\n      rotation: new THREE.Euler()\n    };\n\n    // Call enter VR handler if the scene has entered VR before the event listeners attached.\n    if (this.el.sceneEl.is('vr-mode') || this.el.sceneEl.is('ar-mode')) { this.onEnterVR(); }\n  },\n\n  setupMagicWindowControls: function () {\n    var magicWindowControls;\n    var data = this.data;\n\n    // Only on mobile devices and only enabled if DeviceOrientation permission has been granted.\n    if (utils.device.isMobile() || utils.device.isMobileDeviceRequestingDesktopSite()) {\n      magicWindowControls = this.magicWindowControls = new DeviceOrientationControls(this.magicWindowObject);\n      if (typeof DeviceOrientationEvent !== 'undefined' && DeviceOrientationEvent.requestPermission) {\n        magicWindowControls.enabled = false;\n        if (this.el.sceneEl.components['device-orientation-permission-ui'].permissionGranted) {\n          magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n        } else {\n          this.el.sceneEl.addEventListener('deviceorientationpermissiongranted', function () {\n            magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n          });\n        }\n      }\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n\n    // Disable grab cursor classes if no longer enabled.\n    if (data.enabled !== oldData.enabled) {\n      this.updateGrabCursor(data.enabled);\n    }\n\n    // Reset magic window eulers if tracking is disabled.\n    if (oldData && !data.magicWindowTrackingEnabled && oldData.magicWindowTrackingEnabled) {\n      this.magicWindowAbsoluteEuler.set(0, 0, 0);\n      this.magicWindowDeltaEuler.set(0, 0, 0);\n    }\n\n    // Pass on magic window tracking setting to magicWindowControls.\n    if (this.magicWindowControls) {\n      this.magicWindowControls.enabled = data.magicWindowTrackingEnabled;\n    }\n\n    if (oldData && !data.pointerLockEnabled !== oldData.pointerLockEnabled) {\n      this.removeEventListeners();\n      this.addEventListeners();\n      if (this.pointerLocked) { this.exitPointerLock(); }\n    }\n  },\n\n  tick: function (t) {\n    var data = this.data;\n    if (!data.enabled) { return; }\n    this.updateOrientation();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n    if (this.pointerLocked) { this.exitPointerLock(); }\n  },\n\n  bindMethods: function () {\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.onExitVR = this.onExitVR.bind(this);\n    this.onPointerLockChange = this.onPointerLockChange.bind(this);\n    this.onPointerLockError = this.onPointerLockError.bind(this);\n  },\n\n /**\n  * Set up states and Object3Ds needed to store rotation data.\n  */\n  setupMouseControls: function () {\n    this.mouseDown = false;\n    this.pitchObject = new THREE.Object3D();\n    this.yawObject = new THREE.Object3D();\n    this.yawObject.position.y = 10;\n    this.yawObject.add(this.pitchObject);\n  },\n\n  /**\n   * Add mouse and touch event listeners to canvas.\n   */\n  addEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    // Wait for canvas to load.\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    // Mouse events.\n    canvasEl.addEventListener('mousedown', this.onMouseDown, false);\n    window.addEventListener('mousemove', this.onMouseMove, false);\n    window.addEventListener('mouseup', this.onMouseUp, false);\n\n    // Touch events.\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\n    window.addEventListener('touchmove', this.onTouchMove, {passive: true});\n    window.addEventListener('touchend', this.onTouchEnd, {passive: true});\n\n    // sceneEl events.\n    sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    sceneEl.addEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    if (this.data.pointerLockEnabled) {\n      document.addEventListener('pointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n      document.addEventListener('pointerlockerror', this.onPointerLockError, false);\n    }\n  },\n\n  /**\n   * Remove mouse and touch event listeners from canvas.\n   */\n  removeEventListeners: function () {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    if (!canvasEl) { return; }\n\n    // Mouse events.\n    canvasEl.removeEventListener('mousedown', this.onMouseDown);\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n\n    // Touch events.\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    window.removeEventListener('touchmove', this.onTouchMove);\n    window.removeEventListener('touchend', this.onTouchEnd);\n\n    // sceneEl events.\n    sceneEl.removeEventListener('enter-vr', this.onEnterVR);\n    sceneEl.removeEventListener('exit-vr', this.onExitVR);\n\n    // Pointer Lock events.\n    document.removeEventListener('pointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('mozpointerlockchange', this.onPointerLockChange, false);\n    document.removeEventListener('pointerlockerror', this.onPointerLockError, false);\n  },\n\n  /**\n   * Update orientation for mobile, mouse drag, and headset.\n   * Mouse-drag only enabled if HMD is not active.\n   */\n  updateOrientation: function () {\n    var object3D = this.el.object3D;\n    var pitchObject = this.pitchObject;\n    var yawObject = this.yawObject;\n    var sceneEl = this.el.sceneEl;\n\n    // In VR or AR mode, THREE is in charge of updating the camera pose.\n    if ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected()) {\n      // With WebXR THREE applies headset pose to the object3D internally.\n      return;\n    }\n\n    this.updateMagicWindowOrientation();\n\n    // On mobile, do camera rotation with touch events and sensors.\n    object3D.rotation.x = this.magicWindowDeltaEuler.x + pitchObject.rotation.x;\n    object3D.rotation.y = this.magicWindowDeltaEuler.y + yawObject.rotation.y;\n    object3D.rotation.z = this.magicWindowDeltaEuler.z;\n  },\n\n  updateMagicWindowOrientation: function () {\n    var magicWindowAbsoluteEuler = this.magicWindowAbsoluteEuler;\n    var magicWindowDeltaEuler = this.magicWindowDeltaEuler;\n    // Calculate magic window HMD quaternion.\n    if (this.magicWindowControls && this.magicWindowControls.enabled) {\n      this.magicWindowControls.update();\n      magicWindowAbsoluteEuler.setFromQuaternion(this.magicWindowObject.quaternion, 'YXZ');\n      if (!this.previousMagicWindowYaw && magicWindowAbsoluteEuler.y !== 0) {\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n      if (this.previousMagicWindowYaw) {\n        magicWindowDeltaEuler.x = magicWindowAbsoluteEuler.x;\n        magicWindowDeltaEuler.y += magicWindowAbsoluteEuler.y - this.previousMagicWindowYaw;\n        magicWindowDeltaEuler.z = magicWindowAbsoluteEuler.z;\n        this.previousMagicWindowYaw = magicWindowAbsoluteEuler.y;\n      }\n    }\n  },\n\n  /**\n   * Translate mouse drag into rotation.\n   *\n   * Dragging up and down rotates the camera around the X-axis (yaw).\n   * Dragging left and right rotates the camera around the Y-axis (pitch).\n   */\n  onMouseMove: function (evt) {\n    var direction;\n    var movementX;\n    var movementY;\n    var pitchObject = this.pitchObject;\n    var previousMouseEvent = this.previousMouseEvent;\n    var yawObject = this.yawObject;\n\n    // Not dragging or not enabled.\n    if (!this.data.enabled || (!this.mouseDown && !this.pointerLocked)) { return; }\n\n    // Calculate delta.\n    if (this.pointerLocked) {\n      movementX = evt.movementX || evt.mozMovementX || 0;\n      movementY = evt.movementY || evt.mozMovementY || 0;\n    } else {\n      movementX = evt.screenX - previousMouseEvent.screenX;\n      movementY = evt.screenY - previousMouseEvent.screenY;\n    }\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n\n    // Calculate rotation.\n    direction = this.data.reverseMouseDrag ? 1 : -1;\n    yawObject.rotation.y += movementX * 0.002 * direction;\n    pitchObject.rotation.x += movementY * 0.002 * direction;\n    pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\n  },\n\n  /**\n   * Register mouse down to detect mouse drag.\n   */\n  onMouseDown: function (evt) {\n    var sceneEl = this.el.sceneEl;\n    if (!this.data.enabled || !this.data.mouseEnabled || ((sceneEl.is('vr-mode') || sceneEl.is('ar-mode')) && sceneEl.checkHeadsetConnected())) { return; }\n    // Handle only primary button.\n    if (evt.button !== 0) { return; }\n\n    var canvasEl = sceneEl && sceneEl.canvas;\n\n    this.mouseDown = true;\n    this.previousMouseEvent.screenX = evt.screenX;\n    this.previousMouseEvent.screenY = evt.screenY;\n    this.showGrabbingCursor();\n\n    if (this.data.pointerLockEnabled && !this.pointerLocked) {\n      if (canvasEl.requestPointerLock) {\n        canvasEl.requestPointerLock();\n      } else if (canvasEl.mozRequestPointerLock) {\n        canvasEl.mozRequestPointerLock();\n      }\n    }\n  },\n\n  /**\n   * Shows grabbing cursor on scene\n   */\n  showGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = 'grabbing';\n  },\n\n  /**\n   * Hides grabbing cursor on scene\n   */\n  hideGrabbingCursor: function () {\n    this.el.sceneEl.canvas.style.cursor = '';\n  },\n\n  /**\n   * Register mouse up to detect release of mouse drag.\n   */\n  onMouseUp: function () {\n    this.mouseDown = false;\n    this.hideGrabbingCursor();\n  },\n\n  /**\n   * Register touch down to detect touch drag.\n   */\n  onTouchStart: function (evt) {\n    if (evt.touches.length !== 1 ||\n        !this.data.touchEnabled ||\n        this.el.sceneEl.is('vr-mode') ||\n        this.el.sceneEl.is('ar-mode')) { return; }\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n    this.touchStarted = true;\n  },\n\n  /**\n   * Translate touch move to Y-axis rotation.\n   */\n  onTouchMove: function (evt) {\n    var direction;\n    var canvas = this.el.sceneEl.canvas;\n    var deltaY;\n    var yawObject = this.yawObject;\n\n    if (!this.touchStarted || !this.data.touchEnabled) { return; }\n\n    deltaY = 2 * Math.PI * (evt.touches[0].pageX - this.touchStart.x) / canvas.clientWidth;\n\n    direction = this.data.reverseTouchDrag ? 1 : -1;\n    // Limit touch orientation to to yaw (y axis).\n    yawObject.rotation.y -= deltaY * 0.5 * direction;\n    this.touchStart = {\n      x: evt.touches[0].pageX,\n      y: evt.touches[0].pageY\n    };\n  },\n\n  /**\n   * Register touch end to detect release of touch drag.\n   */\n  onTouchEnd: function () {\n    this.touchStarted = false;\n  },\n\n  /**\n   * Save pose.\n   */\n  onEnterVR: function () {\n    var sceneEl = this.el.sceneEl;\n    if (!sceneEl.checkHeadsetConnected()) { return; }\n    this.saveCameraPose();\n    this.el.object3D.position.set(0, 0, 0);\n    this.el.object3D.rotation.set(0, 0, 0);\n    if (sceneEl.hasWebXR) {\n      this.el.object3D.matrixAutoUpdate = false;\n      this.el.object3D.updateMatrix();\n    }\n  },\n\n  /**\n   * Restore the pose.\n   */\n  onExitVR: function () {\n    if (!this.el.sceneEl.checkHeadsetConnected()) { return; }\n    this.restoreCameraPose();\n    this.previousHMDPosition.set(0, 0, 0);\n    this.el.object3D.matrixAutoUpdate = true;\n  },\n\n  /**\n   * Update Pointer Lock state.\n   */\n  onPointerLockChange: function () {\n    this.pointerLocked = !!(document.pointerLockElement || document.mozPointerLockElement);\n  },\n\n  /**\n   * Recover from Pointer Lock error.\n   */\n  onPointerLockError: function () {\n    this.pointerLocked = false;\n  },\n\n  // Exits pointer-locked mode.\n  exitPointerLock: function () {\n    document.exitPointerLock();\n    this.pointerLocked = false;\n  },\n\n  /**\n   * Toggle the feature of showing/hiding the grab cursor.\n   */\n  updateGrabCursor: function (enabled) {\n    var sceneEl = this.el.sceneEl;\n\n    function enableGrabCursor () { sceneEl.canvas.classList.add('a-grab-cursor'); }\n    function disableGrabCursor () { sceneEl.canvas.classList.remove('a-grab-cursor'); }\n\n    if (!sceneEl.canvas) {\n      if (enabled) {\n        sceneEl.addEventListener('render-target-loaded', enableGrabCursor);\n      } else {\n        sceneEl.addEventListener('render-target-loaded', disableGrabCursor);\n      }\n      return;\n    }\n\n    if (enabled) {\n      enableGrabCursor();\n      return;\n    }\n    disableGrabCursor();\n  },\n\n  /**\n   * Save camera pose before entering VR to restore later if exiting.\n   */\n  saveCameraPose: function () {\n    var el = this.el;\n\n    this.savedPose.position.copy(el.object3D.position);\n    this.savedPose.rotation.copy(el.object3D.rotation);\n    this.hasSavedPose = true;\n  },\n\n  /**\n   * Reset camera pose to before entering VR.\n   */\n  restoreCameraPose: function () {\n    var el = this.el;\n    var savedPose = this.savedPose;\n\n    if (!this.hasSavedPose) { return; }\n\n    // Reset camera orientation.\n    el.object3D.position.copy(savedPose.position);\n    el.object3D.rotation.copy(savedPose.rotation);\n    this.hasSavedPose = false;\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID_PREFIX = 'magicleap';\nvar GAMEPAD_ID_SUFFIX = '-one';\nvar GAMEPAD_ID_COMPOSITE = GAMEPAD_ID_PREFIX + GAMEPAD_ID_SUFFIX;\nvar MAGICLEAP_CONTROLLER_MODEL_GLB_URL = AFRAME_CDN_ROOT + 'controllers/magicleap/magicleap-one-controller.glb';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 2 - touchpad\n * 3 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'menu']\n};\n\n/**\n * Magic Leap Controls\n * Interface with Magic Leap control and map Gamepad events to controller\n * buttons: trigger, grip, touchpad, and menu.\n * Load a controller model.\n */\nexport var Component = registerComponent('magicleap-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_COMPOSITE,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID_COMPOSITE,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', MAGICLEAP_CONTROLLER_MODEL_GLB_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    // our glb scale is too large.\n    controllerObject3D.scale.set(0.01, 0.01, 0.01);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {},\n\n  setButtonColor: function (buttonName, color) {}\n\n});\n","import * as THREE from 'three';\nimport * as utils from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\nimport { shaders, shaderNames } from '../core/shader.js';\n\nvar error = utils.debug('components:material:error');\n\n/**\n * Material component.\n *\n * @member {object} shader - Determines how material is shaded. Defaults to `standard`,\n *         three.js's implementation of PBR. Another standard shading model is `flat` which\n *         uses MeshBasicMaterial.\n */\nexport var Component = registerComponent('material', {\n  schema: {\n    alphaTest: {default: 0.0, min: 0.0, max: 1.0},\n    depthTest: {default: true},\n    depthWrite: {default: true},\n    flatShading: {default: false},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    opacity: {default: 1.0, min: 0.0, max: 1.0},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    magFilter: {default: 'linear', oneOf: ['nearest', 'linear']},\n    minFilter: {\n      default: 'linear-mipmap-linear',\n      oneOf: ['nearest', 'nearest-mipmap-nearest', 'nearest-mipmap-linear', 'linear', 'linear-mipmap-nearest', 'linear-mipmap-linear']\n    },\n    shader: {default: 'standard', oneOf: shaderNames, schemaChange: true},\n    side: {default: 'front', oneOf: ['front', 'back', 'double']},\n    transparent: {default: false},\n    vertexColorsEnabled: {default: false},\n    visible: {default: true},\n    blending: {default: 'normal', oneOf: ['none', 'normal', 'additive', 'subtractive', 'multiply']},\n    dithering: {default: true},\n    anisotropy: {default: 0, min: 0}\n  },\n\n  init: function () {\n    this.material = null;\n  },\n\n  /**\n   * Update or create material.\n   *\n   * @param {object|null} oldData\n   */\n  update: function (oldData) {\n    var data = this.data;\n    if (!this.shader || data.shader !== oldData.shader) {\n      this.updateShader(data.shader);\n    }\n    this.shader.update(this.data);\n    this.updateMaterial(oldData);\n  },\n\n  updateSchema: function (data) {\n    var currentShader;\n    var newShader;\n    var schema;\n    var shader;\n\n    newShader = data && data.shader;\n    currentShader = this.oldData && this.oldData.shader;\n    shader = newShader || currentShader;\n    schema = shaders[shader] && shaders[shader].schema;\n\n    if (!schema) { error('Unknown shader schema ' + shader); }\n    if (currentShader && newShader === currentShader) { return; }\n    this.extendSchema(schema);\n    this.updateBehavior();\n  },\n\n  updateBehavior: function () {\n    var key;\n    var sceneEl = this.el.sceneEl;\n    var schema = this.schema;\n    var self = this;\n    var tickProperties;\n\n    function tickTime (time, delta) {\n      var key;\n      for (key in tickProperties) {\n        tickProperties[key] = time;\n      }\n      self.shader.update(tickProperties);\n    }\n\n    this.tick = undefined;\n\n    tickProperties = {};\n    for (key in schema) {\n      if (schema[key].type === 'time') {\n        this.tick = tickTime;\n        tickProperties[key] = true;\n      }\n    }\n\n    if (!sceneEl) { return; }\n    if (this.tick) {\n      sceneEl.addBehavior(this);\n    } else {\n      sceneEl.removeBehavior(this);\n    }\n  },\n\n  updateShader: function (shaderName) {\n    var data = this.data;\n    var Shader = shaders[shaderName] && shaders[shaderName].Shader;\n    var shaderInstance;\n\n    if (!Shader) { throw new Error('Unknown shader ' + shaderName); }\n\n    // Get material from A-Frame shader.\n    shaderInstance = this.shader = new Shader();\n    shaderInstance.el = this.el;\n    shaderInstance.init(data);\n    this.setMaterial(shaderInstance.material);\n    this.updateSchema(data);\n  },\n\n  /**\n   * Set and update base material properties.\n   * Set `needsUpdate` when needed.\n   */\n  updateMaterial: function (oldData) {\n    var data = this.data;\n    var material = this.material;\n    var oldDataHasKeys;\n\n    // Base material properties.\n    material.alphaTest = data.alphaTest;\n    material.depthTest = data.depthTest !== false;\n    material.depthWrite = data.depthWrite !== false;\n    material.opacity = data.opacity;\n    material.flatShading = data.flatShading;\n    material.side = parseSide(data.side);\n    material.transparent = data.transparent !== false || data.opacity < 1.0;\n    material.vertexColors = data.vertexColorsEnabled;\n    material.visible = data.visible;\n    material.blending = parseBlending(data.blending);\n    material.dithering = data.dithering;\n\n    // Check if material needs update.\n    for (oldDataHasKeys in oldData) { break; }\n    if (oldDataHasKeys &&\n        (oldData.alphaTest !== data.alphaTest ||\n         oldData.side !== data.side ||\n         oldData.vertexColorsEnabled !== data.vertexColorsEnabled)) {\n      material.needsUpdate = true;\n    }\n  },\n\n  /**\n   * Remove material on remove (callback).\n   * Dispose of it from memory and unsubscribe from scene updates.\n   */\n  remove: function () {\n    var defaultMaterial = new THREE.MeshBasicMaterial();\n    var material = this.material;\n    var object3D = this.el.getObject3D('mesh');\n    if (object3D) { object3D.material = defaultMaterial; }\n    disposeMaterial(material, this.system);\n  },\n\n  /**\n   * (Re)create new material. Has side-effects of setting `this.material` and updating\n   * material registration in scene.\n   *\n   * @param {THREE.Material} material - Material to register.\n   */\n  setMaterial: function (material) {\n    var el = this.el;\n    var mesh;\n    var system = this.system;\n\n    if (this.material) { disposeMaterial(this.material, system); }\n\n    this.material = material;\n    system.registerMaterial(material);\n\n    // Set on mesh. If mesh does not exist, wait for it.\n    mesh = el.getObject3D('mesh');\n    if (mesh) {\n      mesh.material = material;\n    } else {\n      el.addEventListener('object3dset', function waitForMesh (evt) {\n        if (evt.detail.type !== 'mesh' || evt.target !== el) { return; }\n        el.getObject3D('mesh').material = material;\n        el.removeEventListener('object3dset', waitForMesh);\n      });\n    }\n  }\n});\n\n/**\n * Return a three.js constant determining which material face sides to render\n * based on the side parameter (passed as a component property).\n *\n * @param {string} [side=front] - `front`, `back`, or `double`.\n * @returns {number} THREE.FrontSide, THREE.BackSide, or THREE.DoubleSide.\n */\nfunction parseSide (side) {\n  switch (side) {\n    case 'back': {\n      return THREE.BackSide;\n    }\n    case 'double': {\n      return THREE.DoubleSide;\n    }\n    default: {\n      // Including case `front`.\n      return THREE.FrontSide;\n    }\n  }\n}\n\n/**\n * Return a three.js constant determining blending\n *\n * @param {string} [blending=normal] - `none`, additive`, `subtractive`,`multiply` or `normal`.\n * @returns {number}\n */\nfunction parseBlending (blending) {\n  switch (blending) {\n    case 'none': {\n      return THREE.NoBlending;\n    }\n    case 'additive': {\n      return THREE.AdditiveBlending;\n    }\n    case 'subtractive': {\n      return THREE.SubtractiveBlending;\n    }\n    case 'multiply': {\n      return THREE.MultiplyBlending;\n    }\n    default: {\n      return THREE.NormalBlending;\n    }\n  }\n}\n\n/**\n * Dispose of material from memory and unsubscribe material from scene updates like fog.\n */\nfunction disposeMaterial (material, system) {\n  material.dispose();\n  system.unregisterMaterial(material);\n\n  // Dispose textures on this material\n  Object.keys(material)\n    .filter(function (propName) {\n      return material[propName] && material[propName].isTexture;\n    })\n    .forEach(function (mapName) {\n      material[mapName].dispose();\n    });\n}\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-touch';\n\n// First generation model URL.\nvar TOUCH_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/oculus/oculus-touch-controller-';\nvar META_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/meta/';\n\nvar OCULUS_TOUCH_CONFIG = {\n  left: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'left.gltf',\n    rayOrigin: {origin: {x: 0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(-0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  },\n  right: {\n    modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'right.gltf',\n    rayOrigin: {origin: {x: -0.002, y: -0.005, z: -0.03}, direction: {x: 0, y: -0.8, z: -1}},\n    modelPivotOffset: new THREE.Vector3(0.005, 0.036, -0.037),\n    modelPivotRotation: new THREE.Euler(Math.PI / 4.5, 0, 0)\n  }\n};\n\nvar CONTROLLER_DEFAULT = 'oculus-touch';\nvar CONTROLLER_PROPERTIES = {\n  'oculus-touch': OCULUS_TOUCH_CONFIG,\n  'oculus-touch-v2': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-left.gltf',\n      rayOrigin: {origin: {x: -0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'gen2-right.gltf',\n      rayOrigin: {origin: {x: 0.006, y: -0.03, z: -0.04}, direction: {x: 0, y: -0.9, z: -1}},\n      modelPivotOffset: new THREE.Vector3(0, -0.007, -0.021),\n      modelPivotRotation: new THREE.Euler(-Math.PI / 4, 0, 0)\n    }\n  },\n  'oculus-touch-v3': {\n    left: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: TOUCH_CONTROLLER_MODEL_BASE_URL + 'v3-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-pro': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-pro-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  },\n  'meta-quest-touch-plus': {\n    left: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-left.glb',\n      rayOrigin: {\n        origin: {x: 0.0065, y: -0.0186, z: -0.05},\n        direction: {x: 0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    },\n    right: {\n      modelUrl: META_CONTROLLER_MODEL_BASE_URL + 'quest-touch-plus-right.glb',\n      rayOrigin: {\n        origin: {x: -0.0065, y: -0.0186, z: -0.05},\n        direction: {x: -0.12394785839500175, y: -0.5944043672340157, z: -0.7945567170519814}\n      },\n      modelPivotOffset: new THREE.Vector3(0, 0, 0),\n      modelPivotRotation: new THREE.Euler(0, 0, 0)\n    }\n  }\n};\n\nvar INPUT_MAPPING = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton', 'surface']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton', 'surface']\n  }\n};\n\n/**\n * Meta Touch controls (formerly Oculus Touch)\n * Interface with Meta Touch controllers and map Gamepad events to\n * controller buttons: thumbstick, trigger, grip, xbutton, ybutton, surface\n * Load a controller model and highlight the pressed buttons.\n */\nvar componentConfig = {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#999'},  // Off-white.\n    buttonTouchColor: {type: 'color', default: '#8AB'},\n    buttonHighlightColor: {type: 'color', default: '#2DF'},  // Light blue.\n    model: {default: true},\n    controllerType: {default: 'auto', oneOf: ['auto', 'oculus-touch', 'oculus-touch-v2', 'oculus-touch-v3']}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onThumbstickMoved = this.onThumbstickMoved.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n    this.triggerEuler = new THREE.Euler();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('thumbstickmoved', this.onThumbstickMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var controllerObject3D = this.controllerObject3D;\n    if (controllerObject3D) { controllerObject3D.visible = false; }\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  loadModel: function (controller) {\n    var data = this.data;\n    var controllerId;\n    if (!data.model) { return; }\n\n    // If model has been already loaded\n    if (this.controllerObject3D) {\n      this.controllerObject3D.visible = true;\n      this.el.setObject3D('mesh', this.controllerObject3D);\n      return;\n    }\n\n    // Set the controller display model based on the data passed in.\n    this.displayModel = CONTROLLER_PROPERTIES[data.controllerType] || CONTROLLER_PROPERTIES[CONTROLLER_DEFAULT];\n    // If the developer is asking for auto-detection, use the retrieved displayName to identify the specific unit.\n    if (data.controllerType === 'auto') {\n      controllerId = CONTROLLER_DEFAULT;\n      var controllersPropertiesIds = Object.keys(CONTROLLER_PROPERTIES);\n      for (var i = 0; i < controller.profiles.length; i++) {\n        if (controllersPropertiesIds.indexOf(controller.profiles[i]) !== -1) {\n          controllerId = controller.profiles[i];\n          break;\n        }\n      }\n      this.displayModel = CONTROLLER_PROPERTIES[controllerId];\n    }\n    var modelUrl = this.displayModel[data.hand].modelUrl;\n    this.isTouchV3orPROorPlus =\n      this.displayModel === CONTROLLER_PROPERTIES['oculus-touch-v3'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-pro'] ||\n      this.displayModel === CONTROLLER_PROPERTIES['meta-quest-touch-plus'];\n    this.el.setAttribute('gltf-model', modelUrl);\n  },\n\n  injectTrackedControls: function (controller) {\n    var data = this.data;\n    var id = GAMEPAD_ID_PREFIX;\n    this.el.setAttribute('tracked-controls', {\n      id: id,\n      hand: data.hand,\n      handTrackingEnabled: false,\n      iterateControllerProfiles: true\n    });\n    this.loadModel(controller);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    if (!button) { return; }\n    // move the button meshes\n    if (this.isTouchV3orPROorPlus) {\n      this.onButtonChangedV3orPROorPlus(evt);\n    } else {\n      var buttonMeshes = this.buttonMeshes;\n      var analogValue;\n\n      if (button === 'trigger' || button === 'grip') { analogValue = evt.detail.state.value; }\n\n      if (buttonMeshes) {\n        if (button === 'trigger' && buttonMeshes.trigger) {\n          buttonMeshes.trigger.rotation.x = this.originalXRotationTrigger - analogValue * (Math.PI / 26);\n        }\n        if (button === 'grip' && buttonMeshes.grip) {\n          analogValue *= this.data.hand === 'left' ? -1 : 1;\n          buttonMeshes.grip.position.x = this.originalXPositionGrip + analogValue * 0.004;\n        }\n      }\n    }\n    // Pass along changed event with button state, using the button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onButtonChangedV3orPROorPlus: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var buttonObjects = this.buttonObjects;\n    var analogValue;\n    if (!buttonObjects || !buttonObjects[button]) { return; }\n    analogValue = evt.detail.state.value;\n    buttonObjects[button].quaternion.slerpQuaternions(\n      this.buttonRanges[button].min.quaternion,\n      this.buttonRanges[button].max.quaternion,\n      analogValue\n    );\n\n    buttonObjects[button].position.lerpVectors(\n      this.buttonRanges[button].min.position,\n      this.buttonRanges[button].max.position,\n      analogValue\n    );\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.onTouchV3orPROorPlusModelLoaded(evt);\n    } else {\n      // All oculus headset controller models prior to the Quest 2 (i.e., Oculus Touch V3)\n      // used a consistent format that is handled here\n      var controllerObject3D = this.controllerObject3D = evt.detail.model;\n      var buttonMeshes;\n\n      buttonMeshes = this.buttonMeshes = {};\n\n      buttonMeshes.grip = controllerObject3D.getObjectByName('buttonHand');\n      this.originalXPositionGrip = buttonMeshes.grip && buttonMeshes.grip.position.x;\n      buttonMeshes.trigger = controllerObject3D.getObjectByName('buttonTrigger');\n      this.originalXRotationTrigger = buttonMeshes.trigger && buttonMeshes.trigger.rotation.x;\n      buttonMeshes.thumbstick = controllerObject3D.getObjectByName('stick');\n      buttonMeshes.xbutton = controllerObject3D.getObjectByName('buttonX');\n      buttonMeshes.abutton = controllerObject3D.getObjectByName('buttonA');\n      buttonMeshes.ybutton = controllerObject3D.getObjectByName('buttonY');\n      buttonMeshes.bbutton = controllerObject3D.getObjectByName('buttonB');\n    }\n\n    for (var button in this.buttonMeshes) {\n      if (this.buttonMeshes[button]) {\n        cloneMeshMaterial(this.buttonMeshes[button]);\n      }\n    }\n\n    this.applyOffset(evt.detail.model);\n\n    this.el.emit('controllermodelready', {\n      name: 'meta-touch-controls',\n      model: this.data.model,\n      rayOrigin: this.displayModel[this.data.hand].rayOrigin\n    });\n  },\n\n  applyOffset: function (model) {\n    model.position.copy(this.displayModel[this.data.hand].modelPivotOffset);\n    model.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation);\n  },\n\n  onTouchV3orPROorPlusModelLoaded: function (evt) {\n    var controllerObject3D = this.controllerObject3D = evt.detail.model;\n\n    var buttonObjects = this.buttonObjects = {};\n    var buttonMeshes = this.buttonMeshes = {};\n    var buttonRanges = this.buttonRanges = {};\n\n    buttonMeshes.grip = controllerObject3D.getObjectByName('squeeze');\n    buttonObjects.grip = controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_value');\n    buttonRanges.grip = {\n      min: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_squeeze_pressed_max')\n    };\n    buttonObjects.grip.minX = buttonObjects.grip.position.x;\n\n    buttonMeshes.thumbstick = controllerObject3D.getObjectByName('thumbstick');\n    buttonObjects.thumbstick = controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_value');\n    buttonRanges.thumbstick = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_pressed_max')\n    };\n\n    buttonObjects.thumbstickXAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_value');\n    buttonRanges.thumbstickXAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_xaxis_pressed_max')\n    };\n\n    buttonObjects.thumbstickYAxis = controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_value');\n    buttonRanges.thumbstickYAxis = {\n      min: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_thumbstick_yaxis_pressed_max')\n    };\n\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    buttonObjects.trigger = controllerObject3D.getObjectByName('xr_standard_trigger_pressed_value');\n    buttonRanges.trigger = {\n      min: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_min'),\n      max: controllerObject3D.getObjectByName('xr_standard_trigger_pressed_max')\n    };\n    buttonRanges.trigger.diff = {\n      x: Math.abs(buttonRanges.trigger.max.rotation.x) - Math.abs(buttonRanges.trigger.min.rotation.x),\n      y: Math.abs(buttonRanges.trigger.max.rotation.y) - Math.abs(buttonRanges.trigger.min.rotation.y),\n      z: Math.abs(buttonRanges.trigger.max.rotation.z) - Math.abs(buttonRanges.trigger.min.rotation.z)\n    };\n\n    var button1 = this.data.hand === 'left' ? 'x' : 'a';\n    var button2 = this.data.hand === 'left' ? 'y' : 'b';\n    var button1id = button1 + 'button';\n    var button2id = button2 + 'button';\n\n    buttonMeshes[button1id] = controllerObject3D.getObjectByName(button1 + '_button');\n    buttonObjects[button1id] = controllerObject3D.getObjectByName(button1 + '_button_pressed_value');\n    buttonRanges[button1id] = {\n      min: controllerObject3D.getObjectByName(button1 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button1 + '_button_pressed_max')\n    };\n\n    buttonMeshes[button2id] = controllerObject3D.getObjectByName(button2 + '_button');\n    buttonObjects[button2id] = controllerObject3D.getObjectByName(button2 + '_button_pressed_value');\n    buttonRanges[button2id] = {\n      min: controllerObject3D.getObjectByName(button2 + '_button_pressed_min'),\n      max: controllerObject3D.getObjectByName(button2 + '_button_pressed_max')\n    };\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  },\n\n  onThumbstickMoved: function (evt) {\n    if (!this.buttonMeshes || !this.buttonMeshes.thumbstick) { return; }\n    if (this.isTouchV3orPROorPlus) {\n      this.updateThumbstickTouchV3orPROorPlus(evt);\n      return;\n    }\n    for (var axis in evt.detail) {\n      this.buttonObjects.thumbstick.rotation[this.axisMap[axis]] =\n        this.buttonRanges.thumbstick.originalRotation[this.axisMap[axis]] -\n        (Math.PI / 8) *\n        evt.detail[axis] *\n        (axis === 'y' || this.data.hand === 'right' ? -1 : 1);\n    }\n  },\n  axisMap: {\n    y: 'x',\n    x: 'z'\n  },\n\n  updateThumbstickTouchV3orPROorPlus: function (evt) {\n    var normalizedXAxis = (evt.detail.x + 1.0) / 2.0;\n    this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickXAxis.min.quaternion,\n      this.buttonRanges.thumbstickXAxis.max.quaternion,\n      normalizedXAxis\n    );\n\n    var normalizedYAxis = (evt.detail.y + 1.0) / 2.0;\n    this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(\n      this.buttonRanges.thumbstickYAxis.min.quaternion,\n      this.buttonRanges.thumbstickYAxis.max.quaternion,\n      normalizedYAxis\n    );\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    // update the button mesh colors\n    var buttonMeshes = this.buttonMeshes;\n    var button;\n    var color;\n\n    if (!buttonMeshes) { return; }\n    if (buttonMeshes[buttonName]) {\n      color = (state === 'up' || state === 'touchend') ? buttonMeshes[buttonName].originalColor || this.data.buttonColor : state === 'touchstart' ? this.data.buttonTouchColor : this.data.buttonHighlightColor;\n      button = buttonMeshes[buttonName];\n      button.material.color.set(color);\n    }\n  }\n};\nregisterComponent('oculus-touch-controls', componentConfig);\nexport var Component = registerComponent('meta-touch-controls', componentConfig);\n\n/**\n * Some of the controller models share the same material for different parts (buttons, triggers...).\n * In order to change their color independently we have to create separate materials.\n */\nfunction cloneMeshMaterial (object3d) {\n  object3d.traverse(function (node) {\n    var newMaterial;\n    if (node.type !== 'Mesh') return;\n    newMaterial = node.material.clone();\n    object3d.originalColor = node.material.color;\n    node.material.dispose();\n    node.material = newMaterial;\n  });\n}\n","import * as THREE from 'three';\nimport { OBB } from 'three/addons/math/OBB.js';\nimport { registerComponent } from '../core/component.js';\n\nregisterComponent('obb-collider', {\n  schema: {\n    size: {default: 0},\n    trackedObject3D: {default: ''},\n    minimumColliderDimension: {default: 0.02},\n    centerModel: {default: false}\n  },\n\n  init: function () {\n    this.previousScale = new THREE.Vector3().copy(this.el.object3D.scale);\n    this.auxEuler = new THREE.Euler();\n\n    this.boundingBox = new THREE.Box3();\n    this.boundingBoxSize = new THREE.Vector3();\n    this.updateCollider = this.updateCollider.bind(this);\n\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.updateBoundingBox = this.updateBoundingBox.bind(this);\n\n    this.el.addEventListener('model-loaded', this.onModelLoaded);\n    this.updateCollider();\n\n    this.system.addCollider(this.el);\n  },\n\n  remove: function () {\n    this.system.removeCollider(this.el);\n  },\n\n  update: function () {\n    if (this.data.trackedObject3D) {\n      this.trackedObject3DPath = this.data.trackedObject3D.split('.');\n    }\n  },\n\n  onModelLoaded: function () {\n    if (this.data.centerModel) { this.centerModel(); }\n    this.updateCollider();\n  },\n\n  centerModel: function () {\n    var el = this.el;\n    var model = el.components['gltf-model'] && el.components['gltf-model'].model;\n    var box;\n    var center;\n\n    if (!model) { return; }\n    this.el.removeObject3D('mesh');\n    box = new THREE.Box3().setFromObject(model);\n    center = box.getCenter(new THREE.Vector3());\n    model.position.x += (model.position.x - center.x);\n    model.position.y += (model.position.y - center.y);\n    model.position.z += (model.position.z - center.z);\n    this.el.setObject3D('mesh', model);\n  },\n\n  updateCollider: function () {\n    var el = this.el;\n    var boundingBoxSize = this.boundingBoxSize;\n    var aabb = this.aabb = this.aabb || new OBB();\n    this.obb = this.obb || new OBB();\n\n    // Defer if entity has not yet loaded.\n    if (!el.hasLoaded) {\n      el.addEventListener('loaded', this.updateCollider);\n      return;\n    }\n\n    this.updateBoundingBox();\n    aabb.halfSize.copy(boundingBoxSize).multiplyScalar(0.5);\n\n    if (this.el.sceneEl.systems['obb-collider'].data.showColliders) {\n      this.showCollider();\n    }\n  },\n\n  showCollider: function () {\n    this.updateColliderMesh();\n    this.renderColliderMesh.visible = true;\n  },\n\n  updateColliderMesh: function () {\n    var renderColliderMesh = this.renderColliderMesh;\n    var boundingBoxSize = this.boundingBoxSize;\n    if (!renderColliderMesh) {\n      this.initColliderMesh();\n      return;\n    }\n\n    // Destroy current geometry.\n    renderColliderMesh.geometry.dispose();\n    renderColliderMesh.geometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n  },\n\n  hideCollider: function () {\n    if (!this.renderColliderMesh) { return; }\n    this.renderColliderMesh.visible = false;\n  },\n\n  initColliderMesh: function () {\n    var boundingBoxSize;\n    var renderColliderGeometry;\n    var renderColliderMesh;\n\n    boundingBoxSize = this.boundingBoxSize;\n    renderColliderGeometry = this.renderColliderGeometry = new THREE.BoxGeometry(boundingBoxSize.x, boundingBoxSize.y, boundingBoxSize.z);\n    renderColliderMesh = this.renderColliderMesh = new THREE.Mesh(renderColliderGeometry, new THREE.MeshLambertMaterial({color: 0x00ff00, side: THREE.DoubleSide}));\n    renderColliderMesh.matrixAutoUpdate = false;\n    renderColliderMesh.matrixWorldAutoUpdate = false;\n    // THREE scene forces matrix world update even if matrixWorldAutoUpdate set to false.\n    renderColliderMesh.updateMatrixWorld = function () { /* no op */ };\n    this.el.sceneEl.object3D.add(renderColliderMesh);\n  },\n\n  updateBoundingBox: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var identityQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var auxEuler = this.auxEuler;\n      var boundingBox = this.boundingBox;\n      var size = this.data.size;\n      var trackedObject3D = this.trackedObject3D || this.el.object3D;\n      var boundingBoxSize = this.boundingBoxSize;\n      var minimumColliderDimension = this.data.minimumColliderDimension;\n\n      // user defined size takes precedence.\n      if (size) {\n        this.boundingBoxSize.x = size;\n        this.boundingBoxSize.y = size;\n        this.boundingBoxSize.z = size;\n        return;\n      }\n\n      // Bounding box is created axis-aligned AABB.\n      // If there's any rotation the box will have the wrong size.\n      // It undoes the local entity rotation and then restores so box has the expected size.\n      // We also undo the parent world rotation.\n      auxEuler.copy(trackedObject3D.rotation);\n      trackedObject3D.rotation.set(0, 0, 0);\n\n      trackedObject3D.parent.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n      auxMatrix.compose(auxPosition, identityQuaternion, auxScale);\n      trackedObject3D.parent.matrixWorld.copy(auxMatrix);\n\n      // Calculate bounding box size.\n      boundingBox.setFromObject(trackedObject3D, true);\n      boundingBox.getSize(boundingBoxSize);\n\n      // Enforce minimum dimensions.\n      boundingBoxSize.x = boundingBoxSize.x < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.x;\n      boundingBoxSize.y = boundingBoxSize.y < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.y;\n      boundingBoxSize.z = boundingBoxSize.z < minimumColliderDimension ? minimumColliderDimension : boundingBoxSize.z;\n\n      // Restore rotations.\n      trackedObject3D.parent.matrixWorld.compose(auxPosition, auxQuaternion, auxScale);\n      this.el.object3D.rotation.copy(auxEuler);\n    };\n  })(),\n\n  checkTrackedObject: function () {\n    var trackedObject3DPath = this.trackedObject3DPath;\n    var trackedObject3D;\n\n    if (trackedObject3DPath &&\n        trackedObject3DPath.length &&\n        !this.trackedObject3D) {\n      trackedObject3D = this.el;\n      for (var i = 0; i < trackedObject3DPath.length; i++) {\n        trackedObject3D = trackedObject3D[trackedObject3DPath[i]];\n        if (!trackedObject3D) { break; }\n      }\n      if (trackedObject3D) {\n        this.trackedObject3D = trackedObject3D;\n        this.updateCollider();\n      }\n    }\n    return this.trackedObject3D;\n  },\n\n  tick: (function () {\n    var auxPosition = new THREE.Vector3();\n    var auxScale = new THREE.Vector3();\n    var auxQuaternion = new THREE.Quaternion();\n    var auxMatrix = new THREE.Matrix4();\n\n    return function () {\n      var obb = this.obb;\n      var renderColliderMesh = this.renderColliderMesh;\n      var trackedObject3D = this.checkTrackedObject() || this.el.object3D;\n\n      if (!trackedObject3D) { return; }\n\n      trackedObject3D.updateMatrix();\n      trackedObject3D.updateMatrixWorld(true);\n      trackedObject3D.matrixWorld.decompose(auxPosition, auxQuaternion, auxScale);\n\n      // Recalculate collider if scale has changed.\n      if ((Math.abs(auxScale.x - this.previousScale.x) > 0.0001)  ||\n          (Math.abs(auxScale.y - this.previousScale.y) > 0.0001) ||\n          (Math.abs(auxScale.z - this.previousScale.z) > 0.0001)) {\n        this.updateCollider();\n      }\n\n      this.previousScale.copy(auxScale);\n\n      // reset scale, keep position and rotation\n      auxScale.set(1, 1, 1);\n      auxMatrix.compose(auxPosition, auxQuaternion, auxScale);\n      // Update OBB visual representation.\n      if (renderColliderMesh) { renderColliderMesh.matrixWorld.copy(auxMatrix); }\n\n      // Reset OBB with AABB and apply entity matrix. applyMatrix4 changes OBB internal state.\n      obb.copy(this.aabb);\n      obb.applyMatrix4(auxMatrix);\n    };\n  })()\n});\n","import * as THREE from 'three';\nimport { OBJLoader } from 'three/addons/loaders/OBJLoader.js';\nimport { MTLLoader } from 'three/addons/loaders/MTLLoader.js';\nimport { debug } from '../utils/index.js';\nimport { registerComponent } from '../core/component.js';\n\nvar warn = debug('components:obj-model:warn');\n\nexport var Component = registerComponent('obj-model', {\n  schema: {\n    mtl: {type: 'model'},\n    obj: {type: 'model'}\n  },\n\n  init: function () {\n    var self = this;\n\n    this.model = null;\n    this.objLoader = new OBJLoader();\n    this.mtlLoader = new MTLLoader(this.objLoader.manager);\n    // Allow cross-origin images to be loaded.\n    this.mtlLoader.crossOrigin = '';\n\n    this.el.addEventListener('componentinitialized', function (evt) {\n      if (!self.model) { return; }\n      if (evt.detail.name !== 'material') { return; }\n      self.applyMaterial();\n    });\n  },\n\n  update: function () {\n    var data = this.data;\n    if (!data.obj) { return; }\n    this.resetMesh();\n    this.loadObj(data.obj, data.mtl);\n  },\n\n  remove: function () {\n    this.resetMesh();\n  },\n\n  resetMesh: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  },\n\n  loadObj: function (objUrl, mtlUrl) {\n    var self = this;\n    var el = this.el;\n    var mtlLoader = this.mtlLoader;\n    var objLoader = this.objLoader;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n    var BASE_PATH = mtlUrl.substr(0, mtlUrl.lastIndexOf('/') + 1);\n\n    if (mtlUrl) {\n      // .OBJ with an .MTL.\n      if (el.hasAttribute('material')) {\n        warn('Material component properties are ignored when a .MTL is provided');\n      }\n      mtlLoader.setResourcePath(BASE_PATH);\n      mtlLoader.load(mtlUrl, function (materials) {\n        materials.preload();\n        objLoader.setMaterials(materials);\n        objLoader.load(objUrl, function (objModel) {\n          self.model = objModel;\n          self.model.traverse(function (object) {\n            if (object.isMesh) {\n              var material = object.material;\n              if (material.map) rendererSystem.applyColorCorrection(material.map);\n              if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n            }\n          });\n          el.setObject3D('mesh', objModel);\n          el.emit('model-loaded', {format: 'obj', model: objModel});\n        });\n      });\n      return;\n    }\n\n    // .OBJ only.\n    objLoader.load(objUrl, function loadObjOnly (objModel) {\n      self.model = objModel;\n      self.applyMaterial();\n      el.setObject3D('mesh', objModel);\n      el.emit('model-loaded', {format: 'obj', model: objModel});\n    });\n  },\n\n  /**\n   * Apply material from material component recursively.\n   */\n  applyMaterial: function () {\n    var material = this.el.components.material;\n    if (!material) { return; }\n    this.model.traverse(function (child) {\n      if (child instanceof THREE.Mesh) {\n        child.material = material.material;\n      }\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar OCULUS_GO_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/oculus/go/oculus-go-controller.gltf';\n\n// Prefix for Gen1 and Gen2 Oculus Touch Controllers.\nvar GAMEPAD_ID_PREFIX = 'oculus-go';\n\n/**\n * Button indices:\n * 0 - trigger\n * 1 - none\n * 2 - touchpad\n *\n * Axis:\n * 0 - touchpad x\n * 1 - touchpad y\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/oculus/oculus-go.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad']\n};\n\n/**\n * Oculus Go controls.\n * Interface with Oculus Go controller and map Gamepad events to\n * controller buttons: trigger, touchpad\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('oculus-go-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonColor: {type: 'color', default: '#FFFFFF'},\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                   this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      hand: data.hand,\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', OCULUS_GO_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  // No need for onButtonChanged, since Oculus Go controller has no analog buttons.\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('oculus_go_button_trigger');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('oculus_go_touchpad');\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    if (!buttonMeshes || !buttonMeshes[buttonName]) { return; }\n    var color;\n    var button;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n      default:\n        color = this.data.buttonColor;\n    }\n    button = buttonMeshes[buttonName];\n    button.material.color.set(color);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\n// See Profiles Registry:\n// https://github.com/immersive-web/webxr-input-profiles/tree/master/packages/registry\n// TODO: Add a more robust system for deriving gamepad name.\nvar GAMEPAD_ID = 'pico-4';\nvar PICO_MODEL_GLB_BASE_URL = AFRAME_CDN_ROOT + 'controllers/pico/pico4/';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - grip\n * 3 - X / A\n * 4 - Y / B\n *\n * Axis:\n * 2 - joystick x axis\n * 3 - joystick y axis\n */\nvar INPUT_MAPPING_WEBXR = {\n  left: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'xbutton', 'ybutton']\n  },\n  right: {\n    axes: {thumbstick: [2, 3]},\n    buttons: ['trigger', 'grip', 'none', 'thumbstick', 'abutton', 'bbutton']\n  }\n};\n\n/**\n * Pico Controls\n */\nexport var Component = registerComponent('pico-controls', {\n  schema: {\n    hand: {default: 'none'},\n    model: {default: true}\n  },\n\n  mapping: INPUT_MAPPING_WEBXR,\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self, self.data.hand); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self, self.data.hand); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self, self.data.hand); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self, self.data.hand); };\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID,\n                                   {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n    el.setAttribute('tracked-controls', {\n      // TODO: verify expected behavior between reserved prefixes.\n      idPrefix: GAMEPAD_ID,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', PICO_MODEL_GLB_BASE_URL + this.data.hand + '.glb');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    // Note that due to gamepadconnected event propagation issues, we don't rely on events.\n    this.checkIfControllerPresent();\n  },\n\n  onButtonChanged: function (evt) {\n    var button = this.mapping[this.data.hand].buttons[evt.detail.id];\n    var analogValue;\n\n    if (!button) { return; }\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      console.log('analog value of trigger press: ' + analogValue);\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    this.el.emit('controllermodelready', {\n      name: 'pico-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping[this.data.hand].axes, evt);\n  }\n});\n","/* global MutationObserver */\n\nimport * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('components:raycaster:warn');\n\n// Defines selectors that should be 'safe' for the MutationObserver used to\n// refresh the whitelist. Matches classnames, IDs, and presence of attributes.\n// Selectors for the value of an attribute, like [position=0 2 0], cannot be\n// reliably detected and are therefore disallowed.\nvar OBSERVER_SELECTOR_RE = /^[\\w\\s-.,[\\]#]*$/;\n\n// Configuration for the MutationObserver used to refresh the whitelist.\n// Listens for addition/removal of elements and attributes within the scene.\nvar OBSERVER_CONFIG = {\n  childList: true,\n  attributes: true,\n  subtree: true\n};\n\nvar EVENTS = {\n  INTERSECT: 'raycaster-intersected',\n  INTERSECTION: 'raycaster-intersection',\n  INTERSECT_CLEAR: 'raycaster-intersected-cleared',\n  INTERSECTION_CLEAR: 'raycaster-intersection-cleared',\n  INTERSECTION_CLOSEST_ENTITY_CHANGED: 'raycaster-closest-entity-changed'\n};\n\n/**\n * Raycaster component.\n *\n * Pass options to three.js Raycaster including which objects to test.\n * Poll for intersections.\n * Emit event on origin entity and on target entity on intersect.\n *\n * @member {array} intersectedEls - List of currently intersected entities.\n * @member {array} objects - Cached list of meshes to intersect.\n * @member {number} prevCheckTime - Previous time intersection was checked. To help interval.\n * @member {object} raycaster - three.js Raycaster.\n */\nexport var Component = registerComponent('raycaster', {\n  schema: {\n    autoRefresh: {default: true},\n    direction: {type: 'vec3', default: {x: 0, y: 0, z: -1}},\n    enabled: {default: true},\n    far: {default: 1000},\n    interval: {default: 0},\n    near: {default: 0},\n    objects: {default: ''},\n    origin: {type: 'vec3'},\n    showLine: {default: false},\n    lineColor: {default: 'white'},\n    lineOpacity: {default: 1},\n    useWorldCoordinates: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    this.clearedIntersectedEls = [];\n    this.unitLineEndVec3 = new THREE.Vector3();\n    this.intersectedEls = [];\n    this.intersections = [];\n    this.newIntersectedEls = [];\n    this.newIntersections = [];\n    this.objects = [];\n    this.prevCheckTime = undefined;\n    this.prevIntersectedEls = [];\n    this.rawIntersections = [];\n    this.raycaster = new THREE.Raycaster();\n    this.updateOriginDirection();\n    this.setDirty = this.setDirty.bind(this);\n    this.updateLine = this.updateLine.bind(this);\n    this.observer = new MutationObserver(this.setDirty);\n    this.dirty = true;\n    this.lineEndVec3 = new THREE.Vector3();\n    this.otherLineEndVec3 = new THREE.Vector3();\n    this.lineData = {end: this.lineEndVec3};\n\n    this.getIntersection = this.getIntersection.bind(this);\n    this.intersectedDetail = {el: this.el, getIntersection: this.getIntersection};\n    this.intersectedClearedDetail = {el: this.el};\n    this.intersectionClearedDetail = {clearedEls: this.clearedIntersectedEls};\n    this.intersectionDetail = {};\n  },\n\n  /**\n   * Create or update raycaster object.\n   */\n  update: function (oldData) {\n    var data = this.data;\n    var el = this.el;\n    var raycaster = this.raycaster;\n\n    // Set raycaster properties.\n    raycaster.far = data.far;\n    raycaster.near = data.near;\n\n    // Draw line.\n    if (data.showLine &&\n        (data.far !== oldData.far || data.origin !== oldData.origin ||\n         data.direction !== oldData.direction || !oldData.showLine)) {\n      // Calculate unit vector for line direction. Can be multiplied via scalar and added\n      // to origin to adjust line length.\n      this.unitLineEndVec3.copy(data.direction).normalize();\n      this.drawLine();\n    }\n\n    if (!data.showLine && oldData.showLine) {\n      el.removeAttribute('line');\n    }\n\n    if (data.objects !== oldData.objects && !OBSERVER_SELECTOR_RE.test(data.objects)) {\n      warn('[raycaster] Selector \"' + data.objects +\n           '\" may not update automatically with DOM changes.');\n    }\n\n    if (!data.objects) {\n      warn('[raycaster] For performance, please define raycaster.objects when using ' +\n           'raycaster or cursor components to whitelist which entities to intersect with. ' +\n           'e.g., raycaster=\"objects: [data-raycastable]\".');\n    }\n\n    if (data.autoRefresh !== oldData.autoRefresh && el.isPlaying) {\n      data.autoRefresh\n        ? this.addEventListeners()\n        : this.removeEventListeners();\n    }\n\n    if (oldData.enabled && !data.enabled) { this.clearAllIntersections(); }\n\n    if (data.objects !== oldData.objects) {\n      this.setDirty();\n    }\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    if (this.data.showLine) {\n      this.el.removeAttribute('line');\n    }\n    this.clearAllIntersections();\n  },\n\n  addEventListeners: function () {\n    if (!this.data.autoRefresh) { return; }\n    this.observer.observe(this.el.sceneEl, OBSERVER_CONFIG);\n    this.el.sceneEl.addEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.addEventListener('object3dremove', this.setDirty);\n  },\n\n  removeEventListeners: function () {\n    this.observer.disconnect();\n    this.el.sceneEl.removeEventListener('object3dset', this.setDirty);\n    this.el.sceneEl.removeEventListener('object3dremove', this.setDirty);\n  },\n\n  /**\n   * Mark the object list as dirty, to be refreshed before next raycast.\n   */\n  setDirty: function () {\n    this.dirty = true;\n  },\n\n  /**\n   * Update list of objects to test for intersection.\n   */\n  refreshObjects: function () {\n    var data = this.data;\n    var els;\n\n    // If objects not defined, intersect with everything.\n    els = data.objects\n      ? this.el.sceneEl.querySelectorAll(data.objects)\n      : this.el.sceneEl.querySelectorAll('*');\n    this.objects = this.flattenObject3DMaps(els);\n    this.dirty = false;\n  },\n\n  /**\n   * Check for intersections and cleared intersections on an interval.\n   */\n  tock: function (time) {\n    var data = this.data;\n    var prevCheckTime = this.prevCheckTime;\n\n    if (!data.enabled) { return; }\n\n    // Only check for intersection if interval time has passed.\n    if (prevCheckTime && (time - prevCheckTime < data.interval)) { return; }\n\n    // Update check time.\n    this.prevCheckTime = time;\n    this.checkIntersections();\n  },\n\n  /**\n   * Raycast for intersections and emit events for current and cleared intersections.\n   */\n  checkIntersections: function () {\n    var clearedIntersectedEls = this.clearedIntersectedEls;\n    var el = this.el;\n    var data = this.data;\n    var i;\n    var intersectedEls = this.intersectedEls;\n    var intersection;\n    var intersections = this.intersections;\n    var newIntersectedEls = this.newIntersectedEls;\n    var newIntersections = this.newIntersections;\n    var prevIntersectedEls = this.prevIntersectedEls;\n    var rawIntersections = this.rawIntersections;\n\n    // Refresh the object whitelist if needed.\n    if (this.dirty) { this.refreshObjects(); }\n\n    // Store old previously intersected entities.\n    copyArray(this.prevIntersectedEls, this.intersectedEls);\n\n    // Raycast.\n    this.updateOriginDirection();\n    rawIntersections.length = 0;\n    this.raycaster.intersectObjects(this.objects, true, rawIntersections);\n\n    // Only keep intersections against objects that have a reference to an entity.\n    intersections.length = 0;\n    intersectedEls.length = 0;\n    for (i = 0; i < rawIntersections.length; i++) {\n      intersection = rawIntersections[i];\n      // Don't intersect with own line.\n      if (data.showLine && intersection.object === el.getObject3D('line')) {\n        continue;\n      }\n      if (intersection.object.el) {\n        intersections.push(intersection);\n        intersectedEls.push(intersection.object.el);\n      }\n    }\n\n    // Get newly intersected entities.\n    newIntersections.length = 0;\n    newIntersectedEls.length = 0;\n    for (i = 0; i < intersections.length; i++) {\n      if (prevIntersectedEls.indexOf(intersections[i].object.el) === -1) {\n        newIntersections.push(intersections[i]);\n        newIntersectedEls.push(intersections[i].object.el);\n      }\n    }\n\n    // Emit intersection cleared on both entities per formerly intersected entity.\n    clearedIntersectedEls.length = 0;\n    for (i = 0; i < prevIntersectedEls.length; i++) {\n      if (intersectedEls.indexOf(prevIntersectedEls[i]) !== -1) { continue; }\n      prevIntersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                 this.intersectedClearedDetail);\n      clearedIntersectedEls.push(prevIntersectedEls[i]);\n    }\n    if (clearedIntersectedEls.length) {\n      el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n    }\n\n    // Emit intersected on intersected entity per intersected entity.\n    for (i = 0; i < newIntersectedEls.length; i++) {\n      newIntersectedEls[i].emit(EVENTS.INTERSECT, this.intersectedDetail);\n    }\n\n    // Emit all intersections at once on raycasting entity.\n    if (newIntersections.length) {\n      this.intersectionDetail.els = newIntersectedEls;\n      this.intersectionDetail.intersections = newIntersections;\n      el.emit(EVENTS.INTERSECTION, this.intersectionDetail);\n    }\n\n    // Emit event when the closest intersected entity has changed.\n    if (prevIntersectedEls.length === 0 && intersections.length > 0 ||\n        prevIntersectedEls.length > 0 && intersections.length === 0 ||\n        (prevIntersectedEls.length && intersections.length &&\n        prevIntersectedEls[0] !== intersections[0].object.el)) {\n      this.intersectionDetail.els = this.intersectedEls;\n      this.intersectionDetail.intersections = intersections;\n      el.emit(EVENTS.INTERSECTION_CLOSEST_ENTITY_CHANGED, this.intersectionDetail);\n    }\n\n    // Update line length.\n    if (data.showLine) { setTimeout(this.updateLine); }\n  },\n\n  updateLine: function () {\n    var el = this.el;\n    var intersections = this.intersections;\n    var lineLength;\n\n    if (intersections.length) {\n      if (intersections[0].object.el === el && intersections[1]) {\n        lineLength = intersections[1].distance;\n      } else {\n        lineLength = intersections[0].distance;\n      }\n    }\n    this.drawLine(lineLength);\n  },\n\n  /**\n   * Return the most recent intersection details for a given entity, if any.\n   * @param {AEntity} el\n   * @returns {object|null}\n   */\n  getIntersection: function (el) {\n    var i;\n    var intersection;\n    for (i = 0; i < this.intersections.length; i++) {\n      intersection = this.intersections[i];\n      if (intersection.object.el === el) { return intersection; }\n    }\n    return null;\n  },\n\n  /**\n   * Update origin and direction of raycaster using entity transforms and supplied origin or\n   * direction offsets.\n   */\n  updateOriginDirection: (function () {\n    var direction = new THREE.Vector3();\n    var originVec3 = new THREE.Vector3();\n\n    // Closure to make quaternion/vector3 objects private.\n    return function updateOriginDirection () {\n      var el = this.el;\n      var data = this.data;\n\n      if (data.useWorldCoordinates) {\n        this.raycaster.set(data.origin, data.direction);\n        return;\n      }\n\n      el.object3D.updateMatrixWorld();\n      originVec3.setFromMatrixPosition(el.object3D.matrixWorld);\n\n      // If non-zero origin, translate the origin into world space.\n      if (data.origin.x !== 0 || data.origin.y !== 0 || data.origin.z !== 0) {\n        originVec3 = el.object3D.localToWorld(originVec3.copy(data.origin));\n      }\n\n      // three.js raycaster direction is relative to 0, 0, 0 NOT the origin / offset we\n      // provide. Apply the offset to the direction, then rotation from the object,\n      // and normalize.\n      direction.copy(data.direction).transformDirection(el.object3D.matrixWorld).normalize();\n\n      // Apply offset and direction, in world coordinates.\n      this.raycaster.set(originVec3, direction);\n    };\n  })(),\n\n  /**\n   * Create or update line to give raycaster visual representation.\n   * Customize the line through through line component.\n   * We draw the line in the raycaster component to customize the line to the\n   * raycaster's origin, direction, and far.\n   *\n   * Unlike the raycaster, we create the line as a child of the object. The line will\n   * be affected by the transforms of the objects, so we don't have to calculate transforms\n   * like we do with the raycaster.\n   *\n   * @param {number} length - Length of line. Pass in to shorten the line to the intersection\n   *   point. If not provided, length will default to the max length, `raycaster.far`.\n   */\n  drawLine: function (length) {\n    var data = this.data;\n    var el = this.el;\n    var endVec3;\n\n    // Switch each time vector so line update triggered and to avoid unnecessary vector clone.\n    endVec3 = this.lineData.end === this.lineEndVec3\n      ? this.otherLineEndVec3\n      : this.lineEndVec3;\n\n    // Treat Infinity as 1000m for the line.\n    if (length === undefined) {\n      length = data.far === Infinity ? 1000 : data.far;\n    }\n\n    // Update the length of the line if given. `unitLineEndVec3` is the direction\n    // given by data.direction, then we apply a scalar to give it a length and the\n    // origin point to offset it.\n    this.lineData.start = data.origin;\n    this.lineData.end = endVec3.copy(this.unitLineEndVec3).multiplyScalar(length).add(data.origin);\n    this.lineData.color = data.lineColor;\n    this.lineData.opacity = data.lineOpacity;\n    el.setAttribute('line', this.lineData);\n  },\n\n  /**\n   * Return A-Frame attachments of each element's object3D group (e.g., mesh).\n   * Children are flattened by one level, removing the THREE.Group wrapper,\n   * so that non-recursive raycasting remains useful.\n   *\n   * Only push children defined as component attachments (e.g., setObject3D),\n   * NOT actual children in the scene graph hierarchy.\n   *\n   * @param {Array<Element>} els\n   * @returns {Array<THREE.Object3D>}\n   */\n  flattenObject3DMaps: function (els) {\n    var key;\n    var i;\n    var objects = this.objects;\n    var scene = this.el.sceneEl.object3D;\n\n    function isAttachedToScene (object) {\n      if (object.parent) {\n        return isAttachedToScene(object.parent);\n      } else {\n        return (object === scene);\n      }\n    }\n\n    // Push meshes and other attachments onto list of objects to intersect.\n    objects.length = 0;\n    for (i = 0; i < els.length; i++) {\n      var el = els[i];\n      if (el.isEntity && el.object3D && isAttachedToScene(el.object3D)) {\n        for (key in el.object3DMap) {\n          objects.push(el.getObject3D(key));\n        }\n      }\n    }\n\n    return objects;\n  },\n\n  clearAllIntersections: function () {\n    var i;\n    for (i = 0; i < this.intersectedEls.length; i++) {\n      this.intersectedEls[i].emit(EVENTS.INTERSECT_CLEAR,\n                                  this.intersectedClearedDetail);\n    }\n    copyArray(this.clearedIntersectedEls, this.intersectedEls);\n    this.intersectedEls.length = 0;\n    this.intersections.length = 0;\n    this.el.emit(EVENTS.INTERSECTION_CLEAR, this.intersectionClearedDetail);\n  }\n});\n\n/**\n * Copy contents of one array to another without allocating new array.\n */\nfunction copyArray (a, b) {\n  var i;\n  a.length = b.length;\n  for (i = 0; i < b.length; i++) {\n    a[i] = b[i];\n  }\n}\n","import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('position', {\n  schema: {type: 'vec3'},\n\n  update: function () {\n    var object3D = this.el.object3D;\n    var data = this.data;\n    object3D.position.set(data.x, data.y, data.z);\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.position.set(0, 0, 0);\n  }\n});\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nvar degToRad = THREE.MathUtils.degToRad;\n\nexport var Component = registerComponent('rotation', {\n  schema: {type: 'vec3'},\n\n  /**\n   * Updates object3D rotation.\n   */\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.rotation.set(degToRad(data.x), degToRad(data.y), degToRad(data.z), 'YXZ');\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.rotation.set(0, 0, 0);\n  }\n});\n","import createTextGeometry from 'three-bmfont-text';\nimport loadBMFont from 'load-bmfont';\n\nimport { registerComponent } from '../core/component.js';\nimport { shaders } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\n\nvar error = utils.debug('components:text:error');\nvar warn = utils.debug('components:text:warn');\n\n// 1 to match other A-Frame default widths.\nvar DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nvar MAX_ANISOTROPY = 16;\n\nvar FONT_BASE_URL = AFRAME_CDN_ROOT + 'fonts/';\nexport var FONTS = {\n  aileronsemibold: FONT_BASE_URL + 'Aileron-Semibold.fnt',\n  dejavu: FONT_BASE_URL + 'DejaVu-sdf.fnt',\n  exo2bold: FONT_BASE_URL + 'Exo2Bold.fnt',\n  exo2semibold: FONT_BASE_URL + 'Exo2SemiBold.fnt',\n  kelsonsans: FONT_BASE_URL + 'KelsonSans.fnt',\n  monoid: FONT_BASE_URL + 'Monoid.fnt',\n  mozillavr: FONT_BASE_URL + 'mozillavr.fnt',\n  roboto: FONT_BASE_URL + 'Roboto-msdf.json',\n  sourcecodepro: FONT_BASE_URL + 'SourceCodePro.fnt'\n};\nvar MSDF_FONTS = ['roboto'];\nvar DEFAULT_FONT = 'roboto';\n\nvar cache = new PromiseCache();\nvar fontWidthFactors = {};\nvar textures = {};\n\n// Regular expression for detecting a URLs with a protocol prefix.\nvar protocolRe = /^\\w+:/;\n\n/**\n * SDF-based text component.\n * Based on https://github.com/Jam3/three-bmfont-text.\n *\n * All the stock fonts are for the `sdf` registered shader, an improved version of jam3's\n * original `sdf` shader.\n */\nexport var Component = registerComponent('text', {\n  multiple: true,\n\n  schema: {\n    align: {type: 'string', default: 'left', oneOf: ['left', 'right', 'center']},\n    alphaTest: {default: 0.5},\n    // `anchor` defaults to center to match geometries.\n    anchor: {default: 'center', oneOf: ['left', 'right', 'center', 'align']},\n    baseline: {default: 'center', oneOf: ['top', 'center', 'bottom']},\n    color: {type: 'color', default: '#FFF'},\n    font: {type: 'string', default: DEFAULT_FONT},\n    // `fontImage` defaults to the font name as a .png (e.g., mozillavr.fnt -> mozillavr.png).\n    fontImage: {type: 'string'},\n    // `height` has no default, will be populated at layout.\n    height: {type: 'number'},\n    letterSpacing: {type: 'number', default: 0},\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: {type: 'number'},\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: {type: 'boolean', default: true},\n    opacity: {type: 'number', default: 1.0},\n    shader: {default: 'sdf', oneOf: shaders},\n    side: {default: 'front', oneOf: ['front', 'back', 'double']},\n    tabSize: {default: 4},\n    transparent: {default: true},\n    value: {type: 'string'},\n    whiteSpace: {default: 'normal', oneOf: ['normal', 'pre', 'nowrap']},\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: {type: 'number'},\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: {type: 'number', default: 40},\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: {type: 'number'},\n    // `xOffset` to add padding.\n    xOffset: {type: 'number', default: 0},\n    // `yOffset` to adjust generated fonts from tools that may have incorrect metrics.\n    yOffset: {type: 'number', default: 0},\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: {type: 'number', default: 0.001}\n  },\n\n  init: function () {\n    this.shaderData = {};\n    this.geometry = createTextGeometry();\n    this.createOrUpdateMaterial();\n    this.explicitGeoDimensionsChecked = false;\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var font = this.currentFont;\n    if (textures[data.font]) {\n      this.texture = textures[data.font];\n    } else {\n      // Create texture per font.\n      this.texture = textures[data.font] = new THREE.Texture();\n      this.texture.anisotropy = MAX_ANISOTROPY;\n    }\n\n    // Update material.\n    this.createOrUpdateMaterial();\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont();\n      return;\n    }\n\n    // Update geometry and layout.\n    if (font) {\n      this.updateGeometry(this.geometry, font);\n      this.updateLayout();\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function () {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.material.dispose();\n    this.material = null;\n    this.texture.dispose();\n    this.texture = null;\n    if (this.shaderObject) { delete this.shaderObject; }\n  },\n\n  /**\n   * Update the shader of the material.\n   */\n  createOrUpdateMaterial: function () {\n    var data = this.data;\n    var hasChangedShader;\n    var material = this.material;\n    var NewShader;\n    var shaderData = this.shaderData;\n    var shaderName;\n\n    // Infer shader if using a stock font (or from `-msdf` filename convention).\n    shaderName = data.shader;\n    if (MSDF_FONTS.indexOf(data.font) !== -1 || data.font.indexOf('-msdf.') >= 0) {\n      shaderName = 'msdf';\n    } else if (data.font in FONTS && MSDF_FONTS.indexOf(data.font) === -1) {\n      shaderName = 'sdf';\n    }\n\n    hasChangedShader = (this.shaderObject && this.shaderObject.name) !== shaderName;\n\n    shaderData.alphaTest = data.alphaTest;\n    shaderData.color = data.color;\n    shaderData.map = this.texture;\n    shaderData.opacity = data.opacity;\n    shaderData.side = parseSide(data.side);\n    shaderData.transparent = data.transparent;\n    shaderData.negate = data.negate;\n\n    // Shader has not changed, do an update.\n    if (!hasChangedShader) {\n      // Update shader material.\n      this.shaderObject.update(shaderData);\n      // Apparently, was not set on `init` nor `update`.\n      material.transparent = shaderData.transparent;\n      material.side = shaderData.side;\n      return;\n    }\n\n    // Shader has changed. Create a shader material.\n    NewShader = createShader(this.el, shaderName, shaderData);\n    this.material = NewShader.material;\n    this.shaderObject = NewShader.shader;\n\n    // Set new shader material.\n    this.material.side = shaderData.side;\n    if (this.mesh) { this.mesh.material = this.material; }\n  },\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function () {\n    var data = this.data;\n    var el = this.el;\n    var fontSrc;\n    var geometry = this.geometry;\n    var self = this;\n\n    if (!data.font) { warn('No font specified. Using the default font.'); }\n\n    // Make invisible during font swap.\n    if (this.mesh) { this.mesh.visible = false; }\n\n    // Look up font URL to use, and perform cached load.\n    fontSrc = this.lookupFont(data.font || DEFAULT_FONT) || data.font;\n    cache.get(fontSrc, function doLoadFont () {\n      return loadFont(fontSrc, data.yOffset);\n    }).then(function setFont (font) {\n      var fontImgSrc;\n\n      if (font.pages.length !== 1) {\n        throw new Error('Currently only single-page bitmap fonts are supported.');\n      }\n\n      if (!fontWidthFactors[fontSrc]) {\n        font.widthFactor = fontWidthFactors[font] = computeFontWidthFactor(font);\n      }\n      self.currentFont = font;\n      // Look up font image URL to use, and perform cached load.\n      fontImgSrc = self.getFontImageSrc();\n      cache.get(fontImgSrc, function () {\n        return loadTexture(fontImgSrc);\n      }).then(function (image) {\n        // Make mesh visible and apply font image as texture.\n        var texture = self.texture;\n        // The component may have been removed at this point and texture will\n        // be null. This happens mainly while executing the tests,\n        // in this case we just return.\n        if (!texture) return;\n        texture.image = image;\n        texture.needsUpdate = true;\n        textures[data.font] = texture;\n        self.texture = texture;\n        self.initMesh();\n        self.currentFont = font;\n        // Update geometry given font metrics.\n        self.updateGeometry(geometry, font);\n        self.updateLayout();\n        self.mesh.visible = true;\n        el.emit('textfontset', {font: data.font, fontObj: font});\n      }).catch(function (err) {\n        error(err.message);\n        error(err.stack);\n      });\n    }).catch(function (err) {\n      error(err.message);\n      error(err.stack);\n    });\n  },\n\n  initMesh: function () {\n    if (this.mesh) { return; }\n    this.mesh = new THREE.Mesh(this.geometry, this.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  getFontImageSrc: function () {\n    if (this.data.fontImage) { return this.data.fontImage; }\n    var fontSrc = this.lookupFont(this.data.font || DEFAULT_FONT) || this.data.font;\n    var imageSrc = this.currentFont.pages[0];\n    // If the image URL contains a non-HTTP(S) protocol, assume it's an absolute\n    // path on disk and try to infer the path from the font source instead.\n    if (imageSrc.match(protocolRe) && imageSrc.indexOf('http') !== 0) {\n      return fontSrc.replace(/(\\.fnt)|(\\.json)/, '.png');\n    }\n    return THREE.LoaderUtils.extractUrlBase(fontSrc) + imageSrc;\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function () {\n    var anchor;\n    var baseline;\n    var el = this.el;\n    var data = this.data;\n    var geometry = this.geometry;\n    var geometryComponent;\n    var height;\n    var layout;\n    var mesh = this.mesh;\n    var textRenderWidth;\n    var textScale;\n    var width;\n    var x;\n    var y;\n\n    if (!mesh || !geometry.layout) { return; }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    geometryComponent = el.getAttribute('geometry');\n    width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount,\n                                   this.currentFont.widthFactor);\n    textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    layout = geometry.layout;\n    height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === 'plane') {\n      if (!this.explicitGeoDimensionsChecked) {\n        this.explicitGeoDimensionsChecked = true;\n        this.hasExplicitGeoWidth = !!geometryComponent.width;\n        this.hasExplicitGeoHeight = !!geometryComponent.height;\n      }\n      if (!this.hasExplicitGeoWidth) { el.setAttribute('geometry', 'width', width); }\n      if (!this.hasExplicitGeoHeight) { el.setAttribute('geometry', 'height', height); }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    anchor = data.anchor === 'align' ? data.align : data.anchor;\n    if (anchor === 'left') {\n      x = 0;\n    } else if (anchor === 'right') {\n      x = -1 * layout.width;\n    } else if (anchor === 'center') {\n      x = -1 * layout.width / 2;\n    } else {\n      throw new TypeError('Invalid text.anchor property value', anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    baseline = data.baseline;\n    if (baseline === 'bottom') {\n      y = 0;\n    } else if (baseline === 'top') {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === 'center') {\n      y = -1 * layout.height / 2;\n    } else {\n      throw new TypeError('Invalid text.baseline property value', baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n  },\n\n  /**\n   * Grab font from the constant.\n   * Set as a method for test stubbing purposes.\n   */\n  lookupFont: function (key) {\n    return FONTS[key];\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function () {\n    var geometryUpdateBase = {};\n    var geometryUpdateData = {};\n    var newLineRegex = /\\\\n/g;\n    var tabRegex = /\\\\t/g;\n\n    return function (geometry, font) {\n      var data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight = data.lineHeight && isFinite(data.lineHeight)\n        ? data.lineHeight\n        : font.common.lineHeight;\n      geometryUpdateData.text = data.value.toString().replace(newLineRegex, '\\n')\n        .replace(tabRegex, '\\t');\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount,\n                                              font.widthFactor);\n      geometry.update(utils.extend(geometryUpdateBase, data, geometryUpdateData));\n    };\n  })()\n});\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide (side) {\n  switch (side) {\n    case 'back': {\n      return THREE.FrontSide;\n    }\n    case 'double': {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * @returns {Promise}\n */\nfunction loadFont (src, yOffset) {\n  return new Promise(function (resolve, reject) {\n    loadBMFont(src, function (err, font) {\n      if (err) {\n        error('Error loading font', src);\n        reject(err);\n        return;\n      }\n\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf('/Roboto-msdf.json') >= 0) { yOffset = 30; }\n      if (yOffset) { font.chars.forEach(function doOffset (ch) { ch.yoffset += yOffset; }); }\n\n      resolve(font);\n    });\n  });\n}\n\n/**\n * @returns {Promise}\n */\nfunction loadTexture (src) {\n  return new Promise(function (resolve, reject) {\n    new THREE.ImageLoader().load(src, function (image) {\n      resolve(image);\n    }, undefined, function () {\n      error('Error loading font image', src);\n      reject(null);\n    });\n  });\n}\n\nfunction createShader (el, shaderName, data) {\n  var shader;\n  var shaderObject;\n\n  // Set up Shader.\n  shaderObject = new shaders[shaderName].Shader();\n  shaderObject.el = el;\n  shaderObject.init(data);\n  shaderObject.update(data);\n\n  // Get material.\n  shader = shaderObject.material;\n  // Apparently, was not set on `init` nor `update`.\n  shader.transparent = data.transparent;\n\n  return {\n    material: shader,\n    shader: shaderObject\n  };\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth (wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || ((0.5 + wrapCount) * widthFactor);\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor (font) {\n  var sum = 0;\n  var digitsum = 0;\n  var digits = 0;\n  font.chars.forEach(function (ch) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  });\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\n/**\n * Get or create a promise given a key and promise generator.\n * @todo Move to a utility and use in other parts of A-Frame.\n */\nfunction PromiseCache () {\n  var cache = this.cache = {};\n\n  this.get = function (key, promiseGenerator) {\n    if (key in cache) {\n      return cache[key];\n    }\n    cache[key] = promiseGenerator();\n    return cache[key];\n  };\n}\n","import { registerComponent } from '../core/component.js';\nimport { debug } from '../utils/index.js';\nimport * as THREE from 'three';\n\nvar warn = debug('components:sound:warn');\n\n/**\n * Sound component.\n */\nexport var Component = registerComponent('sound', {\n  schema: {\n    autoplay: {default: false},\n    distanceModel: {default: 'inverse', oneOf: ['linear', 'inverse', 'exponential']},\n    loop: {default: false},\n    loopStart: {default: 0},\n    loopEnd: {default: 0},\n    maxDistance: {default: 10000},\n    on: {default: ''},\n    poolSize: {default: 1},\n    positional: {default: true},\n    refDistance: {default: 1},\n    rolloffFactor: {default: 1},\n    src: {type: 'audio'},\n    volume: {default: 1}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var self = this;\n\n    this.listener = null;\n    this.audioLoader = new THREE.AudioLoader();\n    this.pool = new THREE.Group();\n    this.loaded = false;\n    this.mustPlay = false;\n\n    // Don't pass evt because playSound takes a function as parameter.\n    this.playSoundBound = function () { self.playSound(); };\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    var i;\n    var sound;\n    var srcChanged = data.src !== oldData.src;\n\n    // Create new sound if not yet created or changing `src`.\n    if (srcChanged) {\n      if (!data.src) { return; }\n      this.setupSound();\n    }\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (data.positional) {\n        sound.setDistanceModel(data.distanceModel);\n        sound.setMaxDistance(data.maxDistance);\n        sound.setRefDistance(data.refDistance);\n        sound.setRolloffFactor(data.rolloffFactor);\n      }\n      sound.setLoop(data.loop);\n      sound.setLoopStart(data.loopStart);\n\n      // With a loop start specified without a specified loop end, the end of the loop should be the end of the file\n      if (data.loopStart !== 0 && data.loopEnd === 0) {\n        sound.setLoopEnd(sound.buffer.duration);\n      } else {\n        sound.setLoopEnd(data.loopEnd);\n      }\n\n      sound.setVolume(data.volume);\n      sound.isPaused = false;\n    }\n\n    if (data.on !== oldData.on) {\n      this.updateEventListener(oldData.on);\n    }\n\n    // All sound values set. Load in `src`.\n    if (srcChanged) {\n      var self = this;\n\n      this.loaded = false;\n      this.audioLoader.load(data.src, function (buffer) {\n        for (i = 0; i < self.pool.children.length; i++) {\n          sound = self.pool.children[i];\n          sound.setBuffer(buffer);\n        }\n        self.loaded = true;\n\n        // Remove this key from cache, otherwise we can't play it again\n        THREE.Cache.remove(data.src);\n        if (self.data.autoplay || self.mustPlay) { self.playSound(self.processSound); }\n        self.el.emit('sound-loaded', self.evtDetail, false);\n      });\n    }\n  },\n\n  pause: function () {\n    this.stopSound();\n    this.removeEventListener();\n  },\n\n  play: function () {\n    if (this.data.autoplay) { this.playSound(); }\n    this.updateEventListener();\n  },\n\n  remove: function () {\n    var i;\n    var sound;\n\n    this.removeEventListener();\n\n    if (this.el.getObject3D(this.attrName)) {\n      this.el.removeObject3D(this.attrName);\n    }\n\n    try {\n      for (i = 0; i < this.pool.children.length; i++) {\n        sound = this.pool.children[i];\n        sound.disconnect();\n      }\n    } catch (e) {\n      // disconnect() will throw if it was never connected initially.\n      warn('Audio source not properly disconnected');\n    }\n  },\n\n  /**\n  *  Update listener attached to the user defined on event.\n  */\n  updateEventListener: function (oldEvt) {\n    var el = this.el;\n    if (oldEvt) { el.removeEventListener(oldEvt, this.playSoundBound); }\n    el.addEventListener(this.data.on, this.playSoundBound);\n  },\n\n  removeEventListener: function () {\n    this.el.removeEventListener(this.data.on, this.playSoundBound);\n  },\n\n  /**\n   * Removes current sound object, creates new sound object, adds to entity.\n   */\n  setupSound: function () {\n    var el = this.el;\n    var i;\n    var sceneEl = el.sceneEl;\n    var self = this;\n    var sound;\n\n    if (this.pool.children.length > 0) {\n      this.stopSound();\n      el.removeObject3D('sound');\n    }\n\n    // Only want one AudioListener. Cache it on the scene.\n    var listener = this.listener = sceneEl.audioListener || new THREE.AudioListener();\n    sceneEl.audioListener = listener;\n\n    if (sceneEl.camera) {\n      sceneEl.camera.add(listener);\n    }\n\n    // Wait for camera if necessary.\n    sceneEl.addEventListener('camera-set-active', function (evt) {\n      evt.detail.cameraEl.getObject3D('camera').add(listener);\n    });\n\n    // Create [poolSize] audio instances and attach them to pool\n    this.pool = new THREE.Group();\n    for (i = 0; i < this.data.poolSize; i++) {\n      sound = this.data.positional\n        ? new THREE.PositionalAudio(listener)\n        : new THREE.Audio(listener);\n      this.pool.add(sound);\n    }\n    el.setObject3D(this.attrName, this.pool);\n\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      sound.onEnded = function () {\n        this.isPlaying = false;\n        self.el.emit('sound-ended', self.evtDetail, false);\n      };\n    }\n  },\n\n  /**\n   * Pause all the sounds in the pool.\n   */\n  pauseSound: function () {\n    var i;\n    var sound;\n\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer || !sound.isPlaying || sound.isPaused) {\n        continue;\n      }\n      sound.isPaused = true;\n      sound.pause();\n    }\n  },\n\n  /**\n   * Look for an unused sound in the pool and play it if found.\n   */\n  playSound: function (processSound) {\n    var found;\n    var i;\n    var sound;\n\n    if (!this.loaded) {\n      warn('Sound not loaded yet. It will be played once it finished loading');\n      this.mustPlay = true;\n      this.processSound = processSound;\n      return;\n    }\n\n    found = false;\n    this.isPlaying = true;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.isPlaying && sound.buffer && !found) {\n        if (processSound) { processSound(sound); }\n        sound.play();\n        sound.isPaused = false;\n        found = true;\n        continue;\n      }\n    }\n\n    if (!found) {\n      warn('All the sounds are playing. If you need to play more sounds simultaneously ' +\n           'consider increasing the size of pool with the `poolSize` attribute.', this.el);\n      return;\n    }\n\n    this.mustPlay = false;\n    this.processSound = undefined;\n  },\n\n  /**\n   * Stop all the sounds in the pool.\n   */\n  stopSound: function () {\n    var i;\n    var sound;\n    this.isPlaying = false;\n    for (i = 0; i < this.pool.children.length; i++) {\n      sound = this.pool.children[i];\n      if (!sound.source || !sound.source.buffer) { return; }\n      sound.stop();\n    }\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\nexport var Component = registerComponent('scale', {\n  schema: {\n    type: 'vec3',\n    default: {x: 1, y: 1, z: 1}\n  },\n\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n    object3D.scale.set(data.x, data.y, data.z);\n  },\n\n  remove: function () {\n    // Pretty much for mixins.\n    this.el.object3D.scale.set(1, 1, 1);\n  }\n});\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\n\n/**\n * Shadow component.\n *\n * When applied to an entity, that entity's geometry and any descendants will cast or receive\n * shadows as specified by the `cast` and `receive` properties.\n */\nexport var Component = registerComponent('shadow', {\n  schema: {\n    cast: {default: true},\n    receive: {default: true}\n  },\n\n  init: function () {\n    this.onMeshChanged = this.update.bind(this);\n    this.el.addEventListener('object3dset', this.onMeshChanged);\n    this.system.setShadowMapEnabled(true);\n  },\n\n  update: function () {\n    var data = this.data;\n    this.updateDescendants(data.cast, data.receive);\n  },\n\n  remove: function () {\n    var el = this.el;\n    el.removeEventListener('object3dset', this.onMeshChanged);\n    this.updateDescendants(false, false);\n  },\n\n  updateDescendants: function (cast, receive) {\n    var sceneEl = this.el.sceneEl;\n    this.el.object3D.traverse(function (node) {\n      if (!(node instanceof THREE.Mesh)) { return; }\n\n      node.castShadow = cast;\n      node.receiveShadow = receive;\n\n      // If scene has already rendered, materials must be updated.\n      if (sceneEl.hasLoaded && node.material) {\n        var materials = Array.isArray(node.material) ? node.material : [node.material];\n        for (var i = 0; i < materials.length; i++) {\n          materials[i].needsUpdate = true;\n        }\n      }\n    });\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport * as controllerUtils from '../utils/tracked-controls.js';\n\nvar EVENTS = {\n  AXISMOVE: 'axismove',\n  BUTTONCHANGED: 'buttonchanged',\n  BUTTONDOWN: 'buttondown',\n  BUTTONUP: 'buttonup',\n  TOUCHSTART: 'touchstart',\n  TOUCHEND: 'touchend'\n};\n\n/**\n * Tracked controls.\n * Abstract controls to support 6DOF tracked input controllers.\n *\n * @property {string} id - String corresponding to the WebXR controller input profile ids.\n * @property {number} controller - Index of controller in array returned by Gamepad API.\n *  Only used if hand property is not set.\n * @property {boolean} autoHide - shows / hides the entity automatically when the controller is\n * connected or desconneted.\n * @property {number} hand - If multiple controllers found with id, choose the one with the\n *  given value for hand. If set, we ignore 'controller' property\n * @property {boolean} handTrackingEnabled - Assumes a controller exposed via the WebXR Hand Input Module.\n * @property {boolean} iterateControllerProfiles - Iterates over all of the WebXR controller input profiles.\n */\nexport var Component = registerComponent('tracked-controls', {\n  schema: {\n    id: {type: 'string', default: ''},\n    controller: {default: -1},\n    autoHide: {default: true},\n    hand: {type: 'string', default: ''},\n    handTrackingEnabled: {default: false},\n    iterateControllerProfiles: {default: false}\n  },\n\n  init: function () {\n    this.buttonEventDetails = {};\n    this.buttonStates = this.el.components['tracked-controls'].buttonStates = {};\n    this.axis = this.el.components['tracked-controls'].axis = [0, 0, 0];\n    this.changedAxes = [];\n    this.axisMoveEventDetail = {axis: this.axis, changed: this.changedAxes};\n\n    this.updateController = this.updateController.bind(this);\n  },\n\n  update: function () {\n    this.updateController();\n  },\n\n  play: function () {\n    var sceneEl = this.el.sceneEl;\n    this.updateController();\n    sceneEl.addEventListener('controllersupdated', this.updateController);\n  },\n\n  pause: function () {\n    var sceneEl = this.el.sceneEl;\n    sceneEl.removeEventListener('controllersupdated', this.updateController);\n  },\n\n  isControllerPresent: function (evt) {\n    if (!this.controller || this.controller.gamepad) { return false; }\n    if (evt.inputSource.handedness !== 'none' &&\n        evt.inputSource.handedness !== this.data.hand) {\n      return false;\n    }\n    return true;\n  },\n\n  /**\n   * Handle update controller match criteria (such as `id`, `idPrefix`, `hand`, `controller`)\n   */\n  updateController: function () {\n    this.controller = controllerUtils.findMatchingControllerWebXR(\n      this.system.controllers,\n      this.data.id,\n      this.data.hand,\n      this.data.controller,\n      this.data.iterateControllerProfiles,\n      this.data.handTrackingEnabled\n    );\n    // Legacy handle to the controller for old components.\n    this.el.components['tracked-controls'].controller = this.controller;\n  },\n\n  tick: function () {\n    var sceneEl = this.el.sceneEl;\n    var controller = this.controller;\n    var frame = sceneEl.frame;\n    if (this.data.autoHide) { this.el.object3D.visible = !!controller; }\n    if (!controller || !sceneEl.frame || !this.system.referenceSpace) { return; }\n    if (!controller.hand) {\n      this.pose = frame.getPose(controller.gripSpace, this.system.referenceSpace);\n      this.updatePose();\n      this.updateButtons();\n    }\n  },\n\n  updatePose: function () {\n    var object3D = this.el.object3D;\n    var pose = this.pose;\n    if (!pose) { return; }\n    object3D.matrix.elements = pose.transform.matrix;\n    object3D.matrix.decompose(object3D.position, object3D.rotation, object3D.scale);\n  },\n\n  /**\n   * Handle button changes including axes, presses, touches, values.\n   */\n  updateButtons: function () {\n    var buttonState;\n    var id;\n    var controller = this.controller;\n    var gamepad;\n    if (!controller || !controller.gamepad) { return; }\n\n    gamepad = controller.gamepad;\n    // Check every button.\n    for (id = 0; id < gamepad.buttons.length; ++id) {\n      // Initialize button state.\n      if (!this.buttonStates[id]) {\n        this.buttonStates[id] = {pressed: false, touched: false, value: 0};\n      }\n      if (!this.buttonEventDetails[id]) {\n        this.buttonEventDetails[id] = {id: id, state: this.buttonStates[id]};\n      }\n\n      buttonState = gamepad.buttons[id];\n      this.handleButton(id, buttonState);\n    }\n    // Check axes.\n    this.handleAxes();\n  },\n\n  /**\n   * Handle presses and touches for a single button.\n   *\n   * @param {number} id - Index of button in Gamepad button array.\n   * @param {number} buttonState - Value of button state from 0 to 1.\n   * @returns {boolean} Whether button has changed in any way.\n   */\n  handleButton: function (id, buttonState) {\n    var changed;\n    changed = this.handlePress(id, buttonState) |\n              this.handleTouch(id, buttonState) |\n              this.handleValue(id, buttonState);\n    if (!changed) { return false; }\n    this.el.emit(EVENTS.BUTTONCHANGED, this.buttonEventDetails[id], false);\n    return true;\n  },\n\n  /**\n   * An axis is an array of values from -1 (up, left) to 1 (down, right).\n   * Compare each component of the axis to the previous value to determine change.\n   *\n   * @returns {boolean} Whether axes changed.\n   */\n  handleAxes: function () {\n    var changed = false;\n    var controllerAxes = this.controller.gamepad.axes;\n    var i;\n    var previousAxis = this.axis;\n    var changedAxes = this.changedAxes;\n\n    // Check if axis changed.\n    this.changedAxes.splice(0, this.changedAxes.length);\n    for (i = 0; i < controllerAxes.length; ++i) {\n      changedAxes.push(previousAxis[i] !== controllerAxes[i]);\n      if (changedAxes[i]) { changed = true; }\n    }\n    if (!changed) { return false; }\n\n    this.axis.splice(0, this.axis.length);\n    for (i = 0; i < controllerAxes.length; i++) {\n      this.axis.push(controllerAxes[i]);\n    }\n    this.el.emit(EVENTS.AXISMOVE, this.axisMoveEventDetail, false);\n    return true;\n  },\n\n  /**\n   * Determine whether a button press has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button press state changed.\n   */\n  handlePress: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.pressed === previousButtonState.pressed) { return false; }\n\n    evtName = buttonState.pressed ? EVENTS.BUTTONDOWN : EVENTS.BUTTONUP;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.pressed = buttonState.pressed;\n    return true;\n  },\n\n  /**\n   * Determine whether a button touch has occurred and emit events as appropriate.\n   *\n   * @param {string} id - ID of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button touch state changed.\n   */\n  handleTouch: function (id, buttonState) {\n    var evtName;\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.touched === previousButtonState.touched) { return false; }\n\n    evtName = buttonState.touched ? EVENTS.TOUCHSTART : EVENTS.TOUCHEND;\n    this.el.emit(evtName, this.buttonEventDetails[id], false);\n    previousButtonState.touched = buttonState.touched;\n    return true;\n  },\n\n  /**\n   * Determine whether a button value has changed.\n   *\n   * @param {string} id - Id of the button to check.\n   * @param {object} buttonState - State of the button to check.\n   * @returns {boolean} Whether button value changed.\n   */\n  handleValue: function (id, buttonState) {\n    var previousButtonState = this.buttonStates[id];\n\n    // Not changed.\n    if (buttonState.value === previousButtonState.value) { return false; }\n\n    previousButtonState.value = buttonState.value;\n    return true;\n  }\n});\n","import * as THREE from 'three';\nimport { KEYCODE_TO_CODE } from '../constants/keyboardevent.js';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\n\nvar shouldCaptureKeyEvent = utils.shouldCaptureKeyEvent;\n\nvar CLAMP_VELOCITY = 0.00001;\nvar MAX_DELTA = 0.2;\nvar KEYS = [\n  'KeyW', 'KeyA', 'KeyS', 'KeyD',\n  'ArrowUp', 'ArrowLeft', 'ArrowRight', 'ArrowDown'\n];\n\n/**\n * WASD component to control entities using WASD keys.\n */\nexport var Component = registerComponent('wasd-controls', {\n  schema: {\n    acceleration: {default: 65},\n    adAxis: {default: 'x', oneOf: ['x', 'y', 'z']},\n    adEnabled: {default: true},\n    adInverted: {default: false},\n    enabled: {default: true},\n    fly: {default: false},\n    wsAxis: {default: 'z', oneOf: ['x', 'y', 'z']},\n    wsEnabled: {default: true},\n    wsInverted: {default: false}\n  },\n  after: ['look-controls'],\n\n  init: function () {\n    // To keep track of the pressed keys.\n    this.keys = {};\n    this.easing = 1.1;\n\n    this.velocity = new THREE.Vector3();\n\n    // Bind methods and add event listeners.\n    this.onBlur = this.onBlur.bind(this);\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.attachVisibilityEventListeners();\n  },\n\n  tick: function (time, delta) {\n    var data = this.data;\n    var el = this.el;\n    var velocity = this.velocity;\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis] &&\n        isEmptyObject(this.keys)) { return; }\n\n    // Update velocity.\n    delta = delta / 1000;\n    this.updateVelocity(delta);\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) { return; }\n\n    // Get movement vector and translate position.\n    el.object3D.position.add(this.getMovementVector(delta));\n  },\n\n  update: function (oldData) {\n    // Reset velocity if axis have changed.\n    if (oldData.adAxis !== this.data.adAxis) { this.velocity[oldData.adAxis] = 0; }\n    if (oldData.wsAxis !== this.data.wsAxis) { this.velocity[oldData.wsAxis] = 0; }\n  },\n\n  remove: function () {\n    this.removeKeyEventListeners();\n    this.removeVisibilityEventListeners();\n  },\n\n  play: function () {\n    this.attachKeyEventListeners();\n  },\n\n  pause: function () {\n    this.keys = {};\n    this.removeKeyEventListeners();\n  },\n\n  updateVelocity: function (delta) {\n    var acceleration;\n    var adAxis;\n    var adSign;\n    var data = this.data;\n    var keys = this.keys;\n    var velocity = this.velocity;\n    var wsAxis;\n    var wsSign;\n\n    adAxis = data.adAxis;\n    wsAxis = data.wsAxis;\n\n    // If FPS too low, reset velocity.\n    if (delta > MAX_DELTA) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // https://gamedev.stackexchange.com/questions/151383/frame-rate-independant-movement-with-acceleration\n    var scaledEasing = Math.pow(1 / this.easing, delta * 60);\n    // Velocity Easing.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] = velocity[adAxis] * scaledEasing;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] = velocity[wsAxis] * scaledEasing;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) { velocity[adAxis] = 0; }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) { velocity[wsAxis] = 0; }\n\n    if (!data.enabled) { return; }\n\n    // Update velocity using keys pressed.\n    acceleration = data.acceleration;\n    if (data.adEnabled) {\n      adSign = data.adInverted ? -1 : 1;\n      if (keys.KeyA || keys.ArrowLeft) { velocity[adAxis] -= adSign * acceleration * delta; }\n      if (keys.KeyD || keys.ArrowRight) { velocity[adAxis] += adSign * acceleration * delta; }\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      if (keys.KeyW || keys.ArrowUp) { velocity[wsAxis] -= wsSign * acceleration * delta; }\n      if (keys.KeyS || keys.ArrowDown) { velocity[wsAxis] += wsSign * acceleration * delta; }\n    }\n  },\n\n  getMovementVector: (function () {\n    var directionVector = new THREE.Vector3(0, 0, 0);\n    var rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n\n    return function (delta) {\n      var rotation = this.el.getAttribute('rotation');\n      var velocity = this.velocity;\n      var xRotation;\n\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n\n      // Absolute.\n      if (!rotation) { return directionVector; }\n\n      xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(THREE.MathUtils.degToRad(xRotation), THREE.MathUtils.degToRad(rotation.y), 0);\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  })(),\n\n  attachVisibilityEventListeners: function () {\n    window.oncontextmenu = this.onContextMenu;\n    window.addEventListener('blur', this.onBlur);\n    window.addEventListener('focus', this.onFocus);\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  removeVisibilityEventListeners: function () {\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('focus', this.onFocus);\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  attachKeyEventListeners: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  },\n\n  removeKeyEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  },\n\n  onContextMenu: function () {\n    var keys = Object.keys(this.keys);\n    for (var i = 0; i < keys.length; i++) {\n      delete this.keys[keys[i]];\n    }\n  },\n\n  onBlur: function () {\n    this.pause();\n  },\n\n  onFocus: function () {\n    this.play();\n  },\n\n  onVisibilityChange: function () {\n    if (document.hidden) {\n      this.onBlur();\n    } else {\n      this.onFocus();\n    }\n  },\n\n  onKeyDown: function (event) {\n    var code;\n    if (!shouldCaptureKeyEvent(event)) { return; }\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    if (KEYS.indexOf(code) !== -1) { this.keys[code] = true; }\n  },\n\n  onKeyUp: function (event) {\n    var code;\n    code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    delete this.keys[code];\n  }\n});\n\nfunction isEmptyObject (keys) {\n  var key;\n  for (key in keys) { return false; }\n  return true;\n}\n","import { registerComponent } from '../core/component.js';\nimport * as THREE from 'three';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar INDEX_CONTROLLER_MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/valve/index/valve-index-';\nvar INDEX_CONTROLLER_MODEL_URL = {\n  left: INDEX_CONTROLLER_MODEL_BASE_URL + 'left.glb',\n  right: INDEX_CONTROLLER_MODEL_BASE_URL + 'right.glb'\n};\n\nvar GAMEPAD_ID_PREFIX = 'valve';\n\nvar INDEX_CONTROLLER_ROTATION_OFFSET = {\n  left: {x: 0, y: -0.05, z: 0.06},\n  right: {x: 0, y: -0.05, z: 0.06}\n};\n\nvar INDEX_CONTROLLER_POSITION_OFFSET = {\n  left: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'},\n  right: {_x: Math.PI / 3, _y: 0, _z: 0, _order: 'XYZ'}\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * trackpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('valve-index-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: {\n    axes: {\n      trackpad: [0, 1],\n      thumbstick: [2, 3]\n    },\n    buttons: ['trigger', 'grip', 'trackpad', 'thumbstick', 'abutton']\n  },\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    var controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: controllerIndex, iterateControllerProfiles: true, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      // Hand IDs: 1 = right, 0 = left, 2 = anything else.\n      controller: data.hand === 'right' ? 1 : data.hand === 'left' ? 0 : 2,\n      hand: data.hand\n    });\n\n    this.loadModel();\n  },\n\n  loadModel: function () {\n    var data = this.data;\n    if (!data.model) { return; }\n    this.el.setAttribute('gltf-model', '' + INDEX_CONTROLLER_MODEL_URL[data.hand] + '');\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = this.triggerOriginalRotationX - analogValue * (Math.PI / 40);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n    this.triggerOriginalRotationX = buttonMeshes.trigger.rotation.x;\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.copy(INDEX_CONTROLLER_POSITION_OFFSET[this.data.hand]);\n    controllerObject3D.rotation.copy(INDEX_CONTROLLER_ROTATION_OFFSET[this.data.hand]);\n\n    this.el.emit('controllermodelready', {\n      name: 'valve-index-controls',\n      model: this.data.model,\n      rayOrigin: new THREE.Vector3(0, 0, 0)\n    });\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n  setButtonColor: function (buttonName, color) {\n    // TODO: The meshes aren't set up correctly now, skipping for the moment\n    return;\n  }\n});\n","import { registerComponent } from '../core/component.js';\n\n/**\n * Visibility component.\n */\nexport var Component = registerComponent('visible', {\n  schema: {default: true},\n\n  update: function () {\n    this.el.object3D.visible = this.data;\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_CONTROLLER_MODEL_OBJ_URL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.obj';\nvar VIVE_CONTROLLER_MODEL_OBJ_MTL = AFRAME_CDN_ROOT + 'controllers/vive/vr_controller_vive.mtl';\n\n// Prefix for HTC Vive controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 1 - squeeze\n * 2 - touchpad\n * 3 - none (dispatch but better for menu options)\n * 4 - menu (never dispatched on this layer)\n *\n * Axis:\n * 0 - touchpad x axis\n * 1 - touchpad y axis\n * Reference: https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/htc/htc-vive.json\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'grip', 'touchpad', 'none']\n};\n\n/**\n * Vive controls.\n * Interface with Vive controllers and map Gamepad events to controller buttons:\n * touchpad, trigger, grip, menu, system\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-controls', {\n  schema: {\n    hand: {default: 'left'},\n    buttonColor: {type: 'color', default: '#FAFAFA'},  // Off-white.\n    buttonHighlightColor: {type: 'color', default: '#22D1EE'},  // Light blue.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  init: function () {\n    var self = this;\n    this.controllerPresent = false;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.previousButtonValues = {};\n\n    this.bindMethods();\n  },\n\n  update: function () {\n    var data = this.data;\n    this.controllerIndex = data.hand === 'right' ? 0 : data.hand === 'left' ? 1 : 2;\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n  },\n\n  /**\n   * Once OpenVR returns correct hand data in supporting browsers, we can use hand property.\n   * var isPresent = checkControllerPresentAndSetup(this.el.sceneEl, GAMEPAD_ID_PREFIX,\n                                                        { hand: data.hand });\n   * Until then, use hardcoded index.\n   */\n  checkIfControllerPresent: function () {\n    var data = this.data;\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {index: this.controllerIndex, hand: data.hand});\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    var data = this.data;\n\n    // If we have an OpenVR Gamepad, use the fixed mapping.\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      hand: data.hand,\n      controller: this.controllerIndex\n    });\n\n    // Load model.\n    if (!this.data.model) { return; }\n    this.el.setAttribute('obj-model', {\n      obj: VIVE_CONTROLLER_MODEL_OBJ_URL,\n      mtl: VIVE_CONTROLLER_MODEL_OBJ_MTL\n    });\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  /**\n   * Rotate the trigger button based on how hard the trigger is pressed.\n   */\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    var buttonMeshes = this.buttonMeshes;\n    var analogValue;\n\n    if (!button) { return; }\n\n    if (button === 'trigger') {\n      analogValue = evt.detail.state.value;\n      // Update trigger rotation depending on button value.\n      if (buttonMeshes && buttonMeshes.trigger) {\n        buttonMeshes.trigger.rotation.x = -analogValue * (Math.PI / 12);\n      }\n    }\n\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onModelLoaded: function (evt) {\n    var buttonMeshes;\n    var controllerObject3D = evt.detail.model;\n    var self = this;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n\n    // Store button meshes object to be able to change their colors.\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.grip = {\n      left: controllerObject3D.getObjectByName('leftgrip'),\n      right: controllerObject3D.getObjectByName('rightgrip')\n    };\n    buttonMeshes.menu = controllerObject3D.getObjectByName('menubutton');\n    buttonMeshes.system = controllerObject3D.getObjectByName('systembutton');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('touchpad');\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('trigger');\n\n    // Set default colors.\n    Object.keys(buttonMeshes).forEach(function (buttonName) {\n      self.setButtonColor(buttonName, self.data.buttonColor);\n    });\n\n    // Offset pivot point.\n    controllerObject3D.position.set(0, -0.015, 0.04);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    var color;\n    var isTouch;\n    if (!this.data.model) { return; }\n\n    isTouch = evtName.indexOf('touch') !== -1;\n    // Don't change color for trackpad touch.\n    if (isTouch) { return; }\n\n    // Update colors.\n    color = evtName === 'up' ? this.data.buttonColor : this.data.buttonHighlightColor;\n    this.setButtonColor(buttonName, color);\n  },\n\n  setButtonColor: function (buttonName, color) {\n    var buttonMeshes = this.buttonMeshes;\n\n    if (!buttonMeshes) { return; }\n\n    // Need to do both left and right sides for grip.\n    if (buttonName === 'grip') {\n      buttonMeshes.grip.left.material.color.set(color);\n      buttonMeshes.grip.right.material.color.set(color);\n      return;\n    }\n    buttonMeshes[buttonName].material.color.set(color);\n  }\n});\n","import { registerComponent } from '../core/component.js';\nimport { AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar VIVE_FOCUS_CONTROLLER_MODEL_URL = AFRAME_CDN_ROOT + 'controllers/vive/focus-controller/focus-controller.gltf';\n\n// Prefix for HTC Vive Focus Controllers.\nvar GAMEPAD_ID_PREFIX = 'htc-vive-focus';\n\n/**\n * Button IDs:\n * 0 - trigger\n * 2 - touchpad\n * 4 - menu\n */\nvar INPUT_MAPPING = {\n  axes: {touchpad: [0, 1]},\n  buttons: ['trigger', 'none', 'touchpad', 'none', 'menu']\n};\n\n/**\n * Vive Focus controls.\n * Interface with Vive Focus controller and map Gamepad events to\n * controller buttons: trackpad, trigger\n * Load a controller model and highlight the pressed buttons.\n */\nexport var Component = registerComponent('vive-focus-controls', {\n  schema: {\n    hand: {default: ''},  // This informs the degenerate arm model.\n    buttonTouchedColor: {type: 'color', default: '#BBBBBB'},\n    buttonHighlightColor: {type: 'color', default: '#7A7A7A'},\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.removeControllersUpdateListener = this.removeControllersUpdateListener.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.controllerPresent = false;\n    this.bindMethods();\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    el.addEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = true;\n    this.addControllersUpdateListener();\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    this.controllerEventsActive = false;\n    this.removeControllersUpdateListener();\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX,\n                                   this.data.hand ? {hand: this.data.hand} : {});\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  injectTrackedControls: function () {\n    var el = this.el;\n    el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX\n    });\n    if (!this.data.model) { return; }\n    this.el.setAttribute('gltf-model', VIVE_FOCUS_CONTROLLER_MODEL_URL);\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelLoaded: function (evt) {\n    var controllerObject3D = evt.detail.model;\n    var buttonMeshes;\n\n    if (evt.target !== this.el || !this.data.model) { return; }\n    buttonMeshes = this.buttonMeshes = {};\n    buttonMeshes.trigger = controllerObject3D.getObjectByName('BumperKey');\n    buttonMeshes.triggerPressed = controllerObject3D.getObjectByName('BumperKey_Press');\n    if (buttonMeshes.triggerPressed) {\n      buttonMeshes.triggerPressed.visible = false;\n    }\n    buttonMeshes.touchpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.touchpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    buttonMeshes.trackpad = controllerObject3D.getObjectByName('TouchPad');\n    buttonMeshes.trackpadPressed = controllerObject3D.getObjectByName('TouchPad_Press');\n    if (buttonMeshes.trackpadPressed) {\n      buttonMeshes.trackpadPressed.visible = false;\n    }\n  },\n\n  // No analog buttons, only emits 0/1 values\n  onButtonChanged: function (evt) {\n    var button = this.mapping.buttons[evt.detail.id];\n    if (!button) return;\n    // Pass along changed event with button state, using button mapping for convenience.\n    this.el.emit(button + 'changed', evt.detail.state);\n  },\n\n  onAxisMoved: function (evt) {\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  updateModel: function (buttonName, evtName) {\n    if (!this.data.model) { return; }\n    this.updateButtonModel(buttonName, evtName);\n  },\n\n  updateButtonModel: function (buttonName, state) {\n    var buttonMeshes = this.buttonMeshes;\n    var pressedName = buttonName + 'Pressed';\n    if (!buttonMeshes || !buttonMeshes[buttonName] || !buttonMeshes[pressedName]) {\n      return;\n    }\n    var color;\n    switch (state) {\n      case 'down':\n        color = this.data.buttonHighlightColor;\n        break;\n      case 'touchstart':\n        color = this.data.buttonTouchedColor;\n        break;\n    }\n    if (color) {\n      buttonMeshes[pressedName].material.color.set(color);\n    }\n    buttonMeshes[pressedName].visible = !!color;\n    buttonMeshes[buttonName].visible = !color;\n  }\n});\n","// Tiny KeyboardEvent.code polyfill.\nexport var KEYCODE_TO_CODE = {\n  '38': 'ArrowUp',\n  '37': 'ArrowLeft',\n  '40': 'ArrowDown',\n  '39': 'ArrowRight',\n  '87': 'KeyW',\n  '65': 'KeyA',\n  '83': 'KeyS',\n  '68': 'KeyD'\n};\n","import * as THREE from 'three';\nimport { registerComponent } from '../core/component.js';\nimport * as utils from '../utils/index.js';\nimport { DEFAULT_HANDEDNESS, AFRAME_CDN_ROOT } from '../constants/index.js';\nimport { checkControllerPresentAndSetup, emitIfAxesChanged, onButtonEvent } from '../utils/tracked-controls.js';\n\nvar debug = utils.debug('components:windows-motion-controls:debug');\nvar warn = utils.debug('components:windows-motion-controls:warn');\n\nvar MODEL_BASE_URL = AFRAME_CDN_ROOT + 'controllers/microsoft/';\nvar MODEL_FILENAMES = { left: 'left.glb', right: 'right.glb', default: 'universal.glb' };\n\nvar GAMEPAD_ID_PREFIX = 'windows-mixed-reality';\n\nvar INPUT_MAPPING = {\n  // A-Frame specific semantic axis names\n  axes: {'touchpad': [0, 1], 'thumbstick': [2, 3]},\n  // A-Frame specific semantic button names\n  buttons: ['trigger', 'squeeze', 'touchpad', 'thumbstick', 'menu'],\n  // A mapping of the semantic name to node name in the glTF model file,\n  // that should be transformed by axis value.\n  // This array mirrors the browser Gamepad.axes array, such that\n  // the mesh corresponding to axis 0 is in this array index 0.\n  axisMeshNames: [\n    'TOUCHPAD_TOUCH_X',\n    'TOUCHPAD_TOUCH_Y',\n    'THUMBSTICK_X',\n    'THUMBSTICK_Y'\n  ],\n  // A mapping of the semantic name to button node name in the glTF model file,\n  // that should be transformed by button value.\n  buttonMeshNames: {\n    'trigger': 'SELECT',\n    'menu': 'MENU',\n    'squeeze': 'GRASP',\n    'thumbstick': 'THUMBSTICK_PRESS',\n    'touchpad': 'TOUCHPAD_PRESS'\n  },\n  pointingPoseMeshName: 'POINTING_POSE'\n};\n\n/**\n * Windows Motion Controller controls.\n * Interface with Windows Motion Controller controllers and map Gamepad events to\n * controller buttons: trackpad, trigger, grip, menu, thumbstick\n * Load a controller model and transform the pressed buttons.\n */\nexport var Component = registerComponent('windows-motion-controls', {\n  schema: {\n    hand: {default: DEFAULT_HANDEDNESS},\n    // It is possible to have multiple pairs of controllers attached (a pair has both left and right).\n    // Set this to 1 to use a controller from the second pair, 2 from the third pair, etc.\n    pair: {default: 0},\n    // If true, loads the controller glTF asset.\n    model: {default: true}\n  },\n\n  after: ['tracked-controls'],\n\n  mapping: INPUT_MAPPING,\n\n  bindMethods: function () {\n    this.onModelError = this.onModelError.bind(this);\n    this.onModelLoaded = this.onModelLoaded.bind(this);\n    this.onControllersUpdate = this.onControllersUpdate.bind(this);\n    this.checkIfControllerPresent = this.checkIfControllerPresent.bind(this);\n    this.onAxisMoved = this.onAxisMoved.bind(this);\n  },\n\n  init: function () {\n    var self = this;\n    var el = this.el;\n    this.onButtonChanged = this.onButtonChanged.bind(this);\n    this.onButtonDown = function (evt) { onButtonEvent(evt.detail.id, 'down', self); };\n    this.onButtonUp = function (evt) { onButtonEvent(evt.detail.id, 'up', self); };\n    this.onButtonTouchStart = function (evt) { onButtonEvent(evt.detail.id, 'touchstart', self); };\n    this.onButtonTouchEnd = function (evt) { onButtonEvent(evt.detail.id, 'touchend', self); };\n    this.onControllerConnected = function () { self.setModelVisibility(true); };\n    this.onControllerDisconnected = function () { self.setModelVisibility(false); };\n    this.controllerPresent = false;\n    this.previousButtonValues = {};\n    this.bindMethods();\n\n    // Cache for submeshes that we have looked up by name.\n    this.loadedMeshInfo = {\n      buttonMeshes: null,\n      axisMeshes: null\n    };\n\n    // Pointing poses\n    this.rayOrigin = {\n      origin: new THREE.Vector3(),\n      direction: new THREE.Vector3(0, 0, -1),\n      createdFromMesh: false\n    };\n\n    el.addEventListener('controllerconnected', this.onControllerConnected);\n    el.addEventListener('controllerdisconnected', this.onControllerDisconnected);\n  },\n\n  addEventListeners: function () {\n    var el = this.el;\n    el.addEventListener('buttonchanged', this.onButtonChanged);\n    el.addEventListener('buttondown', this.onButtonDown);\n    el.addEventListener('buttonup', this.onButtonUp);\n    el.addEventListener('touchstart', this.onButtonTouchStart);\n    el.addEventListener('touchend', this.onButtonTouchEnd);\n    el.addEventListener('axismove', this.onAxisMoved);\n    el.addEventListener('model-error', this.onModelError);\n    el.addEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = true;\n  },\n\n  removeEventListeners: function () {\n    var el = this.el;\n    el.removeEventListener('buttonchanged', this.onButtonChanged);\n    el.removeEventListener('buttondown', this.onButtonDown);\n    el.removeEventListener('buttonup', this.onButtonUp);\n    el.removeEventListener('touchstart', this.onButtonTouchStart);\n    el.removeEventListener('touchend', this.onButtonTouchEnd);\n    el.removeEventListener('axismove', this.onAxisMoved);\n    el.removeEventListener('model-error', this.onModelError);\n    el.removeEventListener('model-loaded', this.onModelLoaded);\n    this.controllerEventsActive = false;\n  },\n\n  checkIfControllerPresent: function () {\n    checkControllerPresentAndSetup(this, GAMEPAD_ID_PREFIX, {\n      hand: this.data.hand,\n      index: this.data.pair,\n      iterateControllerProfiles: true\n    });\n  },\n\n  play: function () {\n    this.checkIfControllerPresent();\n    this.addControllersUpdateListener();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.removeControllersUpdateListener();\n  },\n\n  updateControllerModel: function () {\n    // If we do not want to load a model, or, have already loaded the model, emit the controllermodelready event.\n    if (!this.data.model || this.rayOrigin.createdFromMesh) {\n      this.modelReady();\n      return;\n    }\n\n    var sourceUrl = this.createControllerModelUrl();\n    this.loadModel(sourceUrl);\n  },\n\n  /**\n   * Helper function that constructs a URL from the controller ID suffix, for future proofed\n   * art assets.\n   */\n  createControllerModelUrl: function (forceDefault) {\n    // Determine the device specific folder based on the ID suffix\n    var device = 'default';\n    var hand = this.data.hand;\n    var filename;\n\n    // Hand\n    filename = MODEL_FILENAMES[hand] || MODEL_FILENAMES.default;\n\n    // Final url\n    return MODEL_BASE_URL + device + '/' + filename;\n  },\n\n  injectTrackedControls: function () {\n    var data = this.data;\n    this.el.setAttribute('tracked-controls', {\n      idPrefix: GAMEPAD_ID_PREFIX,\n      controller: data.pair,\n      hand: data.hand\n    });\n\n    this.updateControllerModel();\n  },\n\n  addControllersUpdateListener: function () {\n    this.el.sceneEl.addEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  removeControllersUpdateListener: function () {\n    this.el.sceneEl.removeEventListener('controllersupdated', this.onControllersUpdate, false);\n  },\n\n  onControllersUpdate: function () {\n    this.checkIfControllerPresent();\n  },\n\n  onModelError: function (evt) {\n    var defaultUrl = this.createControllerModelUrl(true);\n    if (evt.detail.src !== defaultUrl) {\n      warn('Failed to load controller model for device, attempting to load default.');\n      this.loadModel(defaultUrl);\n    } else {\n      warn('Failed to load default controller model.');\n    }\n  },\n\n  loadModel: function (url) {\n    // The model is loaded by the gltf-model component when this attribute is initially set,\n    // removed and re-loaded if the given url changes.\n    this.el.setAttribute('gltf-model', 'url(' + url + ')');\n  },\n\n  onModelLoaded: function (evt) {\n    var rootNode = this.controllerModel = evt.detail.model;\n    var loadedMeshInfo = this.loadedMeshInfo;\n    var i;\n    var meshName;\n    var mesh;\n    var meshInfo;\n\n    if (evt.target !== this.el) { return; }\n\n    debug('Processing model');\n\n    // Reset the caches\n    loadedMeshInfo.buttonMeshes = {};\n    loadedMeshInfo.axisMeshes = {};\n\n    // Cache our meshes so we aren't traversing the hierarchy per frame\n    if (rootNode) {\n      // Button Meshes\n      for (i = 0; i < this.mapping.buttons.length; i++) {\n        meshName = this.mapping.buttonMeshNames[this.mapping.buttons[i]];\n        if (!meshName) {\n          debug('Skipping unknown button at index: ' + i + ' with mapped name: ' + this.mapping.buttons[i]);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing button mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          pressed: getImmediateChildByName(mesh, 'PRESSED'),\n          unpressed: getImmediateChildByName(mesh, 'UNPRESSED')\n        };\n        if (meshInfo.value && meshInfo.pressed && meshInfo.unpressed) {\n          loadedMeshInfo.buttonMeshes[this.mapping.buttons[i]] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this button won't have transforms applied as mapped button value changes.\n          warn('Missing button submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', PRESSED: ' + !!meshInfo.pressed +\n            ', UNPRESSED:' + !!meshInfo.unpressed +\n            ')');\n        }\n      }\n\n      // Axis Meshes\n      for (i = 0; i < this.mapping.axisMeshNames.length; i++) {\n        meshName = this.mapping.axisMeshNames[i];\n        if (!meshName) {\n          debug('Skipping unknown axis at index: ' + i);\n          continue;\n        }\n\n        mesh = rootNode.getObjectByName(meshName);\n        if (!mesh) {\n          warn('Missing axis mesh with name: ' + meshName);\n          continue;\n        }\n\n        meshInfo = {\n          index: i,\n          value: getImmediateChildByName(mesh, 'VALUE'),\n          min: getImmediateChildByName(mesh, 'MIN'),\n          max: getImmediateChildByName(mesh, 'MAX')\n        };\n        if (meshInfo.value && meshInfo.min && meshInfo.max) {\n          loadedMeshInfo.axisMeshes[i] = meshInfo;\n        } else {\n          // If we didn't find the mesh, it simply means this axis won't have transforms applied as mapped axis values change.\n          warn('Missing axis submesh under mesh with name: ' + meshName +\n            '(VALUE: ' + !!meshInfo.value +\n            ', MIN: ' + !!meshInfo.min +\n            ', MAX:' + !!meshInfo.max +\n            ')');\n        }\n      }\n\n      this.calculateRayOriginFromMesh(rootNode);\n      // Determine if the model has to be visible or not.\n      this.setModelVisibility();\n    }\n\n    debug('Model load complete.');\n\n    // Look through only immediate children. This will return null if no mesh exists with the given name.\n    function getImmediateChildByName (object3d, value) {\n      for (var i = 0, l = object3d.children.length; i < l; i++) {\n        var obj = object3d.children[i];\n        if (obj && obj['name'] === value) {\n          return obj;\n        }\n      }\n      return undefined;\n    }\n  },\n\n  calculateRayOriginFromMesh: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (rootNode) {\n      var mesh;\n\n      // Calculate the pointer pose (used for rays), by applying the world transform of th POINTER_POSE node\n      // in the glTF (assumes that root node is at world origin)\n      this.rayOrigin.origin.set(0, 0, 0);\n      this.rayOrigin.direction.set(0, 0, -1);\n      this.rayOrigin.createdFromMesh = true;\n\n      // Try to read Pointing pose from the source model\n      mesh = rootNode.getObjectByName(this.mapping.pointingPoseMeshName);\n      if (mesh) {\n        var parent = rootNode.parent;\n\n        // We need to read pose transforms accumulated from the root of the glTF, not the scene.\n        if (parent) {\n          rootNode.parent = null;\n          rootNode.updateMatrixWorld(true);\n          rootNode.parent = parent;\n        }\n\n        mesh.getWorldPosition(this.rayOrigin.origin);\n        mesh.getWorldQuaternion(quaternion);\n        this.rayOrigin.direction.applyQuaternion(quaternion);\n\n        // Recalculate the world matrices now that the rootNode is re-attached to the parent.\n        if (parent) {\n          rootNode.updateMatrixWorld(true);\n        }\n      } else {\n        debug('Mesh does not contain pointing origin data, defaulting to none.');\n      }\n\n      // Emit event stating that our pointing ray is now accurate.\n      this.modelReady();\n    };\n  })(),\n\n  lerpAxisTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (axis, axisValue) {\n      var axisMeshInfo = this.loadedMeshInfo.axisMeshes[axis];\n      if (!axisMeshInfo) return;\n\n      var min = axisMeshInfo.min;\n      var max = axisMeshInfo.max;\n      var target = axisMeshInfo.value;\n\n      // Convert from gamepad value range (-1 to +1) to lerp range (0 to 1)\n      var lerpValue = axisValue * 0.5 + 0.5;\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, lerpValue));\n      target.position.lerpVectors(min.position, max.position, lerpValue);\n    };\n  })(),\n\n  lerpButtonTransform: (function () {\n    var quaternion = new THREE.Quaternion();\n    return function (buttonName, buttonValue) {\n      var buttonMeshInfo = this.loadedMeshInfo.buttonMeshes[buttonName];\n      if (!buttonMeshInfo) return;\n\n      var min = buttonMeshInfo.unpressed;\n      var max = buttonMeshInfo.pressed;\n      var target = buttonMeshInfo.value;\n\n      target.setRotationFromQuaternion(quaternion.copy(min.quaternion).slerp(max.quaternion, buttonValue));\n      target.position.lerpVectors(min.position, max.position, buttonValue);\n    };\n  })(),\n\n  modelReady: function () {\n    this.el.emit('controllermodelready', {\n      name: 'windows-motion-controls',\n      model: this.data.model,\n      rayOrigin: this.rayOrigin\n    });\n  },\n\n  onButtonChanged: function (evt) {\n    var buttonName = this.mapping.buttons[evt.detail.id];\n\n    if (buttonName) {\n      // Update the button mesh transform\n      if (this.loadedMeshInfo && this.loadedMeshInfo.buttonMeshes) {\n        this.lerpButtonTransform(buttonName, evt.detail.state.value);\n      }\n\n      // Only emit events for buttons that we know how to map from index to name\n      this.el.emit(buttonName + 'changed', evt.detail.state);\n    }\n  },\n\n  onAxisMoved: function (evt) {\n    var numAxes = this.mapping.axisMeshNames.length;\n\n    // Only attempt to update meshes if we have valid data.\n    if (this.loadedMeshInfo && this.loadedMeshInfo.axisMeshes) {\n      for (var axis = 0; axis < numAxes; axis++) {\n        // Update the button mesh transform\n        this.lerpAxisTransform(axis, evt.detail.axis[axis] || 0.0);\n      }\n    }\n\n    emitIfAxesChanged(this, this.mapping.axes, evt);\n  },\n\n  setModelVisibility: function (visible) {\n    var model = this.el.getObject3D('mesh');\n    if (!this.controllerPresent) { return; }\n    visible = visible !== undefined ? visible : this.modelVisible;\n    this.modelVisible = visible;\n    if (!model) { return; }\n    model.visible = visible;\n  }\n});\n","/* global ImageData, Map, Set */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\nvar arrowURL = 'data:image/webp;base64,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';\nvar CAM_LAYER = 21;\n\nvar applyPose = (function () {\n  var tempQuaternion = new THREE.Quaternion();\n  var tempVec3 = new THREE.Vector3();\n  function applyPose (pose, object3D, offset) {\n    object3D.position.copy(pose.transform.position);\n    object3D.quaternion.copy(pose.transform.orientation);\n\n    tempVec3.copy(offset);\n    tempQuaternion.copy(pose.transform.orientation);\n    tempVec3.applyQuaternion(tempQuaternion);\n    object3D.position.sub(tempVec3);\n  }\n  return applyPose;\n}());\n\napplyPose.tempFakePose = {\n  transform: {\n    orientation: new THREE.Quaternion(),\n    position: new THREE.Vector3()\n  }\n};\n\n/**\n * Class to handle hit-test from a single source\n *\n * For a normal space provide it as a space option\n * new HitTest(renderer, {\n *   space: viewerSpace\n * });\n *\n * this is also useful for the targetRaySpace of an XRInputSource\n *\n * It can also describe a transient input source like so:\n *\n * var profileToSupport = 'generic-touchscreen';\n * var transientHitTest = new HitTest(renderer, {\n *   profile: profileToSupport\n * });\n *\n * Where the profile matches an item in a type of controller, profiles matching 'generic-touchscreen'\n * will always be a transient input and as of 08/2021 all transient inputs are 'generic-touchscreen'\n *\n * @param {WebGLRenderer} renderer THREE.JS Renderer\n * @param {object} hitTestSourceDetails The source information either as the information for a transient hit-test or a regular hit-test\n */\nfunction HitTest (renderer, hitTestSourceDetails) {\n  this.renderer = renderer;\n  this.xrHitTestSource = null;\n\n  renderer.xr.addEventListener('sessionend', function () {\n    this.xrHitTestSource = null;\n  }.bind(this));\n  renderer.xr.addEventListener('sessionstart', function () {\n    this.sessionStart(hitTestSourceDetails);\n  }.bind(this));\n\n  if (this.renderer.xr.isPresenting) {\n    this.sessionStart(hitTestSourceDetails);\n  }\n}\n\nHitTest.prototype.previousFrameAnchors = new Set();\nHitTest.prototype.anchorToObject3D = new Map();\n\nfunction warnAboutHitTest (e) {\n  console.warn(e.message);\n  console.warn('Cannot requestHitTestSource Are you missing: webxr=\"optionalFeatures: hit-test;\" from <a-scene>?');\n}\n\nHitTest.prototype.sessionStart = function sessionStart (hitTestSourceDetails) {\n  this.session = this.renderer.xr.getSession();\n  if (!('requestHitTestSource' in this.session)) {\n    warnAboutHitTest({message: 'No requestHitTestSource on the session.'});\n    return;\n  }\n  if (hitTestSourceDetails.space) {\n    this.session.requestHitTestSource(hitTestSourceDetails)\n      .then(function (xrHitTestSource) {\n        this.xrHitTestSource = xrHitTestSource;\n      }.bind(this))\n      .catch(warnAboutHitTest);\n  } else if (hitTestSourceDetails.profile) {\n    this.session.requestHitTestSourceForTransientInput(hitTestSourceDetails)\n      .then(function (xrHitTestSource) {\n        this.xrHitTestSource = xrHitTestSource;\n        this.transient = true;\n      }.bind(this))\n      .catch(warnAboutHitTest);\n  }\n};\n\n/**\n * Turns the last hit test into an anchor, the provided Object3D will have its\n * position update to track the anchor.\n *\n * @param {Object3D} object3D object to track\n * @param {Vector3} offset offset of the object from the origin that gets subtracted\n */\nHitTest.prototype.anchorFromLastHitTestResult = function (object3D, offset) {\n  var hitTest = this.lastHitTest;\n\n  if (!hitTest) { return; }\n\n  var object3DOptions = {\n    object3D: object3D,\n    offset: offset\n  };\n\n  Array.from(this.anchorToObject3D.entries())\n    .forEach(function (entry) {\n      var entryObject = entry[1].object3D;\n      var anchor = entry[0];\n      if (entryObject === object3D) {\n        this.anchorToObject3D.delete(anchor);\n        anchor.delete();\n      }\n    }.bind(this));\n\n  if (hitTest.createAnchor) {\n    hitTest.createAnchor()\n      .then(function (anchor) {\n        this.anchorToObject3D.set(anchor, object3DOptions);\n      }.bind(this))\n      .catch(function (e) {\n        console.warn(e.message);\n        console.warn('Cannot create anchor, are you missing: webxr=\"optionalFeatures: anchors;\" from <a-scene>?');\n      });\n  }\n};\n\nHitTest.prototype.doHit = function doHit (frame) {\n  if (!this.renderer.xr.isPresenting) { return; }\n  var refSpace = this.renderer.xr.getReferenceSpace();\n  var xrViewerPose = frame.getViewerPose(refSpace);\n  var hitTestResults;\n  var results;\n\n  if (this.xrHitTestSource && xrViewerPose) {\n    if (this.transient) {\n      hitTestResults = frame.getHitTestResultsForTransientInput(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        results = hitTestResults[0].results;\n        if (results.length > 0) {\n          this.lastHitTest = results[0];\n          return results[0].getPose(refSpace);\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    } else {\n      hitTestResults = frame.getHitTestResults(this.xrHitTestSource);\n      if (hitTestResults.length > 0) {\n        this.lastHitTest = hitTestResults[0];\n        return hitTestResults[0].getPose(refSpace);\n      } else {\n        return false;\n      }\n    }\n  }\n};\n\n// static function\nHitTest.updateAnchorPoses = function (frame, refSpace) {\n  // If tracked anchors isn't defined because it's not supported then just use the empty set\n  var trackedAnchors = frame.trackedAnchors || HitTest.prototype.previousFrameAnchors;\n\n  HitTest.prototype.previousFrameAnchors.forEach(function (anchor) {\n    // Handle anchor tracking loss - `anchor` was present\n    // in the present frame but is no longer tracked.\n    if (!trackedAnchors.has(anchor)) {\n      HitTest.prototype.anchorToObject3D.delete(anchor);\n    }\n  });\n\n  trackedAnchors.forEach(function (anchor) {\n    var anchorPose;\n    var object3DOptions;\n    var offset;\n    var object3D;\n\n    try {\n      // Query most recent pose of the anchor relative to some reference space:\n      anchorPose = frame.getPose(anchor.anchorSpace, refSpace);\n      if (anchorPose) {\n        object3DOptions = HitTest.prototype.anchorToObject3D.get(anchor);\n        if (!object3DOptions) { return; }\n        offset = object3DOptions.offset;\n        object3D = object3DOptions.object3D;\n        applyPose(anchorPose, object3D, offset);\n      }\n    } catch (e) {\n      console.error('while updating anchor poses:', e);\n    }\n  });\n  HitTest.prototype.previousFrameAnchors = trackedAnchors;\n};\n\nvar hitTestCache;\nexport var Component = register('ar-hit-test', {\n  schema: {\n    target: { type: 'selector' },\n    enabled: { default: true },\n    src: {\n      default: arrowURL,\n      type: 'map'\n    },\n    type: {\n      default: 'footprint',\n      oneOf: ['footprint', 'map']\n    },\n    footprintDepth: {\n      default: 0.1\n    },\n    mapSize: {\n      type: 'vec2',\n      default: {\n        x: 0.5,\n        y: 0.5\n      }\n    }\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.hitTest = null;\n    this.imageDataArray = new Uint8ClampedArray(512 * 512 * 4);\n    this.imageData = new ImageData(this.imageDataArray, 512, 512);\n\n    this.textureCache = new Map();\n\n    this.orthoCam = new THREE.OrthographicCamera();\n    this.orthoCam.layers.set(CAM_LAYER);\n    this.textureTarget = new THREE.WebGLRenderTarget(512, 512, {});\n    this.basicMaterial = new THREE.MeshBasicMaterial({\n      color: 0x000000,\n      side: THREE.DoubleSide\n    });\n    this.canvas = document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.context.imageSmoothingEnabled = false;\n    this.canvas.width = 512;\n    this.canvas.height = 512;\n    this.canvasTexture = new THREE.CanvasTexture(this.canvas, {\n      alpha: true\n    });\n    this.canvasTexture.flipY = false;\n\n    // Update WebXR to support hit-test and anchors\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (\n      !optionalFeaturesArray.includes('hit-test') ||\n      !optionalFeaturesArray.includes('anchors')\n    ) {\n      optionalFeaturesArray.push('hit-test');\n      optionalFeaturesArray.push('anchors');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.sceneEl.renderer.xr.addEventListener('sessionend', function () {\n      this.hitTest = null;\n    }.bind(this));\n\n    // Use enter-vr event instead of sessionstart so that ar-mode is set before this is called\n    this.el.sceneEl.addEventListener('enter-vr', function () {\n      // Don't request Hit Test unless AR (breaks WebXR Emulator)\n      if (!this.el.is('ar-mode')) { return; }\n\n      var renderer = this.el.sceneEl.renderer;\n      var session = this.session = renderer.xr.getSession();\n      this.hasPosedOnce = false;\n      this.bboxMesh.visible = false;\n\n      if (!hitTestCache) { hitTestCache = new Map(); }\n\n      // Default to selecting through the face\n      session.requestReferenceSpace('viewer')\n        .then(function (viewerSpace) {\n          this.viewerHitTest = this.hitTest = new HitTest(renderer, {\n            space: viewerSpace\n          });\n\n          this.el.emit('ar-hit-test-start');\n        }.bind(this));\n\n      // If a tracked controller is available, selects via that instead of the headset\n      var arHitTestComp = this;\n      this.el.sceneEl.addEventListener('controllersupdated', function () {\n        var sceneEl = this;\n        var inputSources = sceneEl.xrSession && sceneEl.xrSession.inputSources;\n        if (!inputSources) { return; }\n        for (var i = 0; i < inputSources.length; ++i) {\n          if (inputSources[i].targetRayMode === 'tracked-pointer') {\n            arHitTestComp.hitTest = new HitTest(renderer, {\n              space: inputSources[i].targetRaySpace\n            });\n            hitTestCache.set(inputSources[i], arHitTestComp.hitTest);\n\n            if (arHitTestComp.viewerHitTest && typeof arHitTestComp.viewerHitTest.cancel === 'function') {\n              arHitTestComp.viewerHitTest.cancel();\n              arHitTestComp.viewerHitTest = null;\n            }\n\n            break;   // only uses first tracked controller\n          }\n        }\n      });\n\n      // These are transient inputs so need to be handled separately\n      var profileToSupport = 'generic-touchscreen';\n      var transientHitTest = new HitTest(renderer, {\n        profile: profileToSupport\n      });\n\n      session.addEventListener('selectstart', function (e) {\n        if (this.data.enabled !== true) { return; }\n\n        var inputSource = e.inputSource;\n\n        this.bboxMesh.visible = true;\n\n        if (this.hasPosedOnce === true) {\n          this.el.emit('ar-hit-test-select-start', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          if (inputSource.profiles[0] === profileToSupport) {\n            this.hitTest = transientHitTest;\n          } else {\n            this.hitTest = hitTestCache.get(inputSource) || new HitTest(renderer, {\n              space: inputSource.targetRaySpace\n            });\n            hitTestCache.set(inputSource, this.hitTest);\n          }\n        }\n      }.bind(this));\n\n      session.addEventListener('selectend', function (e) {\n        if (!this.hitTest || this.data.enabled !== true) {\n          this.hitTest = null;\n          return;\n        }\n\n        var inputSource = e.inputSource;\n        var object;\n\n        if (this.hasPosedOnce === true) {\n          this.bboxMesh.visible = false;\n\n          // if we have a target with a 3D object then automatically generate an anchor for it.\n          if (this.data.target) {\n            object = this.data.target.object3D;\n\n            if (object) {\n              applyPose.tempFakePose.transform.position.copy(this.bboxMesh.position);\n              applyPose.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion);\n              applyPose(applyPose.tempFakePose, object, this.bboxOffset);\n              object.visible = true;\n\n              // create an anchor attached to the object\n              this.hitTest.anchorFromLastHitTestResult(object, this.bboxOffset);\n            }\n          }\n\n          this.el.emit('ar-hit-test-select', {\n            inputSource: inputSource,\n            position: this.bboxMesh.position,\n            orientation: this.bboxMesh.quaternion\n          });\n\n          this.hitTest = null;\n        }\n      }.bind(this));\n    }.bind(this));\n\n    this.bboxOffset = new THREE.Vector3();\n    this.update = this.update.bind(this);\n    this.makeBBox();\n  },\n\n  update: function () {\n    // If it is disabled it's cleaned up\n    if (this.data.enabled === false) {\n      this.hitTest = null;\n      this.bboxMesh.visible = false;\n    }\n    if (this.data.target) {\n      if (this.data.target.object3D) {\n        this.data.target.addEventListener('model-loaded', this.update);\n        this.data.target.object3D.layers.enable(CAM_LAYER);\n        this.data.target.object3D.traverse(function (child) {\n          child.layers.enable(CAM_LAYER);\n        });\n      } else {\n        this.data.target.addEventListener('loaded', this.update, {once: true});\n      }\n    }\n    this.bboxNeedsUpdate = true;\n  },\n\n  makeBBox: function () {\n    var geometry = new THREE.PlaneGeometry(1, 1);\n    var material = new THREE.MeshBasicMaterial({\n      transparent: true,\n      color: 0xffffff\n    });\n    geometry.rotateX(-Math.PI / 2);\n    geometry.rotateY(-Math.PI / 2);\n    this.bbox = new THREE.Box3();\n    this.bboxMesh = new THREE.Mesh(geometry, material);\n    this.el.setObject3D('ar-hit-test', this.bboxMesh);\n    this.bboxMesh.visible = false;\n  },\n\n  updateFootprint: function () {\n    var tempImageData;\n    var renderer = this.el.sceneEl.renderer;\n    var oldRenderTarget, oldBackground;\n    var isXREnabled = renderer.xr.enabled;\n    this.bboxMesh.material.map = this.canvasTexture;\n    this.bboxMesh.material.needsUpdate = true;\n    this.orthoCam.rotation.set(-Math.PI / 2, 0, -Math.PI / 2);\n    this.orthoCam.position.copy(this.bboxMesh.position);\n    this.orthoCam.position.y -= this.bboxMesh.scale.y / 2;\n    this.orthoCam.near = 0.1;\n    this.orthoCam.far = this.orthoCam.near + (this.data.footprintDepth * this.bboxMesh.scale.y);\n    this.orthoCam.position.y += this.orthoCam.far;\n    this.orthoCam.right = this.bboxMesh.scale.z / 2;\n    this.orthoCam.left = -this.bboxMesh.scale.z / 2;\n    this.orthoCam.top = this.bboxMesh.scale.x / 2;\n    this.orthoCam.bottom = -this.bboxMesh.scale.x / 2;\n    this.orthoCam.updateProjectionMatrix();\n\n    oldRenderTarget = renderer.getRenderTarget();\n    renderer.setRenderTarget(this.textureTarget);\n    renderer.xr.enabled = false;\n    oldBackground = this.el.object3D.background;\n    this.el.object3D.overrideMaterial = this.basicMaterial;\n    this.el.object3D.background = null;\n    renderer.render(this.el.object3D, this.orthoCam);\n    this.el.object3D.background = oldBackground;\n    this.el.object3D.overrideMaterial = null;\n    renderer.xr.enabled = isXREnabled;\n    renderer.setRenderTarget(oldRenderTarget);\n    renderer.readRenderTargetPixels(this.textureTarget, 0, 0, 512, 512, this.imageDataArray);\n\n    this.context.putImageData(this.imageData, 0, 0);\n    this.context.shadowColor = 'white';\n    this.context.shadowBlur = 10;\n    this.context.drawImage(this.canvas, 0, 0);\n    tempImageData = this.context.getImageData(0, 0, 512, 512);\n    for (var i = 0; i < 512 * 512; i++) {\n      // if it's a little bit transparent but not opaque make it middle transparent\n      if (tempImageData.data[i * 4 + 3] !== 0 && tempImageData.data[i * 4 + 3] !== 255) {\n        tempImageData.data[i * 4 + 3] = 128;\n      }\n    }\n    this.context.putImageData(tempImageData, 0, 0);\n    this.canvasTexture.needsUpdate = true;\n  },\n  tick: function () {\n    var pose;\n    var frame = this.el.sceneEl.frame;\n    var renderer = this.el.sceneEl.renderer;\n\n    if (frame) {\n      // if we are in XR then update the positions of the objects attached to anchors\n      HitTest.updateAnchorPoses(frame, renderer.xr.getReferenceSpace());\n    }\n    if (this.bboxNeedsUpdate) {\n      this.bboxNeedsUpdate = false;\n\n      if (!this.data.target || this.data.type === 'map') {\n        var texture;\n        if (this.textureCache.has(this.data.src)) {\n          texture = this.textureCache.get(this.data.src);\n        } else {\n          texture = new THREE.TextureLoader().load(this.data.src);\n          this.textureCache.set(this.data.src, texture);\n        }\n        this.bboxMesh.material.map = texture;\n        this.bboxMesh.material.needsUpdate = true;\n      }\n\n      if (this.data.target && this.data.target.object3D) {\n        this.bbox.setFromObject(this.data.target.object3D);\n        this.bbox.getCenter(this.bboxMesh.position);\n        this.bbox.getSize(this.bboxMesh.scale);\n\n        if (this.data.type === 'footprint') {\n          // Add a little buffer for the footprint border\n          this.bboxMesh.scale.x *= 1.04;\n          this.bboxMesh.scale.z *= 1.04;\n          this.updateFootprint();\n        }\n\n        this.bboxMesh.position.y -= this.bboxMesh.scale.y / 2;\n        this.bboxOffset.copy(this.bboxMesh.position);\n        this.bboxOffset.sub(this.data.target.object3D.position);\n      } else {\n        this.bboxMesh.scale.set(this.data.mapSize.x, 1, this.data.mapSize.y);\n      }\n    }\n\n    if (this.hitTest) {\n      pose = this.hitTest.doHit(frame);\n      if (pose) {\n        if (this.hasPosedOnce !== true) {\n          this.hasPosedOnce = true;\n          this.el.emit('ar-hit-test-achieved');\n        }\n        this.bboxMesh.visible = true;\n        this.bboxMesh.position.copy(pose.transform.position);\n        this.bboxMesh.quaternion.copy(pose.transform.orientation);\n      }\n    }\n  }\n});\n","import * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('background', {\n  schema: {\n    color: { type: 'color', default: 'black' },\n    transparent: { default: false }\n  },\n  sceneOnly: true,\n  update: function () {\n    var data = this.data;\n    var object3D = this.el.object3D;\n\n    if (data.transparent) {\n      object3D.background = null;\n    } else {\n      object3D.background = new THREE.Color(data.color);\n    }\n  },\n\n  remove: function () {\n    var object3D = this.el.object3D;\n    object3D.background = null;\n  }\n});\n","import { registerComponent as register } from '../../core/component.js';\n\nexport var Component = register('debug', {\n  schema: {default: true},\n  sceneOnly: true\n});\n","/* global DeviceOrientationEvent */\nimport { registerComponent } from '../../core/component.js';\nimport { AFRAME_INJECTED } from '../../constants/index.js';\n\nvar MODAL_CLASS = 'a-modal';\nvar DIALOG_CLASS = 'a-dialog';\nvar DIALOG_TEXT_CLASS = 'a-dialog-text';\nvar DIALOG_TEXT_CONTAINER_CLASS = 'a-dialog-text-container';\nvar DIALOG_BUTTONS_CONTAINER_CLASS = 'a-dialog-buttons-container';\nvar DIALOG_BUTTON_CLASS = 'a-dialog-button';\nvar DIALOG_ALLOW_BUTTON_CLASS = 'a-dialog-allow-button';\nvar DIALOG_DENY_BUTTON_CLASS = 'a-dialog-deny-button';\nvar DIALOG_OK_BUTTON_CLASS = 'a-dialog-ok-button';\n\n/**\n * UI for enabling device motion permission\n */\nexport var Component = registerComponent('device-orientation-permission-ui', {\n  schema: {\n    enabled: {default: true},\n    deviceMotionMessage: {\n      default: 'This immersive website requires access to your device motion sensors.'\n    },\n    httpsMessage: {\n      default: 'Access this site over HTTPS to enter VR mode and grant access to the device sensors.'\n    },\n    denyButtonText: {default: 'Deny'},\n    allowButtonText: {default: 'Allow'},\n    cancelButtonText: {default: 'Cancel'}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n\n    if (!this.data.enabled) { return; }\n\n    if (!window.isSecureContext) {\n      this.showHTTPAlert();\n    }\n\n    // Browser doesn't support or doesn't require permission to DeviceOrientationEvent API.\n    if (typeof DeviceOrientationEvent === 'undefined' || !DeviceOrientationEvent.requestPermission) {\n      this.permissionGranted = true;\n      return;\n    }\n\n    this.onDeviceMotionDialogAllowClicked = this.onDeviceMotionDialogAllowClicked.bind(this);\n    this.onDeviceMotionDialogDenyClicked = this.onDeviceMotionDialogDenyClicked.bind(this);\n    // Show dialog only if permission has not yet been granted.\n    DeviceOrientationEvent.requestPermission().then(function () {\n      self.el.emit('deviceorientationpermissiongranted');\n      self.permissionGranted = true;\n    }).catch(function () {\n      self.devicePermissionDialogEl = createPermissionDialog(\n        self.data.denyButtonText,\n        self.data.allowButtonText,\n        self.data.deviceMotionMessage,\n        self.onDeviceMotionDialogAllowClicked,\n        self.onDeviceMotionDialogDenyClicked);\n      self.el.appendChild(self.devicePermissionDialogEl);\n    });\n  },\n\n  remove: function () {\n    // This removes the modal screen\n    if (this.devicePermissionDialogEl) { this.el.removeChild(this.devicePermissionDialogEl); }\n  },\n\n  onDeviceMotionDialogDenyClicked: function () {\n    this.remove();\n  },\n\n  showHTTPAlert: function () {\n    var self = this;\n    var httpAlertEl = createAlertDialog(\n      self.data.cancelButtonText,\n      self.data.httpsMessage,\n      function () { self.el.removeChild(httpAlertEl); });\n    this.el.appendChild(httpAlertEl);\n  },\n\n  /**\n   * Enable device motion permission when clicked.\n   */\n  onDeviceMotionDialogAllowClicked: function () {\n    var self = this;\n    this.el.emit('deviceorientationpermissionrequested');\n    DeviceOrientationEvent.requestPermission().then(function (response) {\n      if (response === 'granted') {\n        self.el.emit('deviceorientationpermissiongranted');\n        self.permissionGranted = true;\n      } else {\n        self.el.emit('deviceorientationpermissionrejected');\n      }\n      self.remove();\n    }).catch(console.error);\n  }\n});\n\n/**\n * Create a modal dialog that request users permission to access the Device Motion API.\n *\n * @param {string} denyText\n * @param {string} allowText\n * @param {string} dialogText\n * @param {function} onAllowClicked - click event handler\n * @param {function} onDenyClicked - click event handler\n *\n * @returns {Element} Wrapper <div>.\n */\nfunction createPermissionDialog (\n  denyText, allowText, dialogText, onAllowClicked, onDenyClicked) {\n  var buttonsContainer;\n  var denyButton;\n  var acceptButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  denyButton = document.createElement('button');\n  denyButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_DENY_BUTTON_CLASS);\n  denyButton.setAttribute(AFRAME_INJECTED, '');\n  denyButton.innerHTML = denyText;\n  buttonsContainer.appendChild(denyButton);\n\n  acceptButton = document.createElement('button');\n  acceptButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_ALLOW_BUTTON_CLASS);\n  acceptButton.setAttribute(AFRAME_INJECTED, '');\n  acceptButton.innerHTML = allowText;\n  buttonsContainer.appendChild(acceptButton);\n\n  // Ask for sensor events to be used\n  acceptButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onAllowClicked();\n  });\n\n  denyButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onDenyClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createAlertDialog (closeText, dialogText, onOkClicked) {\n  var buttonsContainer;\n  var okButton;\n\n  buttonsContainer = document.createElement('div');\n  buttonsContainer.classList.add(DIALOG_BUTTONS_CONTAINER_CLASS);\n\n  // Buttons\n  okButton = document.createElement('button');\n  okButton.classList.add(DIALOG_BUTTON_CLASS, DIALOG_OK_BUTTON_CLASS);\n  okButton.setAttribute(AFRAME_INJECTED, '');\n  okButton.innerHTML = closeText;\n  buttonsContainer.appendChild(okButton);\n\n  // Ask for sensor events to be used\n  okButton.addEventListener('click', function (evt) {\n    evt.stopPropagation();\n    onOkClicked();\n  });\n\n  return createDialog(dialogText, buttonsContainer);\n}\n\nfunction createDialog (text, buttonsContainerEl) {\n  var modalContainer;\n  var dialog;\n  var dialogTextContainer;\n  var dialogText;\n\n  modalContainer = document.createElement('div');\n  modalContainer.classList.add(MODAL_CLASS);\n  modalContainer.setAttribute(AFRAME_INJECTED, '');\n\n  dialog = document.createElement('div');\n  dialog.className = DIALOG_CLASS;\n  dialog.setAttribute(AFRAME_INJECTED, '');\n  modalContainer.appendChild(dialog);\n\n  dialogTextContainer = document.createElement('div');\n  dialogTextContainer.classList.add(DIALOG_TEXT_CONTAINER_CLASS);\n  dialog.appendChild(dialogTextContainer);\n\n  dialogText = document.createElement('div');\n  dialogText.classList.add(DIALOG_TEXT_CLASS);\n  dialogText.innerHTML = text;\n  dialogTextContainer.appendChild(dialogText);\n\n  dialog.appendChild(buttonsContainerEl);\n\n  return modalContainer;\n}\n","import { registerComponent } from '../../core/component.js';\n\n/**\n * Component to embed an a-frame scene within the layout of a 2D page.\n */\nexport var Component = registerComponent('embedded', {\n  dependencies: ['xr-mode-ui'],\n\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  update: function () {\n    var sceneEl = this.el;\n    var enterVREl = sceneEl.querySelector('.a-enter-vr');\n    if (this.data === true) {\n      if (enterVREl) { enterVREl.classList.add('embedded'); }\n      sceneEl.removeFullScreenStyles();\n    } else {\n      if (enterVREl) { enterVREl.classList.remove('embedded'); }\n      sceneEl.addFullScreenStyles();\n    }\n  }\n\n});\n","/* global AFRAME, INSPECTOR_VERSION */\nimport { AFRAME_INJECTED } from '../../constants/index.js';\nimport { registerComponent } from '../../core/component.js';\nimport pkg from '../../../package.json';\nimport * as utils from '../../utils/index.js';\n\n/**\n * 0.4.2 to 0.4.x\n * Will need to update this when A-Frame goes to 1.x.x.\n */\nfunction getFuzzyPatchVersion (version) {\n  var split = version.split('.');\n  split[2] = 'x';\n  return split.join('.');\n}\n\nvar INSPECTOR_DEV_URL = 'https://aframe.io/aframe-inspector/dist/aframe-inspector.js';\nvar INSPECTOR_RELEASE_URL = 'https://unpkg.com/aframe-inspector@' + getFuzzyPatchVersion(pkg.version) + '/dist/aframe-inspector.min.js';\nvar INSPECTOR_URL = typeof INSPECTOR_VERSION !== 'undefined' && INSPECTOR_VERSION === 'dev' ? INSPECTOR_DEV_URL : INSPECTOR_RELEASE_URL;\nvar LOADING_MESSAGE = 'Loading Inspector';\nvar LOADING_ERROR_MESSAGE = 'Error loading Inspector';\n\nexport var Component = registerComponent('inspector', {\n  schema: {\n    url: {default: INSPECTOR_URL}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.firstPlay = true;\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n    this.initOverlay();\n    window.addEventListener('keydown', this.onKeydown);\n    window.addEventListener('message', this.onMessage);\n  },\n\n  play: function () {\n    var urlParam;\n    if (!this.firstPlay) { return; }\n    urlParam = utils.getUrlParameter('inspector');\n    if (urlParam !== 'false' && !!urlParam) {\n      this.openInspector();\n      this.firstPlay = false;\n    }\n  },\n\n  initOverlay: function () {\n    var dotsHTML = '<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>';\n    this.loadingMessageEl = document.createElement('div');\n    this.loadingMessageEl.classList.add('a-inspector-loader');\n    this.loadingMessageEl.innerHTML = LOADING_MESSAGE + dotsHTML;\n  },\n\n  remove: function () {\n    this.removeEventListeners();\n  },\n\n  /**\n   * <ctrl> + <alt> + i keyboard shortcut.\n   */\n  onKeydown: function (evt) {\n    var shortcutPressed = evt.keyCode === 73 && (evt.ctrlKey && evt.altKey || evt.getModifierState('AltGraph'));\n    if (!shortcutPressed) { return; }\n    this.openInspector();\n  },\n\n  showLoader: function () {\n    document.body.appendChild(this.loadingMessageEl);\n  },\n\n  hideLoader: function () {\n    document.body.removeChild(this.loadingMessageEl);\n  },\n\n  /**\n   * postMessage. aframe.io uses this to create a button on examples to open Inspector.\n   */\n  onMessage: function (evt) {\n    if (evt.data === 'INJECT_AFRAME_INSPECTOR') { this.openInspector(); }\n  },\n\n  openInspector: function (focusEl) {\n    var self = this;\n    var script;\n\n    // Already injected. Open.\n    if (AFRAME.INSPECTOR || AFRAME.inspectorInjected) {\n      AFRAME.INSPECTOR.open(focusEl);\n      return;\n    }\n\n    this.showLoader();\n\n    // Inject.\n    script = document.createElement('script');\n    script.src = this.data.url;\n    script.setAttribute('data-name', 'aframe-inspector');\n    script.setAttribute(AFRAME_INJECTED, '');\n    script.onload = function () {\n      AFRAME.INSPECTOR.open(focusEl);\n      self.hideLoader();\n      self.removeEventListeners();\n    };\n    script.onerror = function () {\n      self.loadingMessageEl.innerHTML = LOADING_ERROR_MESSAGE;\n    };\n    document.head.appendChild(script);\n    AFRAME.inspectorInjected = true;\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeydown);\n    window.removeEventListener('message', this.onMessage);\n  }\n});\n","import { registerComponent as register } from '../../core/component.js';\nimport * as THREE from 'three';\n\n/**\n * Fog component.\n * Applies only to the scene entity.\n */\nexport var Component = register('fog', {\n  schema: {\n    color: {type: 'color', default: '#000'},\n    density: {default: 0.00025},\n    far: {default: 1000, min: 0},\n    near: {default: 1, min: 0},\n    type: {default: 'linear', oneOf: ['linear', 'exponential']}\n  },\n\n  sceneOnly: true,\n\n  update: function () {\n    var data = this.data;\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n\n    // (Re)create fog if fog doesn't exist or fog type changed.\n    if (!fog || data.type !== fog.name) {\n      el.object3D.fog = getFog(data);\n      return;\n    }\n\n    // Fog data changed. Update fog.\n    Object.keys(this.schema).forEach(function (key) {\n      var value = data[key];\n      if (key === 'color') { value = new THREE.Color(value); }\n      fog[key] = value;\n    });\n  },\n\n  /**\n   * Remove fog on remove (callback).\n   */\n  remove: function () {\n    var el = this.el;\n    var fog = this.el.object3D.fog;\n    if (!fog) { return; }\n\n    el.object3D.fog = null;\n  }\n});\n\n/**\n * Creates a fog object. Sets fog.name to be able to detect fog type changes.\n *\n * @param {object} data - Fog data.\n * @returns {object} fog\n */\nfunction getFog (data) {\n  var fog;\n  if (data.type === 'exponential') {\n    fog = new THREE.FogExp2(data.color, data.density);\n  } else {\n    fog = new THREE.Fog(data.color, data.near, data.far);\n  }\n  fog.name = data.type;\n  return fog;\n}\n","import { registerComponent } from '../../core/component.js';\nimport { shouldCaptureKeyEvent } from '../../utils/index.js';\n\nexport var Component = registerComponent('keyboard-shortcuts', {\n  schema: {\n    enterVR: {default: true},\n    exitVR: {default: true}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    this.onKeyup = this.onKeyup.bind(this);\n  },\n\n  play: function () {\n    window.addEventListener('keyup', this.onKeyup, false);\n  },\n\n  pause: function () {\n    window.removeEventListener('keyup', this.onKeyup);\n  },\n\n  onKeyup: function (evt) {\n    var scene = this.el;\n    if (!shouldCaptureKeyEvent(evt)) { return; }\n    if (this.data.enterVR && evt.keyCode === 70) {  // f.\n      scene.enterVR();\n    }\n    if (this.data.exitVR && evt.keyCode === 27) {   // escape.\n      scene.exitVR();\n    }\n  }\n});\n","import { debug } from '../../utils/index.js';\nimport { registerComponent } from '../../core/component.js';\n\nvar warn = debug('components:pool:warn');\n\n/**\n * Pool component to reuse entities.\n * Avoids creating and destroying the same kind of entities.\n * Helps reduce GC pauses. For example in a game to reuse enemies entities.\n *\n * @member {array} availableEls - Available entities in the pool.\n * @member {array} usedEls - Entities of the pool in use.\n */\nexport var Component = registerComponent('pool', {\n  schema: {\n    container: {default: ''},\n    mixin: {default: ''},\n    size: {default: 0},\n    dynamic: {default: false}\n  },\n\n  sceneOnly: true,\n\n  multiple: true,\n\n  initPool: function () {\n    var i;\n\n    this.availableEls = [];\n    this.usedEls = [];\n\n    if (!this.data.mixin) {\n      warn('No mixin provided for pool component.');\n    }\n\n    if (this.data.container) {\n      this.container = document.querySelector(this.data.container);\n      if (!this.container) {\n        warn('Container ' + this.data.container + ' not found.');\n      }\n    }\n    this.container = this.container || this.el;\n\n    for (i = 0; i < this.data.size; ++i) {\n      this.createEntity();\n    }\n  },\n\n  update: function (oldData) {\n    var data = this.data;\n    if (oldData.mixin !== data.mixin || oldData.size !== data.size) {\n      this.initPool();\n    }\n  },\n\n  /**\n   * Add a new entity to the list of available entities.\n   */\n  createEntity: function () {\n    var el;\n    el = document.createElement('a-entity');\n    el.play = this.wrapPlay(el.play);\n    el.setAttribute('mixin', this.data.mixin);\n    el.object3D.visible = false;\n    el.pause();\n    this.container.appendChild(el);\n    this.availableEls.push(el);\n\n    var usedEls = this.usedEls;\n    el.addEventListener('loaded', function () {\n      if (usedEls.indexOf(el) !== -1) { return; }\n      el.object3DParent = el.object3D.parent;\n      el.object3D.parent.remove(el.object3D);\n    });\n  },\n\n  /**\n   * Play wrapper for pooled entities. When pausing and playing a scene, don't want to play\n   * entities that are not in use.\n   */\n  wrapPlay: function (playMethod) {\n    var usedEls = this.usedEls;\n    return function () {\n      if (usedEls.indexOf(this) === -1) { return; }\n      playMethod.call(this);\n    };\n  },\n\n  /**\n   * Used to request one of the available entities of the pool.\n   */\n  requestEntity: function () {\n    var el;\n    if (this.availableEls.length === 0) {\n      if (this.data.dynamic === false) {\n        warn('Requested entity from empty pool: ' + this.attrName);\n        return;\n      } else {\n        warn('Requested entity from empty pool. This pool is dynamic and will resize ' +\n             'automatically. You might want to increase its initial size: ' + this.attrName);\n      }\n      this.createEntity();\n    }\n    el = this.availableEls.shift();\n    this.usedEls.push(el);\n    if (el.object3DParent) {\n      el.object3DParent.add(el.object3D);\n      this.updateRaycasters();\n    }\n    el.object3D.visible = true;\n    return el;\n  },\n\n  /**\n   * Used to return a used entity to the pool.\n   */\n  returnEntity: function (el) {\n    var index = this.usedEls.indexOf(el);\n    if (index === -1) {\n      warn('The returned entity was not previously pooled from ' + this.attrName);\n      return;\n    }\n    this.usedEls.splice(index, 1);\n    this.availableEls.push(el);\n    el.object3DParent = el.object3D.parent;\n    el.object3D.parent.remove(el.object3D);\n    this.updateRaycasters();\n    el.object3D.visible = false;\n    el.pause();\n    return el;\n  },\n\n  updateRaycasters: function () {\n    var raycasterEls = document.querySelectorAll('[raycaster]');\n\n    raycasterEls.forEach(function (el) {\n      el.components['raycaster'].setDirty();\n    });\n  }\n});\n","/* global XRPlane */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\n/**\n * Real World Meshing.\n *\n * Create entities with meshes corresponding to 3D surfaces detected in user's environment.\n * It requires a browser with support for the WebXR Mesh and Plane detection modules.\n *\n */\nexport var Component = register('real-world-meshing', {\n  schema: {\n    filterLabels: {type: 'array'},\n    meshesEnabled: {default: true},\n    meshMixin: {default: ''},\n    planesEnabled: {default: true},\n    planeMixin: {default: ''}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var webxrData = this.el.getAttribute('webxr');\n    var requiredFeaturesArray = webxrData.requiredFeatures;\n    if (requiredFeaturesArray.indexOf('mesh-detection') === -1) {\n      requiredFeaturesArray.push('mesh-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    if (requiredFeaturesArray.indexOf('plane-detection') === -1) {\n      requiredFeaturesArray.push('plane-detection');\n      this.el.setAttribute('webxr', webxrData);\n    }\n    this.meshEntities = [];\n    this.initWorldMeshEntity = this.initWorldMeshEntity.bind(this);\n  },\n\n  tick: function () {\n    if (!this.el.is('ar-mode')) { return; }\n    this.detectMeshes();\n    this.updateMeshes();\n  },\n\n  detectMeshes: function () {\n    var data = this.data;\n    var detectedMeshes;\n    var detectedPlanes;\n    var sceneEl = this.el;\n    var frame;\n    var meshEntities = this.meshEntities;\n    var present = false;\n    var newMeshes = [];\n    var filterLabels = this.data.filterLabels;\n\n    frame = sceneEl.frame;\n    detectedMeshes = frame.detectedMeshes;\n    detectedPlanes = frame.detectedPlanes;\n\n    for (var i = 0; i < meshEntities.length; i++) {\n      meshEntities[i].present = false;\n    }\n\n    if (data.meshesEnabled) {\n      for (var mesh of detectedMeshes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    if (data.planesEnabled) {\n      for (mesh of detectedPlanes.values()) {\n        // Ignore meshes that don't match the filterLabels.\n        if (filterLabels.length && filterLabels.indexOf(mesh.semanticLabel) === -1) { continue; }\n        for (i = 0; i < meshEntities.length; i++) {\n          if (mesh === meshEntities[i].mesh) {\n            present = true;\n            meshEntities[i].present = true;\n            if (meshEntities[i].lastChangedTime < mesh.lastChangedTime) {\n              this.updateMeshGeometry(meshEntities[i].el, mesh);\n            }\n            meshEntities[i].lastChangedTime = mesh.lastChangedTime;\n            break;\n          }\n        }\n        if (!present) { newMeshes.push(mesh); }\n        present = false;\n      }\n    }\n\n    this.deleteMeshes();\n    this.createNewMeshes(newMeshes);\n  },\n\n  updateMeshes: (function () {\n    var auxMatrix = new THREE.Matrix4();\n    return function () {\n      var meshPose;\n      var sceneEl = this.el;\n      var meshEl;\n      var frame = sceneEl.frame;\n      var meshEntities = this.meshEntities;\n      var referenceSpace = sceneEl.renderer.xr.getReferenceSpace();\n      var meshSpace;\n      for (var i = 0; i < meshEntities.length; i++) {\n        meshSpace = meshEntities[i].mesh.meshSpace || meshEntities[i].mesh.planeSpace;\n        meshPose = frame.getPose(meshSpace, referenceSpace);\n        meshEl = meshEntities[i].el;\n        if (!meshEl.hasLoaded) { continue; }\n        auxMatrix.fromArray(meshPose.transform.matrix);\n        auxMatrix.decompose(meshEl.object3D.position, meshEl.object3D.quaternion, meshEl.object3D.scale);\n      }\n    };\n  })(),\n\n  deleteMeshes: function () {\n    var meshEntities = this.meshEntities;\n    var newMeshEntities = [];\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (!meshEntities[i].present) {\n        this.el.removeChild(meshEntities[i]);\n      } else {\n        newMeshEntities.push(meshEntities[i]);\n      }\n    }\n    this.meshEntities = newMeshEntities;\n  },\n\n  createNewMeshes: function (newMeshes) {\n    var meshEl;\n    for (var i = 0; i < newMeshes.length; i++) {\n      meshEl = document.createElement('a-entity');\n      this.meshEntities.push({\n        mesh: newMeshes[i],\n        el: meshEl\n      });\n      meshEl.addEventListener('loaded', this.initWorldMeshEntity);\n      this.el.appendChild(meshEl);\n    }\n  },\n\n  initMeshGeometry: function (mesh) {\n    var geometry;\n    var shape;\n    var polygon;\n\n    if (mesh instanceof XRPlane) {\n      shape = new THREE.Shape();\n      polygon = mesh.polygon;\n      for (var i = 0; i < polygon.length; ++i) {\n        if (i === 0) {\n          shape.moveTo(polygon[i].x, polygon[i].z);\n        } else {\n          shape.lineTo(polygon[i].x, polygon[i].z);\n        }\n      }\n      geometry = new THREE.ShapeGeometry(shape);\n      geometry.rotateX(Math.PI / 2);\n      return geometry;\n    }\n\n    geometry = new THREE.BufferGeometry();\n    geometry.setAttribute(\n      'position',\n      new THREE.BufferAttribute(mesh.vertices, 3)\n    );\n    geometry.setIndex(new THREE.BufferAttribute(mesh.indices, 1));\n    return geometry;\n  },\n\n  initWorldMeshEntity: function (evt) {\n    var el = evt.target;\n    var geometry;\n    var mesh;\n    var meshEntity;\n    var meshEntities = this.meshEntities;\n    for (var i = 0; i < meshEntities.length; i++) {\n      if (meshEntities[i].el === el) {\n        meshEntity = meshEntities[i];\n        break;\n      }\n    }\n    geometry = this.initMeshGeometry(meshEntity.mesh);\n    mesh = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({color: Math.random() * 0xFFFFFF, side: THREE.DoubleSide}));\n    el.setObject3D('mesh', mesh);\n    if (meshEntity.mesh instanceof XRPlane && this.data.planeMixin) {\n      el.setAttribute('mixin', this.data.planeMixin);\n    } else {\n      if (this.data.meshMixin) {\n        el.setAttribute('mixin', this.data.meshMixin);\n      }\n    }\n    el.setAttribute('data-world-mesh', meshEntity.mesh.semanticLabel);\n  },\n\n  updateMeshGeometry: function (entityEl, mesh) {\n    var entityMesh = entityEl.getObject3D('mesh');\n    entityMesh.geometry.dispose();\n    entityMesh.geometry = this.initMeshGeometry(mesh);\n  }\n});\n","/* global XRWebGLBinding */\nimport * as THREE from 'three';\nimport { registerComponent as register } from '../../core/component.js';\n\n// source: view-source:https://storage.googleapis.com/chromium-webxr-test/r886480/proposals/lighting-estimation.html\nfunction updateLights (estimate, probeLight, directionalLight, directionalLightPosition) {\n  var intensityScalar =\n    Math.max(estimate.primaryLightIntensity.x,\n             Math.max(estimate.primaryLightIntensity.y,\n                      estimate.primaryLightIntensity.z));\n\n  probeLight.sh.fromArray(estimate.sphericalHarmonicsCoefficients);\n  probeLight.intensity = 3.14;\n\n  if (directionalLight) {\n    directionalLight.color.setRGB(\n      estimate.primaryLightIntensity.x / intensityScalar,\n      estimate.primaryLightIntensity.y / intensityScalar,\n      estimate.primaryLightIntensity.z / intensityScalar);\n\n    directionalLight.intensity = intensityScalar;\n    directionalLightPosition.copy(estimate.primaryLightDirection);\n  }\n}\n\nexport var Component = register('reflection', {\n  schema: {\n    directionalLight: { type: 'selector' }\n  },\n  sceneOnly: true,\n  init: function () {\n    var self = this;\n    this.cubeRenderTarget = new THREE.WebGLCubeRenderTarget(16);\n    this.cubeCamera = new THREE.CubeCamera(0.1, 1000, this.cubeRenderTarget);\n    this.lightingEstimationTexture = (new THREE.WebGLCubeRenderTarget(16)).texture;\n    this.needsVREnvironmentUpdate = true;\n\n    // Update WebXR to support light-estimation\n    var webxrData = this.el.getAttribute('webxr');\n    var optionalFeaturesArray = webxrData.optionalFeatures;\n    if (!optionalFeaturesArray.includes('light-estimation')) {\n      optionalFeaturesArray.push('light-estimation');\n      this.el.setAttribute('webxr', webxrData);\n    }\n\n    this.el.addEventListener('enter-vr', function () {\n      if (!self.el.is('ar-mode')) { return; }\n      var renderer = self.el.renderer;\n      var session = renderer.xr.getSession();\n      if (session.requestLightProbe) {\n        self.startLightProbe();\n      }\n    });\n\n    this.el.addEventListener('exit-vr', function () {\n      if (self.xrLightProbe) { self.stopLightProbe(); }\n    });\n\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  stopLightProbe: function () {\n    this.xrLightProbe = null;\n    if (this.probeLight) {\n      this.probeLight.components.light.light.intensity = 0;\n    }\n    this.needsVREnvironmentUpdate = true;\n    this.el.object3D.environment = this.cubeRenderTarget.texture;\n  },\n  startLightProbe: function () {\n    this.needsLightProbeUpdate = true;\n  },\n  setupLightProbe: function () {\n    var renderer = this.el.renderer;\n    var xrSession = renderer.xr.getSession();\n    var self = this;\n    var gl = renderer.getContext();\n\n    if (!this.probeLight) {\n      var probeLight = document.createElement('a-light');\n      probeLight.setAttribute('type', 'probe');\n      probeLight.setAttribute('intensity', 0);\n      this.el.appendChild(probeLight);\n      this.probeLight = probeLight;\n    }\n\n    // Ensure that we have any extensions needed to use the preferred cube map format.\n    switch (xrSession.preferredReflectionFormat) {\n      case 'srgba8':\n        gl.getExtension('EXT_sRGB');\n        break;\n\n      case 'rgba16f':\n        gl.getExtension('OES_texture_half_float');\n        break;\n    }\n\n    this.glBinding = new XRWebGLBinding(xrSession, gl);\n    gl.getExtension('EXT_sRGB');\n    gl.getExtension('OES_texture_half_float');\n\n    xrSession.requestLightProbe()\n      .then(function (lightProbe) {\n        self.xrLightProbe = lightProbe;\n        lightProbe.addEventListener('reflectionchange', self.updateXRCubeMap.bind(self));\n      })\n      .catch(function (err) {\n        console.warn('Lighting estimation not supported: ' + err.message);\n        console.warn('Are you missing: webxr=\"optionalFeatures: light-estimation;\" from <a-scene>?');\n      });\n  },\n  updateXRCubeMap: function () {\n    // Update Cube Map, cubeMap maybe some unavailable on some hardware\n    var renderer = this.el.renderer;\n    var cubeMap = this.glBinding.getReflectionCubeMap(this.xrLightProbe);\n    if (cubeMap) {\n      var rendererProps = renderer.properties.get(this.lightingEstimationTexture);\n      rendererProps.__webglTexture = cubeMap;\n      this.lightingEstimationTexture.needsPMREMUpdate = true;\n      this.el.object3D.environment = this.lightingEstimationTexture;\n    }\n  },\n  tick: function () {\n    var scene = this.el.object3D;\n    var renderer = this.el.renderer;\n    var frame = this.el.frame;\n\n    if (frame && this.xrLightProbe) {\n      // light estimate may not yet be available, it takes a few frames to start working\n      var estimate = frame.getLightEstimate(this.xrLightProbe);\n\n      if (estimate) {\n        updateLights(\n          estimate,\n          this.probeLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.components.light.light,\n          this.data.directionalLight && this.data.directionalLight.object3D.position\n        );\n      }\n    }\n\n    if (this.needsVREnvironmentUpdate) {\n      scene.environment = null;\n      this.needsVREnvironmentUpdate = false;\n      this.cubeCamera.position.set(0, 1.6, 0);\n      this.cubeCamera.update(renderer, scene);\n      scene.environment = this.cubeRenderTarget.texture;\n    }\n\n    if (this.needsLightProbeUpdate && frame) {\n      // wait until the XR Session has started before trying to make\n      // the light probe\n      this.setupLightProbe();\n      this.needsLightProbeUpdate = false;\n    }\n  },\n\n  remove: function () {\n    this.el.object3D.environment = null;\n    if (this.probeLight) {\n      this.el.removeChild(this.probeLight);\n    }\n  }\n});\n","/* global ImageData, URL */\nimport { registerComponent } from '../../core/component.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  'attribute vec3 position;',\n  'attribute vec2 uv;',\n  'uniform mat4 projectionMatrix;',\n  'uniform mat4 modelViewMatrix;',\n  'varying vec2 vUv;',\n  'void main()  {',\n  '  vUv = vec2( 1.- uv.x, uv.y );',\n  '  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  'precision mediump float;',\n  'uniform samplerCube map;',\n  'varying vec2 vUv;',\n  '#define M_PI 3.141592653589793238462643383279',\n  'void main() {',\n  '  vec2 uv = vUv;',\n  '  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;',\n  '  float latitude = uv.y * M_PI;',\n  '  vec3 dir = vec3(',\n  '    - sin( longitude ) * sin( latitude ),',\n  '    cos( latitude ),',\n  '    - cos( longitude ) * sin( latitude )',\n  '  );',\n  '  normalize( dir );',\n  '  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );',\n  '}'\n].join('\\n');\n\n/**\n * Component to take screenshots of the scene using a keyboard shortcut (alt+s).\n * It can be configured to either take 360&deg; captures (`equirectangular`)\n * or regular screenshots (`projection`)\n *\n * This is based on https://github.com/spite/THREE.CubemapToEquirectangular\n * To capture an equirectangular projection of the scene a THREE.CubeCamera is used\n * The cube map produced by the CubeCamera is projected on a quad and then rendered to\n * WebGLRenderTarget with an orthographic camera.\n */\nexport var Component = registerComponent('screenshot', {\n  schema: {\n    width: {default: 4096},\n    height: {default: 2048},\n    camera: {type: 'selector'}\n  },\n\n  sceneOnly: true,\n\n  setup: function () {\n    var el = this.el;\n    if (this.canvas) { return; }\n    var gl = el.renderer.getContext();\n    if (!gl) { return; }\n    this.cubeMapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n    this.material = new THREE.RawShaderMaterial({\n      uniforms: {map: {type: 't', value: null}},\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      side: THREE.DoubleSide\n    });\n    this.quad = new THREE.Mesh(\n      new THREE.PlaneGeometry(1, 1),\n      this.material\n    );\n    this.quad.visible = false;\n    this.camera = new THREE.OrthographicCamera(-1 / 2, 1 / 2, 1 / 2, -1 / 2, -10000, 10000);\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    el.object3D.add(this.quad);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  },\n\n  getRenderTarget: function (width, height) {\n    return new THREE.WebGLRenderTarget(width, height, {\n      colorSpace: this.el.sceneEl.renderer.outputColorSpace,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.LinearFilter,\n      wrapS: THREE.ClampToEdgeWrapping,\n      wrapT: THREE.ClampToEdgeWrapping,\n      format: THREE.RGBAFormat,\n      type: THREE.UnsignedByteType\n    });\n  },\n\n  resize: function (width, height) {\n    // Resize quad.\n    this.quad.scale.set(width, height, 1);\n\n    // Resize camera.\n    this.camera.left = -1 * width / 2;\n    this.camera.right = width / 2;\n    this.camera.top = height / 2;\n    this.camera.bottom = -1 * height / 2;\n    this.camera.updateProjectionMatrix();\n\n    // Resize canvas.\n    this.canvas.width = width;\n    this.canvas.height = height;\n  },\n\n  play: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n  },\n\n  /**\n   * <ctrl> + <alt> + s = Regular screenshot.\n   * <ctrl> + <alt> + <shift> + s = Equirectangular screenshot.\n  */\n  onKeyDown: function (evt) {\n    var shortcutPressed = evt.keyCode === 83 && evt.ctrlKey && evt.altKey;\n    if (!this.data || !shortcutPressed) { return; }\n    var projection = evt.shiftKey ? 'equirectangular' : 'perspective';\n    this.capture(projection);\n  },\n\n  /**\n   * Capture a screenshot of the scene.\n   *\n   * @param {string} projection - Screenshot projection (equirectangular or perspective).\n   */\n  setCapture: function (projection) {\n    var el = this.el;\n    var size;\n    var camera;\n    var cubeCamera;\n    var cubeRenderTarget;\n    // Configure camera.\n    if (projection === 'perspective') {\n      // Quad is only used in equirectangular mode. Hide it in this case.\n      this.quad.visible = false;\n      // Use scene camera.\n      camera = (this.data.camera && this.data.camera.components.camera.camera) || el.camera;\n      size = {width: this.data.width, height: this.data.height};\n    } else {\n      // Use ortho camera.\n      camera = this.camera;\n      cubeRenderTarget = new THREE.WebGLCubeRenderTarget(\n        Math.min(this.cubeMapSize, 2048),\n        {\n          format: THREE.RGBFormat,\n          generateMipmaps: true,\n          minFilter: THREE.LinearMipmapLinearFilter,\n          colorSpace: THREE.SRGBColorSpace\n        });\n      // Create cube camera and copy position from scene camera.\n      cubeCamera = new THREE.CubeCamera(el.camera.near, el.camera.far, cubeRenderTarget);\n      // Copy camera position into cube camera;\n      el.camera.getWorldPosition(cubeCamera.position);\n      el.camera.getWorldQuaternion(cubeCamera.quaternion);\n      // Render scene with cube camera.\n      cubeCamera.update(el.renderer, el.object3D);\n      this.quad.material.uniforms.map.value = cubeCamera.renderTarget.texture;\n      size = {width: this.data.width, height: this.data.height};\n      // Use quad to project image taken by the cube camera.\n      this.quad.visible = true;\n    }\n    return {\n      camera: camera,\n      size: size,\n      projection: projection\n    };\n  },\n\n  /**\n   * Maintained for backwards compatibility.\n   */\n  capture: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    var params;\n    this.setup();\n    // Disable VR.\n    renderer.xr.enabled = false;\n    params = this.setCapture(projection);\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Trigger file download.\n    this.saveCapture();\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n  },\n\n  /**\n   * Return canvas instead of triggering download (e.g., for uploading blob to server).\n   */\n  getCanvas: function (projection) {\n    var isVREnabled = this.el.renderer.xr.enabled;\n    var renderer = this.el.renderer;\n    this.setup();\n    // Disable VR.\n    var params = this.setCapture(projection);\n    renderer.xr.enabled = false;\n    this.renderCapture(params.camera, params.size, params.projection);\n    // Restore VR.\n    renderer.xr.enabled = isVREnabled;\n    return this.canvas;\n  },\n\n  renderCapture: function (camera, size, projection) {\n    var autoClear = this.el.renderer.autoClear;\n    var el = this.el;\n    var imageData;\n    var output;\n    var pixels;\n    var renderer = el.renderer;\n    // Create rendering target and buffer to store the read pixels.\n    output = this.getRenderTarget(size.width, size.height);\n    pixels = new Uint8Array(4 * size.width * size.height);\n    // Resize quad, camera, and canvas.\n    this.resize(size.width, size.height);\n    // Render scene to render target.\n    renderer.autoClear = true;\n    renderer.clear();\n    renderer.setRenderTarget(output);\n    renderer.render(el.object3D, camera);\n    renderer.autoClear = autoClear;\n    // Read image pixels back.\n    renderer.readRenderTargetPixels(output, 0, 0, size.width, size.height, pixels);\n    renderer.setRenderTarget(null);\n    if (projection === 'perspective') {\n      pixels = this.flipPixelsVertically(pixels, size.width, size.height);\n    }\n    imageData = new ImageData(new Uint8ClampedArray(pixels), size.width, size.height);\n    // Hide quad after projecting the image.\n    this.quad.visible = false;\n    // Copy pixels into canvas.\n    this.ctx.putImageData(imageData, 0, 0);\n  },\n\n  flipPixelsVertically: function (pixels, width, height) {\n    var flippedPixels = pixels.slice(0);\n    for (var x = 0; x < width; ++x) {\n      for (var y = 0; y < height; ++y) {\n        flippedPixels[x * 4 + y * width * 4] = pixels[x * 4 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 1 + y * width * 4] = pixels[x * 4 + 1 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 2 + y * width * 4] = pixels[x * 4 + 2 + (height - y) * width * 4];\n        flippedPixels[x * 4 + 3 + y * width * 4] = pixels[x * 4 + 3 + (height - y) * width * 4];\n      }\n    }\n    return flippedPixels;\n  },\n\n  /**\n   * Download capture to file.\n   */\n  saveCapture: function () {\n    this.canvas.toBlob(function (blob) {\n      var fileName = 'screenshot-' + document.title.toLowerCase() + '-' + Date.now() + '.png';\n      var linkEl = document.createElement('a');\n      var url = URL.createObjectURL(blob);\n      linkEl.href = url;\n      linkEl.setAttribute('download', fileName);\n      linkEl.innerHTML = 'downloading...';\n      linkEl.style.display = 'none';\n      document.body.appendChild(linkEl);\n      setTimeout(function () {\n        linkEl.click();\n        document.body.removeChild(linkEl);\n      }, 1);\n    }, 'image/png');\n  }\n});\n",null,null,null,"import Stats from 'stats-gl';\nimport { registerComponent } from '../../core/component.js';\n\nvar HIDDEN_CLASS = 'a-hidden';\n\nregisterComponent('stats', {\n  schema: {default: true},\n\n  sceneOnly: true,\n\n  init: function () {\n    this.stats = new Stats();\n    this.stats.init(this.el.renderer);\n    document.body.append(this.stats.dom);\n  },\n\n  tick: function () {\n    if (this.data) {\n      this.stats.update();\n    }\n  },\n\n  update: function () {\n    if (!this.stats) { return; }\n    return (!this.data) ? this.hide() : this.show();\n  },\n\n  remove: function () {\n    this.stats.dom.remove();\n  },\n\n  hide: function () {\n    this.stats.dom.classList.add(HIDDEN_CLASS);\n  },\n\n  show: function () {\n    this.stats.dom.classList.remove(HIDDEN_CLASS);\n  }\n});\n","import { registerComponent } from '../../core/component.js';\nimport * as constants from '../../constants/index.js';\nimport * as utils from '../../utils/index.js';\n\nvar ENTER_VR_CLASS = 'a-enter-vr';\nvar ENTER_AR_CLASS = 'a-enter-ar';\n\nvar ENTER_VR_BTN_CLASS = 'a-enter-vr-button';\nvar ENTER_AR_BTN_CLASS = 'a-enter-ar-button';\nvar HIDDEN_CLASS = 'a-hidden';\nvar ORIENTATION_MODAL_CLASS = 'a-orientation-modal';\n\n/**\n * UI for entering VR mode.\n */\nexport var Component = registerComponent('xr-mode-ui', {\n  dependencies: ['canvas'],\n\n  schema: {\n    enabled: {default: true},\n    enterVRButton: {default: ''},\n    enterVREnabled: {default: true},\n    enterARButton: {default: ''},\n    enterAREnabled: {default: true},\n    XRMode: {default: 'vr', oneOf: ['vr', 'ar', 'xr']}\n  },\n\n  sceneOnly: true,\n\n  init: function () {\n    var self = this;\n    var sceneEl = this.el;\n\n    if (utils.getUrlParameter('ui') === 'false') { return; }\n\n    this.insideLoader = false;\n    this.enterVREl = null;\n    this.enterAREl = null;\n\n    this.orientationModalEl = null;\n    this.bindMethods();\n\n    // Hide/show VR UI when entering/exiting VR mode.\n    sceneEl.addEventListener('enter-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('exit-vr', this.updateEnterInterfaces);\n    sceneEl.addEventListener('update-vr-devices', this.updateEnterInterfaces);\n\n    window.addEventListener('message', function (event) {\n      if (event.data.type === 'loaderReady') {\n        self.insideLoader = true;\n        self.remove();\n      }\n    });\n\n    // Modal that tells the user to change orientation if in portrait.\n    window.addEventListener('orientationchange', this.toggleOrientationModalIfNeeded);\n  },\n\n  bindMethods: function () {\n    this.onEnterVRButtonClick = this.onEnterVRButtonClick.bind(this);\n    this.onEnterARButtonClick = this.onEnterARButtonClick.bind(this);\n    this.onModalClick = this.onModalClick.bind(this);\n    this.toggleOrientationModalIfNeeded = this.toggleOrientationModalIfNeeded.bind(this);\n    this.updateEnterInterfaces = this.updateEnterInterfaces.bind(this);\n  },\n\n  /**\n   * Exit VR when modal clicked.\n   */\n  onModalClick: function () {\n    this.el.exitVR();\n  },\n\n  /**\n   * Enter VR when clicked.\n   */\n  onEnterVRButtonClick: function () {\n    this.el.enterVR();\n  },\n\n  /**\n   * Enter AR when clicked.\n   */\n  onEnterARButtonClick: function () {\n    this.el.enterAR();\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n\n    if (!data.enabled || this.insideLoader || utils.getUrlParameter('ui') === 'false') {\n      return this.remove();\n    }\n\n    if (this.enterVREl || this.enterAREl || this.orientationModalEl) { return; }\n\n    // Add UI if enabled and not already present.\n    if (!this.enterVREl && data.enterVREnabled && (data.XRMode === 'xr' || data.XRMode === 'vr')) {\n      if (data.enterVRButton) {\n        // Custom button.\n        this.enterVREl = document.querySelector(data.enterVRButton);\n        this.enterVREl.addEventListener('click', this.onEnterVRButtonClick);\n      } else {\n        this.enterVREl = createEnterVRButton(this.onEnterVRButtonClick);\n        sceneEl.appendChild(this.enterVREl);\n      }\n    }\n\n    if (!this.enterAREl && data.enterAREnabled && (data.XRMode === 'xr' || data.XRMode === 'ar')) {\n      if (data.enterARButton) {\n        // Custom button.\n        this.enterAREl = document.querySelector(data.enterARButton);\n        this.enterAREl.addEventListener('click', this.onEnterARButtonClick);\n      } else {\n        this.enterAREl = createEnterARButton(this.onEnterARButtonClick, data.XRMode === 'xr');\n        sceneEl.appendChild(this.enterAREl);\n      }\n    }\n\n    this.orientationModalEl = createOrientationModal(this.onModalClick);\n    sceneEl.appendChild(this.orientationModalEl);\n\n    this.updateEnterInterfaces();\n  },\n\n  remove: function () {\n    [this.enterVREl, this.enterAREl, this.orientationModalEl].forEach(function (uiElement) {\n      if (uiElement && uiElement.parentNode) {\n        uiElement.parentNode.removeChild(uiElement);\n      }\n    });\n    this.enterVREl = undefined;\n    this.enterAREl = undefined;\n    this.orientationModalEl = undefined;\n  },\n\n  updateEnterInterfaces: function () {\n    this.toggleEnterVRButtonIfNeeded();\n    this.toggleEnterARButtonIfNeeded();\n    this.toggleOrientationModalIfNeeded();\n  },\n\n  toggleEnterVRButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterVREl) { return; }\n    if (sceneEl.is('vr-mode') ||\n       ((sceneEl.isMobile || utils.device.isMobileDeviceRequestingDesktopSite()) && !utils.device.checkVRSupport())) {\n      this.enterVREl.classList.add(HIDDEN_CLASS);\n    } else {\n      if (!utils.device.checkVRSupport()) { this.enterVREl.classList.add('fullscreen'); }\n      this.enterVREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(false, true);\n    }\n  },\n\n  toggleEnterARButtonIfNeeded: function () {\n    var sceneEl = this.el;\n    if (!this.enterAREl) { return; }\n    // Hide the button while in a session, or if AR is not supported.\n    if (sceneEl.is('vr-mode') || !utils.device.checkARSupport()) {\n      this.enterAREl.classList.add(HIDDEN_CLASS);\n    } else {\n      this.enterAREl.classList.remove(HIDDEN_CLASS);\n      sceneEl.enterVR(true, true);\n    }\n  },\n\n  toggleOrientationModalIfNeeded: function () {\n    var sceneEl = this.el;\n    var orientationModalEl = this.orientationModalEl;\n    if (!orientationModalEl || !sceneEl.isMobile) { return; }\n    if (!utils.device.isLandscape() && sceneEl.is('vr-mode')) {\n      // Show if in VR mode on portrait.\n      orientationModalEl.classList.remove(HIDDEN_CLASS);\n    } else {\n      orientationModalEl.classList.add(HIDDEN_CLASS);\n    }\n  }\n});\n\n/**\n * Create a button that when clicked will enter into stereo-rendering mode for VR.\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterVRButton (onClick) {\n  var vrButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_VR_CLASS);\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  vrButton = document.createElement('button');\n  vrButton.className = ENTER_VR_BTN_CLASS;\n  vrButton.setAttribute('title',\n                        'Enter VR mode with a headset or fullscreen without');\n  vrButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(vrButton); }\n  // Insert elements.\n  wrapper.appendChild(vrButton);\n  vrButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Create a button that when clicked will enter into AR mode\n *\n * Structure: <div><button></div>\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createEnterARButton (onClick, xrMode) {\n  var arButton;\n  var wrapper;\n\n  // Create elements.\n  wrapper = document.createElement('div');\n  wrapper.classList.add(ENTER_AR_CLASS);\n  if (xrMode) { wrapper.classList.add('xr'); }\n  wrapper.setAttribute(constants.AFRAME_INJECTED, '');\n  arButton = document.createElement('button');\n  arButton.className = ENTER_AR_BTN_CLASS;\n  arButton.setAttribute('title',\n                        'Enter AR mode with a headset or handheld device.');\n  arButton.setAttribute(constants.AFRAME_INJECTED, '');\n  if (utils.device.isMobile()) { applyStickyHoverFix(arButton); }\n  // Insert elements.\n  wrapper.appendChild(arButton);\n  arButton.addEventListener('click', function (evt) {\n    onClick();\n    evt.stopPropagation();\n  });\n  return wrapper;\n}\n\n/**\n * Creates a modal dialog to request the user to switch to landscape orientation.\n *\n * @param {function} onClick - click event handler\n * @returns {Element} Wrapper <div>.\n */\nfunction createOrientationModal (onClick) {\n  var modal = document.createElement('div');\n  modal.className = ORIENTATION_MODAL_CLASS;\n  modal.classList.add(HIDDEN_CLASS);\n  modal.setAttribute(constants.AFRAME_INJECTED, '');\n\n  var exit = document.createElement('button');\n  exit.setAttribute(constants.AFRAME_INJECTED, '');\n  exit.innerHTML = 'Exit VR';\n\n  // Exit VR on close.\n  exit.addEventListener('click', onClick);\n\n  modal.appendChild(exit);\n\n  return modal;\n}\n\n/**\n * CSS hover state is sticky in iOS (as in 12/18/2019)\n * They are not removed on mouseleave and this function applies a class\n * to resets the style.\n *\n * @param {function} buttonEl - Button element\n */\nfunction applyStickyHoverFix (buttonEl) {\n  buttonEl.addEventListener('touchstart', function () {\n    buttonEl.classList.remove('resethover');\n  }, {passive: true});\n  buttonEl.addEventListener('touchend', function () {\n    buttonEl.classList.add('resethover');\n  }, {passive: true});\n}\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('box', {\n  schema: {\n    depth: {default: 1, min: 0},\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsDepth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.BoxGeometry(\n      data.width, data.height, data.depth,\n      data.segmentsWidth, data.segmentsHeight, data.segmentsDepth);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('circle', {\n  schema: {\n    radius: {default: 1, min: 0},\n    segments: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CircleGeometry(\n      data.radius, data.segments, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cone', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radiusBottom: {default: 1, min: 0},\n    radiusTop: {default: 0.01, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n      data.radiusTop, data.radiusBottom, data.height, data.segmentsRadial,\n      data.segmentsHeight, data.openEnded, degToRad(data.thetaStart),\n      degToRad(data.thetaLength));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('cylinder', {\n  schema: {\n    height: {default: 1, min: 0},\n    openEnded: {default: false},\n    radius: {default: 1, min: 0},\n    segmentsHeight: {default: 18, min: 1, type: 'int'},\n    segmentsRadial: {default: 36, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.CylinderGeometry(\n      data.radius, data.radius, data.height, data.segmentsRadial, data.segmentsHeight,\n      data.openEnded, degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('dodecahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.DodecahedronGeometry(data.radius, data.detail);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('icosahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.IcosahedronGeometry(data.radius, data.detail);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('octahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.OctahedronGeometry(data.radius, data.detail);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('plane', {\n  schema: {\n    height: {default: 1, min: 0},\n    width: {default: 1, min: 0},\n    segmentsHeight: {default: 1, min: 1, max: 20, type: 'int'},\n    segmentsWidth: {default: 1, min: 1, max: 20, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.PlaneGeometry(data.width, data.height, data.segmentsWidth, data.segmentsHeight);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('ring', {\n  schema: {\n    radiusInner: {default: 0.8, min: 0},\n    radiusOuter: {default: 1.2, min: 0},\n    segmentsPhi: {default: 10, min: 1, type: 'int'},\n    segmentsTheta: {default: 32, min: 3, type: 'int'},\n    thetaLength: {default: 360, min: 0},\n    thetaStart: {default: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.RingGeometry(\n      data.radiusInner, data.radiusOuter, data.segmentsTheta, data.segmentsPhi,\n      degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('sphere', {\n  schema: {\n    radius: {default: 1, min: 0},\n    phiLength: {default: 360},\n    phiStart: {default: 0, min: 0},\n    thetaLength: {default: 180, min: 0},\n    thetaStart: {default: 0},\n    segmentsHeight: {default: 18, min: 2, type: 'int'},\n    segmentsWidth: {default: 36, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.SphereGeometry(\n      data.radius, data.segmentsWidth, data.segmentsHeight, degToRad(data.phiStart),\n      degToRad(data.phiLength), degToRad(data.thetaStart), degToRad(data.thetaLength));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('tetrahedron', {\n  schema: {\n    detail: {default: 0, min: 0, max: 5, type: 'int'},\n    radius: {default: 1, min: 0}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TetrahedronGeometry(data.radius, data.detail);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar degToRad = THREE.MathUtils.degToRad;\n\nregisterGeometry('torus', {\n  schema: {\n    arc: {default: 360},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 36, min: 2, type: 'int'},\n    segmentsTubular: {default: 32, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsRadial, data.segmentsTubular,\n      degToRad(data.arc));\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nregisterGeometry('torusKnot', {\n  schema: {\n    p: {default: 2, min: 1},\n    q: {default: 3, min: 1},\n    radius: {default: 1, min: 0},\n    radiusTubular: {default: 0.2, min: 0},\n    segmentsRadial: {default: 8, min: 3, type: 'int'},\n    segmentsTubular: {default: 100, min: 3, type: 'int'}\n  },\n\n  init: function (data) {\n    this.geometry = new THREE.TorusKnotGeometry(\n      data.radius, data.radiusTubular * 2, data.segmentsTubular, data.segmentsRadial,\n      data.p, data.q);\n  }\n});\n","import * as THREE from 'three';\nimport { registerGeometry } from '../core/geometry.js';\n\nvar quaternion = new THREE.Quaternion();\nvar rotateVector = new THREE.Vector3(0, 0, 1);\nvar uvMinVector = new THREE.Vector2();\nvar uvMaxVector = new THREE.Vector2();\nvar uvScaleVector = new THREE.Vector2();\n\nregisterGeometry('triangle', {\n  schema: {\n    vertexA: {type: 'vec3', default: {x: 0, y: 0.5, z: 0}},\n    vertexB: {type: 'vec3', default: {x: -0.5, y: -0.5, z: 0}},\n    vertexC: {type: 'vec3', default: {x: 0.5, y: -0.5, z: 0}}\n  },\n\n  init: function (data) {\n    var geometry;\n    var normal;\n    var triangle;\n    var uvA;\n    var uvB;\n    var uvC;\n\n    var vertices;\n    var normals;\n    var uvs;\n\n    triangle = new THREE.Triangle();\n    triangle.a.set(data.vertexA.x, data.vertexA.y, data.vertexA.z);\n    triangle.b.set(data.vertexB.x, data.vertexB.y, data.vertexB.z);\n    triangle.c.set(data.vertexC.x, data.vertexC.y, data.vertexC.z);\n    normal = triangle.getNormal(new THREE.Vector3());\n\n    // Rotate the 3D triangle to be parallel to XY plane.\n    quaternion.setFromUnitVectors(normal, rotateVector);\n    uvA = triangle.a.clone().applyQuaternion(quaternion);\n    uvB = triangle.b.clone().applyQuaternion(quaternion);\n    uvC = triangle.c.clone().applyQuaternion(quaternion);\n\n    // Compute UVs.\n    // Normalize x/y values of UV so they are within 0 to 1.\n    uvMinVector.set(Math.min(uvA.x, uvB.x, uvC.x), Math.min(uvA.y, uvB.y, uvC.y));\n    uvMaxVector.set(Math.max(uvA.x, uvB.x, uvC.x), Math.max(uvA.y, uvB.y, uvC.y));\n    uvScaleVector.set(0, 0).subVectors(uvMaxVector, uvMinVector);\n    uvA = new THREE.Vector2().subVectors(uvA, uvMinVector).divide(uvScaleVector);\n    uvB = new THREE.Vector2().subVectors(uvB, uvMinVector).divide(uvScaleVector);\n    uvC = new THREE.Vector2().subVectors(uvC, uvMinVector).divide(uvScaleVector);\n\n    geometry = this.geometry = new THREE.BufferGeometry();\n    vertices = [\n      triangle.a.x, triangle.a.y, triangle.a.z,\n      triangle.b.x, triangle.b.y, triangle.b.z,\n      triangle.c.x, triangle.c.y, triangle.c.z\n    ];\n    normals = [\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z,\n      normal.x, normal.y, normal.z\n    ];\n    uvs = [\n      uvA.x, uvA.y,\n      uvB.x, uvB.y,\n      uvC.x, uvC.y\n    ];\n\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));\n    geometry.setAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));\n    geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\n  }\n});\n","import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\n\n/**\n * Flat shader using THREE.MeshBasicMaterial.\n */\nexport var Shader = registerShader('flat', {\n  schema: {\n    color: {type: 'color'},\n    fog: {default: true},\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2},\n    toneMapped: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshBasicMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to reuse.\n * @returns {object} Updated material data.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.fog = data.fog;\n  materialData.wireframe = data.wireframe;\n  materialData.toneMapped = data.toneMapped;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  return materialData;\n}\n","import * as THREE from 'three';\nimport { registerShader } from '../core/shader.js';\nimport * as utils from '../utils/index.js';\n\n/**\n * Standard (physically-based) shader using THREE.MeshStandardMaterial.\n */\nexport var Shader = registerShader('standard', {\n  schema: {\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n    ambientOcclusionTextureOffset: {type: 'vec2'},\n    ambientOcclusionTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    color: {type: 'color'},\n\n    displacementMap: {type: 'map'},\n    displacementScale: {default: 1},\n    displacementBias: {default: 0.5},\n    displacementTextureOffset: {type: 'vec2'},\n    displacementTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    emissive: {type: 'color', default: '#000'},\n    emissiveIntensity: {default: 1},\n\n    envMap: {default: ''},\n\n    fog: {default: true},\n\n    metalness: {default: 0.0, min: 0.0, max: 1.0},\n    metalnessMap: {type: 'map'},\n    metalnessTextureOffset: {type: 'vec2'},\n    metalnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    normalMap: {type: 'map'},\n    normalScale: {type: 'vec2', default: {x: 1, y: 1}},\n    normalTextureOffset: {type: 'vec2'},\n    normalTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    offset: {type: 'vec2', default: {x: 0, y: 0}},\n    repeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    roughness: {default: 0.5, min: 0.0, max: 1.0},\n    roughnessMap: {type: 'map'},\n    roughnessTextureOffset: {type: 'vec2'},\n    roughnessTextureRepeat: {type: 'vec2', default: {x: 1, y: 1}},\n\n    sphericalEnvMap: {type: 'map'},\n    src: {type: 'map'},\n    wireframe: {default: false},\n    wireframeLinewidth: {default: 2}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = {color: new THREE.Color(), emissive: new THREE.Color()};\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshStandardMaterial(this.materialData);\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('metalness', this, data);\n    utils.material.updateDistortionMap('roughness', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    var material = this.material;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.metalness = data.metalness;\n  materialData.roughness = data.roughness;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n\n  if (data.normalMap) { materialData.normalScale = data.normalScale; }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n","import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\nimport * as utils from '../utils/index.js';\n\n/**\n * Phong shader using THREE.MeshPhongMaterial.\n */\nexport var Shader = registerShader('phong', {\n  schema: {\n    color: { type: 'color' },\n    emissive: { type: 'color', default: 'black' },\n    emissiveIntensity: { default: 1 },\n    specular: { type: 'color', default: '#111111' },\n    transparent: { default: false },\n    fog: { default: true },\n    offset: { type: 'vec2', default: { x: 0, y: 0 } },\n    repeat: { type: 'vec2', default: { x: 1, y: 1 } },\n    src: { type: 'map' },\n    envMap: { default: '' },\n    sphericalEnvMap: { type: 'map' },\n    shininess: { default: 30 },\n    flatShading: { default: false },\n    wireframe: { default: false },\n    wireframeLinewidth: { default: 2 },\n    combine: { oneOF: ['multiply', 'mix', 'add'], default: 'mix' },\n    reflectivity: { default: 0.9 },\n    refractionRatio: { default: 0.98 },\n    refract: { default: false },\n\n    normalMap: { type: 'map' },\n    normalScale: { type: 'vec2', default: { x: 1, y: 1 } },\n    normalTextureOffset: { type: 'vec2' },\n    normalTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    ambientOcclusionMap: {type: 'map'},\n    ambientOcclusionMapIntensity: {default: 1},\n\n    displacementMap: { type: 'map' },\n    displacementScale: { default: 1 },\n    displacementBias: { default: 0.5 },\n    displacementTextureOffset: { type: 'vec2' },\n    displacementTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } },\n\n    bumpMap: { type: 'map' },\n    bumpMapScale: { default: 1 },\n    bumpTextureOffset: { type: 'vec2' },\n    bumpTextureRepeat: { type: 'vec2', default: { x: 1, y: 1 } }\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.materialData = { color: new THREE.Color(), specular: new THREE.Color(), emissive: new THREE.Color() };\n    getMaterialData(data, this.materialData);\n    this.material = new THREE.MeshPhongMaterial(this.materialData);\n    var sceneEl = this.el.sceneEl;\n    // Fallback to scene environment when no envMap is defined (matching behaviour of standard material)\n    Object.defineProperty(this.material, 'envMap', {\n      get: function () {\n        return this._envMap || sceneEl.object3D.environment;\n      },\n      set: function (value) {\n        this._envMap = value;\n      }\n    });\n  },\n\n  update: function (data) {\n    this.updateMaterial(data);\n    utils.material.updateMap(this, data);\n    utils.material.updateDistortionMap('normal', this, data);\n    utils.material.updateDistortionMap('displacement', this, data);\n    utils.material.updateDistortionMap('ambientOcclusion', this, data);\n    utils.material.updateDistortionMap('bump', this, data);\n    utils.material.updateEnvMap(this, data);\n  },\n\n  /**\n   * Updating existing material.\n   *\n   * @param {object} data - Material component data.\n   */\n  updateMaterial: function (data) {\n    var key;\n    getMaterialData(data, this.materialData);\n    for (key in this.materialData) {\n      this.material[key] = this.materialData[key];\n    }\n  }\n});\n\n/**\n * Builds and normalize material data, normalizing stuff along the way.\n *\n * @param {object} data - Material data.\n * @param {object} materialData - Object to use.\n * @returns {object} Updated materialData.\n */\nfunction getMaterialData (data, materialData) {\n  materialData.color.set(data.color);\n  materialData.specular.set(data.specular);\n  materialData.emissive.set(data.emissive);\n  materialData.emissiveIntensity = data.emissiveIntensity;\n  materialData.fog = data.fog;\n  materialData.transparent = data.transparent;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.shininess = data.shininess;\n  materialData.flatShading = data.flatShading;\n  materialData.wireframe = data.wireframe;\n  materialData.wireframeLinewidth = data.wireframeLinewidth;\n  materialData.reflectivity = data.reflectivity;\n  materialData.refractionRatio = data.refractionRatio;\n\n  switch (data.combine) {\n    case 'mix':\n      materialData.combine = THREE.MixOperation;\n      break;\n    case 'multiply':\n      materialData.combine = THREE.MultiplyOperation;\n      break;\n    case 'add':\n      materialData.combine = THREE.AddOperation;\n      break;\n  }\n\n  if (data.normalMap) {\n    materialData.normalScale = data.normalScale;\n  }\n\n  if (data.ambientOcclusionMap) {\n    materialData.aoMapIntensity = data.ambientOcclusionMapIntensity;\n  }\n\n  if (data.bumpMap) {\n    materialData.bumpScale = data.bumpMapScale;\n  }\n\n  if (data.displacementMap) {\n    materialData.displacementScale = data.displacementScale;\n    materialData.displacementBias = data.displacementBias;\n  }\n\n  return materialData;\n}\n","import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float contour(float width, float value) {',\n  '  return smoothstep(0.5 - value, 0.5 + value, width);',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec2 uv = vUV;',\n  '  vec4 texColor = texture(map, uv);',\n  '  float dist = texColor.a;',\n  '  float width = fwidth(dist);',\n  '  float alpha = contour(dist, width);',\n  '  float dscale = 0.353505;',\n\n  '  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n     // When texel is too small, blend raw alpha value rather than supersampling.\n     // FIXME: experimentally determined constant\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * dist;',\n  '  }',\n\n     // Otherwise do weighted supersampling.\n     // FIXME: why this weighting?\n  '  if (isBigEnough <= BIG_ENOUGH) {',\n  '    vec4 box = vec4 (uv - duv, uv + duv);',\n  '    alpha = (alpha + 0.5 * (',\n  '      contour(texture(map, box.xy).a, width)',\n  '      + contour(texture(map, box.zw).a, width)',\n  '      + contour(texture(map, box.xw).a, width)',\n  '      + contour(texture(map, box.zy).a, width)',\n  '    )) / 3.0;',\n  '  }',\n\n       // Do modified alpha test.\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n\n  '  gl_FragColor = vec4(color, opacity * alpha);',\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('sdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n    this.uniforms = this.initUniforms();\n    // When using the WebGPURenderer there is no UniformsLib or UniformsUtils.\n    if (THREE.UniformsUtils) {\n      this.uniforms = THREE.UniformsUtils.merge([\n        THREE.UniformsLib.fog,\n        this.uniforms\n      ]);\n    }\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      fog: true\n    });\n    return this.material;\n  }\n});\n","import { registerShader } from '../core/shader.js';\nimport * as THREE from 'three';\n\nvar VERTEX_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_vertex>',\n  '#include <logdepthbuf_pars_vertex>',\n\n  'out vec2 vUV;',\n\n  'void main(void) {',\n  '  vUV = uv;',\n  '  #include <begin_vertex>',\n  '  #include <project_vertex>',\n  '  #include <logdepthbuf_vertex>',\n  '  #include <fog_vertex>',\n  '}'\n].join('\\n');\n\nvar FRAGMENT_SHADER = [\n  '#include <common>',\n  '#include <fog_pars_fragment>',\n  '#include <logdepthbuf_pars_fragment>',\n\n  'uniform bool negate;',\n  'uniform float alphaTest;',\n  'uniform float opacity;',\n  'uniform sampler2D map;',\n  'uniform vec3 color;',\n  'in vec2 vUV;',\n\n  'float median(float r, float g, float b) {',\n  '  return max(min(r, g), min(max(r, g), b));',\n  '}',\n\n  // FIXME: Experimentally determined constants.\n  '#define BIG_ENOUGH 0.001',\n  '#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)',\n\n  'void main() {',\n  '  vec3 sampleColor = texture(map, vUV).rgb;',\n  '  if (negate) { sampleColor = 1.0 - sampleColor; }',\n\n  '  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;',\n  '  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);',\n  '  float dscale = 0.353505;',\n  '  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));',\n  '  float isBigEnough = max(abs(duv.x), abs(duv.y));',\n\n  // When texel is too small, blend raw alpha value rather than supersampling.\n  // FIXME: Experimentally determined constant.\n  '  // Do modified alpha test.',\n  '  if (isBigEnough > BIG_ENOUGH) {',\n  '    float ratio = BIG_ENOUGH / isBigEnough;',\n  '    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);',\n  '  }',\n\n  '  // Do modified alpha test.',\n  '  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }',\n  '  gl_FragColor = vec4(color.xyz, alpha * opacity);',\n\n  '  #include <logdepthbuf_fragment>',\n  '  #include <tonemapping_fragment>',\n  '  #include <colorspace_fragment>',\n  '  #include <fog_fragment>',\n  '}'\n].join('\\n');\n\n/**\n * Multi-channel signed distance field.\n * Used by text component.\n */\nexport var Shader = registerShader('msdf', {\n  schema: {\n    alphaTest: {type: 'number', is: 'uniform', default: 0.5},\n    color: {type: 'color', is: 'uniform', default: 'white'},\n    map: {type: 'map', is: 'uniform'},\n    negate: {type: 'boolean', is: 'uniform', default: true},\n    opacity: {type: 'number', is: 'uniform', default: 1.0}\n  },\n\n  vertexShader: VERTEX_SHADER,\n\n  fragmentShader: FRAGMENT_SHADER,\n\n  init: function () {\n    this.uniforms = this.initUniforms();\n    // When using the WebGPURenderer there is no UniformsLib or UniformsUtils.\n    if (THREE.UniformsUtils) {\n      this.uniforms = THREE.UniformsUtils.merge([\n        THREE.UniformsLib.fog,\n        this.uniforms\n      ]);\n    }\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: this.vertexShader,\n      fragmentShader: this.fragmentShader,\n      fog: true\n    });\n    return this.material;\n  }\n});\n","import * as THREE from 'three';\nimport { registerShader } from '../core/shader.js';\n\n/**\n * Flat shader using THREE.ShadowMaterial.\n */\nexport var Shader = registerShader('shadow', {\n  schema: {\n    opacity: {default: 0.5},\n    transparent: {default: true},\n    alphaToCoverage: {default: true}\n  },\n\n  /**\n   * Initializes the shader.\n   * Adds a reference from the scene to this entity as the camera.\n   */\n  init: function (data) {\n    this.material = new THREE.ShadowMaterial();\n  },\n\n  update: function (data) {\n    this.material.opacity = data.opacity;\n    this.material.alphaToCoverage = data.alphaToCoverage;\n    this.material.transparent = data.transparent;\n  }\n});\n","import * as constants from '../constants/index.js';\nimport { registerSystem } from '../core/system.js';\n\nvar DEFAULT_CAMERA_ATTR = 'data-aframe-default-camera';\n\n/**\n * Camera system. Manages which camera is active among multiple cameras in scene.\n *\n * @member {object} activeCameraEl - Active camera entity.\n */\nexport var System = registerSystem('camera', {\n  init: function () {\n    this.activeCameraEl = null;\n\n    this.render = this.render.bind(this);\n    this.unwrapRender = this.unwrapRender.bind(this);\n    this.wrapRender = this.wrapRender.bind(this);\n\n    this.initialCameraFound = false;\n    this.numUserCameras = 0;\n    this.numUserCamerasChecked = 0;\n    this.setupInitialCamera();\n  },\n\n  /**\n   * Setup initial camera, either searching for camera or\n   * creating a default camera if user has not added one during the initial scene traversal.\n   * We want sceneEl.camera to be ready, set, and initialized before the rest of the scene\n   * loads.\n   *\n   * Default camera offset height is at average eye level (~1.6m).\n   */\n  setupInitialCamera: function () {\n    var cameraEls;\n    var i;\n    var sceneEl = this.sceneEl;\n    var self = this;\n\n    // Camera already defined or the one defined it is an spectator one.\n    if (sceneEl.camera && !sceneEl.camera.el.getAttribute('camera').spectator) {\n      sceneEl.emit('cameraready', {cameraEl: sceneEl.camera.el});\n      return;\n    }\n\n    // Search for initial user-defined camera.\n    cameraEls = sceneEl.querySelectorAll('a-camera, :not(a-mixin)[camera]');\n\n    // No user cameras, create default one.\n    if (!cameraEls.length) {\n      this.createDefaultCamera();\n      return;\n    }\n\n    this.numUserCameras = cameraEls.length;\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEls[i].addEventListener('object3dset', function (evt) {\n        if (evt.detail.type !== 'camera') { return; }\n        self.checkUserCamera(this);\n      });\n\n      // Load camera and wait for camera to initialize.\n      if (cameraEls[i].isANode) {\n        cameraEls[i].load();\n      } else {\n        cameraEls[i].addEventListener('nodeready', function () {\n          this.load();\n        });\n      }\n    }\n  },\n\n  /**\n   * Check if a user-defined camera entity is appropriate to be initial camera.\n   * (active + non-spectator).\n   *\n   * Keep track of the number of cameras we checked and whether we found one.\n   */\n  checkUserCamera: function (cameraEl) {\n    var cameraData;\n    var sceneEl = this.el.sceneEl;\n    this.numUserCamerasChecked++;\n\n    // Already found one.\n    if (this.initialCameraFound) { return; }\n\n    // Check if camera is appropriate for being the initial camera.\n    cameraData = cameraEl.getAttribute('camera');\n    if (!cameraData.active || cameraData.spectator) {\n      // No user cameras eligible, create default camera.\n      if (this.numUserCamerasChecked === this.numUserCameras) {\n        this.createDefaultCamera();\n      }\n      return;\n    }\n\n    this.initialCameraFound = true;\n    sceneEl.camera = cameraEl.getObject3D('camera');\n    sceneEl.emit('cameraready', {cameraEl: cameraEl});\n  },\n\n  createDefaultCamera: function () {\n    var defaultCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Set up default camera.\n    defaultCameraEl = document.createElement('a-entity');\n    defaultCameraEl.setAttribute('camera', {active: true});\n    defaultCameraEl.setAttribute('position', {\n      x: 0,\n      y: constants.DEFAULT_CAMERA_HEIGHT,\n      z: 0\n    });\n    defaultCameraEl.setAttribute('wasd-controls', '');\n    defaultCameraEl.setAttribute('look-controls', '');\n    defaultCameraEl.setAttribute(constants.AFRAME_INJECTED, '');\n\n    defaultCameraEl.addEventListener('object3dset', function (evt) {\n      if (evt.detail.type !== 'camera') { return; }\n      sceneEl.camera = evt.detail.object;\n      sceneEl.emit('cameraready', {cameraEl: defaultCameraEl});\n    });\n\n    sceneEl.appendChild(defaultCameraEl);\n  },\n\n  /**\n   * Set a different active camera.\n   * When we choose a (sort of) random scene camera as the replacement, set its `active` to\n   * true. The camera component will call `setActiveCamera` and handle passing the torch to\n   * the new camera.\n   */\n  disableActiveCamera: function () {\n    var cameraEls;\n    var newActiveCameraEl;\n    cameraEls = this.sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    newActiveCameraEl = cameraEls[cameraEls.length - 1];\n    newActiveCameraEl.setAttribute('camera', 'active', true);\n  },\n\n  /**\n   * Set active camera to be used by renderer.\n   * Removes the default camera (if present).\n   * Disables all other cameras in the scene.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setActiveCamera: function (newCameraEl) {\n    var cameraEl;\n    var cameraEls;\n    var i;\n    var newCamera;\n    var previousCamera = this.activeCameraEl;\n    var sceneEl = this.sceneEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.activeCameraEl) { return; }\n\n    // Grab the default camera.\n    var defaultCameraWrapper = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n    var defaultCameraEl = defaultCameraWrapper &&\n                          defaultCameraWrapper.querySelector(':not(a-mixin)[camera]');\n\n    // Remove default camera if new camera is not the default camera.\n    if (newCameraEl !== defaultCameraEl) { removeDefaultCamera(sceneEl); }\n\n    // Make new camera active.\n    this.activeCameraEl = newCameraEl;\n    this.activeCameraEl.play();\n    sceneEl.camera = newCamera;\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'active', false);\n    }\n\n    // Disable other cameras in the scene\n    cameraEls = sceneEl.querySelectorAll(':not(a-mixin)[camera]');\n    for (i = 0; i < cameraEls.length; i++) {\n      cameraEl = cameraEls[i];\n      if (!cameraEl.isEntity || newCameraEl === cameraEl) { continue; }\n      cameraEl.setAttribute('camera', 'active', false);\n      cameraEl.pause();\n    }\n    sceneEl.emit('camera-set-active', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Set spectator camera to render the scene on a 2D display.\n   *\n   * @param {Element} newCameraEl - Entity with camera component.\n   */\n  setSpectatorCamera: function (newCameraEl) {\n    var newCamera;\n    var previousCamera = this.spectatorCameraEl;\n    var sceneEl = this.sceneEl;\n    var spectatorCameraEl;\n\n    // Same camera.\n    newCamera = newCameraEl.getObject3D('camera');\n    if (!newCamera || newCameraEl === this.spectatorCameraEl) { return; }\n\n    // Disable current camera\n    if (previousCamera) {\n      previousCamera.setAttribute('camera', 'spectator', false);\n    }\n\n    spectatorCameraEl = this.spectatorCameraEl = newCameraEl;\n\n    sceneEl.addEventListener('enter-vr', this.wrapRender);\n    sceneEl.addEventListener('exit-vr', this.unwrapRender);\n\n    spectatorCameraEl.setAttribute('camera', 'active', false);\n    spectatorCameraEl.play();\n\n    sceneEl.emit('camera-set-spectator', {cameraEl: newCameraEl});\n  },\n\n  /**\n   * Disables current spectator camera.\n   */\n  disableSpectatorCamera: function () {\n    this.spectatorCameraEl = undefined;\n  },\n\n  /**\n   * Wrap the render method of the renderer to render\n   * the spectator camera.\n   */\n  wrapRender: function () {\n    if (!this.spectatorCameraEl || this.originalRender) { return; }\n    this.originalRender = this.sceneEl.renderer.render;\n    this.sceneEl.renderer.render = this.render;\n  },\n\n  unwrapRender: function () {\n    if (!this.originalRender) { return; }\n    this.sceneEl.renderer.render = this.originalRender;\n    this.originalRender = undefined;\n  },\n\n  render: function (scene, camera) {\n    var isVREnabled;\n    var sceneEl = this.sceneEl;\n    var spectatorCamera;\n\n    isVREnabled = sceneEl.renderer.xr.enabled;\n    this.originalRender.call(sceneEl.renderer, scene, camera);\n    if (!this.spectatorCameraEl || sceneEl.isMobile || !isVREnabled) { return; }\n    spectatorCamera = this.spectatorCameraEl.components.camera.camera;\n    sceneEl.renderer.xr.enabled = false;\n    this.originalRender.call(sceneEl.renderer, scene, spectatorCamera);\n    sceneEl.renderer.xr.enabled = isVREnabled;\n  }\n});\n\n/**\n * Remove injected default camera from scene, if present.\n *\n * @param {Element} sceneEl\n */\nfunction removeDefaultCamera (sceneEl) {\n  var defaultCamera;\n  var camera = sceneEl.camera;\n  if (!camera) { return; }\n\n  // Remove default camera if present.\n  defaultCamera = sceneEl.querySelector('[' + DEFAULT_CAMERA_ATTR + ']');\n  if (!defaultCamera) { return; }\n  sceneEl.removeChild(defaultCamera);\n}\n","import { geometries } from '../core/geometry.js';\nimport { registerSystem } from '../core/system.js';\n\n/**\n * System for geometry component.\n * Handle geometry caching.\n *\n * @member {object} cache - Mapping of stringified component data to THREE.BufferGeometry objects.\n * @member {object} cacheCount - Keep track of number of entities using a geometry to\n *         know whether to dispose on removal.\n */\nexport var System = registerSystem('geometry', {\n  init: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Reset cache. Mainly for testing.\n   */\n  clearCache: function () {\n    this.cache = {};\n    this.cacheCount = {};\n  },\n\n  /**\n   * Attempt to retrieve from cache.\n   *\n   * @returns {object|null} A geometry if it exists, else null.\n   */\n  getOrCreateGeometry: function (data) {\n    var cache = this.cache;\n    var cachedGeometry;\n    var hash;\n\n    // Skip all caching logic.\n    if (data.skipCache) { return createGeometry(data); }\n\n    // Try to retrieve from cache first.\n    hash = this.hash(data);\n    cachedGeometry = cache[hash];\n    incrementCacheCount(this.cacheCount, hash);\n\n    if (cachedGeometry) { return cachedGeometry; }\n\n    // Create geometry.\n    cachedGeometry = createGeometry(data);\n\n    // Cache and return geometry.\n    cache[hash] = cachedGeometry;\n    return cachedGeometry;\n  },\n\n  /**\n   * Let system know that an entity is no longer using a geometry.\n   */\n  unuseGeometry: function (data) {\n    var cache = this.cache;\n    var cacheCount = this.cacheCount;\n    var geometry;\n    var hash;\n\n    if (data.skipCache) { return; }\n\n    hash = this.hash(data);\n\n    if (!cache[hash]) { return; }\n\n    decrementCacheCount(cacheCount, hash);\n\n    // Another entity is still using this geometry. No need to do anything.\n    if (cacheCount[hash] > 0) { return; }\n\n    // No more entities are using this geometry. Dispose.\n    geometry = cache[hash];\n    geometry.dispose();\n    delete cache[hash];\n    delete cacheCount[hash];\n  },\n\n  /**\n   * Use JSON.stringify to turn component data into hash.\n   * Should be deterministic within a single browser engine.\n   * If not, then look into json-stable-stringify.\n   */\n  hash: function (data) {\n    return JSON.stringify(data);\n  }\n});\n\n/**\n * Create geometry using component data.\n *\n * @param {object} data - Component data.\n * @returns {object} Geometry.\n */\nfunction createGeometry (data) {\n  var geometryType = data.primitive;\n  var GeometryClass = geometries[geometryType] && geometries[geometryType].Geometry;\n  var geometryInstance = new GeometryClass();\n\n  if (!GeometryClass) { throw new Error('Unknown geometry `' + geometryType + '`'); }\n\n  geometryInstance.init(data);\n  return geometryInstance.geometry;\n}\n\n/**\n * Decrease count of entity using a geometry.\n */\nfunction decrementCacheCount (cacheCount, hash) {\n  cacheCount[hash]--;\n}\n\n/**\n * Increase count of entity using a geometry.\n */\nfunction incrementCacheCount (cacheCount, hash) {\n  cacheCount[hash] = cacheCount[hash] === undefined ? 1 : cacheCount[hash] + 1;\n}\n","import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';\nimport { KTX2Loader } from 'three/addons/loaders/KTX2Loader.js';\nimport { registerSystem } from '../core/system.js';\n\nfunction fetchScript (src) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    document.body.appendChild(script);\n    script.onload = resolve;\n    script.onerror = reject;\n    script.async = true;\n    script.src = src;\n  });\n}\n\n/**\n * glTF model system.\n *\n * Configures glTF loading options. Models using glTF compression require that a Draco decoder be\n * provided externally.\n *\n * @param {string} dracoDecoderPath - Base path from which to load Draco decoder library.\n * @param {string} basisTranscoderPath - Base path from which to load Basis transcoder library.\n * @param {string} meshoptDecoderPath - Full path from which to load Meshopt decoder.\n */\nexport var System = registerSystem('gltf-model', {\n  schema: {\n    dracoDecoderPath: {default: 'https://www.gstatic.com/draco/versioned/decoders/1.5.7/'},\n    basisTranscoderPath: {default: ''},\n    meshoptDecoderPath: {default: ''}\n  },\n\n  init: function () {\n    this.update();\n  },\n\n  update: function () {\n    var dracoDecoderPath = this.data.dracoDecoderPath;\n    var basisTranscoderPath = this.data.basisTranscoderPath;\n    var meshoptDecoderPath = this.data.meshoptDecoderPath;\n    if (!this.dracoLoader && dracoDecoderPath) {\n      this.dracoLoader = new DRACOLoader();\n      this.dracoLoader.setDecoderPath(dracoDecoderPath);\n    }\n    if (!this.ktx2Loader && basisTranscoderPath) {\n      this.ktx2Loader = new KTX2Loader();\n      this.ktx2Loader.setTranscoderPath(basisTranscoderPath).detectSupport(this.el.renderer);\n    }\n    if (!this.meshoptDecoder && meshoptDecoderPath) {\n      this.meshoptDecoder = fetchScript(meshoptDecoderPath)\n        .then(function () { return window.MeshoptDecoder.ready; })\n        .then(function () { return window.MeshoptDecoder; });\n    }\n  },\n\n  getDRACOLoader: function () {\n    return this.dracoLoader;\n  },\n\n  getKTX2Loader: function () {\n    return this.ktx2Loader;\n  },\n\n  getMeshoptDecoder: function () {\n    return this.meshoptDecoder;\n  }\n});\n","import { registerSystem } from '../core/system.js';\nimport * as constants from '../constants/index.js';\n\nvar DEFAULT_LIGHT_ATTR = 'data-aframe-default-light';\n\n/**\n * Light system.\n *\n * Prescribes default lighting if not specified (one ambient, one directional).\n * Removes default lighting from the scene when a new light is added.\n *\n * @param {boolean} defaultLights - Whether default lighting are defined.\n * @param {boolean} userDefinedLights - Whether user lighting is defined.\n */\nexport var System = registerSystem('light', {\n  schema: {\n    defaultLightsEnabled: {default: true}\n  },\n\n  init: function () {\n    this.defaultLights = false;\n    this.userDefinedLights = false;\n    // Wait for all entities to fully load before checking for existence of lights.\n    // Since entities wait for <a-assets> to load, any lights attaching to the scene\n    // will do so asynchronously.\n    this.sceneEl.addEventListener('loaded', this.setupDefaultLights.bind(this));\n  },\n\n  /**\n   * Notify scene that light has been added and to remove the default.\n   *\n   * @param {object} el - element holding the light component.\n   */\n  registerLight: function (el) {\n    if (!el.hasAttribute(DEFAULT_LIGHT_ATTR)) {\n      // User added a light, remove default lights through DOM.\n      this.removeDefaultLights();\n      this.userDefinedLights = true;\n    }\n  },\n\n  removeDefaultLights: function () {\n    var defaultLights;\n    var sceneEl = this.sceneEl;\n\n    if (!this.defaultLights) { return; }\n    defaultLights = document.querySelectorAll('[' + DEFAULT_LIGHT_ATTR + ']');\n    for (var i = 0; i < defaultLights.length; i++) {\n      sceneEl.removeChild(defaultLights[i]);\n    }\n    this.defaultLights = false;\n  },\n\n  /**\n   * Prescribe default lights to the scene.\n   * Does so by injecting markup such that this state is not invisible.\n   * These lights are removed if the user adds any lights.\n   */\n  setupDefaultLights: function () {\n    var sceneEl = this.sceneEl;\n    var ambientLight;\n    var directionalLight;\n\n    if (this.userDefinedLights || this.defaultLights || !this.data.defaultLightsEnabled) {\n      return;\n    }\n\n    ambientLight = document.createElement('a-entity');\n    ambientLight.setAttribute('light', {color: '#BBB', type: 'ambient'});\n    ambientLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    ambientLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(ambientLight);\n\n    directionalLight = document.createElement('a-entity');\n    directionalLight.setAttribute('light', {color: '#FFF', intensity: 1.884, castShadow: true});\n    directionalLight.setAttribute('position', {x: -0.5, y: 1, z: 1});\n    directionalLight.setAttribute(DEFAULT_LIGHT_ATTR, '');\n    directionalLight.setAttribute(constants.AFRAME_INJECTED, '');\n    sceneEl.appendChild(directionalLight);\n\n    this.defaultLights = true;\n  }\n});\n","import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\nimport { setTextureProperties, createCompatibleTexture } from '../utils/material.js';\n\nvar debug = utils.debug;\nvar error = debug('components:texture:error');\nvar warn = debug('components:texture:warn');\nvar ImageLoader = new THREE.ImageLoader();\n\n/**\n * System for material component.\n * Handle material registration, updates (for fog), and texture caching.\n *\n * @member {object} materials - Registered materials.\n * @member {object} sourceCache - Texture source cache for, Image, Video and Canvas sources\n */\nexport var System = registerSystem('material', {\n  init: function () {\n    this.materials = {};\n    this.sourceCache = {};\n  },\n\n  clearTextureSourceCache: function () {\n    this.sourceCache = {};\n  },\n\n  /**\n   * Loads and creates a texture for a given `src`.\n   *\n   * @param {string|Element} src - URL or element\n   * @param {object} data - Relevant texture properties\n   * @param {function} cb - Callback to pass texture to\n   */\n  loadTexture: function (src, data, cb) {\n    this.loadTextureSource(src, function sourceLoaded (source) {\n      var texture = createCompatibleTexture(source);\n      setTextureProperties(texture, data);\n      cb(texture);\n    });\n  },\n\n  /**\n   * Determine whether `src` is an image or video. Then try to load the asset, then call back.\n   *\n   * @param {string|Element} src - URL or element.\n   * @param {function} cb - Callback to pass texture source to.\n   */\n  loadTextureSource: function (src, cb) {\n    var self = this;\n    var sourceCache = this.sourceCache;\n\n    var hash = this.hash(src);\n    if (sourceCache[hash]) {\n      sourceCache[hash].then(cb);\n      return;\n    }\n\n    // Canvas.\n    if (src.tagName === 'CANVAS') {\n      sourceLoaded(new THREE.Source(src));\n      return;\n    }\n\n    sourceLoaded(new Promise(doSourceLoad));\n    function doSourceLoad (resolve, reject) {\n      utils.srcLoader.validateSrc(src, loadImageCb, loadVideoCb);\n      function loadImageCb (src) { self.loadImage(src, resolve); }\n      function loadVideoCb (src) { self.loadVideo(src, resolve); }\n    }\n\n    function sourceLoaded (sourcePromise) {\n      sourceCache[hash] = Promise.resolve(sourcePromise);\n      sourceCache[hash].then(cb);\n    }\n  },\n\n  /**\n   * Load the six individual sides and construct a cube texture, then call back.\n   *\n   * @param {Array<string|Element>} srcs - Array of six texture URLs or elements.\n   * @param {function} cb - Callback to pass cube texture to.\n   */\n  loadCubeMapTexture: function (srcs, cb) {\n    var self = this;\n    var loaded = 0;\n    var cube = new THREE.CubeTexture();\n    cube.colorSpace = THREE.SRGBColorSpace;\n\n    function loadSide (index) {\n      self.loadTextureSource(srcs[index], function (source) {\n        cube.images[index] = source.data;\n        loaded++;\n        if (loaded === 6) {\n          cube.needsUpdate = true;\n          cb(cube);\n        }\n      });\n    }\n\n    if (srcs.length !== 6) {\n      warn('Cube map texture requires exactly 6 sources, got only %s sources', srcs.length);\n      return;\n    }\n\n    for (var i = 0; i < srcs.length; i++) {\n      loadSide(i);\n    }\n  },\n\n  /**\n   * High-level function for loading image textures (THREE.Texture).\n   *\n   * @param {string|Element} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadImage: function (src, cb) {\n    // Image element provided\n    if (typeof src !== 'string') {\n      cb(new THREE.Source(src));\n      return;\n    }\n\n    cb(loadImageUrl(src));\n  },\n\n  /**\n   * Load video texture (THREE.VideoTexture).\n   * Which is just an image texture that RAFs + needsUpdate.\n   * Note that creating a video texture is synchronous unlike loading an image texture.\n   * Made asynchronous to be consistent with image textures.\n   *\n   * @param {string|Element} src - Texture source.\n   * @param {function} cb - Callback to pass texture to.\n   */\n  loadVideo: function (src, cb) {\n    var videoEl;\n\n    // Video element provided.\n    if (typeof src !== 'string') {\n      // Check cache before creating texture.\n      videoEl = src;\n\n      // Fix up the attributes then start to create the texture.\n      fixVideoAttributes(videoEl);\n    }\n\n    // Only URL provided. Use video element to create texture.\n    videoEl = videoEl || createVideoEl(src);\n\n    cb(new THREE.Source(videoEl));\n  },\n\n  /**\n   * Create a hash for a given source.\n   */\n  hash: function (src) {\n    if (src.tagName) {\n      // Prefer element's ID or source, otherwise fallback to the element itself\n      return src.id || src.src || src;\n    }\n    return src;\n  },\n\n  /**\n   * Keep track of material in case an update trigger is needed (e.g., fog).\n   *\n   * @param {object} material\n   */\n  registerMaterial: function (material) {\n    this.materials[material.uuid] = material;\n  },\n\n  /**\n   * Stop tracking material, and dispose of any textures not being used by\n   * another material component.\n   *\n   * @param {object} material\n   */\n  unregisterMaterial: function (material) {\n    delete this.materials[material.uuid];\n  }\n});\n\n/**\n * Load image from a given URL.\n *\n * @private\n * @param {string} src - An url to an image file.\n * @returns {Promise} Resolves once texture is loaded.\n */\nfunction loadImageUrl (src) {\n  return new Promise(doLoadImageUrl);\n\n  function doLoadImageUrl (resolve, reject) {\n    // Request and load texture from src string. THREE will create underlying element.\n    ImageLoader.load(\n      src,\n      resolveSource,\n      function () { /* no-op */ },\n      function (xhr) {\n        error('`$s` could not be fetched (Error code: %s; Response: %s)', xhr.status,\n              xhr.statusText);\n      }\n    );\n\n    function resolveSource (data) {\n      resolve(new THREE.Source(data));\n    }\n  }\n}\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nfunction createVideoEl (src) {\n  var videoEl = document.createElement('video');\n  // Support inline videos for iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  videoEl.autoplay = true;\n  videoEl.loop = true;\n  videoEl.crossOrigin = 'anonymous';\n  videoEl.addEventListener('error', function () {\n    warn('`%s` is not a valid video', src);\n  }, true);\n  videoEl.src = src;\n  return videoEl;\n}\n\n/**\n * Fixes a video element's attributes to prevent developers from accidentally passing the\n * wrong attribute values to commonly misused video attributes.\n *\n * <video> does not treat `autoplay`, `controls`, `crossorigin`, `loop`, and `preload` as\n * as booleans. Existence of those attributes will mean truthy.\n *\n * For example, translates <video loop=\"false\"> to <video>.\n *\n * @see https://developer.mozilla.org/docs/Web/HTML/Element/video#Attributes\n * @param {Element} videoEl - Video element.\n * @returns {Element} Video element with the correct properties updated.\n */\nfunction fixVideoAttributes (videoEl) {\n  videoEl.autoplay = videoEl.hasAttribute('autoplay') && videoEl.getAttribute('autoplay') !== 'false';\n  videoEl.controls = videoEl.hasAttribute('controls') && videoEl.getAttribute('controls') !== 'false';\n  if (videoEl.getAttribute('loop') === 'false') {\n    videoEl.removeAttribute('loop');\n  }\n  if (videoEl.getAttribute('preload') === 'false') {\n    videoEl.preload = 'none';\n  }\n  videoEl.crossOrigin = videoEl.crossOrigin || 'anonymous';\n  // To support inline videos in iOS webviews.\n  videoEl.setAttribute('playsinline', '');\n  videoEl.setAttribute('webkit-playsinline', '');\n  return videoEl;\n}\n","import { registerSystem } from '../core/system.js';\n\nregisterSystem('obb-collider', {\n  schema: {\n    showColliders: {default: false}\n  },\n\n  init: function () {\n    this.collisions = [];\n    this.colliderEls = [];\n  },\n\n  addCollider: function (colliderEl) {\n    this.colliderEls.push(colliderEl);\n    if (this.data.showColliders) {\n      colliderEl.components['obb-collider'].showCollider();\n    } else {\n      colliderEl.components['obb-collider'].hideCollider();\n    }\n    this.tick = this.detectCollisions;\n  },\n\n  removeCollider: function (colliderEl) {\n    var colliderEls = this.colliderEls;\n    var elIndex = colliderEls.indexOf(colliderEl);\n    colliderEl.components['obb-collider'].hideCollider();\n    if (elIndex > -1) { colliderEls.splice(elIndex, 1); }\n    if (colliderEls.length === 0) { this.tick = undefined; }\n  },\n\n  registerCollision: function (componentA, componentB) {\n    var collisions = this.collisions;\n    var existingCollision = false;\n    var boundingBoxA = componentA.obb;\n    var boundingBoxB = componentB.obb;\n    var collisionMeshA = componentA.renderColliderMesh;\n    var collisionMeshB = componentB.renderColliderMesh;\n    if (collisionMeshA) { collisionMeshA.material.color.set(0xff0000); }\n    if (collisionMeshB) { collisionMeshB.material.color.set(0xff0000); }\n    for (var i = 0; i < collisions.length; i++) {\n      if (collisions[i].componentA.obb === boundingBoxA && collisions[i].componentB.obb === boundingBoxB ||\n          collisions[i].componentA.obb === boundingBoxB && collisions[i].componentB.obb === boundingBoxA) {\n        existingCollision = true;\n        collisions[i].detected = true;\n        break;\n      }\n    }\n    if (!existingCollision) {\n      collisions.push({\n        componentA: componentA,\n        componentB: componentB,\n        detected: true\n      });\n      componentA.el.emit('obbcollisionstarted', {trackedObject3D: componentA.trackedObject3D, withEl: componentB.el});\n      componentB.el.emit('obbcollisionstarted', {trackedObject3D: componentB.trackedObject3D, withEl: componentA.el});\n    }\n  },\n\n  resetCollisions: function () {\n    var collisions = this.collisions;\n    for (var i = 0; i < collisions.length; i++) {\n      collisions[i].detected = false;\n    }\n  },\n\n  clearCollisions: function () {\n    var collisions = this.collisions;\n    var detectedCollisions = [];\n    var componentA;\n    var componentB;\n    var collisionMeshA;\n    var collisionMeshB;\n    for (var i = 0; i < collisions.length; i++) {\n      if (!collisions[i].detected) {\n        componentA = collisions[i].componentA;\n        componentB = collisions[i].componentB;\n        collisionMeshA = componentA.renderColliderMesh;\n        collisionMeshB = componentB.renderColliderMesh;\n\n        if (collisionMeshA) { collisionMeshA.material.color.set(0x00ff00); }\n        componentA.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentB.el});\n\n        if (collisionMeshB) { collisionMeshB.material.color.set(0x00ff00); }\n        componentB.el.emit('obbcollisionended', {trackedObject3D: this.trackedObject3D, withEl: componentA.el});\n      } else {\n        detectedCollisions.push(collisions[i]);\n      }\n    }\n    this.collisions = detectedCollisions;\n  },\n\n  detectCollisions: function () {\n    var boxA;\n    var boxB;\n    var componentA;\n    var componentB;\n    var colliderEls = this.colliderEls;\n    if (colliderEls.length < 2) { return; }\n    this.resetCollisions();\n    for (var i = 0; i < colliderEls.length; i++) {\n      componentA = colliderEls[i].components['obb-collider'];\n      boxA = colliderEls[i].components['obb-collider'].obb;\n      // ignore bounding box with 0 volume.\n      if (boxA.halfSize.x === 0 || boxA.halfSize.y === 0 || boxA.halfSize.z === 0) {\n        continue;\n      }\n      for (var j = i + 1; j < colliderEls.length; j++) {\n        componentB = colliderEls[j].components['obb-collider'];\n        boxB = componentB.obb;\n        // ignore bounding box with 0 volume.\n        if (boxB.halfSize.x === 0 || boxB.halfSize.y === 0 || boxB.halfSize.z === 0) {\n          continue;\n        }\n        if (boxA.intersectsOBB(boxB)) {\n          this.registerCollision(componentA, componentB);\n        }\n      }\n    }\n    this.clearCollisions();\n  }\n});\n","import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar debug = utils.debug;\nvar warn = debug('components:renderer:warn');\n\n/**\n * Determines state of various renderer properties.\n */\nexport var System = registerSystem('renderer', {\n  schema: {\n    antialias: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    highRefreshRate: {default: utils.device.isOculusBrowser()},\n    logarithmicDepthBuffer: {default: 'auto', oneOf: ['true', 'false', 'auto']},\n    maxCanvasWidth: {default: -1},\n    maxCanvasHeight: {default: -1},\n    multiviewStereo: {default: false},\n    exposure: {default: 1, if: {toneMapping: ['ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']}},\n    toneMapping: {default: 'no', oneOf: ['no', 'ACESFilmic', 'linear', 'reinhard', 'cineon', 'AgX', 'neutral']},\n    precision: {default: 'high', oneOf: ['high', 'medium', 'low']},\n    anisotropy: {default: 1},\n    sortTransparentObjects: {default: false},\n    colorManagement: {default: true},\n    alpha: {default: true},\n    stencil: {default: false},\n    foveationLevel: {default: 1}\n  },\n\n  init: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    // This is the rendering engine, such as THREE.js so copy over any persistent properties from the rendering system.\n    var renderer = sceneEl.renderer;\n\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    THREE.Texture.DEFAULT_ANISOTROPY = data.anisotropy;\n\n    THREE.ColorManagement.enabled = data.colorManagement;\n    renderer.outputColorSpace = data.colorManagement ? THREE.SRGBColorSpace : THREE.LinearSRGBColorSpace;\n\n    if (sceneEl.hasAttribute('antialias')) {\n      warn('Component `antialias` is deprecated. Use `renderer=\"antialias: true\"` instead.');\n    }\n\n    if (sceneEl.hasAttribute('logarithmicDepthBuffer')) {\n      warn('Component `logarithmicDepthBuffer` is deprecated. Use `renderer=\"logarithmicDepthBuffer: true\"` instead.');\n    }\n\n    // These properties are always the same, regardless of rendered configuration\n    renderer.sortObjects = true;\n    renderer.setOpaqueSort(sortFrontToBack);\n  },\n\n  update: function () {\n    var data = this.data;\n    var sceneEl = this.el;\n    var renderer = sceneEl.renderer;\n    var toneMappingName = this.data.toneMapping.charAt(0).toUpperCase() + this.data.toneMapping.slice(1);\n    renderer.toneMapping = THREE[toneMappingName + 'ToneMapping'];\n    renderer.toneMappingExposure = data.exposure;\n    renderer.xr.setFoveation(data.foveationLevel);\n\n    if (data.sortObjects) {\n      warn('`sortObjects` property is deprecated. Use `renderer=\"sortTransparentObjects: true\"` instead.');\n    }\n    if (data.sortTransparentObjects) {\n      renderer.setTransparentSort(sortBackToFront);\n    } else {\n      renderer.setTransparentSort(sortRenderOrderOnly);\n    }\n  },\n\n  applyColorCorrection: function (texture) {\n    if (!this.data.colorManagement || !texture) {\n      return;\n    }\n\n    if (texture.isTexture && texture.colorSpace !== THREE.SRGBColorSpace) {\n      texture.colorSpace = THREE.SRGBColorSpace;\n      texture.needsUpdate = true;\n    }\n  },\n\n  setWebXRFrameRate: function (xrSession) {\n    var data = this.data;\n    var rates = xrSession.supportedFrameRates;\n    if (rates && xrSession.updateTargetFrameRate) {\n      var targetRate;\n      if (rates.includes(90)) {\n        targetRate = data.highRefreshRate ? 90 : 72;\n      } else {\n        targetRate = data.highRefreshRate ? 72 : 60;\n      }\n      xrSession.updateTargetFrameRate(targetRate).catch(function (error) {\n        console.warn('failed to set target frame rate of ' + targetRate + '. Error info: ' + error);\n      });\n    }\n  }\n});\n\n// Custom A-Frame sort functions.\n// Variations of Three.js default sort orders here:\n// https://github.com/mrdoob/three.js/blob/ebbaecf9acacf259ea9abdcba7b6fb25cfcea2ab/src/renderers/webgl/WebGLRenderLists.js#L1\n// See: https://github.com/aframevr/aframe/issues/5332\n\n// Default sort for opaque objects:\n// - respect groupOrder & renderOrder settings\n// - sort front-to-back by z-depth from camera (this should minimize overdraw)\n// - otherwise leave objects in default order (object tree order)\n\nexport function sortFrontToBack (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return a.z - b.z;\n}\n\n// Default sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - otherwise leave objects in default order (object tree order)\nexport function sortRenderOrderOnly (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  return a.renderOrder - b.renderOrder;\n}\n\n// Spatial sort for transparent objects:\n// - respect groupOrder & renderOrder settings\n// - sort back-to-front by z-depth from camera\n// - otherwise leave objects in default order (object tree order)\nexport function sortBackToFront (a, b) {\n  if (a.groupOrder !== b.groupOrder) {\n    return a.groupOrder - b.groupOrder;\n  }\n  if (a.renderOrder !== b.renderOrder) {\n    return a.renderOrder - b.renderOrder;\n  }\n  return b.z - a.z;\n}\n","import * as THREE from 'three';\nimport { registerSystem } from '../core/system.js';\n\nvar SHADOW_MAP_TYPE_MAP = {\n  basic: THREE.BasicShadowMap,\n  pcf: THREE.PCFShadowMap,\n  pcfsoft: THREE.PCFSoftShadowMap\n};\n\n/**\n * Shadow system.\n *\n * Enabled automatically when one or more shadow components are added to the scene, the system sets\n * options on the WebGLRenderer for configuring shadow appearance.\n */\nexport var System = registerSystem('shadow', {\n  schema: {\n    enabled: {default: true},\n    autoUpdate: {default: true},\n    type: {default: 'pcf', oneOf: ['basic', 'pcf', 'pcfsoft']}\n  },\n\n  init: function () {\n    var sceneEl = this.sceneEl;\n    var data = this.data;\n\n    this.shadowMapEnabled = false;\n\n    sceneEl.renderer.shadowMap.type = SHADOW_MAP_TYPE_MAP[data.type];\n    sceneEl.renderer.shadowMap.autoUpdate = data.autoUpdate;\n  },\n\n  update: function (prevData) {\n    if (prevData.enabled !== this.data.enabled) {\n      this.setShadowMapEnabled(this.shadowMapEnabled);\n    }\n  },\n\n  /**\n   * Enables/disables the renderer shadow map.\n   * @param {boolean} enabled\n   */\n  setShadowMapEnabled: function (enabled) {\n    var sceneEl = this.sceneEl;\n    var renderer = this.sceneEl.renderer;\n\n    this.shadowMapEnabled = enabled;\n    var newEnabledState = this.data.enabled && this.shadowMapEnabled;\n    if (renderer && newEnabledState !== renderer.shadowMap.enabled) {\n      renderer.shadowMap.enabled = newEnabledState;\n\n      // Materials must be updated for the change to take effect.\n      updateAllMaterials(sceneEl);\n    }\n  }\n});\n\nfunction updateAllMaterials (sceneEl) {\n  if (!sceneEl.hasLoaded) { return; }\n\n  sceneEl.object3D.traverse(function (node) {\n    if (node.material) {\n      var materials = Array.isArray(node.material) ? node.material : [node.material];\n      for (var i = 0; i < materials.length; i++) {\n        materials[i].needsUpdate = true;\n      }\n    }\n  });\n}\n","import { registerSystem } from '../core/system.js';\n\n/**\n * Tracked controls system.\n * Maintain list with available tracked controllers.\n */\nexport var System = registerSystem('tracked-controls', {\n  init: function () {\n    this.controllers = [];\n    this.onInputSourcesChange = this.onInputSourcesChange.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n    this.el.addEventListener('enter-vr', this.onEnterVR);\n\n    this.onExitVR = this.onExitVR.bind(this);\n    this.el.addEventListener('exit-vr', this.onExitVR);\n  },\n\n  onEnterVR: function () {\n    var xrSession = this.el.xrSession;\n    if (!xrSession) { return; }\n    this.el.xrSession.addEventListener('inputsourceschange', this.onInputSourcesChange);\n  },\n\n  onExitVR: function () {\n    this.referenceSpace = undefined;\n    this.controllers = [];\n    this.el.emit('controllersupdated', undefined, false);\n  },\n\n  onInputSourcesChange: function () {\n    var self = this;\n    var xrSession = this.el.xrSession;\n    var refspace = this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;\n    xrSession.requestReferenceSpace(refspace).then(function (referenceSpace) {\n      self.referenceSpace = referenceSpace;\n    }).catch(function (err) {\n      self.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(\n        refspace,\n        'tracked-controls uses reference space \"' + refspace + '\".');\n      throw err;\n    });\n\n    this.controllers = xrSession.inputSources;\n    this.el.emit('controllersupdated', undefined, false);\n  }\n});\n","import { registerSystem } from '../core/system.js';\nimport * as utils from '../utils/index.js';\n\nvar warn = utils.debug('systems:webxr:warn');\n\n/**\n * WebXR session initialization and XR module support.\n */\nexport var System = registerSystem('webxr', {\n  schema: {\n    referenceSpaceType: {type: 'string', default: 'local-floor'},\n    requiredFeatures: {type: 'array', default: ['local-floor']},\n    optionalFeatures: {type: 'array', default: ['bounded-floor']},\n    overlayElement: {type: 'selector'}\n  },\n\n  update: function () {\n    var data = this.data;\n    this.sessionConfiguration = {\n      requiredFeatures: data.requiredFeatures,\n      optionalFeatures: data.optionalFeatures\n    };\n    this.sessionReferenceSpaceType = data.referenceSpaceType;\n\n    if (data.overlayElement) {\n      // Update WebXR to support light-estimation\n      data.overlayElement.classList.remove('a-dom-overlay');\n      if (!data.optionalFeatures.includes('dom-overlay')) {\n        data.optionalFeatures.push('dom-overlay');\n        this.el.setAttribute('webxr', data);\n      }\n      this.warnIfFeatureNotRequested('dom-overlay');\n      this.sessionConfiguration.domOverlay = {root: data.overlayElement};\n      data.overlayElement.classList.add('a-dom-overlay');\n    }\n  },\n\n  wasFeatureRequested: function (feature) {\n    // Features available by default for immersive sessions don't need to\n    // be requested explicitly.\n    if (feature === 'viewer' || feature === 'local') { return true; }\n\n    if (this.sessionConfiguration.requiredFeatures.includes(feature) ||\n        this.sessionConfiguration.optionalFeatures.includes(feature)) {\n      return true;\n    }\n\n    return false;\n  },\n\n  warnIfFeatureNotRequested: function (feature, optIntro) {\n    if (!this.wasFeatureRequested(feature)) {\n      var msg = 'Please add the feature \"' + feature + '\" to a-scene\\'s ' +\n          'webxr system options in requiredFeatures/optionalFeatures.';\n      warn((optIntro ? optIntro + ' ' : '') + msg);\n    }\n  }\n});\n","/**\n * Common mesh defaults, mappings, and transforms.\n */\nimport { components } from '../../core/component.js';\nimport { shaders } from '../../core/shader.js';\nimport * as utils from '../../utils/index.js';\n\nvar materialMappings = {};\nObject.keys(components.material.schema).forEach(addMapping);\nObject.keys(shaders.standard.schema).forEach(addMapping);\n\nfunction addMapping (prop) {\n  // To hyphenated.\n  var htmlAttrName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n  if (prop === 'fog') { htmlAttrName = 'material-fog'; }\n  if (prop === 'visible') { htmlAttrName = 'material-visible'; }\n  materialMappings[htmlAttrName] = 'material.' + prop;\n}\n\nexport default function getMeshMixin () {\n  return {\n    defaultComponents: {material: {}},\n    mappings: utils.extend({}, materialMappings)\n  };\n}\n","import * as THREE from 'three';\nimport { registerComponent } from '../../core/component.js';\n\nvar originalPosition = new THREE.Vector3();\nvar originalRotation = new THREE.Vector3();\n\n/**\n * Wrap el.object3D within an outer group. Apply pivot to el.object3D as position.\n */\nregisterComponent('pivot', {\n  dependencies: ['position'],\n\n  schema: {type: 'vec3'},\n\n  init: function () {\n    var data = this.data;\n    var el = this.el;\n    var originalParent = el.object3D.parent;\n    var originalGroup = el.object3D;\n    var outerGroup = new THREE.Group();\n\n    originalPosition.copy(originalGroup.position);\n    originalRotation.copy(originalGroup.rotation);\n\n    // Detach current group from parent.\n    originalParent.remove(originalGroup);\n    outerGroup.add(originalGroup);\n\n    // Set new group as the outer group.\n    originalParent.add(outerGroup);\n\n    // Set outer group as new object3D.\n    el.object3D = outerGroup;\n\n    // Apply pivot to original group.\n    originalGroup.position.set(-1 * data.x, -1 * data.y, -1 * data.z);\n\n    // Offset the pivot so that world position not affected.\n    // And restore position onto outer group.\n    outerGroup.position.set(data.x + originalPosition.x, data.y + originalPosition.y,\n                            data.z + originalPosition.z);\n\n    // Transfer rotation to outer group.\n    outerGroup.rotation.copy(originalGroup.rotation);\n    originalGroup.rotation.set(0, 0, 0);\n  }\n});\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-camera', {\n  defaultComponents: {\n    'camera': {},\n    'look-controls': {},\n    'wasd-controls': {},\n    'position': {x: 0, y: 1.6, z: 0}\n  },\n\n  mappings: {\n    active: 'camera.active',\n    far: 'camera.far',\n    fov: 'camera.fov',\n    'look-controls-enabled': 'look-controls.enabled',\n    near: 'camera.near',\n    'pointer-lock-enabled': 'look-controls.pointerLockEnabled',\n    'wasd-controls-enabled': 'wasd-controls.enabled',\n    'reverse-mouse-drag': 'look-controls.reverseMouseDrag',\n    zoom: 'camera.zoom'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-cursor', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    cursor: {},\n    geometry: {\n      primitive: 'ring',\n      radiusOuter: 0.016,\n      radiusInner: 0.01,\n      segmentsTheta: 32\n    },\n    material: {\n      color: '#000',\n      shader: 'flat',\n      opacity: 0.8\n    },\n    position: {\n      x: 0,\n      y: 0,\n      z: -1\n    }\n  },\n\n  mappings: {\n    far: 'raycaster.far',\n    fuse: 'cursor.fuse',\n    'fuse-timeout': 'cursor.fuseTimeout',\n    interval: 'raycaster.interval',\n    objects: 'raycaster.objects'\n  }\n}));\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-curvedimage', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      height: 1,\n      primitive: 'cylinder',\n      radius: 2,\n      segmentsRadial: 48,\n      thetaLength: 270,\n      openEnded: true,\n      thetaStart: 0\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true,\n      repeat: '-1 1'\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    'open-ended': 'geometry.openEnded',\n    radius: 'geometry.radius',\n    segments: 'geometry.segmentsRadial',\n    start: 'geometry.thetaStart',\n    'theta-length': 'geometry.thetaLength',\n    'theta-start': 'geometry.thetaStart',\n    'width': 'geometry.thetaLength'\n  }\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-gltf-model', {\n  mappings: {\n    src: 'gltf-model'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-image', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-light', {\n  defaultComponents: {\n    light: {}\n  },\n\n  mappings: {\n    angle: 'light.angle',\n    color: 'light.color',\n    'ground-color': 'light.groundColor',\n    decay: 'light.decay',\n    distance: 'light.distance',\n    intensity: 'light.intensity',\n    penumbra: 'light.penumbra',\n    type: 'light.type',\n    target: 'light.target',\n    envmap: 'light.envMap',\n    'shadow-camera-automatic': 'light.shadowCameraAutomatic'\n  }\n});\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-link', {\n  defaultComponents: {\n    link: {\n      visualAspectEnabled: true\n    }\n  },\n\n  mappings: {\n    href: 'link.href',\n    image: 'link.image',\n    title: 'link.title'\n  }\n});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-obj-model', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    'obj-model': {}\n  },\n\n  mappings: {\n    src: 'obj-model.obj',\n    mtl: 'obj-model.mtl'\n  }\n}));\n","/**\n * Automated mesh primitive registration.\n */\nimport getMeshMixin from '../getMeshMixin.js';\nimport { geometries, geometryNames } from '../../../core/geometry.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\n// For testing.\nconst meshPrimitives = {};\nexport default meshPrimitives;\n\n// Generate primitive for each geometry type.\ngeometryNames.forEach(function registerMeshPrimitive (geometryName) {\n  var geometry = geometries[geometryName];\n  var geometryHyphened = unCamelCase(geometryName);\n\n  // Generate mappings.\n  var mappings = {};\n  Object.keys(geometry.schema).forEach(function createMapping (property) {\n    mappings[unCamelCase(property)] = 'geometry.' + property;\n  });\n\n  // Register.\n  var tagName = 'a-' + geometryHyphened;\n  var primitive = registerPrimitive(tagName, utils.extendDeep({}, getMeshMixin(), {\n    defaultComponents: {geometry: {primitive: geometryName}},\n    mappings: mappings\n  }));\n  meshPrimitives[tagName] = primitive;\n});\n\n/**\n * camelCase to hyphened-string.\n */\nfunction unCamelCase (str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\nimport meshPrimitives from './meshPrimitives.js';\n\nregisterPrimitive('a-sky', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      side: 'back',\n      shader: 'flat',\n      minFilter: 'linear'\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: utils.extendDeep({}, meshPrimitives['a-sphere'].mappings)\n}));\n","import { registerPrimitive } from '../primitives.js';\n\nregisterPrimitive('a-sound', {\n  defaultComponents: {\n    sound: {}\n  },\n\n  mappings: {\n    src: 'sound.src',\n    on: 'sound.on',\n    autoplay: 'sound.autoplay',\n    loop: 'sound.loop',\n    volume: 'sound.volume'\n  }\n});\n","// <a-text> using `definePrimitive` helper.\nimport { definePrimitive } from '../primitives.js';\ndefinePrimitive('a-text', {text: {anchor: 'align', width: 5}});\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-video', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane'\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'double',\n      transparent: true\n    }\n  },\n\n  mappings: {\n    height: 'geometry.height',\n    width: 'geometry.width'\n  }\n}));\n","import getMeshMixin from '../getMeshMixin.js';\nimport { registerPrimitive } from '../primitives.js';\nimport * as utils from '../../../utils/index.js';\n\nregisterPrimitive('a-videosphere', utils.extendDeep({}, getMeshMixin(), {\n  defaultComponents: {\n    geometry: {\n      primitive: 'sphere',\n      radius: 500,\n      segmentsWidth: 64,\n      segmentsHeight: 32\n    },\n    material: {\n      color: '#FFF',\n      shader: 'flat',\n      side: 'back',\n      minFilter: 'linear'\n    },\n    scale: '-1 1 1'\n  },\n\n  mappings: {\n    radius: 'geometry.radius',\n    'segments-height': 'geometry.segmentsHeight',\n    'segments-width': 'geometry.segmentsWidth'\n  }\n}));\n","import ANIME from 'super-animejs';\nimport THREE from './lib/three.js';\n\nimport { AScene } from './core/scene/a-scene.js';\nimport scenes from './core/scene/scenes.js';\nimport { ANode } from './core/a-node.js';\nimport { AEntity } from './core/a-entity.js'; // Depends on ANode and core components.\nimport { registerComponent, components, Component } from './core/component.js';\nimport { registerGeometry, geometries } from './core/geometry.js';\nimport { registerPrimitive, primitives } from './extras/primitives/primitives.js';\nimport { registerShader, shaders } from './core/shader.js';\nimport { registerSystem, systems } from './core/system.js';\nimport * as schema from './core/schema.js';\nimport * as readyState from './core/readyState.js';\n\nimport './core/a-assets.js';\nimport './core/a-cubemap.js';\nimport './core/a-mixin.js';\n\nimport * as utils from './utils/index.js';\nimport pkg from '../package.json';\n\nimport './components/index.js'; // Register standard components.\nimport './geometries/index.js'; // Register standard geometries.\nimport './shaders/index.js'; // Register standard shaders.\nimport './systems/index.js'; // Register standard systems.\n\n// Depends on material component and standard shader\nimport getMeshMixin from './extras/primitives/getMeshMixin.js';\n\n// Extras.\nimport './extras/components/index.js';\nimport './extras/primitives/index.js';\n\nvar debug = utils.debug;\nvar error = debug('A-Frame:error');\nvar warn = debug('A-Frame:warn');\n\nif (window.document.currentScript && window.document.currentScript.parentNode !==\n    window.document.head && !window.debug) {\n  warn('Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ' +\n       'ensure everything for A-Frame is properly registered before they are used from ' +\n       'HTML.');\n}\n\n// Error if not using a server.\nif (!window.cordova && window.location.protocol === 'file:') {\n  error(\n    'This HTML file is currently being served via the file:// protocol. ' +\n    'Assets, textures, and models WILL NOT WORK due to cross-origin policy! ' +\n    'Please use a local or hosted server: ' +\n    'https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server.');\n}\n\n// CSS.\nif (utils.device.isBrowserEnvironment) {\n  window.logs = debug;\n  require('./style/aframe.css');\n}\n\nconsole.log('A-Frame Version: 1.7.1 (Date 2025-07-08, Commit #de157ab4)');\nconsole.log('THREE Version (https://github.com/supermedium/three.js):',\n            THREE.REVISION);\n\n// Wait for ready state, unless user asynchronously initializes A-Frame.\nif (!window.AFRAME_ASYNC) {\n  readyState.waitForDocumentReadyState();\n}\n\nvar AFRAME = globalThis.AFRAME = {\n  AComponent: Component,\n  AEntity: AEntity,\n  ANode: ANode,\n  ANIME: ANIME,\n  AScene: AScene,\n  components: components,\n  coreComponents: Object.keys(components),\n  geometries: geometries,\n  registerComponent: registerComponent,\n  registerGeometry: registerGeometry,\n  registerPrimitive: registerPrimitive,\n  registerShader: registerShader,\n  registerSystem: registerSystem,\n  primitives: {\n    getMeshMixin: getMeshMixin,\n    primitives: primitives\n  },\n  scenes: scenes,\n  schema: schema,\n  shaders: shaders,\n  systems: systems,\n  emitReady: readyState.emitReady,\n  THREE: THREE,\n  utils: utils,\n  version: pkg.version\n};\nexport default AFRAME;\n"],"names":["str","Object","prototype","toString","module","exports","arr","BYTES_PER_ELEMENT","call","buffer","Array","isArray","num","def","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","code","Error","indexOf","start","end","output","Buffer","require","a","b","isBuffer","equals","base64","ieee754","customInspectSymbol","Symbol","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","arg","encodingOrOffset","TypeError","allocUnsafe","from","value","string","encoding","isEncoding","actual","write","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","obj","checked","undefined","numberIsNaN","type","data","fromObject","toPrimitive","assertSize","size","array","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","Math","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","console","error","defineProperty","enumerable","get","poolSize","alloc","fill","allocUnsafeSlow","_isBuffer","compare","x","y","concat","list","pos","set","swap16","swap32","swap64","toLocaleString","inspect","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","writable","configurable","name","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","input","msg","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","split","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","cssWithMappingToString","map","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","k","id","_k","url","options","__esModule","default","test","hash","needQuotes","cssMapping","btoa","unescape","encodeURIComponent","JSON","stringify","sourceMapping","formatArgs","args","useColors","namespace","humanize","diff","color","splice","index","lastC","match","save","namespaces","storage","setItem","removeItem","load","r","getItem","process","env","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","v","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","selectColor","extend","init","delimiter","newDebug","matchesTemplate","search","template","searchIndex","templateIndex","starIndex","matchIndex","disable","names","skips","enable","filter","Boolean","ns","skip","keys","forEach","key","isObj","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","assignKey","to","assign","getOwnPropertySymbols","symbols","toObject","s","dtype","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","Uint8ClampedArray","win","global","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","rt","isNaN","LN2","isSlowBuffer","setTimeout","alert","confirm","prompt","wordWrap","xtend","number","X_HEIGHTS","M_WIDTHS","CAP_HEIGHTS","TAB_ID","SPACE_ID","TextLayout","opt","glyphs","_measure","computeMetrics","bind","update","wrapper","Function","getGlyphById","font","chars","glyphIdx","findChar","getKerning","left","right","kernings","kern","second","amount","measure","_opt","tabSize","text","_setupSpaceGlyphs","lines","minWidth","width","maxLineWidth","reduce","line","lineHeight","common","baseline","base","descender","letterSpacing","height","align","getAlignType","_width","_height","_descender","_baseline","_xHeight","idx","getXHeight","_capHeight","getCapHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","glyph","getGlyph","tx","position","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","getMGlyph","tabWidth","xoffset","yoffset","curPen","curWidth","count","nextPen","nextWidth","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","xml2","XMLHttpRequest","cb","uri","binary","responseType","req","overrideMimeType","getBinaryOpts","err","body","statusCode","result","headers","charAt","parse","equal","HEADER","substring","h","w","plural","msAbs","isPlural","round","exec","parseFloat","long","fmtShort","splitLine","dt","parseData","parseIntList","pages","lineData","file","readBlock","blockID","blockSize","info","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","aa","padding","spacing","outline","face","readNameNT","readStringNT","readInfo","scaleW","scaleH","packed","alphaChnl","redChnl","greenChnl","blueChnl","readCommon","readPages","char","off","page","chnl","readChars","readKernings","header","every","byte","parseAttributes","parseFromString","NAME_MAP","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","getAttribs","element","attribs","attributes","getAttribList","dict","attrib","nodeName","nodeValue","xmlRoot","getElementsByTagName","pageRoot","p","getAttribute","childTag","children","child","GLYPH_DESIGNER_ERROR","headersArr","row","anArray","CW","CCW","clockwise","numIndices","indices","createLayout","createIndices","vertices","utils","TextGeometry","THREE","BufferGeometry","layout","flipY","texWidth","texHeight","bitmap","visibleGlyphs","positions","uvs","setIndex","setAttribute","BufferAttribute","multipage","removeAttribute","boundingBox","computeBoundingBox","boundingSphere","computeBoundingSphere","Sphere","itemSize","radius","center","computeSphere","Box3","bbox","makeEmpty","computeBox","box","bounds","minX","minY","sqrt","bw","bh","u0","v1","u1","v0","newline","whitespace","idxOf","chr","isWhitespace","monospace","mode","MAX_VALUE","lineStart","isNewline","measured","pre","testWidth","newLine","lineEnd","nextStart","newlineChar","greedy","isFunction","parseHeaders","initParams","callback","params","createXHR","_createXHR","called","response","getBody","responseText","responseXML","firefoxBugTakenEffect","getXml","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","loadFunc","aborted","status","useXDR","method","rawRequest","getAllResponseHeaders","cors","XDomainRequest","sync","json","onreadystatechange","readyState","onload","onerror","onprogress","onabort","ontimeout","open","username","password","withCredentials","timeout","abort","setRequestHeader","isEmpty","beforeSend","send","iterator","forEachArray","toUpperCase","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","createElement","innerHTML","source","Util","mimeType","check","vendor","opera","top","results","RegExp","location","decodeURIComponent","orientation","timer","request","setInterval","href","stop","release","clearInterval","video","addEventListener","play","paused","pause","___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","appendChild","styleElement","nonce","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","o","g","globalThis","prop","toStringTag","baseURI","nc","defaultInstanceSettings","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","delay","endDelay","easing","validTransforms","cache","CSS","springs","minMax","stringContains","applyArguments","func","hexRegex","rgbPrefixRegex","hslRegex","is","pth","svg","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","hex","rgb","hsl","col","easingFunctionRegex","parseEasingParameters","spring","mass","stiffness","damping","velocity","w0","zeta","wd","solver","t","progress","exp","cos","sin","cached","frame","elapsed","rest","elastic","amplitude","period","PI","asin","steps","bezier","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","getTForX","penner","curves","In","Out","InOut","eases","linear","coords","parseEasings","ease","selectString","querySelectorAll","auxArrayFilter","filterArray","thisArg","flattenArray","toArray","NodeList","HTMLCollection","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbRegex","hexToRgbaHexRegex","hexToRgbaRgbRegex","hslToRgbaHsl1Regex","hslToRgbaHsl2Regex","unitRegex","getUnit","getFunctionValue","animatable","total","el","convertPxToUnit","unit","tempEl","tagName","parentEl","factor","offsetWidth","convertedUnit","getCSSValue","uppercasePropName","getComputedStyle","getPropertyValue","getAnimationType","transformRegex","getElementTransforms","transform","transforms","Map","getOriginalTargetValue","propName","defaultVal","getTransformUnit","getTransformValue","operatorRegex","getRelativeValue","operator","u","whitespaceRegex","validateValue","rgbValue","hexValue","hexToRgba","hslValue","l","hue2rgb","q","hslToRgba","colorToRgb","originalUnit","unitLess","getDistance","p1","p2","getPolylineLength","previousPos","points","totalLength","numberOfItems","currentPos","getTotalLength","getCircleLength","getRectLength","getLineLength","getPolygonLength","getParentSvg","pathEl","svgData","parentSvgEl","getParentSvgEl","rect","getBoundingClientRect","viewBoxAttr","viewBox","getPathProgress","path","point","getPointAtLength","p0","property","atan2","valueRegex","decomposeValue","original","numbers","strings","parseTargets","targets","getAnimatables","springRegex","normalizePropertyTweens","tweenSettings","settings","propArray","setProgressValue","attribute","object","manual","setTargetsValue","properties","animatables","valueUnit","originalValue","animType","getAnimations","tweens","previousTween","tween","normalizeTweenValues","tweenValue","toUnit","previousValue","fromUnit","isPath","isColor","normalizeTweens","lastTween","createAnimation","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","raf","instanceID","activeInstances","pausedInstances","engine","requestAnimationFrame","step","activeInstancesLength","activeInstance","instanceIndex","tick","cancelAnimationFrame","anime","startTime","lastTime","now","childrenLength","resolve","makePromise","Promise","_resolve","promise","instance","instanceSettings","keyframes","propertyNames","newKey","flattenKeyframes","getProperties","createNewInstance","toggleInstanceDirection","reversed","adjustTime","time","resetTime","currentTime","speed","seekCild","seek","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","passThrough","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","reversePlayback","i$1","syncInstanceChildren","began","changeBegan","changeCompleted","completed","reset","reverse","restart","finished","removeTargetsFromAnimations","targetsArray","hidden","len$1","version","running","childAnimations","convertPx","percent","setDashoffset","pathLength","stagger","grid","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","values","maxValue","fromX","fromY","distanceX","distanceY","timeline","tl","add","instanceParams","tlIndex","ins","insParams","tlDuration","random","__WEBPACK_EXTERNAL_MODULE_three__","_taskCache","WeakMap","DRACOLoader","Loader","manager","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","normal","uv","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","onLoad","onProgress","onError","loader","FileLoader","setPath","setResponseType","requestHeader","setWithCredentials","decodeDracoFile","SRGBColorSpace","catch","attributeIDs","attributeTypes","vertexColorSpace","LinearSRGBColorSpace","taskConfig","useUniqueIDs","decodeGeometry","then","taskKey","has","cachedTask","worker","taskID","taskCost","geometryPending","_getWorker","_worker","reject","_callbacks","postMessage","_createGeometry","geometry","_releaseTask","geometryData","_assignVertexColorSpace","normalized","inputColorSpace","_color","Color","il","fromBufferAttribute","ColorManagement","colorSpaceToWorking","setXYZ","_loadLibrary","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","DRACOWorker","createObjectURL","Blob","Worker","_taskCosts","_taskLoad","onmessage","sort","dispose","terminate","revokeObjectURL","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","Decoder","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeArrayToMesh","POINT_CLOUD","PointCloud","DecodeArrayToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","attributeResult","num_faces","GetTrianglesUInt32Array","decodeIndex","buffers","attr","computeMikkTSpaceTangents","MikkTSpace","negateSign","isReady","hasAttribute","getAttributeArray","isInterleavedBufferAttribute","dstArray","getX","getY","getZ","_geometry","toNonIndexed","tangents","generateTangents","mergeGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","morphTargetsRelative","mergedGeometry","attributesCount","addGroup","indexOffset","mergedIndex","mergedAttribute","mergeAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","gpuType","arrayLength","tupleOffset","getComponent","setComponent","deepCloneAttribute","isInstancedInterleavedBufferAttribute","deinterleaveAttribute","isInstancedBufferAttribute","InstancedBufferAttribute","interleaveAttributes","stride","interleavedBuffer","InterleavedBuffer","getters","setters","iba","InterleavedBufferAttribute","cons","newAttribute","meshPerAttribute","setX","setY","setZ","setW","getW","deinterleaveGeometry","morphTargets","attrMap","estimateBytesUsed","mem","getIndex","mergeVertices","tolerance","EPSILON","hashToIndex","vertexCount","nextIndex","attributeNames","tmpAttributes","tmpMorphAttributes","newIndices","morphAttr","halfTolerance","exponent","log10","hashMultiplier","hashAdditive","newArray","newMorphArrays","getterFunc","setterFunc","ml","tmpAttribute","tmpMorphAttribute","toTrianglesDrawMode","drawMode","TrianglesDrawMode","TriangleFanDrawMode","TriangleStripDrawMode","numberOfTriangles","newGeometry","clearGroups","computeMorphedAttributes","_vA","Vector3","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_calculateMorphedAttributeData","morphAttribute","modifiedAttributeArray","morphInfluences","morphTargetInfluences","influence","morph","addScaledVector","isSkinnedMesh","applyBoneTransform","z","material","positionAttribute","morphPosition","normalAttribute","morphNormal","groups","drawRange","jl","group","modifiedPosition","modifiedNormal","morphedPositionAttribute","Float32BufferAttribute","morphedNormalAttribute","mergeGroups","materialIndex","groupStart","groupLength","currentGroup","toCreasedNormals","creaseAngle","creaseDot","verts","tempVec1","tempVec2","tempNorm","tempNorm2","hashVertex","resultGeometry","posAttr","vertexMap","i3","subVectors","crossVectors","normalize","normalArray","normAttr","otherNormals","lk","otherNorm","dot","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFMaterialsDispersionExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFTextureAVIFExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsEmissiveStrengthExtension","GLTFMaterialsSpecularExtension","GLTFMaterialsIridescenceExtension","GLTFMaterialsAnisotropyExtension","GLTFMaterialsBumpExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFMeshGpuInstancing","scope","resourcePath","relativeUrl","LoaderUtils","extractUrlBase","resolveURL","itemStart","_onError","itemError","itemEnd","gltf","setDRACOLoader","setKTX2Loader","setMeshoptDecoder","unregister","extensions","plugins","textDecoder","TextDecoder","decode","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_DISPERSION","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_IRIDESCENCE","KHR_MATERIALS_ANISOTROPY","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","KHR_MATERIALS_EMISSIVE_STRENGTH","EXT_MATERIALS_BUMP","EXT_TEXTURE_WEBP","EXT_TEXTURE_AVIF","EXT_MESHOPT_COMPRESSION","EXT_MESH_GPU_INSTANCING","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDef","lights","lightNode","setRGB","DirectionalLight","PointLight","distance","SpotLight","spot","innerConeAngle","outerConeAngle","angle","penumbra","assignExtrasToUserData","intensity","createUniqueName","getDependency","createNodeAttachment","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","extendMaterialParams","materials","emissiveStrength","emissiveIntensity","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","dispersion","iridescenceFactor","iridescence","iridescenceTexture","iridescenceIor","iridescenceIOR","iridescenceThicknessRange","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessTexture","sheenColor","sheenRoughness","sheen","sheenColorFactor","colorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","bumpScale","bumpFactor","bumpTexture","anisotropyStrength","anisotropy","anisotropyRotation","anisotropyTexture","loadTexture","textureIndex","textureDef","textures","loadTextureImage","images","textureLoader","handler","getHandler","loadBufferView","bufferView","bufferViews","extensionDef","supported","byteStride","decodeGltfBufferAsync","ready","decodeGltfBuffer","createNodeMesh","mesh","meshDef","meshes","primitive","primitives","WEBGL_CONSTANTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","attributesDef","accessor","nodeObject","pop","isGroup","instancedMeshes","Matrix4","Quaternion","instancedMesh","InstancedMesh","TRANSLATION","ROTATION","SCALE","setMatrixAt","compose","instanceColor","Object3D","assignFinalMaterial","clear","headerView","DataView","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","decodePrimitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","extendTexture","texture","texCoord","channel","rotation","fromArray","repeat","needsUpdate","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleSize","resultBuffer","copySampleValue_","valueSize","interpolate_","i1","t0","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","m0","m1","_quaternion","GLTFCubicSplineQuaternionInterpolant","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","UNSIGNED_BYTE","UNSIGNED_SHORT","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","TEXCOORD_3","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","createDefaultMaterial","MeshStandardMaterial","emissive","metalness","roughness","transparent","depthTest","side","FrontSide","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","gltfDef","extras","updateMorphTargets","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","attributesKey","getNormalizedComponentScale","_identityMatrix","associations","primitiveCache","nodeCache","meshCache","cameraCache","lightCache","sourceCache","textureCache","nodeNamesUsed","isSafari","safariVersion","isFirefox","firefoxVersion","safariMatch","createImageBitmap","TextureLoader","ImageBitmapLoader","setCrossOrigin","_invokeAll","beforeRoot","getDependencies","dependencies","scene","scenes","cameras","afterRoot","updateMatrixWorld","skinDefs","skins","meshDefs","skinIndex","skinLength","joints","isBone","skin","camera","ref","updateMappings","mappings","entries","_invokeOne","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","pendingBufferViews","elementBytes","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","sourceIndex","sourceDef","sampler","loadImageSource","startsWith","samplers","magFilter","minFilter","wrapS","wrapT","generateMipmaps","isCompressedTexture","webkitURL","sourceURI","isObjectURL","blob","isImageBitmapLoader","imageBitmap","Texture","mapName","mapDef","colorSpace","gltfReference","useDerivativeTangents","tangent","useVertexColors","useFlatShading","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","normalScale","materialType","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","aoMapIntensity","emissiveFactor","emissiveTexture","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","loadGeometries","createDracoPrimitive","addPrimitiveAttributes","geometryPromise","meshIndex","SkinnedMesh","normalizeSkinWeights","LineSegments","Line","LineLoop","Points","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","_loadNodeShallow","inverseBindMatrices","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","animationIndex","animationDef","animationName","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","node","parameters","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","createdTracks","_createAnimationTracks","AnimationClip","traverse","isMesh","nodePending","childPending","childrenDef","skeletonPending","skeleton","meshPromise","Bone","matrix","applyMatrix4","quaternion","mapping","sceneIndex","sceneDef","nodeIds","reducedAssociations","reduceAssociations","targetName","TypedKeyframeTrack","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","interpolation","outputArray","_getArrayFromAccessor","track","_createCubicSplineTrackInterpolant","scaled","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","assignAttributeAccessor","gltfAttributeName","workingColorSpace","boxScale","multiplyScalar","maxDisplacement","vector","expandByVector","sphere","getCenter","distanceTo","computeBounds","hasMorphPosition","hasMorphNormal","hasMorphColor","pendingPositionAccessors","pendingNormalAccessors","pendingColorAccessors","pendingAccessor","morphPositions","morphNormals","morphColors","addMorphTargets","WorkerPool","pool","queue","workers","workersResolve","workerStatus","workerCreator","_initWorker","workerId","_onMessage","_getIdleWorker","transfer","shift","setWorkerCreator","ct","yt","xt","wt","Ft","Ct","te","ae","ge","ue","we","Ae","Ge","Je","Qe","Ze","en","nn","rn","on","hn","Un","_n","xn","mn","Dn","Sn","pi","Ii","vkFormat","typeSize","pixelWidth","pixelHeight","pixelDepth","layerCount","faceCount","supercompressionScheme","levels","dataFormatDescriptor","vendorId","descriptorType","descriptorBlockSize","versionNumber","colorModel","colorPrimaries","transferFunction","flags","texelBlockDimension","bytesPlane","samples","keyValue","globalData","Si","_dataView","_littleEndian","_offset","_nextUint8","getUint8","_nextUint16","getUint16","_nextUint32","_nextUint64","_nextInt32","getInt32","_nextUint8Array","_skip","_scan","Oi","Ti","I","emscripten_notify_memory_growth","memory","Q","fetch","arrayBuffer","instantiate","_init","malloc","ZSTD_findDecompressedSize","ZSTD_decompress","D","free","SRGBTransfer","LinearTransfer","_zstd","_activeLoaders","KTX2Loader","transcoderPath","transcoderBinary","transcoderPending","workerConfig","MSC_TRANSCODER","setTranscoderPath","detectSupportAsync","renderer","astcSupported","hasFeatureAsync","astcHDRSupported","etc1Supported","etc2Supported","dxtSupported","bptcSupported","pvrtcSupported","detectSupport","isWebGPURenderer","hasFeature","getSupportedProfiles","jsLoader","loadAsync","binaryLoader","binaryContent","BasisWorker","EngineFormat","EngineType","TranscoderFormat","BasisFormat","_createTexture","_createTextureFrom","transcodeResult","container","messageType","faces","dfdFlags","CompressedCubeTexture","mipmaps","CompressedArrayTexture","CompressedTexture","parseColorSpace","premultiplyAlpha","f","U","levelData","uncompressedByteLength","_","bitOffset","bitLength","channelType","samplePosition","sampleLower","sampleUpper","imageFlags","rgbSliceByteOffset","rgbSliceByteLength","alphaSliceByteOffset","alphaSliceByteLength","L","V","S","F","endpointCount","selectorCount","imageDescs","endpointsData","selectorsData","tablesData","extendedData","isBasisHDR","VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT","FORMAT_MAP","zstd","ZSTDDecoder","levelIndex","levelWidth","levelHeight","levelDepth","level","TYPE_MAP","FloatType","HalfFloatType","depth","UNCOMPRESSED_FORMATS","DataTexture","Data3DTexture","createRawTexture","texturePending","ETC1S","UASTC","UASTC_HDR","ETC1","ETC2","BC1","BC3","BC4","BC5","BC7_M6_OPAQUE_ONLY","BC7_M5","PVRTC1_4_RGB","PVRTC1_4_RGBA","ASTC_4x4","ATC_RGB","ATC_RGBA_INTERPOLATED_ALPHA","RGBA32","RGB565","BGR565","RGBA4444","BC6H","RGB_HALF","RGBA_HALF","RGBAFormat","RGBA_ASTC_4x4_Format","RGB_BPTC_UNSIGNED_Format","RGBA_BPTC_Format","RGBA_ETC2_EAC_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT5_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGB_PVRTC_4BPPV1_Format","RGBA_S3TC_DXT1_Format","UnsignedByteType","BasisModule","_EngineFormat","_EngineType","_TranscoderFormat","_BasisFormat","onRuntimeInitialized","BASIS","initializeBasis","KTX2File","hasAlpha","ktx2File","cleanup","close","delete","isValid","basisFormat","isUASTC","isETC1S","isHDR","getWidth","getHeight","getLayers","levelCount","getLevels","getFaces","getHasAlpha","getDFDFlags","transcoderFormat","engineFormat","engineType","OPTIONS","if","needsPowerOfTwo","isPowerOfTwo","getTranscoderFormat","startTranscoding","mip","layerMips","mipWidth","mipHeight","levelInfo","getImageLevelInfo","origWidth","origHeight","getImageTranscodedSizeInBytes","transcodeImage","mipData","transcode","FORMAT_OPTIONS","priorityETC1S","priorityUASTC","priorityHDR","arrays","totalByteLength","RGFormat","RedFormat","VK_FORMAT_R32G32B32A32_SFLOAT","VK_FORMAT_R16G16B16A16_SFLOAT","VK_FORMAT_R8G8B8A8_UNORM","VK_FORMAT_R8G8B8A8_SRGB","VK_FORMAT_R32G32_SFLOAT","VK_FORMAT_R16G16_SFLOAT","VK_FORMAT_R8G8_UNORM","VK_FORMAT_R8G8_SRGB","VK_FORMAT_R32_SFLOAT","VK_FORMAT_R16_SFLOAT","VK_FORMAT_R8_SRGB","VK_FORMAT_R8_UNORM","VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK","VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK","VK_FORMAT_ASTC_4x4_SRGB_BLOCK","VK_FORMAT_ASTC_4x4_UNORM_BLOCK","VK_FORMAT_ASTC_6x6_SRGB_BLOCK","RGBA_ASTC_6x6_Format","VK_FORMAT_ASTC_6x6_UNORM_BLOCK","VK_FORMAT_BC1_RGBA_UNORM_BLOCK","VK_FORMAT_BC1_RGBA_SRGB_BLOCK","VK_FORMAT_BC1_RGB_UNORM_BLOCK","RGB_S3TC_DXT1_Format","VK_FORMAT_BC1_RGB_SRGB_BLOCK","VK_FORMAT_BC3_SRGB_BLOCK","RGBA_S3TC_DXT3_Format","VK_FORMAT_BC3_UNORM_BLOCK","VK_FORMAT_BC5_SNORM_BLOCK","VK_FORMAT_BC5_UNORM_BLOCK","VK_FORMAT_BC7_SRGB_BLOCK","VK_FORMAT_BC7_UNORM_BLOCK","dfd","NoColorSpace","R","AbsR","xAxis","yAxis","zAxis","closestPoint","rotationMatrix","Matrix3","aabb","inverse","localRay","Ray","OBB","halfSize","obb","getSize","clampPoint","extractBasis","clamp","containsPoint","intersectsBox3","box3","intersectsOBB","fromBox3","intersectsSphere","distanceToSquared","epsilon","ra","rb","intersectsPlane","plane","constant","intersectRay","ray","setFromCenterAndSize","setFromMatrix3","setPosition","invert","intersectBox","intersectsRay","identity","elements","sx","sy","sz","determinant","setFromMatrix4","invSX","invSY","invSZ","multiply","setFromMatrixPosition","_object_pattern","_material_library_pattern","_material_use_pattern","_map_use_pattern","_face_vertex_data_separator_pattern","_ab","_cb","ParserState","state","normals","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","hasUVIndices","startMaterial","previous","inherited","groupCount","mtllib","groupEnd","cloned","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","parseNormalIndex","parseUVIndex","addVertex","addVertexPoint","addVertexLine","addNormal","addFaceNormal","cross","addColor","addUV","addDefaultUV","addUVLine","addFace","ua","ub","uc","na","nb","vLen","ia","ic","nLen","uvLen","addPointGeometry","vi","addLineGeometry","uvi","OBJLoader","setMaterials","trimStart","lineFirstChar","vertexData","faceVertices","vertex","vertexParts","v2","v3","lineParts","lineVertices","lineUVs","li","llen","pointData","hasVertexColors","buffergeometry","createdMaterials","miLen","sourceMaterial","materialHash","create","materialPoints","materialLine","MeshPhongMaterial","MTLLoader","setMaterialOptions","materialOptions","delimiter_pattern","materialsInfo","ss","materialCreator","MaterialCreator","setManager","baseUrl","materialsArray","nameLookup","wrap","convert","converted","covmat","lprop","normalizeRGB","ignoreZeroRGBs","materialName","getAsArray","createMaterial_","setMapForType","mapType","texParams","getTextureParams","specular","shininess","invertTrProperty","matParams","items","displacementBias","displacementScale","DefaultLoadingManager","LightProbeGenerator","fromCubeTexture","cubeTexture","totalWeight","coord","shBasis","sh","SphericalHarmonics3","shCoefficients","coefficients","faceIndex","image","canvas","context","getContext","drawImage","imageData","getImageData","imageWidth","pixelSize","convertColorToLinear","pixelIndex","lengthSq","weight","getBasisAt","norm","LightProbe","fromCubeRenderTarget","cubeRenderTarget","flip","coordinateSystem","WebGLCoordinateSystem","isWebGLRenderer","readRenderTargetPixelsAsync","DataUtils","fromHalfFloat","convertSRGBToLinear","DeviceOrientationControls","reorder","deviceOrientation","screenOrientation","alphaOffset","zee","euler","q0","q1","onDeviceOrientationChangeEvent","event","onScreenOrientationChangeEvent","setObjectQuaternion","Euler","alpha","beta","gamma","orient","setFromEuler","setFromAxisAngle","connect","disconnect","removeEventListener","device","degToRad","SUPER_THREE","BufferGeometryUtils","Cache","AFRAME_CDN_ROOT","AFRAME_INJECTED","chunks","getDebugNamespaceType","ls","logs","supportsVRSession","supportsARSession","isWebXRAvailable","xr","updateEnterInterfaces","sceneEl","hasLoaded","components","errorHandler","isSessionSupported","supportsSession","checkHeadsetConnected","checkARSupport","checkVRSupport","_isMobile","isMobile","isIOS","isTablet","isR7","isMobileVR","mockUserAgent","isIpad","mockDevicePlatform","mockDeviceTouchPoints","platform","maxTouchPoints","MSStream","isAppleVisionPro","isMacintosh","hasFiveTouchPoints","isMobileDeviceRequestingDesktopSite","isOculusBrowser","isFirefoxReality","isLandscape","isBrowserEnvironment","browser","isNodeEnvironment","EMPTY_SLOT","freeze","defaultObjectFactory","createPool","objectFactory","objPool","nextFreeSlot","grow","currentLength","recycle","use","objToUse","clearObject","removeUnusedKeys","schema","COORDINATE_KEYS","regex","defaultVec","coordinate","vec","parseIfString","isCoordinates","isCoordinate","toVector3","vec3","splitCache","getComponentPropertyPath","getComponentProperty","splitName","setComponentProperty","forceCanvasResizeSafariMobile","canvasEl","validateSrc","isImageCb","isVideoCb","onResult","contentType","getResponseHeader","checkIsImageFallback","checkIsImage","isImage","validateEnvMapSrc","isCubemapCb","isEquirectCb","urls","cubemapSrcRegex","validatedUrls","parseUrl","selector","validateAndGetQuerySelector","srcs","validateCubemapSrc","parsedSrc","tester","Image","COLOR_MAPS","FILTERING_TYPES","setTextureProperties","DEFAULT_ANISOTROPY","updateMapMaterialFromData","dataName","shader","rendererSystem","systems","materialSrcs","setMap","handleTextureEvents","loadTextureSource","isCompatibleTexture","createCompatibleTexture","applyColorCorrection","updateMap","updateDistortionMap","longType","shortType","envMapPromises","updateEnvMap","envMap","sphericalEnvMap","refract","checkSetMap","srcLoader","loadCubeMapTexture","emitVideoTextureLoadedDataAll","emit","emitVideoTextureEndedAll","HTMLCanvasElement","isCanvasTexture","HTMLVideoElement","isVideoTexture","isTexture","DASH_REGEX","parsedData","getKeyValueChunks","toCamelCase","styleParse","keyCount","styleStringify","upperCase","hasUnclosedUrl","raw","nextSplit","chunk","AXIS_LABELS","checkControllerPresentAndSetup","component","idPrefix","queryObject","controller","isPresent","isControllerPresentWebXR","controllerPresent","addEventListeners","injectTrackedControls","removeEventListeners","controllers","trackedControlsSystem","findMatchingControllerWebXR","hand","iterateControllerProfiles","handTracking","handedness","iterateProfiles","profiles","controllerMatch","emitIfAxesChanged","axesMapping","axes","buttonType","changed","detail","onButtonEvent","evtName","buttonName","buttons","updateModel","throttle","functionToThrottle","minimumInterval","optionalContext","throttleLeadingAndTrailing","deferTimer","timerExpired","sinceLastTime","throttleTick","delta","debounce","wait","immediate","callNow","extendDeep","deepAssign","arrayPool","deepEqual","objectPool","keysA","keysB","valA","valB","targetObject","aVal","bVal","bKey","isComparingObjects","shouldCaptureKeyEvent","metaKey","activeElement","splitString","getElData","defaults","getUrlParameter","isIframed","findAllScenes","matchingElements","allElements","isScene","attrs","MOBILE_HEAD_TAGS","Meta","MOBILE_IOS_HEAD_TAGS","rel","exists","titleEl","getSceneCanvasSize","styleParser","ATTR_NAME","resize","embedded","maxCanvasSize","aspect","updateProjectionMatrix","setSize","propertyTypes","nonCharRegex","urlRegex","registerPropertyType","defaultValue","cacheable","defaultParse","defaultStringify","defaultEquals","isCacheable","arrayEquals","assetParse","parsedUrl","getElementById","assetStringify","intParse","vecParse","coordinates","isValidDefaultCoordinate","possibleCoordinates","dimensions","isValidDefaultValue","PropertyTypes","isSingleProperty","componentName","processPropertyDefinition","propDefinition","isCustomType","propType","typeName","propNames","parseProperties","propData","getPartialData","silent","propValue","parseProperty","stringifyProperties","stringifiedData","stringifyProperty","processSchema","isSingleProp","aframeScript","currentScript","upperCaseRegExp","objectPools","emptyInitialOldData","encounteredUnknownProperties","attrValueProxyHandler","getComputedPropertyValue","newValue","recomputeProperty","handleUnknownProperty","Component","attrValue","sceneOnly","multiple","attrName","evtDetail","initialized","events","eventName","eventsBind","isObjectBased","oldData","attrValueProxy","Proxy","deferUnknownPropertyWarnings","updateSchema","throttledEmitComponentChanged","updateProperties","prevData","tock","flushToDOM","isDefault","HTMLElement","clobber","updateData","isLoading","callUpdateHandler","initComponent","initialOldData","initializingComponents","dataChanged","storeOldData","isPlaying","recomputeData","schemaChangeRequired","updateSchemaIfNeeded","isPositionRotationScale","oldDataInUse","handleMixinUpdate","resetProperty","propertyName","extendSchema","schemaAddon","extendedSchema","mixinEls","mixinData","propertySchema","newAttrValue","oldComputedValue","targetValue","newComputedValue","schemaChange","silenceUnknownPropertyWarnings","eventsAttach","eventsDetach","registrationOrderWarnings","registerComponent","NewComponent","schemaIsSingleProp","playMethod","pauseMethod","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","system","shouldPlay","hasBehavior","addBehavior","removeBehavior","isObject","before","after","canInitializeElements","emitReady","dispatchEvent","CustomEvent","System","buildData","registerSystem","NewSystem","initSystem","rawData","knownTags","isANode","ANode","computedMixinStr","connectedCallback","doConnectedCallback","mixins","closestScene","isMixin","updateMixins","attributeChangedCallback","oldVal","newVal","parentElement","closest","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","disconnectedCallback","childFilter","childrenLoaded","getChildren","allSettled","reason","setupMutationObserver","MutationObserver","mutationList","oldValue","observe","attributeOldValue","newMixins","oldMixins","newMixinIds","oldMixinIds","newMixinIdArray","oldMixinIdArray","mixinIds","unregisterMixin","registerMixin","mixinId","compositedMixinIds","mixin","mixinEl","bubbles","extraData","evtData","customElements","define","MULTIPLE_COMPONENT_DELIMITER","OBJECT3D_COMPONENTS","ONCE","once","AEntity","componentsToUpdate","isEntity","object3D","order","object3DMap","rotationObj","states","justInitialized","setEntityAttribute","assetsEl","addToParent","removeComponent","removeFromParent","getObject3D","setObject3D","oldObj","removeObject3D","getOrCreateObject3D","Constructor","attachedToParent","updateComponents","getChildEntities","childEntities","isDependency","componentId","componentInfo","COMPONENTS","checkComponentDefined","initComponentDependencies","tryRemoveLater","extraComponents","componentCache","isComponent","getExtraComponents","updateComponent","getDOMAttribute","mixinUpdate","entities","deferred","componentsUpdated","arg1","arg2","delimiterIndex","singlePropUpdate","recursive","visible","addState","removeState","stateIndex","inspector","openInspector","inMixin","isComponentMixedIn","postMessageAPIHandler","enterVR","exitVR","scrollTo","AScene","clock","hasWebXR","isAR","render","systemNames","usedOfferSession","componentOrder","behaviors","originalHTML","addFullScreenStyles","classList","removeFullScreenStyles","onFullScreenChange","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","blur","focus","dataset","aframeCanvas","preventDefault","passive","setupCanvas","setupRenderer","getCanvasSize","loaderScene","sphereGeometry","sphereMaterial","sphereMesh1","sphereMesh2","sphereMesh3","loaderAttribute","dotsColor","backgroundColor","innerWidth","innerHeight","getElapsedTime","background","className","title","display","setAnimationLoop","loadingScreen","tag","headEl","headScriptEl","headTags","createAndInjectTag","tagObj","meta","constants","createTag","insertBefore","initMetaTags","wakelock","Wakelock","initWakelock","enterVRBound","exitVRBound","attachedCallbackPostCamera","initSystems","determineComponentBehaviorOrder","behavior","behaviorSet","behaviorType","inUse","markedForRemoval","getPointerLockElement","pointerLockElement","enterAR","errorMessage","useAR","useOfferSession","xrInit","vrManager","offerSession","xrSession","refspace","webxr","sessionReferenceSpaceType","setReferenceSpaceType","xrMode","sessionConfiguration","requestSession","layersEnabled","enabledFeatures","setSession","setFoveation","foveationLevel","setWebXRFrameRate","enterVRSuccess","cause","screen","lock","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","navigationUI","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","unlock","setPixelRatio","devicePixelRatio","componentPropValue","isVRPresenting","isPresenting","rendererAttr","rendererConfig","antialias","logarithmicDepthBuffer","powerPreference","precision","stencil","multiviewStereo","maxCanvasWidth","maxCanvasHeight","rendererImpl","find","setPoseTarget","renderStarted","performance","mark","timeDelta","callComponentBehaviors","getDelta","elapsedTime","savedBackground","renderCamera","getCamera","graph","visited","done","beforeName","visit","afterName","constrainSizeTo","maxSize","pixelRatio","isVR","offsetHeight","getMaxSize","geometryNames","Geometry","registerGeometry","NewGeometry","registerPrimitive","defaultAttributes","primitiveClass","defaultComponentsFromPrimitive","defaultComponents","deprecated","deprecatedMappings","resolveMappingCollisions","rawAttributeCache","mixinComponents","applyMapping","isUndefined","isPureObject","shaders","shaderNames","propertyToThreeMapping","int","vec2","vec4","Shader","registerShader","NewShader","vertexShader","fragmentShader","uniforms","initUniforms","glslVersion","glsl3","varType","variables","materialKey","parseValue","setMapOnTextureLoad","mediaElementLoaded","checkProgress","secondsBuffered","buffered","fixUpMediaElement","mediaEl","newMediaEl","domain","host","cloneNode","isAssets","mediaEls","imgEl","imgEls","loaded","srcObject","isAssetItem","fileName","query","filePath","getFileNameFromURL","dotLastIndex","inferResponseType","loadedBytes","totalBytes","ACubeMap","onReadyStateChange","validate","cacheAttributes","updateEntities","cacheAttribute","parseComponentAttrValue","parsedValue","entity","colorHelperFrom","colorHelperTo","TYPE_COLOR","PROP_ROTATION","STRING_COMPONENTS","toRadians","eventNames","getRawProperty","splitDot","setRawProperty","isRawProperty","dur","elasticity","startEvents","pauseEvents","resumeEvents","eventDetail","animation","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","updateConfigForDefault","updateConfigForRawColor","createAndStartAnimation","pausedWasPlaying","updateConfig","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","isBoolean","aframeProperty","updateConfigForVector","getPropertyType","persistent","webxrData","optionalFeaturesArray","optionalFeatures","auxQuaternion","onEnterVR","anchor","requestPersistentAnchorPending","requestAnchorPending","refSpace","pose","xrManager","restorePersistentAnchor","createAnchor","getReferenceSpace","getPose","anchorSpace","referenceSpace","anchorPose","session","getSession","anchorsSupported","deleteAnchor","XRRigidTransform","persistentHandle","requestPersistentHandle","attach","storedPersistentHandle","persistentAnchors","deletePersistentAnchor","active","far","fov","near","spectator","zoom","updateActiveCamera","updateSpectatorCamera","activeCameraEl","setActiveCamera","disableActiveCamera","spectatorCameraEl","setSpectatorCamera","disableSpectatorCamera","mouse","origin","rayCasterConfig","EVENTS","STATES","CANVAS_EVENTS","DOWN","UP","WEBXR_EVENTS","CANVAS_HOVER_CLASS","dummyGeometry","downEvents","fuse","fuseTimeout","mouseCursorStylesEnabled","upEvents","rayOrigin","oneOf","cursorDownEl","intersectedEl","canvasBounds","isCursorDown","activeXRInput","updateCanvasBounds","intersectedEventDetail","cursorEl","onCursorDown","onCursorUp","onIntersection","onIntersectionCleared","onMouseMove","resetRaycaster","updateMouseEventListeners","addWebXREventListeners","removeWebXREventListeners","inputSource","addCanvasListeners","downEvent","upEvent","cameraElParent","parent","touches","clientX","clientY","isPerspectiveCamera","matrixWorld","unproject","isOrthographicCamera","transformDirection","targetRaySpace","applyQuaternion","localToWorld","raycaster","checkIntersections","intersectedEls","reenableARHitTest","twoWayEmit","intersection","currentIntersection","els","intersections","getIntersection","clearCurrentIntersection","setIntersection","clearedEls","ignoreRemaining","originalEvent","addOriginalEvent","MouseEvent","mouseEvent","TouchEvent","touchEvent","GAMEPAD_ID_PREFIX","skipCache","previousData","unuseGeometry","getOrCreateGeometry","currentGeometryType","newGeometryType","defaultModel","defaultModelColor","disabled","touchpad","thumbstick","bindMethods","onControllersUpdate","checkIfControllerPresent","removeControllersUpdateListener","onAxisMoved","onButtonChanged","onButtonDown","onButtonUp","onButtonTouchStart","onButtonTouchEnd","wasControllerConnected","controllerEventsActive","addControllersUpdateListener","initDefaultModel","button","modelEl","model","getDRACOLoader","getMeshoptDecoder","ktxLoader","getKTX2Loader","gltfModel","jointPose","LEFT_HAND_MODEL_URL","RIGHT_HAND_MODEL_URL","JOINTS","modelStyle","modelColor","modelOpacity","onModelLoaded","jointEls","wristObject3D","onChildAttached","isPinched","pinchEventDetail","wristRotation","indexTipPosition","hasPoses","jointPoses","jointRadii","updateReferenceSpace","addChildEntity","updateModelMaterial","skinnedMesh","referenceSpaceType","requestReferenceSpace","warnIfFeatureNotRequested","trackedControlsWebXR","fillPoses","fillJointRadii","updateHandModel","detectGesture","updateWristObject","WRIST_INDEX","setFromRotationMatrix","updateHandDotsModel","updateHandMeshModel","getBone","inputjoint","bone","jointName","jointEl","decompose","detectPinch","thumbTipPosition","THUMB_TIP_INDEX","INDEX_TIP_INDEX","handTrackingEnabled","XRHand","initDotsModel","initMeshHandModel","modelURL","getObjectByProperty","frustumCulled","setupChildrenEntities","childrenEls","childEl","hoverColor","hoverEnabled","trackedObject3DVariable","trackedObject3D","auxMatrix","onCollisionStarted","onCollisionEnded","onPinchStarted","onPinchEnded","transferEntityOwnership","grabbingElComponent","grabbingEls","grabbedEl","releaseGrabbedEntity","withEl","collidedEl","grabbingObject3D","grab","newParent","originalParent","MODEL_URLS","toonLeft","toonRight","lowPolyLeft","lowPolyRight","highPolyLeft","highPolyRight","ANIMATIONS","getGestureEventName","gesture","handModelStyle","pressedButtons","touchedButtons","onGripDown","handleButton","onGripUp","onTrackpadDown","onTrackpadUp","onTrackpadTouchStart","onTrackpadTouchEnd","onTriggerDown","onTriggerUp","onTriggerTouchStart","onTriggerTouchEnd","onGripTouchStart","onGripTouchEnd","onThumbstickDown","onThumbstickUp","onAorXTouchStart","onAorXTouchEnd","onBorYTouchStart","onBorYTouchEnd","onSurfaceTouchStart","onSurfaceTouchEnd","onControllerConnected","onControllerDisconnected","mixer","handModelOrientationZ","handModelOrientationX","previousHand","controlConfiguration","handColor","handmodelUrl","clips","lastGesture","isPressed","isTouched","determineGesture","animateGesture","emitGestureEvents","trackedControls","isGripActive","grip","isSurfaceActive","surface","isTrackpadActive","trackpad","isTriggerActive","trigger","isABXYActive","AorX","BorY","getClip","clip","playAnimation","toAction","clipAction","timeScale","clampWhenFinished","repetitions","stopAllAction","crossFadeTo","GAMEPAD_ID","HP_MIXED_REALITY_MODEL_GLB_BASE_URL","HP_MIXED_REALITY_POSITION_OFFSET","HP_MIXED_REALITY_ROTATION_OFFSET","_x","_y","_z","_order","previousButtonValues","controllerIndex","analogValue","controllerObject3D","distanceOfPointFromPlane","positionOnPlane","planeNormal","pointToTest","rotateCubemap","layerEnabled","needsRedraw","requiredFeaturesArray","requiredFeatures","onExitVR","onRequestedReferenceSpace","updateSrc","destroyLayer","textureIsVideo","loadCubeMapImages","loadQuadImage","glayer","xrGLFactory","visibilityChanged","pendingCubeMapUpdate","getSubImage","loadCubeMapImage","colorTexture","initTexture","updateQuadPanel","preGenerateCubeMapTextures","generateCubeMapTextures","faceOffset","imgTmp0","imgTmp2","cubeFaceSize","textureSourceCubeFaceSize","cubefaceTextures","tempCanvas","tempCanvasContext","translate","rotate","restore","layerColorTexture","gl","pixelStorei","UNPACK_FLIP_Y_WEBGL","bindTexture","TEXTURE_CUBE_MAP","loadingScreenImages","errorCode","texSubImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGBA","getError","initLayer","updateTransform","draw","onvisibilitychange","visibilityState","initCubeMapLayer","initQuadLayer","mediaBinding","XRMediaBinding","createQuadLayer","getBinding","viewPixelHeight","viewPixelWidth","addLayer","glSizeLimit","getParameter","MAX_CUBE_MAP_TEXTURE_SIZE","createCubeLayer","isStatic","initLoadingScreenImages","fillStyle","fillRect","fillText","removeLayer","toggleCompositorLayer","enableCompositorLayer","quadPanelEl","textureEl","TEXTURE_2D","XRWebGLBinding","controlsConfiguration","createRay","controllerConfig","raycasterConfig","showLine","modelReady","cursor","cameraWorldPosition","tempMat","tempVector","mat4","cameraPosition","portalNormal","portalPosition","probeCache","isEqualVec3","groundColor","decay","castShadow","shadowBias","shadowCameraFar","shadowCameraFov","shadowCameraNear","shadowCameraTop","shadowCameraRight","shadowCameraBottom","shadowCameraLeft","shadowCameraVisible","shadowCameraAutomatic","shadowMapHeight","shadowMapWidth","shadowRadius","defaultTarget","registerLight","diffData","setLight","updateShadow","shadowsLoaded","onSetTarget","updateProbeMap","shadowCameraAutomaticEls","shadow","getWorldDirection","getWorldPosition","bottom","setFromObject","getBoundingSphere","resultPoint","distanceToPlane","mathUtils","pointInXYPlane","newLight","getLight","translateY","cameraHelper","bias","mapSize","getHex","tempLightProbe","targetEl","geoNeedsUpdate","positionArray","setStyle","borderColor","highlighted","highlightedColor","peekMode","titleColor","visualAspectEnabled","navigate","previousQuaternion","quaternionClone","hiddenEls","strokeColor","elScale","previewDistance","initVisualAspect","updateEventListener","updatePeekMode","sphereEl","hideAll","showAll","semiSphereEl","textEl","visualAspectInitialized","segments","pano","phiStart","segmentsWidth","segmentsHeight","phiLength","thetaStart","thetaLength","borderEnabled","elWorldPosition","cameraPortalOrientation","lookAt","calculateCameraPortalOrientation","peekCameraPortalOrientation","cameraEl","extractRotation","sign","LOGITECH_MX_INK_MODEL_GLB_BASE_URL","PI_2","orientationOffset","loadModel","GAMEPAD_ID_COMPOSITE","magicWindowTrackingEnabled","pointerLockEnabled","reverseMouseDrag","reverseTouchDrag","touchEnabled","mouseEnabled","deltaYaw","previousHMDPosition","hmdQuaternion","magicWindowAbsoluteEuler","magicWindowDeltaEuler","magicWindowObject","deltaRotation","savedPose","pointerLocked","setupMouseControls","previousMouseEvent","setupMagicWindowControls","magicWindowControls","DeviceOrientationEvent","requestPermission","permissionGranted","updateGrabCursor","exitPointerLock","updateOrientation","onMouseDown","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onPointerLockChange","onPointerLockError","mouseDown","pitchObject","yawObject","updateMagicWindowOrientation","setFromQuaternion","previousMagicWindowYaw","movementX","movementY","mozMovementX","mozMovementY","screenX","screenY","showGrabbingCursor","requestPointerLock","mozRequestPointerLock","hideGrabbingCursor","touchStart","pageX","pageY","touchStarted","deltaY","clientWidth","saveCameraPose","matrixAutoUpdate","restoreCameraPose","mozPointerLockElement","enableGrabCursor","disableGrabCursor","hasSavedPose","MAGICLEAP_CONTROLLER_MODEL_GLB_URL","setButtonColor","disposeMaterial","unregisterMaterial","vertexColorsEnabled","blending","dithering","updateShader","updateMaterial","currentShader","newShader","updateBehavior","tickProperties","tickTime","shaderName","shaderInstance","setMaterial","oldDataHasKeys","parseSide","parseBlending","defaultMaterial","registerMaterial","waitForMesh","auxPosition","auxScale","identityQuaternion","TOUCH_CONTROLLER_MODEL_BASE_URL","META_CONTROLLER_MODEL_BASE_URL","OCULUS_TOUCH_CONFIG","modelUrl","modelPivotOffset","modelPivotRotation","CONTROLLER_DEFAULT","CONTROLLER_PROPERTIES","componentConfig","buttonColor","buttonTouchColor","buttonHighlightColor","controllerType","onThumbstickMoved","triggerEuler","controllerId","displayModel","controllersPropertiesIds","isTouchV3orPROorPlus","onButtonChangedV3orPROorPlus","buttonMeshes","originalXRotationTrigger","originalXPositionGrip","buttonObjects","slerpQuaternions","buttonRanges","lerpVectors","onTouchV3orPROorPlusModelLoaded","getObjectByName","xbutton","abutton","ybutton","bbutton","cloneMeshMaterial","applyOffset","thumbstickXAxis","thumbstickYAxis","button1","button2","button1id","button2id","updateThumbstickTouchV3orPROorPlus","axisMap","originalRotation","normalizedXAxis","normalizedYAxis","updateButtonModel","originalColor","object3d","newMaterial","minimumColliderDimension","centerModel","previousScale","auxEuler","boundingBoxSize","updateCollider","updateBoundingBox","addCollider","removeCollider","trackedObject3DPath","showColliders","showCollider","updateColliderMesh","renderColliderMesh","initColliderMesh","hideCollider","renderColliderGeometry","matrixWorldAutoUpdate","checkTrackedObject","OCULUS_GO_CONTROLLER_MODEL_URL","mtl","objLoader","mtlLoader","applyMaterial","resetMesh","loadObj","objUrl","mtlUrl","BASE_PATH","setResourcePath","objModel","emissiveMap","buttonTouchedColor","PICO_MODEL_GLB_BASE_URL","OBSERVER_SELECTOR_RE","OBSERVER_CONFIG","childList","subtree","copyArray","autoRefresh","interval","lineColor","lineOpacity","useWorldCoordinates","clearedIntersectedEls","unitLineEndVec3","newIntersectedEls","newIntersections","prevCheckTime","prevIntersectedEls","rawIntersections","updateOriginDirection","setDirty","updateLine","observer","dirty","lineEndVec3","otherLineEndVec3","intersectedDetail","intersectedClearedDetail","intersectionClearedDetail","intersectionDetail","drawLine","clearAllIntersections","refreshObjects","flattenObject3DMaps","intersectObjects","lineLength","originVec3","endVec3","isAttachedToScene","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","cast","receive","onMeshChanged","setShadowMapEnabled","updateDescendants","receiveShadow","distanceModel","loopStart","loopEnd","maxDistance","positional","refDistance","rolloffFactor","volume","listener","audioLoader","mustPlay","playSoundBound","playSound","sound","srcChanged","setupSound","setDistanceModel","setMaxDistance","setRefDistance","setRolloffFactor","setLoop","setLoopStart","setLoopEnd","setVolume","isPaused","setBuffer","processSound","stopSound","oldEvt","audioListener","onEnded","pauseSound","FONT_BASE_URL","FONTS","aileronsemibold","dejavu","exo2bold","exo2semibold","kelsonsans","monoid","mozillavr","roboto","sourcecodepro","MSDF_FONTS","DEFAULT_FONT","promiseGenerator","fontWidthFactors","protocolRe","computeWidth","wrapPixels","wrapCount","widthFactor","fontImage","negate","whiteSpace","xOffset","yOffset","zOffset","shaderData","createTextGeometry","createOrUpdateMaterial","explicitGeoDimensionsChecked","currentFont","updateGeometry","updateLayout","updateFont","shaderObject","hasChangedShader","createShader","fontSrc","lookupFont","loadBMFont","ch","loadFont","fontImgSrc","sum","digitsum","digits","computeFontWidthFactor","getFontImageSrc","initMesh","fontObj","imageSrc","geometryComponent","textScale","hasExplicitGeoWidth","hasExplicitGeoHeight","ascender","directionVector","rotationEuler","INDEX_CONTROLLER_MODEL_BASE_URL","autoHide","buttonEventDetails","buttonStates","changedAxes","axisMoveEventDetail","updateController","isControllerPresent","gamepad","controllerUtils","gripSpace","updatePose","updateButtons","buttonState","pressed","touched","handleAxes","handlePress","handleTouch","handleValue","controllerAxes","previousAxis","previousButtonState","INDEX_CONTROLLER_MODEL_URL","INDEX_CONTROLLER_ROTATION_OFFSET","INDEX_CONTROLLER_POSITION_OFFSET","VIVE_CONTROLLER_MODEL_OBJ_URL","triggerOriginalRotationX","menu","VIVE_CONTROLLER_MODEL_OBJ_MTL","VIVE_FOCUS_CONTROLLER_MODEL_URL","KEYCODE_TO_CODE","triggerPressed","touchpadPressed","trackpadPressed","pressedName","CLAMP_VELOCITY","KEYS","acceleration","adAxis","adEnabled","adInverted","fly","wsAxis","wsEnabled","wsInverted","onBlur","onContextMenu","onFocus","onKeyDown","onKeyUp","onVisibilityChange","attachVisibilityEventListeners","isEmptyObject","updateVelocity","getMovementVector","removeKeyEventListeners","removeVisibilityEventListeners","attachKeyEventListeners","adSign","wsSign","scaledEasing","KeyA","ArrowLeft","KeyD","ArrowRight","KeyW","ArrowUp","KeyS","ArrowDown","xRotation","applyEuler","oncontextmenu","keyCode","tempQuaternion","tempVec3","hitTestCache","MODEL_BASE_URL","MODEL_FILENAMES","applyPose","pair","axisMeshNames","buttonMeshNames","pointingPoseMeshName","onModelError","setModelVisibility","loadedMeshInfo","axisMeshes","createdFromMesh","updateControllerModel","sourceUrl","createControllerModelUrl","forceDefault","defaultUrl","meshName","meshInfo","rootNode","controllerModel","getImmediateChildByName","unpressed","calculateRayOriginFromMesh","getWorldQuaternion","lerpAxisTransform","axisValue","axisMeshInfo","lerpValue","setRotationFromQuaternion","slerp","lerpButtonTransform","buttonValue","buttonMeshInfo","numAxes","modelVisible","HitTest","hitTestSourceDetails","xrHitTestSource","sessionStart","warnAboutHitTest","tempFakePose","previousFrameAnchors","anchorToObject3D","requestHitTestSource","profile","requestHitTestSourceForTransientInput","transient","anchorFromLastHitTestResult","hitTest","lastHitTest","object3DOptions","entry","entryObject","doHit","hitTestResults","xrViewerPose","getViewerPose","getHitTestResultsForTransientInput","getHitTestResults","updateAnchorPoses","trackedAnchors","footprintDepth","imageDataArray","ImageData","orthoCam","layers","textureTarget","basicMaterial","imageSmoothingEnabled","canvasTexture","hasPosedOnce","bboxMesh","viewerSpace","viewerHitTest","arHitTestComp","inputSources","targetRayMode","cancel","profileToSupport","transientHitTest","bboxOffset","makeBBox","bboxNeedsUpdate","rotateX","rotateY","updateFootprint","tempImageData","oldRenderTarget","oldBackground","isXREnabled","getRenderTarget","setRenderTarget","overrideMaterial","readRenderTargetPixels","putImageData","shadowColor","shadowBlur","DIALOG_BUTTONS_CONTAINER_CLASS","DIALOG_BUTTON_CLASS","createDialog","buttonsContainerEl","modalContainer","dialog","dialogTextContainer","dialogText","deviceMotionMessage","httpsMessage","denyButtonText","allowButtonText","cancelButtonText","isSecureContext","showHTTPAlert","onDeviceMotionDialogAllowClicked","onDeviceMotionDialogDenyClicked","denyText","allowText","onAllowClicked","onDenyClicked","buttonsContainer","denyButton","acceptButton","devicePermissionDialogEl","stopPropagation","closeText","onOkClicked","okButton","httpAlertEl","enterVREl","INSPECTOR_RELEASE_URL","pkg","getFuzzyPatchVersion","firstPlay","onKeydown","onMessage","initOverlay","urlParam","loadingMessageEl","LOADING_MESSAGE","ctrlKey","altKey","getModifierState","showLoader","hideLoader","focusEl","script","AFRAME","INSPECTOR","inspectorInjected","density","fog","getFog","onKeyup","dynamic","initPool","availableEls","usedEls","createEntity","wrapPlay","object3DParent","requestEntity","updateRaycasters","returnEntity","filterLabels","meshesEnabled","meshMixin","planesEnabled","planeMixin","meshEntities","initWorldMeshEntity","detectMeshes","updateMeshes","detectedMeshes","detectedPlanes","present","newMeshes","semanticLabel","lastChangedTime","updateMeshGeometry","deleteMeshes","createNewMeshes","meshPose","meshEl","meshSpace","planeSpace","newMeshEntities","initMeshGeometry","shape","polygon","XRPlane","moveTo","lineTo","meshEntity","entityEl","entityMesh","directionalLight","cubeCamera","lightingEstimationTexture","needsVREnvironmentUpdate","requestLightProbe","startLightProbe","xrLightProbe","stopLightProbe","environment","probeLight","needsLightProbeUpdate","setupLightProbe","preferredReflectionFormat","getExtension","glBinding","lightProbe","updateXRCubeMap","cubeMap","getReflectionCubeMap","__webglTexture","needsPMREMUpdate","estimate","getLightEstimate","directionalLightPosition","intensityScalar","primaryLightIntensity","sphericalHarmonicsCoefficients","primaryLightDirection","updateLights","VERTEX_SHADER","FRAGMENT_SHADER","setup","cubeMapSize","quad","ctx","outputColorSpace","shortcutPressed","projection","shiftKey","capture","setCapture","renderTarget","isVREnabled","renderCapture","saveCapture","getCanvas","pixels","autoClear","flipPixelsVertically","flippedPixels","toBlob","linkEl","click","Panel","fg","bg","gradient","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","initializeCanvas","createGradient","createLinearGradient","startColor","endColor","addColorStop","textBaseline","globalAlpha","decimals","toFixed","updateGraph","valueGraph","maxGraph","graphX","graphY","graphWidth","graphHeight","pr","columnHeight","PanelVSync","vsyncValue","SMALL_HEIGHT","_maxValue","_decimals","clearRect","_valueGraph","_maxGraph","setOffset","_Stats","_Stats2","trackGPU","trackCPT","trackHz","logsPerSecond","graphsPerSecond","samplesLog","samplesGraph","minimal","horizontal","activeQuery","gpuQueries","threeRendererPatched","frameTimes","renderCount","totalCpuDuration","totalGpuDuration","totalGpuDurationCompute","gpuPanel","gpuPanelCompute","vsyncPanel","averageFps","averageCpu","averageGpu","averageGpuCompute","updateCounter","lastMin","lastMax","VSYNC_RATES","refreshRate","frameTime","detectedVSync","frameTimeHistory","HISTORY_SIZE","VSYNC_THRESHOLD","lastFrameTime","handleClick","showPanel","handleResize","resizePanel","fpsPanel","msPanel","prevGraphTime","initializeDOM","beginTime","prevTextTime","prevCpuTime","_panelId","addPanel","setupEventListeners","canvasOrGL","handleThreeRenderer","handleWebGPURenderer","initializeWebGL","initializeGPUTracking","patchThreeRenderer","backend","trackTimestamp","initializeWebGPUPanels","patchThreeWebGPU","WebGL2RenderingContext","OffscreenCanvas","beginProfiling","endQuery","TIME_ELAPSED_EXT","createQuery","beginQuery","endProfiling","processWebGPUTimestamps","processGpuQueries","updateAverages","resetCounters","timestamp","compute","endInternal","panel","queryInfo","available","getQueryParameter","QUERY_RESULT_AVAILABLE","disjoint","GPU_DISJOINT_EXT","QUERY_RESULT","deleteQuery","detectVSync","avgFrameTime","variance","acc","closestMatch","smallestDiff","rate","fps","addToAverage","shouldUpdateText","shouldUpdateGraph","updatePanelComponents","_a","averageArray","graphMax","marker","clearMarks","startMarker","endMarker","measureName","getEntriesByName","clearMeasures","cpuMeasure","updatePanel","recentMax","domElement","originalAnimationLoop","statsInstance","originalRenderMethod","Stats","HIDDEN_CLASS","stats","append","show","hide","applyStickyHoverFix","buttonEl","enterVRButton","enterVREnabled","enterARButton","enterAREnabled","XRMode","insideLoader","enterAREl","orientationModalEl","toggleOrientationModalIfNeeded","onEnterVRButtonClick","onEnterARButtonClick","onModalClick","onClick","vrButton","arButton","createEnterARButton","modal","exit","createOrientationModal","uiElement","toggleEnterVRButtonIfNeeded","toggleEnterARButtonIfNeeded","segmentsDepth","openEnded","radiusBottom","radiusTop","segmentsRadial","radiusInner","radiusOuter","segmentsPhi","segmentsTheta","arc","radiusTubular","segmentsTubular","rotateVector","uvMinVector","uvMaxVector","uvScaleVector","getMaterialData","materialData","wireframe","toneMapped","wireframeLinewidth","normalMap","ambientOcclusionMap","ambientOcclusionMapIntensity","displacementMap","reflectivity","refractionRatio","combine","bumpMap","bumpMapScale","vertexA","vertexB","vertexC","triangle","uvA","uvB","uvC","getNormal","setFromUnitVectors","divide","ambientOcclusionTextureOffset","ambientOcclusionTextureRepeat","displacementTextureOffset","displacementTextureRepeat","metalnessMap","metalnessTextureOffset","metalnessTextureRepeat","normalTextureOffset","normalTextureRepeat","roughnessMap","roughnessTextureOffset","roughnessTextureRepeat","oneOF","bumpTextureOffset","bumpTextureRepeat","_envMap","merge","alphaToCoverage","DEFAULT_CAMERA_ATTR","createGeometry","GeometryClass","geometryInstance","unwrapRender","wrapRender","initialCameraFound","numUserCameras","numUserCamerasChecked","setupInitialCamera","cameraEls","checkUserCamera","createDefaultCamera","cameraData","defaultCameraEl","newCameraEl","newCamera","previousCamera","defaultCameraWrapper","defaultCamera","removeDefaultCamera","originalRender","spectatorCamera","cacheCount","clearCache","cachedGeometry","incrementCacheCount","decrementCacheCount","dracoDecoderPath","basisTranscoderPath","meshoptDecoderPath","fetchScript","MeshoptDecoder","DEFAULT_LIGHT_ATTR","defaultLightsEnabled","defaultLights","userDefinedLights","setupDefaultLights","removeDefaultLights","ambientLight","ImageLoader","clearTextureSourceCache","sourceLoaded","sourcePromise","loadImage","loadVideo","cube","loadSide","statusText","loadImageUrl","videoEl","controls","fixVideoAttributes","createVideoEl","collisions","colliderEls","colliderEl","detectCollisions","elIndex","registerCollision","componentA","componentB","existingCollision","boundingBoxA","boundingBoxB","collisionMeshA","collisionMeshB","detected","resetCollisions","clearCollisions","detectedCollisions","boxA","boxB","sortFrontToBack","groupOrder","renderOrder","sortRenderOrderOnly","sortBackToFront","highRefreshRate","exposure","toneMapping","sortTransparentObjects","colorManagement","toneMappingName","sortObjects","setOpaqueSort","toneMappingExposure","setTransparentSort","targetRate","rates","supportedFrameRates","updateTargetFrameRate","SHADOW_MAP_TYPE_MAP","basic","pcf","pcfsoft","autoUpdate","shadowMapEnabled","shadowMap","newEnabledState","updateAllMaterials","onInputSourcesChange","materialMappings","overlayElement","domOverlay","root","wasFeatureRequested","feature","optIntro","addMapping","htmlAttrName","getMeshMixin","standard","originalPosition","originalGroup","outerGroup","envmap","link","meshPrimitives","unCamelCase","geometryName","geometryHyphened","addComponentMapping","cordova","protocol","REVISION","AFRAME_ASYNC","AComponent","ANIME","coreComponents"],"sourceRoot":""}